{"version":3,"sources":["../../../externals/cea608-parser.js"],"names":[],"mappings":"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","file":"cea608-parser.js","sourcesContent":["/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2015-2016, DASH Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  1. Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  2. Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n(function(exports) {\n\n    \"use strict\";\n\n    /**\n     *  Exceptions from regular ASCII. CodePoints are mapped to UTF-16 codes\n     */\n\n    var specialCea608CharsCodes = {\n        0x2a : 0xe1, // lowercase a, acute accent\n        0x5c : 0xe9, // lowercase e, acute accent\n        0x5e : 0xed, // lowercase i, acute accent\n        0x5f : 0xf3, // lowercase o, acute accent\n        0x60 : 0xfa, // lowercase u, acute accent\n        0x7b : 0xe7, // lowercase c with cedilla\n        0x7c : 0xf7, // division symbol\n        0x7d : 0xd1, // uppercase N tilde\n        0x7e : 0xf1, // lowercase n tilde\n        0x7f : 0x2588, // Full block\n        // THIS BLOCK INCLUDES THE 16 EXTENDED (TWO-BYTE) LINE 21 CHARACTERS\n        // THAT COME FROM HI BYTE=0x11 AND LOW BETWEEN 0x30 AND 0x3F\n        // THIS MEANS THAT \\x50 MUST BE ADDED TO THE VALUES\n        0x80 : 0xae, // Registered symbol (R)\n        0x81 : 0xb0, // degree sign\n        0x82 : 0xbd, // 1/2 symbol\n        0x83 : 0xbf, // Inverted (open) question mark\n        0x84 : 0x2122, // Trademark symbol (TM)\n        0x85 : 0xa2, // Cents symbol\n        0x86 : 0xa3, // Pounds sterling\n        0x87 : 0x266a, // Music 8'th note\n        0x88 : 0xe0, // lowercase a, grave accent\n        0x89 : 0x20, // transparent space (regular)\n        0x8a : 0xe8, // lowercase e, grave accent\n        0x8b : 0xe2, // lowercase a, circumflex accent\n        0x8c : 0xea, // lowercase e, circumflex accent\n        0x8d : 0xee, // lowercase i, circumflex accent\n        0x8e : 0xf4, // lowercase o, circumflex accent\n        0x8f : 0xfb, // lowercase u, circumflex accent\n        // THIS BLOCK INCLUDES THE 32 EXTENDED (TWO-BYTE) LINE 21 CHARACTERS\n        // THAT COME FROM HI BYTE=0x12 AND LOW BETWEEN 0x20 AND 0x3F\n        0x90 : 0xc1, // capital letter A with acute\n        0x91 : 0xc9, // capital letter E with acute\n        0x92 : 0xd3, // capital letter O with acute\n        0x93 : 0xda, // capital letter U with acute\n        0x94 : 0xdc, // capital letter U with diaresis\n        0x95 : 0xfc, // lowercase letter U with diaeresis\n        0x96 : 0x2018, // opening single quote\n        0x97 : 0xa1, // inverted exclamation mark\n        0x98 : 0x2a, // asterisk\n        0x99 : 0x2019, // closing single quote\n        0x9a : 0x2501, // box drawings heavy horizontal\n        0x9b : 0xa9, // copyright sign\n        0x9c : 0x2120, // Service mark\n        0x9d : 0x2022, // (round) bullet\n        0x9e : 0x201c, // Left double quotation mark\n        0x9f : 0x201d, // Right double quotation mark\n        0xa0 : 0xc0, // uppercase A, grave accent\n        0xa1 : 0xc2, // uppercase A, circumflex\n        0xa2 : 0xc7, // uppercase C with cedilla\n        0xa3 : 0xc8, // uppercase E, grave accent\n        0xa4 : 0xca, // uppercase E, circumflex\n        0xa5 : 0xcb, // capital letter E with diaresis\n        0xa6 : 0xeb, // lowercase letter e with diaresis\n        0xa7 : 0xce, // uppercase I, circumflex\n        0xa8 : 0xcf, // uppercase I, with diaresis\n        0xa9 : 0xef, // lowercase i, with diaresis\n        0xaa : 0xd4, // uppercase O, circumflex\n        0xab : 0xd9, // uppercase U, grave accent\n        0xac : 0xf9, // lowercase u, grave accent\n        0xad : 0xdb, // uppercase U, circumflex\n        0xae : 0xab, // left-pointing double angle quotation mark\n        0xaf : 0xbb, // right-pointing double angle quotation mark\n        // THIS BLOCK INCLUDES THE 32 EXTENDED (TWO-BYTE) LINE 21 CHARACTERS\n        // THAT COME FROM HI BYTE=0x13 AND LOW BETWEEN 0x20 AND 0x3F\n        0xb0 : 0xc3, // Uppercase A, tilde\n        0xb1 : 0xe3, // Lowercase a, tilde\n        0xb2 : 0xcd, // Uppercase I, acute accent\n        0xb3 : 0xcc, // Uppercase I, grave accent\n        0xb4 : 0xec, // Lowercase i, grave accent\n        0xb5 : 0xd2, // Uppercase O, grave accent\n        0xb6 : 0xf2, // Lowercase o, grave accent\n        0xb7 : 0xd5, // Uppercase O, tilde\n        0xb8 : 0xf5, // Lowercase o, tilde\n        0xb9 : 0x7b, // Open curly brace\n        0xba : 0x7d, // Closing curly brace\n        0xbb : 0x5c, // Backslash\n        0xbc : 0x5e, // Caret\n        0xbd : 0x5f, // Underscore\n        0xbe : 0x7c, // Pipe (vertical line)\n        0xbf : 0x223c, // Tilde operator\n        0xc0 : 0xc4, // Uppercase A, umlaut\n        0xc1 : 0xe4, // Lowercase A, umlaut\n        0xc2 : 0xd6, // Uppercase O, umlaut\n        0xc3 : 0xf6, // Lowercase o, umlaut\n        0xc4 : 0xdf, // Esszett (sharp S)\n        0xc5 : 0xa5, // Yen symbol\n        0xc6 : 0xa4, // Generic currency sign\n        0xc7 : 0x2503, // Box drawings heavy vertical\n        0xc8 : 0xc5, // Uppercase A, ring\n        0xc9 : 0xe5, // Lowercase A, ring\n        0xca : 0xd8, // Uppercase O, stroke\n        0xcb : 0xf8, // Lowercase o, strok\n        0xcc : 0x250f, // Box drawings heavy down and right\n        0xcd : 0x2513, // Box drawings heavy down and left\n        0xce : 0x2517, // Box drawings heavy up and right\n        0xcf : 0x251b // Box drawings heavy up and left\n    };\n\n    /**\n     * Get Unicode Character from CEA-608 byte code\n     */\n    var getCharForByte = function(byte) {\n        var charCode = byte;\n        if (specialCea608CharsCodes.hasOwnProperty(byte)) {\n            charCode = specialCea608CharsCodes[byte];\n        }\n        return String.fromCharCode(charCode);\n    };\n\n    var NR_ROWS = 15,\n        NR_COLS = 32;\n    // Tables to look up row from PAC data\n    var rowsLowCh1 = {0x11 : 1, 0x12 : 3, 0x15 : 5, 0x16 : 7, 0x17 : 9, 0x10 : 11, 0x13 : 12, 0x14 : 14};\n    var rowsHighCh1 = {0x11 : 2, 0x12 : 4, 0x15 : 6, 0x16 : 8, 0x17 : 10, 0x13 : 13, 0x14 : 15};\n    var rowsLowCh2 = {0x19 : 1, 0x1A : 3, 0x1D : 5, 0x1E : 7, 0x1F : 9, 0x18 : 11, 0x1B : 12, 0x1C : 14};\n    var rowsHighCh2 = {0x19 : 2, 0x1A : 4, 0x1D : 6, 0x1E : 8, 0x1F : 10, 0x1B : 13, 0x1C : 15};\n\n    var backgroundColors = ['white', 'green', 'blue', 'cyan', 'red', 'yellow', 'magenta', 'black', 'transparent'];\n\n    /**\n     * Simple logger class to be able to write with time-stamps and filter on level.\n     */\n    var logger = {\n        verboseFilter : {'DATA' : 3, 'DEBUG' : 3, 'INFO' : 2, 'WARNING' : 2, 'TEXT' : 1, 'ERROR' : 0},\n        time : null,\n        verboseLevel : 0, // Only write errors\n        setTime : function(newTime) {\n            this.time = newTime;\n        },\n        log : function(severity, msg) {\n            var minLevel = this.verboseFilter[severity];\n            if (this.verboseLevel >= minLevel) {\n                console.log(this.time + \" [\" + severity + \"] \" + msg);\n            }\n        }\n    };\n\n    var numArrayToHexArray = function(numArray) {\n        var hexArray = [];\n        for (var j = 0; j < numArray.length; j++) {\n            hexArray.push(numArray[j].toString(16));\n        }\n        return hexArray;\n    };\n\n    /**\n     * State of CEA-608 pen or character\n     * @constructor\n     */\n    var PenState = function(foreground, underline, italics, background, flash) {\n        this.foreground = foreground || \"white\";\n        this.underline = underline || false;\n        this.italics = italics || false;\n        this.background = background || \"black\";\n        this.flash = flash || false;\n    };\n\n    PenState.prototype = {\n        \n        reset : function() {\n            this.foreground = \"white\";\n            this.underline = false;\n            this.italics = false;\n            this.background = \"black\";\n            this.flash = false;\n        },\n        \n        setStyles : function(styles) {\n            var attribs = [\"foreground\", \"underline\", \"italics\", \"background\", \"flash\"];\n            for (var i = 0 ; i < attribs.length; i++) {\n                var style = attribs[i];\n                if (styles.hasOwnProperty(style)) {\n                    this[style] = styles[style];\n                }\n            }\n        },\n        \n        isDefault : function() {\n            return (this.foreground === \"white\" && !this.underline && !this.italics && \n                    this.background === \"black\" && !this.flash);\n        },\n\n        equals : function(other) {\n            return ( (this.foreground === other.foreground) && \n                     (this.underline === other.underline) &&\n                     (this.italics === other.italics) &&\n                     (this.background === other.background) &&\n                     (this.flash === other.flash) );\n        },\n\n        copy : function(newPenState) {\n            this.foreground = newPenState.foreground;\n            this.underline = newPenState.underline;\n            this.italics = newPenState.italics;\n            this.background = newPenState.background;\n            this.flash = newPenState.flash;\n        },\n        \n        toString: function() {\n            return (\"color=\" + this.foreground + \", underline=\" + this.underline + \", italics=\" + this.italics +\n                \", background=\" + this.background + \", flash=\" + this.flash);\n        }\n    };\n\n    /**\n     * Unicode character with styling and background.\n     * @constructor\n     */\n    var StyledUnicodeChar = function(uchar, foreground, underline, italics, background, flash) {\n        this.uchar = uchar || ' '; // unicode character\n        this.penState = new PenState(foreground, underline,italics, background, flash);\n    };\n\n    StyledUnicodeChar.prototype = {\n        \n        reset: function() {\n            this.uchar = ' ';\n            this.penState.reset();\n        },\n        \n        setChar: function(uchar, newPenState) {\n            this.uchar = uchar;\n            this.penState.copy(newPenState);\n        },\n        \n        setPenState: function(newPenState) {\n            this.penState.copy(newPenState);\n        },\n        \n        equals: function(other) {\n            return this.uchar === other.uchar && this.penState.equals(other.penState);\n        },\n        \n        copy: function(newChar) {\n            this.uchar = newChar.uchar;\n            this.penState.copy(newChar.penState);\n        },\n        \n        isEmpty : function() {\n            return this.uchar === ' ' && this.penState.isDefault();\n        }\n    };\n\n    /**\n     * CEA-608 row consisting of NR_COLS instances of StyledUnicodeChar.\n     * @constructor\n     */\n    var Row = function() {\n        this.chars = [];\n        for (var i = 0 ; i < NR_COLS ; i++) {\n            this.chars.push(new StyledUnicodeChar());\n        }\n        this.pos = 0;\n        this.currPenState = new PenState();\n    };\n\n    Row.prototype = {\n        \n        equals: function(other) {\n            var equal = true;\n            for (var i = 0 ; i < NR_COLS; i ++) {\n                if (!this.chars[i].equals(other.chars[i])) {\n                    equal = false;\n                    break;\n                }\n            }\n            return equal;\n        },\n        \n        copy: function(other) {\n            for (var i = 0 ; i < NR_COLS; i ++) {\n                this.chars[i].copy(other.chars[i]);\n            }\n        },\n        \n        isEmpty : function() {\n            var empty = true;\n            for (var i = 0 ; i < NR_COLS; i ++) {\n                if (!this.chars[i].isEmpty()) {\n                    empty = false;\n                    break;\n                }\n            }\n            return empty;\n        },\n\n        /**\n         *  Set the cursor to a valid column.\n         */\n        setCursor : function(absPos) {\n            if (this.pos !== absPos) {\n                this.pos = absPos;\n            }\n            if (this.pos < 0) {\n                logger.log(\"ERROR\", \"Negative cursor position \" + this.pos);\n                this.pos = 0;\n            } else if (this.pos > NR_COLS) {\n                logger.log(\"ERROR\", \"Too large cursor position \" + this.pos);\n                this.pos = NR_COLS;\n            }\n        },\n\n        /** \n         * Move the cursor relative to current position.\n         */\n        moveCursor : function(relPos) {\n            var newPos = this.pos + relPos;\n            if (relPos > 1) {\n                for (var i = this.pos+1; i < newPos+1 ; i++) {\n                    this.chars[i].setPenState(this.currPenState);\n                }\n            }\n            this.setCursor(newPos);\n        },\n\n        /**\n         * Backspace, move one step back and clear character.\n         */\n        backSpace : function () {\n            this.moveCursor(-1);\n            this.chars[this.pos].setChar(' ', this.currPenState);\n        },\n\n        insertChar: function(byte) {\n            if (byte >= 0x90) { //Extended char\n                this.backSpace();\n            }\n            var char = getCharForByte(byte);\n            if (this.pos >= NR_COLS) {\n                logger.log(\"ERROR\", \"Cannot insert \" + byte.toString(16) +  \n                            \" (\" + char + \") at position \" + this.pos + \". Skipping it!\");\n                return;\n            }\n            this.chars[this.pos].setChar(char, this.currPenState);\n            this.moveCursor(1);\n        },\n\n        clearFromPos : function(startPos) {\n            var i;\n            for (i = startPos ; i < NR_COLS ; i++) {\n                this.chars[i].reset();\n            }\n        },\n\n        clear : function() {\n            this.clearFromPos(0);\n            this.pos = 0;\n            this.currPenState.reset();\n        },\n\n        clearToEndOfRow : function() {\n            this.clearFromPos(this.pos);\n        },\n\n        getTextString: function() {\n            var chars = [];\n            var empty = true;\n            for (var i = 0 ; i < NR_COLS ; i++) {\n                var char = this.chars[i].uchar;\n                if (char !== \" \") {\n                    empty = false;\n                }\n                chars.push(char);\n            }\n            if (empty) {\n                return \"\";\n            } else {\n                return chars.join(\"\");\n            }\n        },\n\n        setPenStyles: function(styles) {\n            this.currPenState.setStyles(styles);\n            var currChar = this.chars[this.pos];\n            currChar.setPenState(this.currPenState);\n        }\n    };\n\n    /**\n     * Keep a CEA-608 screen of 32x15 styled characters\n     * @constructor\n    */\n    var CaptionScreen = function() {\n\n        this.rows = [];\n        for (var i = 0 ; i <  NR_ROWS; i++) {\n            this.rows.push(new Row()); // Note that we use zero-based numbering (0-14)\n        }\n        this.currRow = NR_ROWS - 1;\n        this.nrRollUpRows = null;\n        this.reset();\n    };\n\n    CaptionScreen.prototype = {\n\n        reset : function() {\n            for (var i = 0 ; i < NR_ROWS ; i++) {\n                this.rows[i].clear();\n            }\n            this.currRow = NR_ROWS - 1;\n        },\n\n        equals : function(other) {\n            var equal = true;\n            for (var i = 0 ; i < NR_ROWS ; i++) {\n                if (!this.rows[i].equals(other.rows[i])) {\n                    equal = false;\n                    break;\n                }\n            }\n            return equal;\n        },\n\n        copy : function(other) {\n            for (var i = 0 ; i < NR_ROWS ; i++) {\n                this.rows[i].copy(other.rows[i]);\n            }\n        },\n\n        isEmpty : function() {\n            var empty = true;\n            for (var i = 0 ; i < NR_ROWS ; i++) {\n                if (!this.rows[i].isEmpty()) {\n                    empty = false;\n                    break;\n                }\n            }\n            return empty;\n        },\n\n        backSpace : function() {\n            var row = this.rows[this.currRow]; \n            row.backSpace();\n        },\n\n        clearToEndOfRow : function() {\n            var row = this.rows[this.currRow];\n            row.clearToEndOfRow();\n        },\n\n        /**\n         * Insert a character (without styling) in the current row.\n         */\n        insertChar : function(char) {\n            var row = this.rows[this.currRow];\n            row.insertChar(char);\n        },\n\n        setPen : function(styles) {\n            var row = this.rows[this.currRow];\n            row.setPenStyles(styles);\n        },\n\n        moveCursor : function(relPos) {\n            var row = this.rows[this.currRow];\n            row.moveCursor(relPos); \n        },\n\n        setCursor : function(absPos) {\n            logger.log(\"INFO\", \"setCursor: \" + absPos);\n            var row = this.rows[this.currRow];\n            row.setCursor(absPos);\n        },\n\n        setPAC : function(pacData) {\n            logger.log(\"INFO\", \"pacData = \" + JSON.stringify(pacData));\n            var newRow = pacData.row - 1;\n            if (this.nrRollUpRows  && newRow < this.nrRollUpRows - 1) {\n                    newRow = this.nrRollUpRows-1;\n            }\n            this.currRow = newRow;\n            var row = this.rows[this.currRow];\n            if (pacData.indent !== null) {\n                var indent = pacData.indent;\n                var prevPos = Math.max(indent-1, 0);\n                row.setCursor(pacData.indent);\n                pacData.color = row.chars[prevPos].penState.foreground;\n            }\n            var styles = {foreground : pacData.color, underline : pacData.underline, italics : pacData.italics, background : 'black', flash : false};\n            this.setPen(styles);\n        },\n\n        /**\n         * Set background/extra foreground, but first do back_space, and then insert space (backwards compatibility).\n         */\n        setBkgData : function(bkgData) {\n\n            logger.log(\"INFO\", \"bkgData = \" + JSON.stringify(bkgData));\n            this.backSpace();\n            this.setPen(bkgData);\n            this.insertChar(0x20); //Space\n        },\n\n        setRollUpRows : function(nrRows) {\n            this.nrRollUpRows = nrRows;\n        },\n\n        rollUp : function() {\n            if (this.nrRollUpRows === null) {\n                logger.log(\"DEBUG\", \"roll_up but nrRollUpRows not set yet\");\n                return; //Not properly setup\n            }\n            logger.log(\"TEXT\", this.getDisplayText());\n            var topRowIndex = this.currRow + 1 - this.nrRollUpRows;\n            var topRow = this.rows.splice(topRowIndex, 1)[0];\n            topRow.clear();\n            this.rows.splice(this.currRow, 0, topRow);\n            logger.log(\"INFO\", \"Rolling up\");\n            //logger.log(\"TEXT\", this.get_display_text())\n        },\n\n       /**\n        * Get all non-empty rows with as unicode text. \n        */        \n        getDisplayText : function(asOneRow) {\n            asOneRow = asOneRow || false;\n            var displayText = [];\n            var text = \"\";\n            var rowNr = -1;\n            for (var i = 0 ; i < NR_ROWS ; i++) {\n                var rowText = this.rows[i].getTextString();\n                if (rowText) {\n                    rowNr = i+1;\n                    if (asOneRow) {\n                        displayText.push(\"Row \" + rowNr + ': \"' + rowText + '\"');\n                    } else {\n                        displayText.push(rowText.trim());\n                    }\n                }\n            }\n            if (displayText.length > 0) {\n                if (asOneRow) {\n                    text = \"[\" + displayText.join(\" | \") + \"]\";\n                } else {\n                    text = displayText.join(\"\\n\");\n                }\n            }\n            return text;\n        },\n\n        getTextAndFormat : function() {\n            return this.rows;\n        }\n    };\n\n    /**\n     * Handle a CEA-608 channel and send decoded data to outputFilter\n     * @constructor\n     * @param {Number} channelNumber (1 or 2)\n     * @param {CueHandler} outputFilter Output from channel1 newCue(startTime, endTime, captionScreen)\n    */\n    var Cea608Channel = function(channelNumber, outputFilter) {\n\n        this.chNr = channelNumber;\n        this.outputFilter = outputFilter;\n        this.mode = null;\n        this.verbose = 0;\n        this.displayedMemory = new CaptionScreen();\n        this.nonDisplayedMemory = new CaptionScreen();\n        this.lastOutputScreen = new CaptionScreen();\n        this.currRollUpRow = this.displayedMemory.rows[NR_ROWS-1];\n        this.writeScreen = this.displayedMemory;\n        this.mode = null;\n        this.cueStartTime = null; // Keeps track of where a cue started.\n    };\n\n    Cea608Channel.prototype = {\n        \n        modes : [\"MODE_ROLL-UP\", \"MODE_POP-ON\", \"MODE_PAINT-ON\", \"MODE_TEXT\"],\n        \n        reset : function() {\n            this.mode = null;\n            this.displayedMemory.reset();\n            this.nonDisplayedMemory.reset();\n            this.lastOutputScreen.reset();\n            this.currRollUpRow = this.displayedMemory.rows[NR_ROWS-1];\n            this.writeScreen = this.displayedMemory;\n            this.mode = null;\n            this.cueStartTime = null;\n            this.lastCueEndTime = null;\n        },\n\n        getHandler : function() {\n            return this.outputFilter;\n        },\n\n        setHandler : function(newHandler) {\n            this.outputFilter = newHandler;\n        },\n\n        setPAC : function(pacData) {\n            this.writeScreen.setPAC(pacData);\n        },\n\n        setBkgData : function(bkgData) {\n            this.writeScreen.setBkgData(bkgData);\n        },\n\n        setMode : function(newMode) {\n            if (newMode === this.mode) {\n                return;\n            }\n            this.mode = newMode;\n            logger.log(\"INFO\", \"MODE=\" + newMode);\n            if (this.mode == \"MODE_POP-ON\") {\n                this.writeScreen = this.nonDisplayedMemory;\n            } else {\n                this.writeScreen = this.displayedMemory;\n                this.writeScreen.reset();\n            }\n            if (this.mode !== \"MODE_ROLL-UP\") {\n                this.displayedMemory.nrRollUpRows = null;\n                this.nonDisplayedMemory.nrRollUpRows = null;\n            }\n            this.mode = newMode;\n        },\n\n        insertChars : function(chars) {\n            for (var i = 0 ; i < chars.length ; i++) {\n                this.writeScreen.insertChar(chars[i]);\n            }\n            var screen = this.writeScreen === this.displayedMemory ? \"DISP\" : \"NON_DISP\";\n            logger.log(\"INFO\", screen + \": \" + this.writeScreen.getDisplayText(true));\n            if (this.mode === \"MODE_PAINT-ON\" || this.mode === \"MODE_ROLL-UP\") {\n                logger.log(\"TEXT\", \"DISPLAYED: \" + this.displayedMemory.getDisplayText(true));\n                this.outputDataUpdate();\n            }\n        },\n\n        cc_RCL: function() { // Resume Caption Loading (switch mode to Pop On)\n            logger.log(\"INFO\", \"RCL - Resume Caption Loading\");\n            this.setMode(\"MODE_POP-ON\");\n        },\n        cc_BS: function() { // BackSpace\n            logger.log(\"INFO\", \"BS - BackSpace\");\n            if (this.mode === \"MODE_TEXT\") {\n                return;\n            }\n            this.writeScreen.backSpace();\n            if (this.writeScreen === this.displayedMemory) {\n                this.outputDataUpdate();\n            }\n        },\n        cc_AOF : function() { // Reserved (formerly Alarm Off)\n            return;\n        },\n        cc_AON: function() { // Reserved (formerly Alarm On)\n            return;\n        },\n        cc_DER: function() { // Delete to End of Row\n            logger.log(\"INFO\", \"DER- Delete to End of Row\");\n            this.writeScreen.clearToEndOfRow();\n            this.outputDataUpdate();\n        },\n        cc_RU: function(nrRows) { //Roll-Up Captions-2,3,or 4 Rows\n            logger.log(\"INFO\", \"RU(\" + nrRows +\") - Roll Up\");\n            this.writeScreen = this.displayedMemory;\n            this.setMode(\"MODE_ROLL-UP\");\n            this.writeScreen.setRollUpRows(nrRows);\n        },\n        cc_FON: function() { //Flash On\n            logger.log(\"INFO\", \"FON - Flash On\");\n            this.writeScreen.setPen({flash : true});\n        },\n        cc_RDC: function() { // Resume Direct Captioning (switch mode to PaintOn)\n            logger.log(\"INFO\", \"RDC - Resume Direct Captioning\");\n            this.setMode(\"MODE_PAINT-ON\");\n        },\n        cc_TR: function() { // Text Restart in text mode (not supported, however)\n            logger.log(\"INFO\", \"TR\");\n            this.setMode(\"MODE_TEXT\");\n        },\n        cc_RTD: function() { // Resume Text Display in Text mode (not supported, however)\n            logger.log(\"INFO\", \"RTD\");\n            this.setMode(\"MODE_TEXT\");\n        },\n        cc_EDM: function() { // Erase Displayed Memory\n            logger.log(\"INFO\", \"EDM - Erase Displayed Memory\");\n            this.displayedMemory.reset();\n            this.outputDataUpdate();\n        },\n        cc_CR: function() { // Carriage Return\n            logger.log(\"CR - Carriage Return\");\n            this.writeScreen.rollUp();\n            this.outputDataUpdate();\n        },\n        cc_ENM: function() { //Erase Non-Displayed Memory\n            logger.log(\"INFO\", \"ENM - Erase Non-displayed Memory\");\n            this.nonDisplayedMemory.reset();\n        },\n        cc_EOC: function() { //End of Caption (Flip Memories)\n            logger.log(\"INFO\", \"EOC - End Of Caption\");\n            if (this.mode === \"MODE_POP-ON\") {\n                var tmp = this.displayedMemory;\n                this.displayedMemory = this.nonDisplayedMemory;\n                this.nonDisplayedMemory = tmp;\n                this.writeScreen = this.nonDisplayedMemory;\n                logger.log(\"TEXT\", \"DISP: \" + this.displayedMemory.getDisplayText());\n            }\n            this.outputDataUpdate();\n        },\n        cc_TO: function(nrCols) { // Tab Offset 1,2, or 3 columns\n            logger.log(\"INFO\", \"TO(\" + nrCols + \") - Tab Offset\");\n            this.writeScreen.moveCursor(nrCols);\n        },\n        cc_MIDROW: function(secondByte) { // Parse MIDROW command\n            var styles = {flash : false};\n            styles.underline = secondByte % 2 === 1;\n            styles.italics = secondByte >= 0x2e;\n            if (!styles.italics) {\n                var colorIndex = Math.floor(secondByte/2) - 0x10;\n                var colors = [\"white\", \"green\", \"blue\", \"cyan\", \"red\", \"yellow\", \"magenta\"];\n                styles.foreground = colors[colorIndex];\n            } else {\n                styles.foreground = \"white\";\n            }\n            logger.log(\"INFO\", \"MIDROW: \" + JSON.stringify(styles));\n            this.writeScreen.setPen(styles);\n        },\n\n        outputDataUpdate: function() {\n            var t = logger.time;\n            if (t === null) {\n                return;\n            }\n            if (this.outputFilter) {\n                if (this.outputFilter.updateData) {\n                    this.outputFilter.updateData(t, this.displayedMemory);\n                }\n                if (this.cueStartTime === null && !this.displayedMemory.isEmpty()) { // Start of a new cue\n                    this.cueStartTime = t;\n                } else {\n                    if (!this.displayedMemory.equals(this.lastOutputScreen)) { \n                        if (this.outputFilter.newCue) {\n                            this.outputFilter.newCue(this.cueStartTime, t, this.lastOutputScreen);\n                        }\n                        this.cueStartTime = this.displayedMemory.isEmpty() ? null : t;\n                    }\n                }\n                this.lastOutputScreen.copy(this.displayedMemory);\n            }\n        },\n\n        cueSplitAtTime : function(t) {\n            if (this.outputFilter) {\n                if (!this.displayedMemory.isEmpty()) {\n                    if (this.outputFilter.newCue) {\n                        this.outputFilter.newCue(this.cueStartTime, t, this.displayedMemory);\n                    }\n                    this.cueStartTime = t;\n                }\n            }\n        }\n    };\n\n    /**\n     * Parse CEA-608 data and send decoded data to out1 and out2.\n     * @constructor\n     * @param {Number} field  CEA-608 field (1 or 2)\n     * @param {CueHandler} out1 Output from channel1 newCue(startTime, endTime, captionScreen)\n     * @param {CueHandler} out2 Output from channel2 newCue(startTime, endTime, captionScreen)\n     */\n    var Cea608Parser = function(field, out1, out2) {\n        this.field = field || 1;\n        this.outputs = [out1, out2];\n        this.channels = [new Cea608Channel(1, out1), new Cea608Channel(2, out2)];\n        this.currChNr = -1; // Will be 1 or 2\n        this.lastCmdA = null; // First byte of last command\n        this.lastCmdB = null; // Second byte of last command\n        this.bufferedData = [];\n        this.startTime = null;\n        this.lastTime = null;\n        this.dataCounters = {'padding' : 0, 'char' : 0, 'cmd' : 0, 'other' : 0};\n    };\n\n    Cea608Parser.prototype = {\n        \n        getHandler : function(index) {\n            return this.channels[index].getHandler();\n        },\n        \n        setHandler : function(index, newHandler) {\n            this.channels[index].setHandler(newHandler);\n        },\n\n        /**\n         * Add data for time t in forms of list of bytes (unsigned ints). The bytes are treated as pairs.\n         */\n        addData : function(t, byteList) {\n            var cmdFound, a, b, \n            charsFound = false;\n            \n            this.lastTime = t;\n            logger.setTime(t);\n\n            for (var i = 0 ; i < byteList.length ; i+=2) {\n                a = byteList[i] & 0x7f;\n                b = byteList[i+1] & 0x7f;\n\n                if (a >= 0x10 && a <= 0x1f && a === this.lastCmdA && b === this.lastCmdB) {\n                    this.lastCmdA = null;\n                    this.lastCmdB = null;\n                    logger.log(\"DEBUG\", \"Repeated command (\" + numArrayToHexArray([a, b]) + \") is dropped\");\n                    continue; // Repeated commands are dropped (once)\n                }\n\n                if (a === 0 && b === 0) {\n                    this.dataCounters.padding += 2;\n                    continue;\n                } else {\n                    logger.log(\"DATA\", \"[\" + numArrayToHexArray([byteList[i], byteList[i+1]]) +\"] -> (\" + numArrayToHexArray([a, b]) + \")\");\n                }\n                cmdFound = this.parseCmd(a, b);\n                if (!cmdFound) {\n                    cmdFound = this.parseMidrow(a, b);\n                }\n                if (!cmdFound) {\n                    cmdFound = this.parsePAC(a, b);\n                }\n                if (!cmdFound) {\n                    cmdFound = this.parseBackgroundAttributes(a, b);\n                }\n                if (!cmdFound) {\n                    charsFound = this.parseChars(a, b);\n                    if (charsFound) {\n                        if (this.currChNr && this.currChNr >=0) {\n                            var channel = this.channels[this.currChNr-1];\n                            channel.insertChars(charsFound);\n                        } else {\n                            logger.log(\"WARNING\", \"No channel found yet. TEXT-MODE?\");\n                        }\n                    }\n                }\n                if (cmdFound) {\n                    this.dataCounters.cmd += 2;\n                } else if (charsFound) {\n                    this.dataCounters.char += 2;\n                } else {\n                    this.dataCounters.other += 2;\n                    logger.log(\"WARNING\", \"Couldn't parse cleaned data \" + numArrayToHexArray([a, b]) +\n                                \" orig: \" + numArrayToHexArray([byteList[i], byteList[i+1]]));\n                }\n            }\n        },\n\n        /**\n         * Parse Command.\n         * @returns {Boolean} Tells if a command was found\n         */\n        parseCmd: function(a, b) {\n            var chNr = null;\n\n            var cond1 = (a === 0x14 || a === 0x15 || a === 0x1C || a === 0x1D) && (0x20 <= b && b <= 0x2F);\n            var cond2 = (a === 0x17 || a === 0x1F) && (0x21 <= b && b <= 0x23);\n            if (!(cond1 || cond2)) {\n                return false;\n            }\n                 \n            if (a === 0x14 || a === 0x15 || a === 0x17) {\n                chNr = 1;\n            } else {\n                chNr = 2; // (a === 0x1C || a === 0x1D || a=== 0x1f)\n            }\n\n            var channel = this.channels[chNr - 1];\n\n            if (a === 0x14 || a === 0x15 || a === 0x1C || a === 0x1D) {\n                if (b === 0x20) {\n                    channel.cc_RCL();\n                } else if (b === 0x21) {\n                    channel.cc_BS();\n                } else if (b === 0x22) {\n                    channel.cc_AOF();\n                } else if (b === 0x23) {\n                    channel.cc_AON();\n                } else if (b === 0x24) {\n                    channel.cc_DER();\n                } else if (b === 0x25) {\n                    channel.cc_RU(2);\n                } else if (b === 0x26) {\n                    channel.cc_RU(3);\n                } else if (b === 0x27) {\n                    channel.cc_RU(4);\n                } else if (b === 0x28) {\n                    channel.cc_FON();\n                } else if (b === 0x29) {\n                    channel.cc_RDC();\n                } else if (b === 0x2A) {\n                    channel.cc_TR();\n                } else if (b === 0x2B) {\n                    channel.cc_RTD();\n                } else if (b === 0x2C) {\n                    channel.cc_EDM();\n                } else if (b === 0x2D) {\n                    channel.cc_CR();\n                } else if (b === 0x2E) {\n                    channel.cc_ENM();\n                } else if (b === 0x2F) {\n                    channel.cc_EOC();\n                }\n            } else { //a == 0x17 || a == 0x1F\n                channel.cc_TO(b - 0x20);\n            }\n            this.lastCmdA = a;\n            this.lastCmdB = b;\n            this.currChNr = chNr;\n            return true;\n        },\n\n        /**\n         * Parse midrow styling command\n         * @returns {Boolean}\n         */\n        parseMidrow : function(a, b) {\n            var chNr = null;\n                \n            if ( ((a === 0x11) || (a === 0x19)) && 0x20 <= b && b <= 0x2f) {\n                if (a === 0x11) {\n                    chNr = 1;\n                } else  {\n                    chNr = 2;\n                }\n                if (chNr !== this.currChNr) {\n                    logger.log(\"ERROR\", \"Mismatch channel in midrow parsing\");\n                    return false;\n                }\n                var channel = this.channels[chNr-1];\n                // cea608 spec says midrow codes should inject a space\n                channel.insertChars([0x20]);\n                channel.cc_MIDROW(b);\n                logger.log(\"DEBUG\", \"MIDROW (\" + numArrayToHexArray([a, b]) + \")\");\n                this.lastCmdA = a;\n                this.lastCmdB = b;\n                return true;\n            }\n            return false;\n        },\n        /**\n         * Parse Preable Access Codes (Table 53).\n         * @returns {Boolean} Tells if PAC found\n         */\n        parsePAC : function(a, b) {\n\n           var chNr = null;\n           var row = null;\n            \n            var case1 = ((0x11 <= a  && a <= 0x17) || (0x19 <= a && a <= 0x1F)) && (0x40 <= b && b <= 0x7F);\n            var case2 = (a === 0x10 || a === 0x18) && (0x40 <= b && b <= 0x5F);\n            if (! (case1 || case2)) {\n                return false;\n            }\n\n            chNr = (a <= 0x17) ? 1 : 2;\n\n            if (0x40 <= b && b <= 0x5F) {\n                row = (chNr === 1) ? rowsLowCh1[a] : rowsLowCh2[a];\n            } else { // 0x60 <= b <= 0x7F\n                row = (chNr === 1) ? rowsHighCh1[a] : rowsHighCh2[a];\n            }\n            var pacData = this.interpretPAC(row, b);\n            var channel = this.channels[chNr-1];\n            channel.setPAC(pacData);\n            this.lastCmdA = a;\n            this.lastCmdB = b;\n            this.currChNr = chNr;\n            return true;\n        },\n\n        /**\n         * Interpret the second byte of the pac, and return the information.\n         * @returns {Object} pacData with style parameters.\n         */\n        interpretPAC : function (row, byte) {\n            var pacIndex = byte;\n            var pacData = {color : null, italics : false, indent : null, underline : false, row : row};\n            \n            if (byte > 0x5F) {\n                pacIndex = byte - 0x60;\n            } else {\n                pacIndex = byte - 0x40;\n            }\n            pacData.underline = (pacIndex & 1) === 1;\n            if (pacIndex <= 0xd) {\n                pacData.color = ['white', 'green', 'blue', 'cyan', 'red', 'yellow', 'magenta', 'white'][Math.floor(pacIndex/2)];\n            } else if (pacIndex <= 0xf) {\n                pacData.italics = true;\n                pacData.color = 'white';\n            } else {\n                pacData.indent = (Math.floor((pacIndex-0x10)/2))*4;\n            }\n            return pacData; // Note that row has zero offset. The spec uses 1.\n        },\n\n        /**\n         * Parse characters.\n         * @returns An array with 1 to 2 codes corresponding to chars, if found. null otherwise.\n         */\n        parseChars : function(a, b) {\n\n           var  channelNr = null,\n                charCodes = null,\n                charCode1 = null,\n                charCode2 = null;\n\n            if (a >= 0x19) {\n                channelNr = 2;\n                charCode1 = a - 8;\n            } else {\n                channelNr = 1;\n                charCode1 = a;\n            }\n            if (0x11 <= charCode1 && charCode1 <= 0x13) {\n                // Special character\n                var oneCode = b;\n                if (charCode1 === 0x11) {\n                    oneCode = b + 0x50;\n                } else if (charCode1 === 0x12) {\n                    oneCode = b + 0x70;\n                } else {\n                    oneCode = b + 0x90;\n                }\n                logger.log(\"INFO\", \"Special char '\" + getCharForByte(oneCode) + \"' in channel \" + channelNr);\n                charCodes = [oneCode];\n                this.lastCmdA = a;\n                this.lastCmdB = b;\n            } else if (0x20 <= a && a <= 0x7f) {\n                charCodes = (b === 0) ? [a] : [a, b];\n                this.lastCmdA = null;\n                this.lastCmdB = null;\n            }\n            if (charCodes) {\n                var hexCodes = numArrayToHexArray(charCodes);\n                logger.log(\"DEBUG\", \"Char codes =  \" + hexCodes.join(\",\"));\n            }\n            return charCodes;\n        },\n        \n        /**\n        * Parse extended background attributes as well as new foreground color black.\n        * @returns{Boolean} Tells if background attributes are found\n        */\n        parseBackgroundAttributes : function(a, b) {\n           var  bkgData,\n                index,\n                chNr,\n                channel;\n\n            var case1 = (a === 0x10 || a === 0x18) && (0x20 <= b && b <= 0x2f);\n            var case2 = (a === 0x17 || a === 0x1f) && (0x2d <=b && b <= 0x2f);\n            if (!(case1 || case2)) {\n                return false;\n            }\n            bkgData = {};\n            if (a  === 0x10 || a === 0x18) {\n                index = Math.floor((b-0x20)/2);\n                bkgData.background = backgroundColors[index];\n                if (b % 2 === 1) {\n                    bkgData.background = bkgData.background + \"_semi\";\n                }\n            } else if (b === 0x2d) {\n                bkgData.background = \"transparent\";\n            } else {\n                bkgData.foreground = \"black\";\n                if (b === 0x2f) {\n                    bkgData.underline = true;\n                }\n            }\n            chNr = (a < 0x18) ? 1 : 2;\n            channel = this.channels[chNr-1];\n            channel.setBkgData(bkgData);\n            this.lastCmdA = a;\n            this.lastCmdB = b;\n            return true;\n        },\n\n        /**\n         * Reset state of parser and its channels.\n         */\n        reset : function() {\n            for (var i=0 ; i < this.channels.length ; i++) {\n                if (this.channels[i]) {\n                    this.channels[i].reset();\n                }\n            }\n            this.lastCmdA = null;\n            this.lastCmdB = null;\n        },\n\n        /**\n         * Trigger the generation of a cue, and the start of a new one if displayScreens are not empty.\n         */\n        cueSplitAtTime : function(t) {\n            for (var i=0 ; i < this.channels.length ; i++) {\n                if (this.channels[i]) {\n                    this.channels[i].cueSplitAtTime(t);\n                }\n            }\n        },\n    };\n\n    /**\n     * Find ranges corresponding to SEA CEA-608 NALUS in sizeprepended NALU array.\n     * @param {raw} dataView of binary data\n     * @param {startPos} start position in raw\n     * @param {size} total size of data in raw to consider\n     * @returns \n     */\n    var findCea608Nalus = function(raw, startPos, size) {\n        var nalSize = 0,\n            cursor = startPos,\n            nalType = 0,\n            cea608NaluRanges = [],\n            // Check SEI data according to ANSI-SCTE 128\n            isCEA608SEI = function (payloadType, payloadSize, raw, pos) {\n                if (payloadType !== 4 || payloadSize < 8) {\n                    return null;\n                }\n                var countryCode = raw.getUint8(pos);\n                var providerCode = raw.getUint16(pos + 1);\n                var userIdentifier = raw.getUint32(pos + 3);\n                var userDataTypeCode = raw.getUint8(pos + 7);\n                return countryCode == 0xB5 && providerCode == 0x31 && userIdentifier == 0x47413934 && userDataTypeCode == 0x3;\n            };\n        while (cursor < startPos + size) {\n            nalSize = raw.getUint32(cursor);\n            nalType = raw.getUint8(cursor + 4) & 0x1F;\n            //console.log(time + \"  NAL \" + nalType);\n            if (nalType === 6) {\n                // SEI NAL Unit. The NAL header is the first byte\n                //console.log(\"SEI NALU of size \" + nalSize + \" at time \" + time);\n                var pos = cursor + 5;\n                var payloadType = -1;\n                while (pos < cursor + 4 + nalSize - 1) { // The last byte should be rbsp_trailing_bits\n                    payloadType = 0;\n                    var b = 0xFF;\n                    while (b === 0xFF) {\n                        b = raw.getUint8(pos);\n                        payloadType += b;\n                        pos++;\n                    }\n                    var payloadSize = 0;\n                    b = 0xFF;\n                    while (b === 0xFF) {\n                        b = raw.getUint8(pos);\n                        payloadSize += b;\n                        pos++;\n                    }\n                    if (isCEA608SEI(payloadType, payloadSize, raw, pos)) {\n                        //console.log(\"CEA608 SEI \" + time + \" \" + payloadSize);\n                        cea608NaluRanges.push([pos, payloadSize]);\n                    }\n                    pos += payloadSize;\n                }\n            }\n            cursor += nalSize + 4;\n        }\n        return cea608NaluRanges;\n    };\n    \n    var extractCea608DataFromRange = function(raw, cea608Range) {\n        var pos = cea608Range[0];\n        var fieldData = [[], []];\n\n        pos += 8; // Skip the identifier up to userDataTypeCode\n        var ccCount = raw.getUint8(pos) & 0x1f;\n        pos += 2; // Advance 1 and skip reserved byte\n          \n        for (var i = 0; i < ccCount; i++) {\n            var byte = raw.getUint8(pos);\n            var ccValid = byte & 0x4;\n            var ccType = byte & 0x3;\n            pos++;\n            var ccData1 = raw.getUint8(pos); // Keep parity bit\n            pos++;\n            var ccData2 = raw.getUint8(pos); // Keep parity bit\n            pos++;\n            if (ccValid && ((ccData1 & 0x7f) + (ccData2 & 0x7f) !== 0)) { //Check validity and non-empty data\n                if (ccType === 0) {\n                    fieldData[0].push(ccData1);\n                    fieldData[0].push(ccData2);\n                } else if (ccType === 1) {\n                    fieldData[1].push(ccData1);\n                    fieldData[1].push(ccData2);\n                }\n            }\n        }\n        return fieldData;\n    };\n\n    exports.logger = logger;\n    exports.PenState = PenState;\n    exports.CaptionScreen = CaptionScreen;  \n    exports.Cea608Parser = Cea608Parser;\n    exports.findCea608Nalus = findCea608Nalus;\n    exports.extractCea608DataFromRange = extractCea608DataFromRange;\n\n}(typeof exports === 'undefined' ? this.cea608parser = {} : exports));\n"]}