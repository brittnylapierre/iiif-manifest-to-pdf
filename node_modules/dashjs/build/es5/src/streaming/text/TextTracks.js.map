{"version":3,"sources":["../../../../../src/streaming/text/TextTracks.js"],"names":[],"mappings":"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","file":"TextTracks.js","sourcesContent":["/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\nimport Constants from '../constants/Constants';\nimport EventBus from '../../core/EventBus';\nimport Events from '../../core/events/Events';\nimport FactoryMaker from '../../core/FactoryMaker';\nimport Debug from '../../core/Debug';\nimport { renderHTML } from 'imsc';\n\nfunction TextTracks() {\n\n    const context = this.context;\n    const eventBus = EventBus(context).getInstance();\n    const log = Debug(context).getInstance().log;\n\n    let instance,\n        Cue,\n        videoModel,\n        textTrackQueue,\n        trackElementArr,\n        currentTrackIdx,\n        actualVideoLeft,\n        actualVideoTop,\n        actualVideoWidth,\n        actualVideoHeight,\n        captionContainer,\n        videoSizeCheckInterval,\n        isChrome,\n        fullscreenAttribute,\n        displayCCOnTop,\n        previousISDState,\n        topZIndex;\n\n    function initialize() {\n        if (typeof window === 'undefined' || typeof navigator === 'undefined') {\n            return;\n        }\n\n        Cue = window.VTTCue || window.TextTrackCue;\n        textTrackQueue = [];\n        trackElementArr = [];\n        currentTrackIdx = -1;\n        actualVideoLeft = 0;\n        actualVideoTop = 0;\n        actualVideoWidth = 0;\n        actualVideoHeight = 0;\n        captionContainer = null;\n        videoSizeCheckInterval = null;\n        displayCCOnTop = false;\n        topZIndex = 2147483647;\n        previousISDState = null;\n\n        //TODO Check if IE has resolved issues: Then revert to not using the addTextTrack API for all browsers.\n        // https://connect.microsoft.com/IE/feedbackdetail/view/1660701/text-tracks-do-not-fire-change-addtrack-or-removetrack-events\n        // https://connect.microsoft.com/IE/feedback/details/1573380/htmltrackelement-track-addcue-throws-invalidstateerror-when-adding-new-cue\n        // Same issue with Firefox.\n        //isIE11orEdge = !!navigator.userAgent.match(/Trident.*rv[ :]*11\\./) || navigator.userAgent.match(/Edge/);\n        //isFirefox = !!navigator.userAgent.match(/Firefox/);\n        isChrome = !!navigator.userAgent.match(/Chrome/) && !navigator.userAgent.match(/Edge/);\n        if (document.fullscreenElement !== undefined) {\n            fullscreenAttribute = 'fullscreenElement'; // Standard and Edge\n        } else if (document.webkitIsFullScreen !== undefined) {\n            fullscreenAttribute = 'webkitIsFullScreen'; // Chrome and Safari (and Edge)\n        } else if (document.msFullscreenElement) { // IE11\n            fullscreenAttribute = 'msFullscreenElement';\n        } else if (document.mozFullScreen) { // Firefox\n            fullscreenAttribute = 'mozFullScreen';\n        }\n\n    }\n\n    function createTrackForUserAgent (i) {\n        const kind = textTrackQueue[i].kind;\n        const label = textTrackQueue[i].label !== undefined ? textTrackQueue[i].label : textTrackQueue[i].lang;\n        const lang = textTrackQueue[i].lang;\n        const isTTML = textTrackQueue[i].isTTML;\n        const isEmbedded = textTrackQueue[i].isEmbedded;\n        const track = isChrome ? document.createElement('track') : videoModel.addTextTrack(kind, label, lang);\n\n        if (isChrome) {\n            track.kind = kind;\n            track.label = label;\n            track.srclang = lang;\n        }\n\n        track.isEmbedded = isEmbedded;\n        track.isTTML = isTTML;\n\n        return track;\n    }\n\n    function displayCConTop(value) {\n        displayCCOnTop = value;\n        if (!captionContainer || document[fullscreenAttribute]) {\n            return;\n        }\n        captionContainer.style.zIndex = value ? topZIndex : null;\n    }\n\n    function addTextTrack(textTrackInfoVO, totalTextTracks) {\n        if (textTrackQueue.length === totalTextTracks) {\n            log('Trying to add too many tracks.');\n            return;\n        }\n\n        textTrackQueue.push(textTrackInfoVO);\n\n        if (textTrackQueue.length === totalTextTracks) {\n            textTrackQueue.sort(function (a, b) { //Sort in same order as in manifest\n                return a.index - b.index;\n            });\n            captionContainer = videoModel.getTTMLRenderingDiv();\n            let defaultIndex = -1;\n            for (let i = 0 ; i < textTrackQueue.length; i++) {\n                const track = createTrackForUserAgent.call(this, i);\n                trackElementArr.push(track); //used to remove tracks from video element when added manually\n\n                if (textTrackQueue[i].defaultTrack) {\n                    // track.default is an object property identifier that is a reserved word\n                    // The following jshint directive is used to suppressed the warning \"Expected an identifier and instead saw 'default' (a reserved word)\"\n                    /*jshint -W024 */\n                    track.default = true;\n                    defaultIndex = i;\n                }\n                if (isChrome) {\n                    videoModel.appendChild(track);\n                }\n\n                const textTrack = getTrackByIdx(i);\n                if (textTrack) {\n                    //each time a track is created, its mode should be showing by default\n                    //sometime, it's not on Chrome\n                    textTrack.mode = Constants.TEXT_SHOWING;\n                    if (captionContainer && (textTrackQueue[i].isTTML || textTrackQueue[i].isEmbedded)) {\n                        textTrack.renderingType = 'html';\n                    } else {\n                        textTrack.renderingType = 'default';\n                    }\n                }\n                this.addCaptions(i, 0, textTrackQueue[i].captionData);\n                eventBus.trigger(Events.TEXT_TRACK_ADDED);\n            }\n\n            //set current track index in textTrackQueue array\n            setCurrentTrackIdx.call(this, defaultIndex);\n\n            if (defaultIndex >= 0) {\n                for (let idx = 0; idx < textTrackQueue.length; idx++) {\n                    const videoTextTrack = getTrackByIdx(idx);\n                    if (videoTextTrack) {\n                        videoTextTrack.mode = (idx === defaultIndex) ? Constants.TEXT_SHOWING : Constants.TEXT_HIDDEN;\n                    }\n                }\n            }\n\n            eventBus.trigger(Events.TEXT_TRACKS_QUEUE_INITIALIZED, {\n                index: currentTrackIdx,\n                tracks: textTrackQueue\n            }); //send default idx.\n        }\n    }\n\n    function getVideoVisibleVideoSize(viewWidth, viewHeight, videoWidth, videoHeight, aspectRatio, use80Percent) {\n        const viewAspectRatio = viewWidth / viewHeight;\n        const videoAspectRatio = videoWidth / videoHeight;\n\n        let videoPictureWidth = 0;\n        let videoPictureHeight = 0;\n\n        if (viewAspectRatio > videoAspectRatio) {\n            videoPictureHeight = viewHeight;\n            videoPictureWidth = (videoPictureHeight / videoHeight) * videoWidth;\n        } else {\n            videoPictureWidth = viewWidth;\n            videoPictureHeight = (videoPictureWidth / videoWidth) * videoHeight;\n        }\n\n        let videoPictureXAspect = 0;\n        let videoPictureYAspect = 0;\n        let videoPictureWidthAspect = 0;\n        let videoPictureHeightAspect = 0;\n        const videoPictureAspect = videoPictureWidth / videoPictureHeight;\n\n        if (videoPictureAspect > aspectRatio) {\n            videoPictureHeightAspect = videoPictureHeight;\n            videoPictureWidthAspect = videoPictureHeight * aspectRatio;\n        } else {\n            videoPictureWidthAspect = videoPictureWidth;\n            videoPictureHeightAspect = videoPictureWidth / aspectRatio;\n        }\n        videoPictureXAspect = (viewWidth - videoPictureWidthAspect) / 2;\n        videoPictureYAspect = (viewHeight - videoPictureHeightAspect) / 2;\n\n        if (use80Percent) {\n            return {\n                x: videoPictureXAspect + (videoPictureWidthAspect * 0.1),\n                y: videoPictureYAspect + (videoPictureHeightAspect * 0.1),\n                w: videoPictureWidthAspect * 0.8,\n                h: videoPictureHeightAspect * 0.8\n            }; /* Maximal picture size in videos aspect ratio */\n        } else {\n            return {\n                x: videoPictureXAspect,\n                y: videoPictureYAspect,\n                w: videoPictureWidthAspect,\n                h: videoPictureHeightAspect\n            }; /* Maximal picture size in videos aspect ratio */\n        }\n    }\n\n    function checkVideoSize(track, forceDrawing) {\n        const clientWidth = videoModel.getClientWidth();\n        const clientHeight = videoModel.getClientHeight();\n        const videoWidth = videoModel.getVideoWidth();\n        const videoHeight = videoModel.getVideoHeight();\n        const videoOffsetTop = videoModel.getVideoRelativeOffsetTop();\n        const videoOffsetLeft = videoModel.getVideoRelativeOffsetLeft();\n        let aspectRatio =  videoWidth / videoHeight;\n        let use80Percent = false;\n        if (track.isFromCEA608) {\n            // If this is CEA608 then use predefined aspect ratio\n            aspectRatio = 3.5 / 3.0;\n            use80Percent = true;\n        }\n\n        const realVideoSize = getVideoVisibleVideoSize.call(this, clientWidth, clientHeight, videoWidth, videoHeight, aspectRatio, use80Percent);\n\n        const newVideoWidth = realVideoSize.w;\n        const newVideoHeight = realVideoSize.h;\n        const newVideoLeft = realVideoSize.x;\n        const newVideoTop = realVideoSize.y;\n\n        if (newVideoWidth != actualVideoWidth || newVideoHeight != actualVideoHeight || newVideoLeft != actualVideoLeft || newVideoTop != actualVideoTop || forceDrawing) {\n            actualVideoLeft = newVideoLeft + videoOffsetLeft;\n            actualVideoTop = newVideoTop + videoOffsetTop;\n            actualVideoWidth = newVideoWidth;\n            actualVideoHeight = newVideoHeight;\n            captionContainer.style.left = actualVideoLeft + 'px';\n            captionContainer.style.top = actualVideoTop + 'px';\n            captionContainer.style.width = actualVideoWidth + 'px';\n            captionContainer.style.height = actualVideoHeight + 'px';\n\n            // Video view has changed size, so resize any active cues\n            for (let i = 0; track.activeCues && i < track.activeCues.length; ++i) {\n                const cue = track.activeCues[i];\n                cue.scaleCue(cue);\n            }\n\n            if ((fullscreenAttribute && document[fullscreenAttribute]) || displayCCOnTop) {\n                captionContainer.style.zIndex = topZIndex;\n            } else {\n                captionContainer.style.zIndex = null;\n            }\n        }\n    }\n\n    function scaleCue(activeCue) {\n        const videoWidth = actualVideoWidth;\n        const videoHeight = actualVideoHeight;\n        let key,\n            replaceValue,\n            valueFontSize,\n            valueLineHeight,\n            elements;\n\n        if (activeCue.cellResolution) {\n            const cellUnit = [videoWidth / activeCue.cellResolution[0], videoHeight / activeCue.cellResolution[1]];\n            if (activeCue.linePadding) {\n                for (key in activeCue.linePadding) {\n                    if (activeCue.linePadding.hasOwnProperty(key)) {\n                        const valueLinePadding = activeCue.linePadding[key];\n                        replaceValue = (valueLinePadding * cellUnit[0]).toString();\n                        // Compute the CellResolution unit in order to process properties using sizing (fontSize, linePadding, etc).\n                        const elementsSpan = document.getElementsByClassName('spanPadding');\n                        for (let i = 0; i < elementsSpan.length; i++) {\n                            elementsSpan[i].style.cssText = elementsSpan[i].style.cssText.replace(/(padding-left\\s*:\\s*)[\\d.,]+(?=\\s*px)/gi, '$1' + replaceValue);\n                            elementsSpan[i].style.cssText = elementsSpan[i].style.cssText.replace(/(padding-right\\s*:\\s*)[\\d.,]+(?=\\s*px)/gi, '$1' + replaceValue);\n                        }\n                    }\n                }\n            }\n\n            if (activeCue.fontSize) {\n                for (key in activeCue.fontSize) {\n                    if (activeCue.fontSize.hasOwnProperty(key)) {\n                        if (activeCue.fontSize[key][0] === '%') {\n                            valueFontSize = activeCue.fontSize[key][1] / 100;\n                        } else if (activeCue.fontSize[key][0] === 'c') {\n                            valueFontSize = activeCue.fontSize[key][1];\n                        }\n\n                        replaceValue = (valueFontSize * cellUnit[1]).toString();\n\n                        if (key !== 'defaultFontSize') {\n                            elements = document.getElementsByClassName(key);\n                        } else {\n                            elements = document.getElementsByClassName('paragraph');\n                        }\n\n                        for (let j = 0; j < elements.length; j++) {\n                            elements[j].style.cssText = elements[j].style.cssText.replace(/(font-size\\s*:\\s*)[\\d.,]+(?=\\s*px)/gi, '$1' + replaceValue);\n                        }\n                    }\n                }\n\n                if (activeCue.lineHeight) {\n                    for (key in activeCue.lineHeight) {\n                        if (activeCue.lineHeight.hasOwnProperty(key)) {\n                            if (activeCue.lineHeight[key][0] === '%') {\n                                valueLineHeight = activeCue.lineHeight[key][1] / 100;\n                            } else if (activeCue.fontSize[key][0] === 'c') {\n                                valueLineHeight = activeCue.lineHeight[key][1];\n                            }\n\n                            replaceValue = (valueLineHeight * cellUnit[1]).toString();\n                            elements = document.getElementsByClassName(key);\n                            for (let k = 0; k < elements.length; k++) {\n                                elements[k].style.cssText = elements[k].style.cssText.replace(/(line-height\\s*:\\s*)[\\d.,]+(?=\\s*px)/gi, '$1' + replaceValue);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n\n        if (activeCue.isd) {\n            let htmlCaptionDiv = document.getElementById(activeCue.cueID);\n            if (htmlCaptionDiv) {\n                captionContainer.removeChild(htmlCaptionDiv);\n            }\n            renderCaption(activeCue);\n        }\n    }\n\n    function renderCaption(cue) {\n        const finalCue = document.createElement('div');\n        captionContainer.appendChild(finalCue);\n        previousISDState = renderHTML(cue.isd, finalCue, function (uri) {\n            const imsc1ImgUrnTester = /^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/;\n            const smpteImgUrnTester = /^#(.*)$/;\n            if (imsc1ImgUrnTester.test(uri)) {\n                const match = imsc1ImgUrnTester.exec(uri);\n                const imageId = parseInt(match[4], 10) - 1;\n                const imageData = btoa(cue.images[imageId]);\n                const dataUrl = 'data:image/png;base64,' + imageData;\n                return dataUrl;\n            } else if (smpteImgUrnTester.test(uri)) {\n                const match = smpteImgUrnTester.exec(uri);\n                const imageId = match[1];\n                const dataUrl = 'data:image/png;base64,' + cue.embeddedImages[imageId];\n                return dataUrl;\n            } else {\n                return null;\n            }\n        }, captionContainer.clientHeight, captionContainer.clientWidth, false/*displayForcedOnlyMode*/, function (err) {\n            log('[TextTracks][renderCaption]', err);\n            //TODO add ErrorHandler management\n        }, previousISDState, true /*enableRollUp*/);\n        finalCue.id = cue.cueID;\n    }\n\n    /*\n     * Add captions to track, store for later adding, or add captions added before\n     */\n    function addCaptions(trackIdx, timeOffset, captionData) {\n        const track = getTrackByIdx(trackIdx);\n        const self = this;\n\n        if (!track) {\n            return;\n        }\n\n        if (!captionData || captionData.length === 0) {\n            return;\n        }\n\n        for (let item in captionData) {\n            let cue;\n            const currentItem = captionData[item];\n\n            track.cellResolution = currentItem.cellResolution;\n            track.isFromCEA608 = currentItem.isFromCEA608;\n\n            if (currentItem.type === 'html') {\n                cue = new Cue(currentItem.start - timeOffset, currentItem.end - timeOffset, '');\n                cue.cueHTMLElement = currentItem.cueHTMLElement;\n                cue.isd = currentItem.isd;\n                cue.images = currentItem.images;\n                cue.embeddedImages = currentItem.embeddedImages;\n                cue.cueID = currentItem.cueID;\n                cue.scaleCue = scaleCue.bind(self);\n                //useful parameters for cea608 subtitles, not for TTML one.\n                cue.cellResolution = currentItem.cellResolution;\n                cue.lineHeight = currentItem.lineHeight;\n                cue.linePadding = currentItem.linePadding;\n                cue.fontSize = currentItem.fontSize;\n\n                captionContainer.style.left = actualVideoLeft + 'px';\n                captionContainer.style.top = actualVideoTop + 'px';\n                captionContainer.style.width = actualVideoWidth + 'px';\n                captionContainer.style.height = actualVideoHeight + 'px';\n\n                cue.onenter = function () {\n                    if (track.mode === Constants.TEXT_SHOWING) {\n                        if (this.isd) {\n                            renderCaption(this);\n                            log('Cue enter id:' + this.cueID);\n                        } else {\n                            captionContainer.appendChild(this.cueHTMLElement);\n                            scaleCue.call(self, this);\n                        }\n                    }\n                };\n\n                cue.onexit = function () {\n                    const divs = captionContainer.childNodes;\n                    for (let i = 0; i < divs.length; ++i) {\n                        if (divs[i].id === this.cueID) {\n                            log('Cue exit id:' + divs[i].id);\n                            captionContainer.removeChild(divs[i]);\n                        }\n                    }\n                };\n            } else {\n                cue = new Cue(currentItem.start - timeOffset, currentItem.end - timeOffset, currentItem.data);\n                if (currentItem.styles) {\n                    if (currentItem.styles.align !== undefined && 'align' in cue) {\n                        cue.align = currentItem.styles.align;\n                    }\n                    if (currentItem.styles.line !== undefined && 'line' in cue) {\n                        cue.line = currentItem.styles.line;\n                    }\n                    if (currentItem.styles.position !== undefined && 'position' in cue) {\n                        cue.position = currentItem.styles.position;\n                    }\n                    if (currentItem.styles.size !== undefined && 'size' in cue) {\n                        cue.size = currentItem.styles.size;\n                    }\n                }\n            }\n\n            track.addCue(cue);\n        }\n    }\n\n    function getTrackByIdx(idx) {\n        return idx >= 0 && textTrackQueue[idx] ?\n            videoModel.getTextTrack(textTrackQueue[idx].kind, textTrackQueue[idx].label, textTrackQueue[idx].lang, textTrackQueue[idx].isTTML, textTrackQueue[idx].isEmbedded) : null;\n    }\n\n    function getCurrentTrackIdx() {\n        return currentTrackIdx;\n    }\n\n    function getTrackIdxForId(trackId) {\n        let idx = -1;\n        for (let i = 0; i < textTrackQueue.length; i++) {\n            if (textTrackQueue[i].label === trackId) {\n                idx = i;\n                break;\n            }\n        }\n\n        return idx;\n    }\n\n    function setCurrentTrackIdx(idx) {\n        if (idx === currentTrackIdx) {\n            return;\n        }\n        currentTrackIdx = idx;\n        const track = getTrackByIdx(currentTrackIdx);\n        setCueStyleOnTrack.call(this, track);\n\n        if (videoSizeCheckInterval) {\n            clearInterval(videoSizeCheckInterval);\n            videoSizeCheckInterval = null;\n        }\n\n        if (track && track.renderingType === 'html') {\n            checkVideoSize.call(this, track, true);\n            videoSizeCheckInterval = setInterval(checkVideoSize.bind(this, track), 500);\n        }\n    }\n\n    function setCueStyleOnTrack(track) {\n        clearCaptionContainer.call(this);\n        if (track) {\n            if (track.renderingType === 'html') {\n                setNativeCueStyle.call(this);\n            } else {\n                removeNativeCueStyle.call(this);\n            }\n        } else {\n            removeNativeCueStyle.call(this);\n        }\n    }\n\n    function deleteTrackCues(track) {\n        if (track.cues) {\n            const cues = track.cues;\n            const lastIdx = cues.length - 1;\n\n            for (let r = lastIdx; r >= 0 ; r--) {\n                track.removeCue(cues[r]);\n            }\n        }\n    }\n\n    function deleteCuesFromTrackIdx(trackIdx) {\n        const track = getTrackByIdx(trackIdx);\n        if (track) {\n            deleteTrackCues(track);\n        }\n    }\n\n    function deleteAllTextTracks() {\n        const ln = trackElementArr ? trackElementArr.length : 0;\n        for (let i = 0; i < ln; i++) {\n            if (isChrome) {\n                videoModel.removeChild(trackElementArr[i]);\n            } else {\n                const track = getTrackByIdx(i);\n                if (track) {\n                    deleteTrackCues.call(this, track);\n                    track.mode = 'disabled';\n                }\n            }\n        }\n        trackElementArr = [];\n        textTrackQueue = [];\n        if (videoSizeCheckInterval) {\n            clearInterval(videoSizeCheckInterval);\n            videoSizeCheckInterval = null;\n        }\n        currentTrackIdx = -1;\n        clearCaptionContainer.call(this);\n    }\n\n    function deleteTextTrack(idx) {\n        videoModel.removeChild(trackElementArr[idx]);\n        trackElementArr.splice(idx, 1);\n    }\n\n    /* Set native cue style to transparent background to avoid it being displayed. */\n    function setNativeCueStyle() {\n        if (!isChrome) {\n            return;\n        }\n        let styleElement = document.getElementById('native-cue-style');\n        if (styleElement) {\n            return; //Already set\n        }\n\n        styleElement = document.createElement('style');\n        styleElement.id = 'native-cue-style';\n        document.head.appendChild(styleElement);\n        const stylesheet = styleElement.sheet;\n        const video = videoModel.getElement();\n        if (video) {\n            if (video.id) {\n                stylesheet.insertRule('#' + video.id + '::cue {background: transparent}', 0);\n            } else if (video.classList.length !== 0) {\n                stylesheet.insertRule('.' + video.className + '::cue {background: transparent}', 0);\n            } else {\n                stylesheet.insertRule('video::cue {background: transparent}', 0);\n            }\n        }\n    }\n\n    /* Remove the extra cue style with transparent background for native cues. */\n    function removeNativeCueStyle() {\n        if (!isChrome) {\n            return;\n        }\n        const styleElement = document.getElementById('native-cue-style');\n        if (styleElement) {\n            document.head.removeChild(styleElement);\n        }\n    }\n\n    function clearCaptionContainer() {\n        if (captionContainer) {\n            while (captionContainer.firstChild) {\n                captionContainer.removeChild(captionContainer.firstChild);\n            }\n        }\n    }\n\n    function setConfig(config) {\n        if (!config) {\n            return;\n        }\n        if (config.videoModel) {\n            videoModel = config.videoModel;\n        }\n    }\n\n    function setModeForTrackIdx(idx, mode) {\n        const track = getTrackByIdx(idx);\n        if (track && track.mode !== mode) {\n            track.mode = mode;\n        }\n    }\n\n    function getCurrentTrackInfo() {\n        return textTrackQueue[currentTrackIdx];\n    }\n\n    instance = {\n        initialize: initialize,\n        displayCConTop: displayCConTop,\n        addTextTrack: addTextTrack,\n        addCaptions: addCaptions,\n        getCurrentTrackIdx: getCurrentTrackIdx,\n        setCurrentTrackIdx: setCurrentTrackIdx,\n        getTrackIdxForId: getTrackIdxForId,\n        getCurrentTrackInfo: getCurrentTrackInfo,\n        setModeForTrackIdx: setModeForTrackIdx,\n        deleteCuesFromTrackIdx: deleteCuesFromTrackIdx,\n        deleteAllTextTracks: deleteAllTextTracks,\n        deleteTextTrack: deleteTextTrack,\n        setConfig: setConfig\n    };\n\n    return instance;\n}\n\nTextTracks.__dashjs_factory_name = 'TextTracks';\nexport default FactoryMaker.getSingletonFactory(TextTracks);\n"]}