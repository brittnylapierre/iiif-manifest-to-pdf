{"version":3,"sources":["../../../../../src/streaming/utils/ErrorHandler.js"],"names":[],"mappings":"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","file":"ErrorHandler.js","sourcesContent":["/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\nimport EventBus from '../../core/EventBus';\nimport Events from '../../core/events/Events';\nimport FactoryMaker from '../../core/FactoryMaker';\n\nconst CAPABILITY_ERROR_MEDIASOURCE      = 'mediasource';\nconst CAPABILITY_ERROR_MEDIAKEYS        = 'mediakeys';\n\nconst DOWNLOAD_ERROR_ID_MANIFEST        = 'manifest';\nconst DOWNLOAD_ERROR_ID_SIDX            = 'SIDX';\nconst DOWNLOAD_ERROR_ID_CONTENT         = 'content';\nconst DOWNLOAD_ERROR_ID_INITIALIZATION  = 'initialization';\nconst DOWNLOAD_ERROR_ID_XLINK           = 'xlink';\n\nconst MANIFEST_ERROR_ID_CODEC           = 'codec';\nconst MANIFEST_ERROR_ID_PARSE           = 'parse';\nconst MANIFEST_ERROR_ID_NOSTREAMS       = 'nostreams';\n\nconst TIMED_TEXT_ERROR_ID_PARSE         = 'parse';\n\nfunction ErrorHandler() {\n\n    let instance;\n    let context = this.context;\n    let eventBus = EventBus(context).getInstance();\n\n    // \"mediasource\"|\"mediakeys\"\n    function capabilityError(err) {\n        eventBus.trigger(Events.ERROR, {error: 'capability', event: err});\n    }\n\n    // {id: \"manifest\"|\"SIDX\"|\"content\"|\"initialization\"|\"xlink\", url: \"\", request: {XMLHttpRequest instance}}\n    function downloadError(id, url, request) {\n        eventBus.trigger(Events.ERROR, {error: 'download', event: {id: id, url: url, request: request}});\n    }\n\n    // {message: \"\", id: \"parse\"|\"nostreams\", manifest: {parsed manifest}}\n    function manifestError(message, id, manifest, err) {\n        eventBus.trigger(Events.ERROR, {error: 'manifestError', event: {message: message, id: id, manifest: manifest, event: err}});\n    }\n\n    // {message: '', id: 'parse', cc: ''}\n    function timedTextError(message, id, ccContent) {\n        eventBus.trigger(Events.ERROR, {error: 'cc', event: {message: message, id: id, cc: ccContent}});\n    }\n\n    function mediaSourceError(err) {\n        eventBus.trigger(Events.ERROR, {error: 'mediasource', event: err});\n    }\n\n    function mediaKeySessionError(err) {\n        eventBus.trigger(Events.ERROR, {error: 'key_session', event: err});\n    }\n\n    function mediaKeyMessageError(err) {\n        eventBus.trigger(Events.ERROR, {error: 'key_message', event: err});\n    }\n\n    instance = {\n        capabilityError: capabilityError,\n        downloadError: downloadError,\n        manifestError: manifestError,\n        timedTextError: timedTextError,\n        mediaSourceError: mediaSourceError,\n        mediaKeySessionError: mediaKeySessionError,\n        mediaKeyMessageError: mediaKeyMessageError\n    };\n\n    return instance;\n}\n\nErrorHandler.__dashjs_factory_name = 'ErrorHandler';\n\nconst factory = FactoryMaker.getSingletonFactory(ErrorHandler);\n\nfactory.CAPABILITY_ERROR_MEDIASOURCE        = CAPABILITY_ERROR_MEDIASOURCE;\nfactory.CAPABILITY_ERROR_MEDIAKEYS          = CAPABILITY_ERROR_MEDIAKEYS;\nfactory.DOWNLOAD_ERROR_ID_MANIFEST          = DOWNLOAD_ERROR_ID_MANIFEST;\nfactory.DOWNLOAD_ERROR_ID_SIDX              = DOWNLOAD_ERROR_ID_SIDX;\nfactory.DOWNLOAD_ERROR_ID_CONTENT           = DOWNLOAD_ERROR_ID_CONTENT;\nfactory.DOWNLOAD_ERROR_ID_INITIALIZATION    = DOWNLOAD_ERROR_ID_INITIALIZATION;\nfactory.DOWNLOAD_ERROR_ID_XLINK             = DOWNLOAD_ERROR_ID_XLINK;\nfactory.MANIFEST_ERROR_ID_CODEC             = MANIFEST_ERROR_ID_CODEC;\nfactory.MANIFEST_ERROR_ID_PARSE             = MANIFEST_ERROR_ID_PARSE;\nfactory.MANIFEST_ERROR_ID_NOSTREAMS         = MANIFEST_ERROR_ID_NOSTREAMS;\nfactory.TIMED_TEXT_ERROR_ID_PARSE           = TIMED_TEXT_ERROR_ID_PARSE;\n\nFactoryMaker.updateSingletonFactory(ErrorHandler.__dashjs_factory_name, factory);\n\nexport default factory;\n"]}