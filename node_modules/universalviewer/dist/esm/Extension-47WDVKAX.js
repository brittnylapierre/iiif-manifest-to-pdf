import{a as F}from"./chunk-HCLOCSI6.js";import{a as H}from"./chunk-PGIQXF5K.js";import"./chunk-GTRHYEID.js";import{b as L,c as R,e as A,f as B,g as k}from"./chunk-FHYI7RXJ.js";import{c as r,h as S,l as I}from"./chunk-P5ZMYGVU.js";import{a as J,c as w,o as y,q as t,t as C}from"./chunk-WDDAVPLK.js";import"./chunk-YAXTLTJC.js";var h=J(),p=class extends S{constructor(e){super(e)}create(){this.setConfig("fileLinkCenterPanel"),super.create(),this.extensionHost.subscribe(t.OPEN_EXTERNAL_RESOURCE,e=>{this.openMedia(e)}),this.$scroll=h('<div class="scroll"></div>'),this.$content.append(this.$scroll),this.$downloadItems=h("<ol></ol>"),this.$scroll.append(this.$downloadItems),this.$downloadItemTemplate=h('<li><img/><div class="col2"><a class="filename" target="_blank" download=""></a><span class="label"></span><a class="description" target="_blank" download=""></a></div></li>'),this.title=this.extension.helper.getLabel()}async openMedia(e){await this.extension.getExternalResources(e);let s=this.extension.helper.getCurrentCanvas().getContent(),i;for(let n=0;n<s.length;n++){let l=s[n];if(!l.getBody().length)continue;i=this.$downloadItemTemplate.clone();let b=i.find(".filename"),M=i.find(".label"),v=i.find("img"),E=i.find(".description"),u=l.getBody()[0],o=u.getProperty("id");o&&(b.prop("href",o),b.text(o.substr(o.lastIndexOf("/")+1)));let P=C.getValue(u.getLabel());P&&M.text(r(P));let D=l.getProperty("thumbnail");D?v.prop("src",D):v.hide();let x=u.getProperty("description");x&&(E.text(r(x)),o&&E.prop("href",o)),this.$downloadItems.append(i)}this.extensionHost.publish(t.EXTERNAL_RESOURCE_OPENED),this.extensionHost.publish(t.LOAD)}resize(){super.resize(),this.title&&this.$title.text(r(this.title)),this.$scroll.height(this.$content.height()-this.$scroll.verticalMargins())}};var c=class extends B{constructor(e){super(e)}create(){this.setConfig("settingsDialogue"),super.create()}};var m=class extends k{constructor(e){super(e)}create(){this.setConfig("shareDialogue"),super.create()}update(){super.update(),this.code=this.extension.getEmbedScript(this.options.embedTemplate,this.currentWidth,this.currentHeight),this.$code.val(this.code)}resize(){super.resize()}};var O={authAPIVersion:1,bookmarkThumbHeight:150,bookmarkThumbWidth:90,dropEnabled:!0,footerPanelEnabled:!0,headerPanelEnabled:!0,leftPanelEnabled:!0,limitLocales:!1,openTemplate:"http://universalviewer.io?manifest={0}",pessimisticAccessControl:!1,rightPanelEnabled:!0,theme:"uv-en-GB-theme"},Q={shareDialogue:{options:{embedTemplate:'<iframe src="{0}" width="{1}" height="{2}" allowfullscreen frameborder="0"></iframe>'},content:{customSize:"custom",embed:"Embed",embedInstructions:"To embed this item in your own website, copy and paste the code below.",height:"Height",iiif:"IIIF Manifest",share:"Share",shareInstructions:"To share this item, copy the URL below.",size:"Size:",width:"Width"}},fileLinkCenterPanel:{content:{}},footerPanel:{options:{bookmarkEnabled:!1,downloadEnabled:!1,embedEnabled:!1,feedbackEnabled:!1,minimiseButtons:!0,openEnabled:!1,shareEnabled:!0},content:{bookmark:"Add to bookmarks",download:"Download",embed:"Share",exitFullScreen:"Exit Full Screen",fullScreen:"Full Screen",moreInfo:"More Information",open:"Open"}},genericDialogue:{content:{ok:"OK"}},headerPanel:{content:{close:"Close",help:"Help"}},helpDialogue:{content:{text:"placeholder text",title:"Help"}},moreInfoRightPanel:{options:{canvasDisplayOrder:"",canvasExclude:"",copyToClipboardEnabled:!1,manifestDisplayOrder:"",manifestExclude:"",panelAnimationDuration:250,panelCollapsedWidth:30,panelExpandedWidth:255,panelOpen:!1,rtlLanguageCodes:"ar, ara, dv, div, he, heb, ur, urd",showAllLanguages:!1,textLimit:4,textLimitType:"lines"},content:{attribution:"Attribution",collapse:"Collapse Information",collapseFull:"Collapse Gallery",description:"Description",expand:"Expand Information",expandFull:"Expand Gallery",holdingText:"Your module goes here!",less:"less",license:"License",logo:"Logo",more:"more",noData:"No data to display",page:"Page",title:"More Information",manifestHeader:"About the item",canvasHeader:"About the image",copyToClipboard:"Copy to clipboard",copiedToClipboard:"Copied to clipboard"}},resourcesLeftPanel:{options:{expandFullEnabled:!1,panelAnimationDuration:250,panelCollapsedWidth:30,panelExpandedWidth:255,panelOpen:!0},content:{title:"Contents"}},dialogue:{content:{close:"Close"}},downloadDialogue:{content:{download:"Download",entireFileAsOriginal:"Entire file",noneAvailable:"No download options are available.",preview:"Preview",title:"Download"}},loginDialogue:{content:{login:"Login",cancel:"Cancel"}},settingsDialogue:{content:{locale:"Locale",pagingEnabled:"Two Page View",preserveViewport:"Preserve Zoom",reducedMotion:"Reduce motion (disables animations)",title:"Settings",website:"<a href='https://github.com/universalviewer/universalviewer'>more info</a>"}}},G={label:"English (GB)",locales:[{name:"cy-GB",label:"Cymraeg"},{name:"en-GB",label:"English (GB)"},{name:"fr-FR",label:"Fran\xE7ais (FR)"},{name:"pl-PL",label:"Polski"},{name:"sv-SE",label:"Svenska"}]},N={authCORSError:"Your browser does not support CORS, please upgrade to view this content.",authorisationFailedMessage:"Your log-in attempt did not appear to be successful. Please try again.",degradedResourceMessage:"Please log in to view at full quality.",degradedResourceLogin:"log in",forbiddenResourceMessage:"Your current access rights are insufficient to view this image",mediaViewer:"Media Viewer",skipToDownload:"Skip to downloads and alternative formats"},g={options:O,modules:Q,localisation:G,content:N};var T=class extends I{constructor(){super(...arguments);this.defaultConfig=g;this.locales={"en-GB":g,"cy-GB":()=>import("./cy-GB-F3OANMBE.js"),"fr-FR":()=>import("./fr-FR-5ZI63RQC.js"),"pl-PL":()=>import("./pl-PL-QDBLWX7W.js"),"sv-SE":()=>import("./sv-SE-PAQ4SOHB.js")}}create(){super.create(),this.extensionHost.subscribe(t.CANVAS_INDEX_CHANGE,e=>{this.viewCanvas(e)}),this.extensionHost.subscribe(t.THUMB_SELECTED,e=>{this.extensionHost.publish(t.CANVAS_INDEX_CHANGE,e)})}createModules(){super.createModules(),this.isHeaderPanelEnabled()?this.headerPanel=new R(this.shell.$headerPanel):this.shell.$headerPanel.hide(),this.isLeftPanelEnabled()&&(this.leftPanel=new F(this.shell.$leftPanel)),this.centerPanel=new p(this.shell.$centerPanel),this.isRightPanelEnabled()&&(this.rightPanel=new A(this.shell.$rightPanel)),this.isFooterPanelEnabled()?this.footerPanel=new L(this.shell.$footerPanel):this.shell.$footerPanel.hide(),this.$helpDialogue=$('<div class="overlay help" aria-hidden="true"></div>'),this.shell.$overlays.append(this.$helpDialogue),this.helpDialogue=new H(this.$helpDialogue),this.$shareDialogue=$('<div class="overlay share" aria-hidden="true"></div>'),this.shell.$overlays.append(this.$shareDialogue),this.shareDialogue=new m(this.$shareDialogue),this.$settingsDialogue=$('<div class="overlay settings" aria-hidden="true"></div>'),this.shell.$overlays.append(this.$settingsDialogue),this.settingsDialogue=new c(this.$settingsDialogue),this.isLeftPanelEnabled()&&this.leftPanel.init(),this.isRightPanelEnabled()&&this.rightPanel.init()}render(){super.render()}isLeftPanelEnabled(){return w.getBool(this.data.config.options.leftPanelEnabled,!0)&&(this.helper.isMultiCanvas()||this.helper.isMultiSequence()||this.helper.hasResources())}getEmbedScript(e,f,s){let n=`${this.getAppUri()}#?manifest=${this.helper.manifestUri}&c=${this.helper.collectionIndex}&m=${this.helper.manifestIndex}&cv=${this.helper.canvasIndex}`;return y.format(e,n,f.toString(),s.toString())}};export{T as default};
