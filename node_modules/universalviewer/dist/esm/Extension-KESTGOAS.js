import{a as IT}from"./chunk-7PMP67YD.js";import{a as DT}from"./chunk-IHLUYVK5.js";import{d as LT}from"./chunk-WRRSI4YM.js";import"./chunk-JSOANTVC.js";import{b as RT}from"./chunk-F4HE57D5.js";import{b as Dm,c as PT,e as OT,f as NT,g as kT}from"./chunk-6USAGEM6.js";import{c as ET,d as TT,h as AT,l as CT}from"./chunk-UO64ZU74.js";import"./chunk-QW3APZK4.js";import{a as KP,b as _T,o as ST,q as mi,r as QP,t as MT}from"./chunk-WDDAVPLK.js";import{b as xT,c as Tw}from"./chunk-YAXTLTJC.js";var BT=xT(FT=>{(function(){"use strict";var oe;function me(s){var h=0;return function(){return h<s.length?{done:!1,value:s[h++]}:{done:!0}}}var Re=typeof Object.defineProperties=="function"?Object.defineProperty:function(s,h,p){return s==Array.prototype||s==Object.prototype||(s[h]=p.value),s};function Ke(s){s=[typeof globalThis=="object"&&globalThis,s,typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global];for(var h=0;h<s.length;++h){var p=s[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var yt=Ke(this);function Yt(s,h){if(h)e:{var p=yt;s=s.split(".");for(var b=0;b<s.length-1;b++){var S=s[b];if(!(S in p))break e;p=p[S]}s=s[s.length-1],b=p[s],h=h(b),h!=b&&h!=null&&Re(p,s,{configurable:!0,writable:!0,value:h})}}Yt("Symbol",function(s){function h(S){if(this instanceof h)throw new TypeError("Symbol is not a constructor");return new p("jscomp_symbol_"+(S||"")+"_"+b++,S)}function p(S,P){this.g=S,Re(this,"description",{configurable:!0,writable:!0,value:P})}if(s)return s;p.prototype.toString=function(){return this.g};var b=0;return h}),Yt("Symbol.iterator",function(s){if(s)return s;s=Symbol("Symbol.iterator");for(var h="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),p=0;p<h.length;p++){var b=yt[h[p]];typeof b=="function"&&typeof b.prototype[s]!="function"&&Re(b.prototype,s,{configurable:!0,writable:!0,value:function(){return hn(me(this))}})}return s});function hn(s){return s={next:s},s[Symbol.iterator]=function(){return this},s}function Ct(s){var h=typeof Symbol!="undefined"&&Symbol.iterator&&s[Symbol.iterator];return h?h.call(s):{next:me(s)}}function Mt(s){if(!(s instanceof Array)){s=Ct(s);for(var h,p=[];!(h=s.next()).done;)p.push(h.value);s=p}return s}var Bn;if(typeof Object.setPrototypeOf=="function")Bn=Object.setPrototypeOf;else{var As;e:{var Eo={a:!0},To={};try{To.__proto__=Eo,As=To.a;break e}catch{}As=!1}Bn=As?function(s,h){if(s.__proto__=h,s.__proto__!==h)throw new TypeError(s+" is not extensible");return s}:null}var Xe=Bn;function gi(){this.u=!1,this.h=null,this.Ka=void 0,this.g=1,this.da=0,this.i=null}function Dr(s){if(s.u)throw new TypeError("Generator is already running");s.u=!0}gi.prototype.O=function(s){this.Ka=s};function Ar(s,h){s.i={Wa:h,$a:!0},s.g=s.da}gi.prototype.return=function(s){this.i={return:s},this.g=this.da};function Ga(s,h){return s.g=3,{value:h}}function Fr(s){this.g=new gi,this.h=s}function Gi(s,h){Dr(s.g);var p=s.g.h;return p?fa(s,"return"in p?p.return:function(b){return{value:b,done:!0}},h,s.g.return):(s.g.return(h),da(s))}function fa(s,h,p,b){try{var S=h.call(s.g.h,p);if(!(S instanceof Object))throw new TypeError("Iterator result "+S+" is not an object");if(!S.done)return s.g.u=!1,S;var P=S.value}catch(k){return s.g.h=null,Ar(s.g,k),da(s)}return s.g.h=null,b.call(s.g,P),da(s)}function da(s){for(;s.g.g;)try{var h=s.h(s.g);if(h)return s.g.u=!1,{value:h.value,done:!1}}catch(p){s.g.Ka=void 0,Ar(s.g,p)}if(s.g.u=!1,s.g.i){if(h=s.g.i,s.g.i=null,h.$a)throw h.Wa;return{value:h.return,done:!0}}return{value:void 0,done:!0}}function vr(s){this.next=function(h){return Dr(s.g),s.g.h?h=fa(s,s.g.h.next,h,s.g.O):(s.g.O(h),h=da(s)),h},this.throw=function(h){return Dr(s.g),s.g.h?h=fa(s,s.g.h.throw,h,s.g.O):(Ar(s.g,h),h=da(s)),h},this.return=function(h){return Gi(s,h)},this[Symbol.iterator]=function(){return this}}function qn(s,h){return h=new vr(new Fr(h)),Xe&&s.prototype&&Xe(h,s.prototype),h}Array.from||(Array.from=function(s){return[].slice.call(s)}),Object.assign||(Object.assign=function(s){for(var h=[].slice.call(arguments,1),p=0,b;p<h.length;p++)if(b=h[p])for(var S=s,P=Object.keys(b),k=0;k<P.length;k++){var K=P[k];S[K]=b[K]}return s});var Ha=setTimeout;function Ao(){}function Co(s,h){return function(){s.apply(h,arguments)}}function on(s){if(!(this instanceof on))throw new TypeError("Promises must be constructed via new");if(typeof s!="function")throw new TypeError("not a function");this.N=0,this.Ea=!1,this.I=void 0,this.ba=[],mn(s,this)}function Ne(s,h){for(;s.N===3;)s=s.I;s.N===0?s.ba.push(h):(s.Ea=!0,Hi(function(){var p=s.N===1?h.bb:h.cb;if(p===null)(s.N===1?Ce:qe)(h.promise,s.I);else{try{var b=p(s.I)}catch(S){qe(h.promise,S);return}Ce(h.promise,b)}}))}function Ce(s,h){try{if(h===s)throw new TypeError("A promise cannot be resolved with itself.");if(h&&(typeof h=="object"||typeof h=="function")){var p=h.then;if(h instanceof on){s.N=3,s.I=h,vt(s);return}if(typeof p=="function"){mn(Co(p,h),s);return}}s.N=1,s.I=h,vt(s)}catch(b){qe(s,b)}}function qe(s,h){s.N=2,s.I=h,vt(s)}function vt(s){s.N===2&&s.ba.length===0&&Hi(function(){s.Ea||typeof console!="undefined"&&console&&console.warn("Possible Unhandled Promise Rejection:",s.I)});for(var h=0,p=s.ba.length;h<p;h++)Ne(s,s.ba[h]);s.ba=null}function tt(s,h,p){this.bb=typeof s=="function"?s:null,this.cb=typeof h=="function"?h:null,this.promise=p}function mn(s,h){var p=!1;try{s(function(b){p||(p=!0,Ce(h,b))},function(b){p||(p=!0,qe(h,b))})}catch(b){p||(p=!0,qe(h,b))}}on.prototype.catch=function(s){return this.then(null,s)},on.prototype.then=function(s,h){var p=new this.constructor(Ao);return Ne(this,new tt(s,h,p)),p},on.prototype.finally=function(s){var h=this.constructor;return this.then(function(p){return h.resolve(s()).then(function(){return p})},function(p){return h.resolve(s()).then(function(){return h.reject(p)})})};function Un(s){return new on(function(h,p){function b(K,ne){try{if(ne&&(typeof ne=="object"||typeof ne=="function")){var ae=ne.then;if(typeof ae=="function"){ae.call(ne,function(ve){b(K,ve)},p);return}}S[K]=ne,--P==0&&h(S)}catch(ve){p(ve)}}if(!s||typeof s.length=="undefined")return p(new TypeError("Promise.all accepts an array"));var S=Array.prototype.slice.call(s);if(S.length===0)return h([]);for(var P=S.length,k=0;k<S.length;k++)b(k,S[k])})}function tr(s){return s&&typeof s=="object"&&s.constructor===on?s:new on(function(h){h(s)})}function cr(s){return new on(function(h,p){p(s)})}function yi(s){return new on(function(h,p){if(!s||typeof s.length=="undefined")return p(new TypeError("Promise.race accepts an array"));for(var b=0,S=s.length;b<S;b++)tr(s[b]).then(h,p)})}var Hi=typeof setImmediate=="function"&&function(s){setImmediate(s)}||function(s){Ha(s,0)};if(!window.Promise){window.Promise=on,on.prototype.then=on.prototype.then,on.all=Un,on.race=yi,on.resolve=tr,on.reject=cr;var zi=document.createTextNode(""),Fl=[];new MutationObserver(function(){for(var s=Fl.length,h=0;h<s;h++)Fl[h]();Fl.splice(0,s)}).observe(zi,{characterData:!0}),Hi=function(s){Fl.push(s),zi.textContent=0<zi.textContent.length?"":"a"}}(function(s,h){if(!(h in s)){var p=typeof global==typeof p?window:global,b=0,S=String(Math.random()),P="__symbol@@"+S,k=s.getOwnPropertyNames,K=s.getOwnPropertyDescriptor,ne=s.create,ae=s.keys,ve=s.freeze||s,Ge=s.defineProperty,nn=s.defineProperties,Tt=K(s,"getOwnPropertyNames"),We=s.prototype,Vt=We.hasOwnProperty,Rt=We.propertyIsEnumerable,Cn=We.toString,mt=function(He,Pt,un){Vt.call(He,P)||Ge(He,P,{enumerable:!1,configurable:!1,writable:!1,value:{}}),He[P]["@@"+Pt]=un},xr=function(He,Pt){var un=ne(He);return k(Pt).forEach(function(Le){Ta.call(Pt,Le)&&il(un,Le,Pt[Le])}),un},nt=function(){},Ea=function(He){return He!=P&&!Vt.call(oi,He)},ai=function(He){return He!=P&&Vt.call(oi,He)},Ta=function(He){var Pt=String(He);return ai(Pt)?Vt.call(this,Pt)&&!!this[P]&&this[P]["@@"+Pt]:Rt.call(this,He)},_e=function(He){return Ge(We,He,{enumerable:!1,configurable:!0,get:nt,set:function(Pt){co(this,He,{enumerable:!1,configurable:!0,writable:!0,value:Pt}),mt(this,He,!0)}}),oi[He]=Ge(s(He),"constructor",Zh),ve(oi[He])},ln=function He(Pt){if(this instanceof He)throw new TypeError("Symbol is not a constructor");return _e("__symbol:".concat(Pt||"",S,++b))},oi=ne(null),Zh={value:ln},Hu=function(He){return oi[He]},il=function(He,Pt,un){var Le=String(Pt);if(ai(Le)){if(Pt=co,un.enumerable){var Je=ne(un);Je.enumerable=!1}else Je=un;Pt(He,Le,Je),mt(He,Le,!!un.enumerable)}else Ge(He,Pt,un);return He},zu=function(He){return k(He).filter(ai).map(Hu)};Tt.value=il,Ge(s,"defineProperty",Tt),Tt.value=zu,Ge(s,h,Tt),Tt.value=function(He){return k(He).filter(Ea)},Ge(s,"getOwnPropertyNames",Tt),Tt.value=function(He,Pt){var un=zu(Pt);return un.length?ae(Pt).concat(un).forEach(function(Le){Ta.call(Pt,Le)&&il(He,Le,Pt[Le])}):nn(He,Pt),He},Ge(s,"defineProperties",Tt),Tt.value=Ta,Ge(We,"propertyIsEnumerable",Tt),Tt.value=ln,Ge(p,"Symbol",Tt),Tt.value=function(He){return He="__symbol:".concat("__symbol:",He,S),He in We?oi[He]:_e(He)},Ge(ln,"for",Tt),Tt.value=function(He){if(Ea(He))throw new TypeError(He+" is not a symbol");if(Vt.call(oi,He)&&(He=He.slice(10),He.slice(0,10)==="__symbol:"&&(He=He.slice(10),He!==S)))return He=He.slice(0,He.length-S.length),0<He.length?He:void 0},Ge(ln,"keyFor",Tt),Tt.value=function(He,Pt){var un=K(He,Pt);return un&&ai(Pt)&&(un.enumerable=Ta.call(He,Pt)),un},Ge(s,"getOwnPropertyDescriptor",Tt),Tt.value=function(He,Pt){return arguments.length===1||typeof Pt=="undefined"?ne(He):xr(He,Pt)},Ge(s,"create",Tt),Tt.value=function(){var He=Cn.call(this);return He==="[object String]"&&ai(this)?"[object Symbol]":He},Ge(We,"toString",Tt);try{if(ne(Ge({},"__symbol:",{get:function(){return Ge(this,"__symbol:",{value:!0})["__symbol:"]}}))["__symbol:"]===!0)var co=Ge;else throw"IE11"}catch{co=function(Pt,un,Le){var Je=K(We,un);delete We[un],Ge(Pt,un,Le),Ge(We,un,Je)}}}})(Object,"getOwnPropertySymbols"),function(s,h){var p=s.defineProperty,b=s.prototype,S=b.toString,P;"iterator match replace search split hasInstance isConcatSpreadable unscopables species toPrimitive toStringTag".split(" ").forEach(function(k){k in h||(p(h,k,{value:h(k)}),k==="toStringTag"&&(P=s.getOwnPropertyDescriptor(b,"toString"),P.value=function(){var K=S.call(this),ne=this==null?this:this[h.toStringTag];return ne==null?K:"[object "+ne+"]"},p(b,"toString",P)))})}(Object,Symbol),function(s,h,p){function b(){return this}h[s]||(h[s]=function(){var S=0,P=this,k={next:function(){var K=P.length<=S;return K?{done:K}:{done:K,value:P[S++]}}};return k[s]=b,k}),p[s]||(p[s]=function(){var S=String.fromCodePoint,P=this,k=0,K=P.length,ne={next:function(){var ae=K<=k,ve=ae?"":S(P.codePointAt(k));return k+=ve.length,ae?{done:ae}:{done:ae,value:ve}}};return ne[s]=b,ne})}(Symbol.iterator,Array.prototype,String.prototype);var Um=Object.prototype.toString;Object.prototype.toString=function(){return this===void 0?"[object Undefined]":this===null?"[object Null]":Um.call(this)},Object.keys=function(s){return Object.getOwnPropertyNames(s).filter(function(h){return(h=Object.getOwnPropertyDescriptor(s,h))&&h.enumerable})},String.prototype[Symbol.iterator]&&String.prototype.codePointAt||(String.prototype[Symbol.iterator]=function s(){var h,p=this;return qn(s,function(b){if(b.g==1&&(h=0),b.g!=3)return h<p.length?b=Ga(b,p[h]):(b.g=0,b=void 0),b;h++,b.g=2})}),Set.prototype[Symbol.iterator]||(Set.prototype[Symbol.iterator]=function s(){var h,p=this,b;return qn(s,function(S){if(S.g==1&&(h=[],p.forEach(function(P){h.push(P)}),b=0),S.g!=3)return b<h.length?S=Ga(S,h[b]):(S.g=0,S=void 0),S;b++,S.g=2})}),Map.prototype[Symbol.iterator]||(Map.prototype[Symbol.iterator]=function s(){var h,p=this,b;return qn(s,function(S){if(S.g==1&&(h=[],p.forEach(function(P,k){h.push([k,P])}),b=0),S.g!=3)return b<h.length?S=Ga(S,h[b]):(S.g=0,S=void 0),S;b++,S.g=2})});var Dc=document.createEvent("Event");if(Dc.initEvent("foo",!0,!0),Dc.preventDefault(),!Dc.defaultPrevented){var Gm=Event.prototype.preventDefault;Event.prototype.preventDefault=function(){this.cancelable&&(Gm.call(this),Object.defineProperty(this,"defaultPrevented",{get:function(){return!0},configurable:!0}))}}var Bl=/Trident/.test(navigator.userAgent);if(!window.Event||Bl&&typeof window.Event!="function"){var Cs=window.Event;if(window.Event=function(s,h){h=h||{};var p=document.createEvent("Event");return p.initEvent(s,!!h.bubbles,!!h.cancelable),p},Cs){for(var Fc in Cs)window.Event[Fc]=Cs[Fc];window.Event.prototype=Cs.prototype}}if((!window.CustomEvent||Bl&&typeof window.CustomEvent!="function")&&(window.CustomEvent=function(s,h){h=h||{};var p=document.createEvent("CustomEvent");return p.initCustomEvent(s,!!h.bubbles,!!h.cancelable,h.detail),p},window.CustomEvent.prototype=window.Event.prototype),!window.MouseEvent||Bl&&typeof window.MouseEvent!="function"){var za=window.MouseEvent;if(window.MouseEvent=function(s,h){h=h||{};var p=document.createEvent("MouseEvent");return p.initMouseEvent(s,!!h.bubbles,!!h.cancelable,h.view||window,h.detail,h.screenX,h.screenY,h.clientX,h.clientY,h.ctrlKey,h.altKey,h.shiftKey,h.metaKey,h.button,h.relatedTarget),p},za)for(var Bc in za)window.MouseEvent[Bc]=za[Bc];window.MouseEvent.prototype=za.prototype}Object.getOwnPropertyDescriptor(Node.prototype,"baseURI")||Object.defineProperty(Node.prototype,"baseURI",{get:function(){var s=(this.ownerDocument||this).querySelector("base[href]");return s&&s.href||window.location.href},configurable:!0,enumerable:!0});var Uc,Ul,Gc=Element.prototype,Hc=(Uc=Object.getOwnPropertyDescriptor(Gc,"attributes"))!==null&&Uc!==void 0?Uc:Object.getOwnPropertyDescriptor(Node.prototype,"attributes"),Gl=(Ul=Hc==null?void 0:Hc.get)!==null&&Ul!==void 0?Ul:function(){return this.attributes},zc=Array.prototype.map;Gc.hasOwnProperty("getAttributeNames")||(Gc.getAttributeNames=function(){return zc.call(Gl.call(this),function(s){return s.name})});var Vc,Hl=Element.prototype;Hl.hasOwnProperty("matches")||(Hl.matches=(Vc=Hl.webkitMatchesSelector)!==null&&Vc!==void 0?Vc:Hl.msMatchesSelector);var Hm=Node.prototype.appendChild;function Wc(s){s=s.prototype,s.hasOwnProperty("append")||Object.defineProperty(s,"append",{configurable:!0,enumerable:!0,writable:!0,value:function(h){for(var p=[],b=0;b<arguments.length;++b)p[b]=arguments[b];for(p=Ct(p),b=p.next();!b.done;b=p.next())b=b.value,Hm.call(this,typeof b=="string"?document.createTextNode(b):b)}})}Wc(Document),Wc(DocumentFragment),Wc(Element);var $c,zl,Vl=Node.prototype.insertBefore,Ed=(zl=($c=Object.getOwnPropertyDescriptor(Node.prototype,"firstChild"))===null||$c===void 0?void 0:$c.get)!==null&&zl!==void 0?zl:function(){return this.firstChild};function jc(s){s=s.prototype,s.hasOwnProperty("prepend")||Object.defineProperty(s,"prepend",{configurable:!0,enumerable:!0,writable:!0,value:function(h){for(var p=[],b=0;b<arguments.length;++b)p[b]=arguments[b];b=Ed.call(this),p=Ct(p);for(var S=p.next();!S.done;S=p.next())S=S.value,Vl.call(this,typeof S=="string"?document.createTextNode(S):S,b)}})}jc(Document),jc(DocumentFragment),jc(Element);var qc,Xc,zm=Node.prototype.appendChild,Yc=Node.prototype.removeChild,Vm=(Xc=(qc=Object.getOwnPropertyDescriptor(Node.prototype,"firstChild"))===null||qc===void 0?void 0:qc.get)!==null&&Xc!==void 0?Xc:function(){return this.firstChild};function Jc(s){s=s.prototype,s.hasOwnProperty("replaceChildren")||Object.defineProperty(s,"replaceChildren",{configurable:!0,enumerable:!0,writable:!0,value:function(h){for(var p=[],b=0;b<arguments.length;++b)p[b]=arguments[b];for(;(b=Vm.call(this))!==null;)Yc.call(this,b);for(p=Ct(p),b=p.next();!b.done;b=p.next())b=b.value,zm.call(this,typeof b=="string"?document.createTextNode(b):b)}})}Jc(Document),Jc(DocumentFragment),Jc(Element);var Wl,Zc,$l,Kc,Wm=Node.prototype.insertBefore,Bw=(Zc=(Wl=Object.getOwnPropertyDescriptor(Node.prototype,"parentNode"))===null||Wl===void 0?void 0:Wl.get)!==null&&Zc!==void 0?Zc:function(){return this.parentNode},Uw=(Kc=($l=Object.getOwnPropertyDescriptor(Node.prototype,"nextSibling"))===null||$l===void 0?void 0:$l.get)!==null&&Kc!==void 0?Kc:function(){return this.nextSibling};function Td(s){s=s.prototype,s.hasOwnProperty("after")||Object.defineProperty(s,"after",{configurable:!0,enumerable:!0,writable:!0,value:function(h){for(var p=[],b=0;b<arguments.length;++b)p[b]=arguments[b];if(b=Bw.call(this),b!==null){var S=Uw.call(this);p=Ct(p);for(var P=p.next();!P.done;P=p.next())P=P.value,Wm.call(b,typeof P=="string"?document.createTextNode(P):P,S)}}})}Td(CharacterData),Td(Element);var jl,Ls,Ad=Node.prototype.insertBefore,Qc=(Ls=(jl=Object.getOwnPropertyDescriptor(Node.prototype,"parentNode"))===null||jl===void 0?void 0:jl.get)!==null&&Ls!==void 0?Ls:function(){return this.parentNode};function ql(s){s=s.prototype,s.hasOwnProperty("before")||Object.defineProperty(s,"before",{configurable:!0,enumerable:!0,writable:!0,value:function(h){for(var p=[],b=0;b<arguments.length;++b)p[b]=arguments[b];if(b=Qc.call(this),b!==null){p=Ct(p);for(var S=p.next();!S.done;S=p.next())S=S.value,Ad.call(b,typeof S=="string"?document.createTextNode(S):S,this)}}})}ql(CharacterData),ql(Element);var Rs,Ps,eh=Node.prototype.removeChild,th=(Ps=(Rs=Object.getOwnPropertyDescriptor(Node.prototype,"parentNode"))===null||Rs===void 0?void 0:Rs.get)!==null&&Ps!==void 0?Ps:function(){return this.parentNode};function nh(s){s=s.prototype,s.hasOwnProperty("remove")||Object.defineProperty(s,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){var h=th.call(this);h&&eh.call(h,this)}})}nh(CharacterData),nh(Element);var rh,ih,It=Node.prototype.insertBefore,Gw=Node.prototype.removeChild,Cd=(ih=(rh=Object.getOwnPropertyDescriptor(Node.prototype,"parentNode"))===null||rh===void 0?void 0:rh.get)!==null&&ih!==void 0?ih:function(){return this.parentNode};function ah(s){s=s.prototype,s.hasOwnProperty("replaceWith")||Object.defineProperty(s,"replaceWith",{configurable:!0,enumerable:!0,writable:!0,value:function(h){for(var p=[],b=0;b<arguments.length;++b)p[b]=arguments[b];if(b=Cd.call(this),b!==null){p=Ct(p);for(var S=p.next();!S.done;S=p.next())S=S.value,It.call(b,typeof S=="string"?document.createTextNode(S):S,this);Gw.call(b,this)}}})}ah(CharacterData),ah(Element);var Xl=window.Element.prototype,Yl=window.HTMLElement.prototype,Ld=window.SVGElement.prototype;!Yl.hasOwnProperty("classList")||Xl.hasOwnProperty("classList")||Ld.hasOwnProperty("classList")||Object.defineProperty(Xl,"classList",Object.getOwnPropertyDescriptor(Yl,"classList"));var $m=document.createElement("style");$m.textContent=`body {transition: opacity ease-in 0.2s; } 
body[unresolved] {opacity: 0; display: block; overflow: hidden; position: relative; } 
`;var jm=document.querySelector("head");jm.insertBefore($m,jm.firstChild);var pa=window;pa.WebComponents=pa.WebComponents||{flags:{}};var Rd=document.querySelector('script[src*="webcomponents-bundle"]'),Pd=/wc-(.+)/,Br={};if(!Br.noOpts){if(location.search.slice(1).split("&").forEach(function(s){s=s.split("=");var h;s[0]&&(h=s[0].match(Pd))&&(Br[h[1]]=s[1]||!0)}),Rd)for(var Od=0,Jl=void 0;Jl=Rd.attributes[Od];Od++)Jl.name!=="src"&&(Br[Jl.name]=Jl.value||!0);var Nd={};Br.log&&Br.log.split&&Br.log.split(",").forEach(function(s){Nd[s]=!0}),Br.log=Nd}pa.WebComponents.flags=Br;var kd=Br.shadydom;if(kd){pa.ShadyDOM=pa.ShadyDOM||{},pa.ShadyDOM.force=kd;var Id=Br.noPatch;pa.ShadyDOM.noPatch=Id==="true"?!0:Id}var Dd=Br.register||Br.ce;Dd&&window.customElements&&(pa.customElements.forcePolyfill=Dd),function(){function s(){}function h(Le,Je){if(!Le.childNodes.length)return[];switch(Le.nodeType){case Node.DOCUMENT_NODE:return Vt.call(Le,Je);case Node.DOCUMENT_FRAGMENT_NODE:return Rt.call(Le,Je);default:return We.call(Le,Je)}}var p=typeof HTMLTemplateElement=="undefined",b=!(document.createDocumentFragment().cloneNode()instanceof DocumentFragment),S=!1;/Trident/.test(navigator.userAgent)&&function(){function Le(wt,zn){if(wt instanceof DocumentFragment)for(var Vu;Vu=wt.firstChild;)Ot.call(this,Vu,zn);else Ot.call(this,wt,zn);return wt}S=!0;var Je=Node.prototype.cloneNode;Node.prototype.cloneNode=function(wt){return wt=Je.call(this,wt),this instanceof DocumentFragment&&(wt.__proto__=DocumentFragment.prototype),wt},DocumentFragment.prototype.querySelectorAll=HTMLElement.prototype.querySelectorAll,DocumentFragment.prototype.querySelector=HTMLElement.prototype.querySelector,Object.defineProperties(DocumentFragment.prototype,{nodeType:{get:function(){return Node.DOCUMENT_FRAGMENT_NODE},configurable:!0},localName:{get:function(){},configurable:!0},nodeName:{get:function(){return"#document-fragment"},configurable:!0}});var Ot=Node.prototype.insertBefore;Node.prototype.insertBefore=Le;var dn=Node.prototype.appendChild;Node.prototype.appendChild=function(wt){return wt instanceof DocumentFragment?Le.call(this,wt,null):dn.call(this,wt),wt};var Or=Node.prototype.removeChild,Ni=Node.prototype.replaceChild;Node.prototype.replaceChild=function(wt,zn){return wt instanceof DocumentFragment?(Le.call(this,wt,zn),Or.call(this,zn)):Ni.call(this,wt,zn),zn},Document.prototype.createDocumentFragment=function(){var wt=this.createElement("df");return wt.__proto__=DocumentFragment.prototype,wt};var Aa=Document.prototype.importNode;Document.prototype.importNode=function(wt,zn){return zn=Aa.call(this,wt,zn||!1),wt instanceof DocumentFragment&&(zn.__proto__=DocumentFragment.prototype),zn}}();var P=Node.prototype.cloneNode,k=Document.prototype.createElement,K=Document.prototype.importNode,ne=Node.prototype.removeChild,ae=Node.prototype.appendChild,ve=Node.prototype.replaceChild,Ge=DOMParser.prototype.parseFromString,nn=Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,"innerHTML")||{get:function(){return this.innerHTML},set:function(Le){this.innerHTML=Le}},Tt=Object.getOwnPropertyDescriptor(window.Node.prototype,"childNodes")||{get:function(){return this.childNodes}},We=Element.prototype.querySelectorAll,Vt=Document.prototype.querySelectorAll,Rt=DocumentFragment.prototype.querySelectorAll,Cn=function(){if(!p){var Le=document.createElement("template"),Je=document.createElement("template");return Je.content.appendChild(document.createElement("div")),Le.content.appendChild(Je),Le=Le.cloneNode(!0),Le.content.childNodes.length===0||Le.content.firstChild.content.childNodes.length===0||b}}();if(p){var mt=document.implementation.createHTMLDocument("template"),xr=!0,nt=document.createElement("style");nt.textContent="template{display:none;}";var Ea=document.head;Ea.insertBefore(nt,Ea.firstElementChild),s.prototype=Object.create(HTMLElement.prototype);var ai=!document.createElement("div").hasOwnProperty("innerHTML");s.Z=function(Le){if(!Le.content&&Le.namespaceURI===document.documentElement.namespaceURI){Le.content=mt.createDocumentFragment();for(var Je;Je=Le.firstChild;)ae.call(Le.content,Je);if(ai)Le.__proto__=s.prototype;else if(Le.cloneNode=function(Ot){return s.sa(this,Ot)},xr)try{_e(Le),ln(Le)}catch{xr=!1}s.bootstrap(Le.content)}};var Ta={option:["select"],thead:["table"],col:["colgroup","table"],tr:["tbody","table"],th:["tr","tbody","table"],td:["tr","tbody","table"]},_e=function(Le){Object.defineProperty(Le,"innerHTML",{get:function(){return co(this)},set:function(Je){var Ot=Ta[(/<([a-z][^/\0>\x20\t\r\n\f]+)/i.exec(Je)||["",""])[1].toLowerCase()];if(Ot)for(var dn=0;dn<Ot.length;dn++)Je="<"+Ot[dn]+">"+Je+"</"+Ot[dn]+">";for(mt.body.innerHTML=Je,s.bootstrap(mt);this.content.firstChild;)ne.call(this.content,this.content.firstChild);if(Je=mt.body,Ot)for(dn=0;dn<Ot.length;dn++)Je=Je.lastChild;for(;Je.firstChild;)ae.call(this.content,Je.firstChild)},configurable:!0})},ln=function(Le){Object.defineProperty(Le,"outerHTML",{get:function(){return"<template>"+this.innerHTML+"</template>"},set:function(Je){if(this.parentNode){for(mt.body.innerHTML=Je,Je=this.ownerDocument.createDocumentFragment();mt.body.firstChild;)ae.call(Je,mt.body.firstChild);ve.call(this.parentNode,Je,this)}else throw Error("Failed to set the 'outerHTML' property on 'Element': This element has no parent node.")},configurable:!0})};_e(s.prototype),ln(s.prototype),s.bootstrap=function(Le){Le=h(Le,"template");for(var Je=0,Ot=Le.length,dn;Je<Ot&&(dn=Le[Je]);Je++)s.Z(dn)},document.addEventListener("DOMContentLoaded",function(){s.bootstrap(document)}),Document.prototype.createElement=function(){var Le=k.apply(this,arguments);return Le.localName==="template"&&s.Z(Le),Le},DOMParser.prototype.parseFromString=function(){var Le=Ge.apply(this,arguments);return s.bootstrap(Le),Le},Object.defineProperty(HTMLElement.prototype,"innerHTML",{get:function(){return co(this)},set:function(Le){nn.set.call(this,Le),s.bootstrap(this)},configurable:!0,enumerable:!0});var oi=/[&\u00A0"]/g,Zh=/[&\u00A0<>]/g,Hu=function(Le){switch(Le){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"\xA0":return"&nbsp;"}};nt=function(Le){for(var Je={},Ot=0;Ot<Le.length;Ot++)Je[Le[Ot]]=!0;return Je};var il=nt("area base br col command embed hr img input keygen link meta param source track wbr".split(" ")),zu=nt("style script xmp iframe noembed noframes plaintext noscript".split(" ")),co=function(Le,Je){Le.localName==="template"&&(Le=Le.content);for(var Ot="",dn=Je?Je(Le):Tt.get.call(Le),Or=0,Ni=dn.length,Aa;Or<Ni&&(Aa=dn[Or]);Or++){e:{var wt=Aa,zn=Le,Vu=Je;switch(wt.nodeType){case Node.ELEMENT_NODE:for(var Kh=wt.localName,Wu="<"+Kh,Lg=wt.attributes,qp=0;zn=Lg[qp];qp++)Wu+=" "+zn.name+'="'+zn.value.replace(oi,Hu)+'"';Wu+=">",wt=il[Kh]?Wu:Wu+co(wt,Vu)+"</"+Kh+">";break e;case Node.TEXT_NODE:wt=wt.data,wt=zn&&zu[zn.localName]?wt:wt.replace(Zh,Hu);break e;case Node.COMMENT_NODE:wt="<!--"+wt.data+"-->";break e;default:throw window.console.error(wt),Error("not implemented")}}Ot+=wt}return Ot}}if(p||Cn){s.sa=function(Le,Je){var Ot=P.call(Le,!1);return this.Z&&this.Z(Ot),Je&&(ae.call(Ot.content,P.call(Le.content,!0)),He(Ot.content,Le.content)),Ot};var He=function(Le,Je){if(Je.querySelectorAll&&(Je=h(Je,"template"),Je.length!==0)){Le=h(Le,"template");for(var Ot=0,dn=Le.length,Or,Ni;Ot<dn;Ot++)Ni=Je[Ot],Or=Le[Ot],s&&s.Z&&s.Z(Ni),ve.call(Or.parentNode,Pt.call(Ni,!0),Or)}},Pt=Node.prototype.cloneNode=function(Le){if(!S&&b&&this instanceof DocumentFragment)if(Le)var Je=un.call(this.ownerDocument,this,!0);else return this.ownerDocument.createDocumentFragment();else this.nodeType===Node.ELEMENT_NODE&&this.localName==="template"&&this.namespaceURI==document.documentElement.namespaceURI?Je=s.sa(this,Le):Je=P.call(this,Le);return Le&&He(Je,this),Je},un=Document.prototype.importNode=function(Le,Je){if(Je=Je||!1,Le.localName==="template")return s.sa(Le,Je);var Ot=K.call(this,Le,Je);if(Je){He(Ot,Le),Le=h(Ot,'script:not([type]),script[type="application/javascript"],script[type="text/javascript"]');for(var dn,Or=0;Or<Le.length;Or++){dn=Le[Or],Je=k.call(document,"script"),Je.textContent=dn.textContent;for(var Ni=dn.attributes,Aa=0,wt;Aa<Ni.length;Aa++)wt=Ni[Aa],Je.setAttribute(wt.name,wt.value);ve.call(dn.parentNode,Je,dn)}}return Ot}}p&&(window.HTMLTemplateElement=s)}();function oh(){}oh.prototype.toJSON=function(){return{}};function En(s){return s.__shady||(s.__shady=new oh),s.__shady}function bt(s){return s&&s.__shady}var st=window.ShadyDOM||{};st.Ya=!(!Element.prototype.attachShadow||!Node.prototype.getRootNode);var Zl=Object.getOwnPropertyDescriptor(Node.prototype,"firstChild");st.H=!!(Zl&&Zl.configurable&&Zl.get),st.ya=st.force||!st.Ya,st.J=st.noPatch||!1,st.fa=st.preferPerformance,st.Aa=st.J==="on-demand",st.Na=navigator.userAgent.match("Trident");function Fd(){return Document.prototype.msElementsFromPoint?"msElementsFromPoint":"elementsFromPoint"}function va(s){return(s=bt(s))&&s.firstChild!==void 0}function Pn(s){return s instanceof ShadowRoot}function Va(s){return(s=(s=bt(s))&&s.root)&&zo(s)}var Ur=Element.prototype,Tn=Ur.matches||Ur.matchesSelector||Ur.mozMatchesSelector||Ur.msMatchesSelector||Ur.oMatchesSelector||Ur.webkitMatchesSelector,wi=document.createTextNode(""),sh=0,Zr=[];new MutationObserver(function(){for(;Zr.length;)try{Zr.shift()()}catch(s){throw wi.textContent=sh++,s}}).observe(wi,{characterData:!0});function Lo(s){Zr.push(s),wi.textContent=sh++}var lh=document.contains?function(s,h){return s.__shady_native_contains(h)}:function(s,h){return s===h||s.documentElement&&s.documentElement.__shady_native_contains(h)};function uh(s,h){for(;h;){if(h==s)return!0;h=h.__shady_parentNode}return!1}function Os(s){for(var h=s.length-1;0<=h;h--){var p=s[h],b=p.getAttribute("id")||p.getAttribute("name");b&&b!=="length"&&isNaN(b)&&(s[b]=p)}return s.item=function(S){return s[S]},s.namedItem=function(S){if(S!=="length"&&isNaN(S)&&s[S])return s[S];for(var P=Ct(s),k=P.next();!k.done;k=P.next())if(k=k.value,(k.getAttribute("id")||k.getAttribute("name"))==S)return k;return null},s}function Bd(s){var h=[];for(s=s.__shady_native_firstChild;s;s=s.__shady_native_nextSibling)h.push(s);return h}function ma(s){var h=[];for(s=s.__shady_firstChild;s;s=s.__shady_nextSibling)h.push(s);return h}function Ud(s,h,p){if(p.configurable=!0,p.value)s[h]=p.value;else try{Object.defineProperty(s,h,p)}catch{}}function hr(s,h,p,b){p=p===void 0?"":p;for(var S in h)b&&0<=b.indexOf(S)||Ud(s,p+S,h[S])}function Kl(s,h){for(var p in h)p in s&&Ud(s,p,h[p])}function wn(s){var h={};return Object.getOwnPropertyNames(s).forEach(function(p){h[p]=Object.getOwnPropertyDescriptor(s,p)}),h}function ch(s,h){for(var p=Object.getOwnPropertyNames(h),b=0,S;b<p.length;b++)S=p[b],s[S]=h[S]}function Gd(s){return s instanceof Node?s:document.createTextNode(""+s)}function Ro(s){for(var h=[],p=0;p<arguments.length;++p)h[p]=arguments[p];if(h.length===1)return Gd(h[0]);p=document.createDocumentFragment(),h=Ct(h);for(var b=h.next();!b.done;b=h.next())p.appendChild(Gd(b.value));return p}var Ns=[],Ql;function hh(s){Ql||(Ql=!0,Lo(eu)),Ns.push(s)}function eu(){Ql=!1;for(var s=!!Ns.length;Ns.length;)Ns.shift()();return s}eu.list=Ns;function fh(){this.g=!1,this.addedNodes=[],this.removedNodes=[],this.oa=new Set}function qm(s){s.g||(s.g=!0,Lo(function(){s.flush()}))}fh.prototype.flush=function(){if(this.g){this.g=!1;var s=this.takeRecords();s.length&&this.oa.forEach(function(h){h(s)})}},fh.prototype.takeRecords=function(){if(this.addedNodes.length||this.removedNodes.length){var s=[{addedNodes:this.addedNodes,removedNodes:this.removedNodes}];return this.addedNodes=[],this.removedNodes=[],s}return[]};function Xm(s,h){var p=En(s);p.ea||(p.ea=new fh),p.ea.oa.add(h);var b=p.ea;return{Ra:h,X:b,Sa:s,takeRecords:function(){return b.takeRecords()}}}function Ym(s){var h=s&&s.X;h&&(h.oa.delete(s.Ra),h.oa.size||(En(s.Sa).ea=null))}function Jm(s,h){var p=h.getRootNode();return s.map(function(b){var S=p===b.target.getRootNode();if(S&&b.addedNodes){if(S=[].slice.call(b.addedNodes).filter(function(P){return p===P.getRootNode()}),S.length)return b=Object.create(b),Object.defineProperty(b,"addedNodes",{value:S,configurable:!0}),b}else if(S)return b}).filter(function(b){return b})}var Zm=/[&\u00A0"]/g,Km=/[&\u00A0<>]/g;function tu(s){switch(s){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"\xA0":return"&nbsp;"}}function Hd(s){for(var h={},p=0;p<s.length;p++)h[s[p]]=!0;return h}var Qm=Hd("area base br col command embed hr img input keygen link meta param source track wbr".split(" ")),eg=Hd("style script xmp iframe noembed noframes plaintext noscript".split(" "));function dh(s,h){s.localName==="template"&&(s=s.content);for(var p="",b=h?h(s):s.childNodes,S=0,P=b.length,k=void 0;S<P&&(k=b[S]);S++){e:{var K=k,ne=s,ae=h;switch(K.nodeType){case Node.ELEMENT_NODE:ne=K.localName;for(var ve="<"+ne,Ge=K.attributes,nn=0,Tt;Tt=Ge[nn];nn++)ve+=" "+Tt.name+'="'+Tt.value.replace(Zm,tu)+'"';ve+=">",K=Qm[ne]?ve:ve+dh(K,ae)+"</"+ne+">";break e;case Node.TEXT_NODE:K=K.data,K=ne&&eg[ne.localName]?K:K.replace(Km,tu);break e;case Node.COMMENT_NODE:K="<!--"+K.data+"-->";break e;default:throw window.console.error(K),Error("not implemented")}}p+=K}return p}var Wa=st.H,ph={querySelector:function(s){return this.__shady_native_querySelector(s)},querySelectorAll:function(s){return this.__shady_native_querySelectorAll(s)}},zd={};function $a(s){zd[s]=function(h){return h["__shady_native_"+s]}}function ks(s,h){hr(s,h,"__shady_native_");for(var p in h)$a(p)}function An(s,h){h=h===void 0?[]:h;for(var p=0;p<h.length;p++){var b=h[p],S=Object.getOwnPropertyDescriptor(s,b);S&&(Object.defineProperty(s,"__shady_native_"+b,S),S.value?ph[b]||(ph[b]=S.value):$a(b))}}var Cr=document.createTreeWalker(document,NodeFilter.SHOW_ALL,null,!1),mr=document.createTreeWalker(document,NodeFilter.SHOW_ELEMENT,null,!1),vh=document.implementation.createHTMLDocument("inert");function nu(s){for(var h;h=s.__shady_native_firstChild;)s.__shady_native_removeChild(h)}var Po=["firstElementChild","lastElementChild","children","childElementCount"],Oo=["querySelector","querySelectorAll","append","prepend","replaceChildren"];function mh(){var s=["dispatchEvent","addEventListener","removeEventListener"];window.EventTarget?(An(window.EventTarget.prototype,s),window.__shady_native_addEventListener===void 0&&An(Window.prototype,s)):(An(Node.prototype,s),An(Window.prototype,s)),Wa?An(Node.prototype,"parentNode firstChild lastChild previousSibling nextSibling childNodes parentElement textContent".split(" ")):ks(Node.prototype,{parentNode:{get:function(){return Cr.currentNode=this,Cr.parentNode()}},firstChild:{get:function(){return Cr.currentNode=this,Cr.firstChild()}},lastChild:{get:function(){return Cr.currentNode=this,Cr.lastChild()}},previousSibling:{get:function(){return Cr.currentNode=this,Cr.previousSibling()}},nextSibling:{get:function(){return Cr.currentNode=this,Cr.nextSibling()}},childNodes:{get:function(){var h=[];Cr.currentNode=this;for(var p=Cr.firstChild();p;)h.push(p),p=Cr.nextSibling();return h}},parentElement:{get:function(){return mr.currentNode=this,mr.parentNode()}},textContent:{get:function(){switch(this.nodeType){case Node.ELEMENT_NODE:case Node.DOCUMENT_FRAGMENT_NODE:for(var h=document.createTreeWalker(this,NodeFilter.SHOW_TEXT,null,!1),p="",b;b=h.nextNode();)p+=b.nodeValue;return p;default:return this.nodeValue}},set:function(h){switch((typeof h=="undefined"||h===null)&&(h=""),this.nodeType){case Node.ELEMENT_NODE:case Node.DOCUMENT_FRAGMENT_NODE:nu(this),(0<h.length||this.nodeType===Node.ELEMENT_NODE)&&this.__shady_native_insertBefore(document.createTextNode(h),void 0);break;default:this.nodeValue=h}}}}),An(Node.prototype,"appendChild insertBefore removeChild replaceChild cloneNode contains".split(" ")),An(HTMLElement.prototype,["parentElement","contains"]),s={firstElementChild:{get:function(){return mr.currentNode=this,mr.firstChild()}},lastElementChild:{get:function(){return mr.currentNode=this,mr.lastChild()}},children:{get:function(){var h=[];mr.currentNode=this;for(var p=mr.firstChild();p;)h.push(p),p=mr.nextSibling();return Os(h)}},childElementCount:{get:function(){return this.children?this.children.length:0}}},Wa?(An(Element.prototype,Po),An(Element.prototype,["previousElementSibling","nextElementSibling","innerHTML","className"]),An(HTMLElement.prototype,["children","innerHTML","className"])):(ks(Element.prototype,s),ks(Element.prototype,{previousElementSibling:{get:function(){return mr.currentNode=this,mr.previousSibling()}},nextElementSibling:{get:function(){return mr.currentNode=this,mr.nextSibling()}},innerHTML:{get:function(){return dh(this,Bd)},set:function(h){var p=this.localName==="template"?this.content:this;nu(p);var b=this.localName||"div";for(b=this.namespaceURI&&this.namespaceURI!==vh.namespaceURI?vh.createElementNS(this.namespaceURI,b):vh.createElement(b),b.innerHTML=h,h=this.localName==="template"?b.content:b;b=h.__shady_native_firstChild;)p.__shady_native_insertBefore(b,void 0)}},className:{get:function(){return this.getAttribute("class")||""},set:function(h){this.setAttribute("class",h)}}})),An(Element.prototype,"setAttribute getAttribute hasAttribute removeAttribute focus blur".split(" ")),An(Element.prototype,Oo),An(HTMLElement.prototype,["focus","blur"]),window.HTMLTemplateElement&&An(window.HTMLTemplateElement.prototype,["innerHTML"]),Wa?An(DocumentFragment.prototype,Po):ks(DocumentFragment.prototype,s),An(DocumentFragment.prototype,Oo),Wa?(An(Document.prototype,Po),An(Document.prototype,["activeElement"])):ks(Document.prototype,s),An(Document.prototype,["importNode","getElementById","elementFromPoint",Fd()]),An(Document.prototype,Oo)}var Is=wn({get childNodes(){return this.__shady_childNodes},get firstChild(){return this.__shady_firstChild},get lastChild(){return this.__shady_lastChild},get childElementCount(){return this.__shady_childElementCount},get children(){return this.__shady_children},get firstElementChild(){return this.__shady_firstElementChild},get lastElementChild(){return this.__shady_lastElementChild},get shadowRoot(){return this.__shady_shadowRoot}}),ja=wn({get textContent(){return this.__shady_textContent},set textContent(s){this.__shady_textContent=s},get innerHTML(){return this.__shady_innerHTML},set innerHTML(s){this.__shady_innerHTML=s}}),No=wn({get parentElement(){return this.__shady_parentElement},get parentNode(){return this.__shady_parentNode},get nextSibling(){return this.__shady_nextSibling},get previousSibling(){return this.__shady_previousSibling},get nextElementSibling(){return this.__shady_nextElementSibling},get previousElementSibling(){return this.__shady_previousElementSibling},get className(){return this.__shady_className},set className(s){this.__shady_className=s}});function bi(s){for(var h in s){var p=s[h];p&&(p.enumerable=!1)}}bi(Is),bi(ja),bi(No);var Xn=st.H||st.J===!0,qa=Xn?function(){}:function(s){var h=En(s);h.Pa||(h.Pa=!0,Kl(s,No))},an=Xn?function(){}:function(s){var h=En(s);h.Oa||(h.Oa=!0,Kl(s,Is),window.customElements&&window.customElements.polyfillWrapFlushCallback&&!st.J||Kl(s,ja))},Vi="__eventWrappers"+Date.now(),Xa=function(){var s=Object.getOwnPropertyDescriptor(Event.prototype,"composed");return s?function(h){return s.get.call(h)}:null}(),sn=function(){function s(){}var h=!1,p={get capture(){return h=!0,!1}};return window.addEventListener("test",s,p),window.removeEventListener("test",s,p),h}();function Ds(s){if(s&&typeof s=="object")var h=!!s.capture,p=!!s.once,b=!!s.passive,S=s.U;else h=!!s,b=p=!1;return{La:S,capture:h,once:p,passive:b,Ja:sn?s:h}}var ga={blur:!0,focus:!0,focusin:!0,focusout:!0,click:!0,dblclick:!0,mousedown:!0,mouseenter:!0,mouseleave:!0,mousemove:!0,mouseout:!0,mouseover:!0,mouseup:!0,wheel:!0,beforeinput:!0,input:!0,keydown:!0,keyup:!0,compositionstart:!0,compositionupdate:!0,compositionend:!0,touchstart:!0,touchend:!0,touchmove:!0,touchcancel:!0,pointerover:!0,pointerenter:!0,pointerdown:!0,pointermove:!0,pointerup:!0,pointercancel:!0,pointerout:!0,pointerleave:!0,gotpointercapture:!0,lostpointercapture:!0,dragstart:!0,drag:!0,dragenter:!0,dragleave:!0,dragover:!0,drop:!0,dragend:!0,DOMActivate:!0,DOMFocusIn:!0,DOMFocusOut:!0,keypress:!0},xi={DOMAttrModified:!0,DOMAttributeNameChanged:!0,DOMCharacterDataModified:!0,DOMElementNameChanged:!0,DOMNodeInserted:!0,DOMNodeInsertedIntoDocument:!0,DOMNodeRemoved:!0,DOMNodeRemovedFromDocument:!0,DOMSubtreeModified:!0};function Vd(s){return s instanceof Node?s.__shady_getRootNode():s}function ru(s,h){var p=[],b=s;for(s=Vd(s);b;)p.push(b),b=b.__shady_assignedSlot?b.__shady_assignedSlot:b.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&b.host&&(h||b!==s)?b.host:b.__shady_parentNode;return p[p.length-1]===document&&p.push(window),p}function iu(s){return s.__composedPath||(s.__composedPath=ru(s.target,!0)),s.__composedPath}function gh(s,h){if(!Pn)return s;s=ru(s,!0);for(var p=0,b,S=void 0,P,k=void 0;p<h.length;p++)if(b=h[p],P=Vd(b),P!==S&&(k=s.indexOf(P),S=P),!Pn(P)||-1<k)return b}function ko(s){function h(p,b){return p=new s(p,b),p.__composed=b&&!!b.composed,p}return h.__proto__=s,h.prototype=s.prototype,h}var Gr={focus:!0,blur:!0};function ya(s){return s.__target!==s.target||s.__relatedTarget!==s.relatedTarget}function Wd(s,h,p){if(p=h.__handlers&&h.__handlers[s.type]&&h.__handlers[s.type][p])for(var b=0,S;(S=p[b])&&(!ya(s)||s.target!==s.relatedTarget)&&(S.call(h,s),!s.__immediatePropagationStopped);b++);}function $d(s){var h=s.composedPath(),p=h.map(function(ne){return gh(ne,h)}),b=s.bubbles;Object.defineProperty(s,"currentTarget",{configurable:!0,enumerable:!0,get:function(){return k}});var S=Event.CAPTURING_PHASE;Object.defineProperty(s,"eventPhase",{configurable:!0,enumerable:!0,get:function(){return S}});for(var P=h.length-1;0<=P;P--){var k=h[P];if(S=k===p[P]?Event.AT_TARGET:Event.CAPTURING_PHASE,Wd(s,k,"capture"),s.ra)return}for(P=0;P<h.length;P++){k=h[P];var K=k===p[P];if((K||b)&&(S=K?Event.AT_TARGET:Event.BUBBLING_PHASE,Wd(s,k,"bubble"),s.ra))return}S=0,k=null}function jd(s,h,p,b,S,P){for(var k=0;k<s.length;k++){var K=s[k],ne=K.type,ae=K.capture,ve=K.once,Ge=K.passive;if(h===K.node&&p===ne&&b===ae&&S===ve&&P===Ge)return k}return-1}function Io(s){return eu(),!st.fa&&this instanceof Node&&!lh(document,this)?(s.__target||wh(s,this),$d(s)):this.__shady_native_dispatchEvent(s)}function yh(s,h,p){var b=Ds(p),S=b.capture,P=b.once,k=b.passive,K=b.La;if(b=b.Ja,h){var ne=typeof h;if((ne==="function"||ne==="object")&&(ne!=="object"||h.handleEvent&&typeof h.handleEvent=="function")){if(xi[s])return this.__shady_native_addEventListener(s,h,b);var ae=K||this;if(K=h[Vi]){if(-1<jd(K,ae,s,S,P,k))return}else h[Vi]=[];K=function(ve){if(P&&this.__shady_removeEventListener(s,h,p),ve.__target||wh(ve),ae!==this){var Ge=Object.getOwnPropertyDescriptor(ve,"currentTarget");Object.defineProperty(ve,"currentTarget",{get:function(){return ae},configurable:!0});var nn=Object.getOwnPropertyDescriptor(ve,"eventPhase");Object.defineProperty(ve,"eventPhase",{configurable:!0,enumerable:!0,get:function(){return S?Event.CAPTURING_PHASE:Event.BUBBLING_PHASE}})}if(ve.__previousCurrentTarget=ve.currentTarget,(!Pn(ae)&&ae.localName!=="slot"||ve.composedPath().indexOf(ae)!=-1)&&(ve.composed||-1<ve.composedPath().indexOf(ae))){if(ya(ve)&&ve.target===ve.relatedTarget)ve.eventPhase===Event.BUBBLING_PHASE&&ve.stopImmediatePropagation();else if(ve.eventPhase===Event.CAPTURING_PHASE||ve.bubbles||ve.target===ae||ae instanceof Window){var Tt=ne==="function"?h.call(ae,ve):h.handleEvent&&h.handleEvent(ve);return ae!==this&&(Ge?(Object.defineProperty(ve,"currentTarget",Ge),Ge=null):delete ve.currentTarget,nn?(Object.defineProperty(ve,"eventPhase",nn),nn=null):delete ve.eventPhase),Tt}}},h[Vi].push({node:ae,type:s,capture:S,once:P,passive:k,pb:K}),this.__handlers=this.__handlers||{},this.__handlers[s]=this.__handlers[s]||{capture:[],bubble:[]},this.__handlers[s][S?"capture":"bubble"].push(K),Gr[s]||this.__shady_native_addEventListener(s,K,b)}}}function Hr(s,h,p){if(h){var b=Ds(p);p=b.capture;var S=b.once,P=b.passive,k=b.La;if(b=b.Ja,xi[s])return this.__shady_native_removeEventListener(s,h,b);var K=k||this;k=void 0;var ne=null;try{ne=h[Vi]}catch{}ne&&(S=jd(ne,K,s,p,S,P),-1<S&&(k=ne.splice(S,1)[0].pb,ne.length||(h[Vi]=void 0))),this.__shady_native_removeEventListener(s,k||h,b),k&&this.__handlers&&this.__handlers[s]&&(s=this.__handlers[s][p?"capture":"bubble"],h=s.indexOf(k),-1<h&&s.splice(h,1))}}function Lr(){for(var s in Gr)window.__shady_native_addEventListener(s,function(h){h.__target||(wh(h),$d(h))},!0)}var qd=wn({get composed(){return this.__composed===void 0&&(Xa?this.__composed=this.type==="focusin"||this.type==="focusout"||Xa(this):this.isTrusted!==!1&&(this.__composed=ga[this.type])),this.__composed||!1},composedPath:function(){return this.__composedPath||(this.__composedPath=ru(this.__target,this.composed)),this.__composedPath},get target(){return gh(this.currentTarget||this.__previousCurrentTarget,this.composedPath())},get relatedTarget(){return this.__relatedTarget?(this.__relatedTargetComposedPath||(this.__relatedTargetComposedPath=ru(this.__relatedTarget,!0)),gh(this.currentTarget||this.__previousCurrentTarget,this.__relatedTargetComposedPath)):null},stopPropagation:function(){Event.prototype.stopPropagation.call(this),this.ra=!0},stopImmediatePropagation:function(){Event.prototype.stopImmediatePropagation.call(this),this.ra=this.__immediatePropagationStopped=!0}});function wh(s,h){if(h=h===void 0?s.target:h,s.__target=h,s.__relatedTarget=s.relatedTarget,st.H){if(h=Object.getPrototypeOf(s),!h.hasOwnProperty("__shady_patchedProto")){var p=Object.create(h);p.__shady_sourceProto=h,hr(p,qd),h.__shady_patchedProto=p}s.__proto__=h.__shady_patchedProto}else hr(s,qd)}var Xd=ko(Event),Do=ko(CustomEvent),Fs=ko(MouseEvent);function tg(){if(!Xa&&Object.getOwnPropertyDescriptor(Event.prototype,"isTrusted")){var s=function(){var h=new MouseEvent("click",{bubbles:!0,cancelable:!0,composed:!0});this.__shady_dispatchEvent(h)};Element.prototype.click?Element.prototype.click=s:HTMLElement.prototype.click&&(HTMLElement.prototype.click=s)}}var Yd=Object.getOwnPropertyNames(Element.prototype).filter(function(s){return s.substring(0,2)==="on"}),Jd=Object.getOwnPropertyNames(HTMLElement.prototype).filter(function(s){return s.substring(0,2)==="on"});function Zd(s){return{set:function(h){var p=En(this),b=s.substring(2);p.T||(p.T={}),p.T[s]&&this.removeEventListener(b,p.T[s]),this.__shady_addEventListener(b,h),p.T[s]=h},get:function(){var h=bt(this);return h&&h.T&&h.T[s]},configurable:!0}}function Bs(s,h){return{index:s,ga:[],na:h}}function ng(s,h,p,b){var S=0,P=0,k=0,K=0,ne=Math.min(h-S,b-P);if(S==0&&P==0)e:{for(k=0;k<ne;k++)if(s[k]!==p[k])break e;k=ne}if(h==s.length&&b==p.length){K=s.length;for(var ae=p.length,ve=0;ve<ne-k&&Kd(s[--K],p[--ae]);)ve++;K=ve}if(S+=k,P+=k,h-=K,b-=K,h-S==0&&b-P==0)return[];if(S==h){for(h=Bs(S,0);P<b;)h.ga.push(p[P++]);return[h]}if(P==b)return[Bs(S,h-S)];for(ne=S,k=P,b=b-k+1,K=h-ne+1,h=Array(b),ae=0;ae<b;ae++)h[ae]=Array(K),h[ae][0]=ae;for(ae=0;ae<K;ae++)h[0][ae]=ae;for(ae=1;ae<b;ae++)for(ve=1;ve<K;ve++)if(s[ne+ve-1]===p[k+ae-1])h[ae][ve]=h[ae-1][ve-1];else{var Ge=h[ae-1][ve]+1,nn=h[ae][ve-1]+1;h[ae][ve]=Ge<nn?Ge:nn}for(ne=h.length-1,k=h[0].length-1,b=h[ne][k],s=[];0<ne||0<k;)ne==0?(s.push(2),k--):k==0?(s.push(3),ne--):(K=h[ne-1][k-1],ae=h[ne-1][k],ve=h[ne][k-1],Ge=ae<ve?ae<K?ae:K:ve<K?ve:K,Ge==K?(K==b?s.push(0):(s.push(1),b=K),ne--,k--):Ge==ae?(s.push(3),ne--,b=ae):(s.push(2),k--,b=ve));for(s.reverse(),h=void 0,ne=[],k=0;k<s.length;k++)switch(s[k]){case 0:h&&(ne.push(h),h=void 0),S++,P++;break;case 1:h||(h=Bs(S,0)),h.na++,S++,h.ga.push(p[P]),P++;break;case 2:h||(h=Bs(S,0)),h.na++,S++;break;case 3:h||(h=Bs(S,0)),h.ga.push(p[P]),P++}return h&&ne.push(h),ne}function Kd(s,h){return s===h}var bh=wn({dispatchEvent:Io,addEventListener:yh,removeEventListener:Hr}),au=null;function wa(){return au||(au=window.ShadyCSS&&window.ShadyCSS.ScopingShim),au||null}function xh(s,h,p){var b=wa();return b&&h==="class"?(b.setElementClass(s,p),!0):!1}function _h(s,h){var p=wa();p&&p.unscopeNode(s,h)}function Sh(s,h){var p=wa();if(!p)return!0;if(s.nodeType===Node.DOCUMENT_FRAGMENT_NODE){for(p=!0,s=s.__shady_firstChild;s;s=s.__shady_nextSibling)p=p&&Sh(s,h);return p}return s.nodeType!==Node.ELEMENT_NODE?!0:p.currentScopeForNode(s)===h}function Us(s){if(s.nodeType!==Node.ELEMENT_NODE)return"";var h=wa();return h?h.currentScopeForNode(s):""}function Mh(s,h){if(s)for(s.nodeType===Node.ELEMENT_NODE&&h(s),s=s.__shady_firstChild;s;s=s.__shady_nextSibling)s.nodeType===Node.ELEMENT_NODE&&Mh(s,h)}var ou=window.document,su=st.fa,Qd=Object.getOwnPropertyDescriptor(Node.prototype,"isConnected"),ep=Qd&&Qd.get;function Eh(s){for(var h;h=s.__shady_firstChild;)s.__shady_removeChild(h)}function tp(s){var h=bt(s);if(h&&h.qa!==void 0)for(h=s.__shady_firstChild;h;h=h.__shady_nextSibling)tp(h);(s=bt(s))&&(s.qa=void 0)}function np(s){var h=s;if(s&&s.localName==="slot"){var p=bt(s);(p=p&&p.aa)&&(h=p.length?p[0]:np(s.__shady_nextSibling))}return h}function rp(s,h,p){if(s=(s=bt(s))&&s.ea){if(h)if(h.nodeType===Node.DOCUMENT_FRAGMENT_NODE)for(var b=0,S=h.childNodes.length;b<S;b++)s.addedNodes.push(h.childNodes[b]);else s.addedNodes.push(h);p&&s.removedNodes.push(p),qm(s)}}var lu=wn({get parentNode(){var s=bt(this);return s=s&&s.parentNode,s!==void 0?s:this.__shady_native_parentNode},get firstChild(){var s=bt(this);return s=s&&s.firstChild,s!==void 0?s:this.__shady_native_firstChild},get lastChild(){var s=bt(this);return s=s&&s.lastChild,s!==void 0?s:this.__shady_native_lastChild},get nextSibling(){var s=bt(this);return s=s&&s.nextSibling,s!==void 0?s:this.__shady_native_nextSibling},get previousSibling(){var s=bt(this);return s=s&&s.previousSibling,s!==void 0?s:this.__shady_native_previousSibling},get childNodes(){if(va(this)){var s=bt(this);if(!s.childNodes){s.childNodes=[];for(var h=this.__shady_firstChild;h;h=h.__shady_nextSibling)s.childNodes.push(h)}var p=s.childNodes}else p=this.__shady_native_childNodes;return p.item=function(b){return p[b]},p},get parentElement(){var s=bt(this);return(s=s&&s.parentNode)&&s.nodeType!==Node.ELEMENT_NODE&&(s=null),s!==void 0?s:this.__shady_native_parentElement},get isConnected(){if(ep&&ep.call(this))return!0;if(this.nodeType==Node.DOCUMENT_FRAGMENT_NODE)return!1;var s=this.ownerDocument;if(s===null||lh(s,this))return!0;for(s=this;s&&!(s instanceof Document);)s=s.__shady_parentNode||(Pn(s)?s.host:void 0);return!!(s&&s instanceof Document)},get textContent(){if(va(this)){for(var s=[],h=this.__shady_firstChild;h;h=h.__shady_nextSibling)h.nodeType!==Node.COMMENT_NODE&&s.push(h.__shady_textContent);return s.join("")}return this.__shady_native_textContent},set textContent(s){switch((typeof s=="undefined"||s===null)&&(s=""),this.nodeType){case Node.ELEMENT_NODE:case Node.DOCUMENT_FRAGMENT_NODE:if(!va(this)&&st.H){var h=this.__shady_firstChild;(h!=this.__shady_lastChild||h&&h.nodeType!=Node.TEXT_NODE)&&Eh(this),this.__shady_native_textContent=s}else Eh(this),(0<s.length||this.nodeType===Node.ELEMENT_NODE)&&this.__shady_insertBefore(document.createTextNode(s));break;default:this.nodeValue=s}},insertBefore:function(s,h){if(this.ownerDocument!==ou&&s.ownerDocument!==ou)return this.__shady_native_insertBefore(s,h),s;if(s===this)throw Error("Failed to execute 'appendChild' on 'Node': The new child element contains the parent.");if(h){var p=bt(h);if(p=p&&p.parentNode,p!==void 0&&p!==this||p===void 0&&h.__shady_native_parentNode!==this)throw Error("Failed to execute 'insertBefore' on 'Node': The node before which the new node is to be inserted is not a child of this node.")}if(h===s)return s;rp(this,s);var b=[],S=(p=Qr(this))?p.host.localName:Us(this),P=s.__shady_parentNode;if(P){var k=Us(s),K=!!p||!Qr(s)||su&&this.__noInsertionPoint!==void 0;P.__shady_removeChild(s,K)}P=!0;var ne=(!su||s.__noInsertionPoint===void 0&&this.__noInsertionPoint===void 0)&&!Sh(s,S),ae=p&&!s.__noInsertionPoint&&(!su||s.nodeType===Node.DOCUMENT_FRAGMENT_NODE);return(ae||ne)&&(ne&&(k=k||Us(s)),Mh(s,function(ve){if(ae&&ve.localName==="slot"&&b.push(ve),ne){var Ge=k;wa()&&(Ge&&_h(ve,Ge),(Ge=wa())&&Ge.scopeNode(ve,S))}})),b.length&&(Ws(p),p.i.push.apply(p.i,Mt(b)),Wi(p)),va(this)&&(ug(s,this,h),K=bt(this),K.root?(P=!1,Va(this)&&Wi(K.root)):p&&this.localName==="slot"&&(P=!1,Wi(p))),P?(p=Pn(this)?this.host:this,h?(h=np(h),p.__shady_native_insertBefore(s,h)):p.__shady_native_appendChild(s)):s.ownerDocument!==this.ownerDocument&&this.ownerDocument.adoptNode(s),s},appendChild:function(s){if(this!=s||!Pn(s))return this.__shady_insertBefore(s)},removeChild:function(s,h){if(h=h===void 0?!1:h,this.ownerDocument!==ou)return this.__shady_native_removeChild(s);if(s.__shady_parentNode!==this)throw Error("The node to be removed is not a child of this node: "+s);rp(this,null,s);var p=Qr(s),b=p&&Yn(p,s),S=bt(this);if(va(this)&&(pp(s,this),Va(this))){Wi(S.root);var P=!0}if(wa()&&!h&&p&&s.nodeType!==Node.TEXT_NODE){var k=Us(s);Mh(s,function(K){_h(K,k)})}return tp(s),p&&((h=this.localName==="slot")&&(P=!0),(b||h)&&Wi(p)),P||(P=Pn(this)?this.host:this,(!S.root&&s.localName!=="slot"||P===s.__shady_native_parentNode)&&P.__shady_native_removeChild(s)),s},replaceChild:function(s,h){return this.__shady_insertBefore(s,h),this.__shady_removeChild(h),s},cloneNode:function(s){if(this.localName=="template")return this.__shady_native_cloneNode(s);var h=this.__shady_native_cloneNode(!1);if(s&&h.nodeType!==Node.ATTRIBUTE_NODE){s=this.__shady_firstChild;for(var p;s;s=s.__shady_nextSibling)p=s.__shady_cloneNode(!0),h.__shady_appendChild(p)}return h},getRootNode:function(s){if(this&&this.nodeType){var h=En(this),p=h.qa;return p===void 0&&(Pn(this)?(p=this,h.qa=p):(p=(p=this.__shady_parentNode)?p.__shady_getRootNode(s):this,document.documentElement.__shady_native_contains(this)&&(h.qa=p))),p}},contains:function(s){return uh(this,s)}}),Gs=wn({get assignedSlot(){var s=this.__shady_parentNode;return(s=s&&s.__shady_shadowRoot)&&_i(s),(s=bt(this))&&s.assignedSlot||null}});function Th(s,h,p){var b=[];return ip(s,h,p,b),b}function ip(s,h,p,b){for(s=s.__shady_firstChild;s;s=s.__shady_nextSibling){var S;if(S=s.nodeType===Node.ELEMENT_NODE){S=s;var P=h,k=p,K=b,ne=P(S);ne&&K.push(S),k&&k(ne)?S=ne:(ip(S,P,k,K),S=void 0)}if(S)break}}var uu={get firstElementChild(){var s=bt(this);if(s&&s.firstChild!==void 0){for(s=this.__shady_firstChild;s&&s.nodeType!==Node.ELEMENT_NODE;)s=s.__shady_nextSibling;return s}return this.__shady_native_firstElementChild},get lastElementChild(){var s=bt(this);if(s&&s.lastChild!==void 0){for(s=this.__shady_lastChild;s&&s.nodeType!==Node.ELEMENT_NODE;)s=s.__shady_previousSibling;return s}return this.__shady_native_lastElementChild},get children(){return va(this)?Os(Array.prototype.filter.call(ma(this),function(s){return s.nodeType===Node.ELEMENT_NODE})):this.__shady_native_children},get childElementCount(){var s=this.__shady_children;return s?s.length:0}},Fo=wn((uu.append=function(s){for(var h=[],p=0;p<arguments.length;++p)h[p]=arguments[p];this.__shady_insertBefore(Ro.apply(null,Mt(h)),null)},uu.prepend=function(s){for(var h=[],p=0;p<arguments.length;++p)h[p]=arguments[p];this.__shady_insertBefore(Ro.apply(null,Mt(h)),this.__shady_firstChild)},uu.replaceChildren=function(s){for(var h=[],p=0;p<arguments.length;++p)h[p]=arguments[p];for(;(p=this.__shady_firstChild)!==null;)this.__shady_removeChild(p);this.__shady_insertBefore(Ro.apply(null,Mt(h)),null)},uu)),rg=wn({querySelector:function(s){return Th(this,function(h){return Tn.call(h,s)},function(h){return!!h})[0]||null},querySelectorAll:function(s,h){if(h){h=Array.prototype.slice.call(this.__shady_native_querySelectorAll(s));var p=this.__shady_getRootNode();return Os(h.filter(function(b){return b.__shady_getRootNode()==p}))}return Os(Th(this,function(b){return Tn.call(b,s)}))}}),ap=st.fa&&!st.J?ch({},Fo):Fo;ch(Fo,rg);var op=wn({after:function(s){for(var h=[],p=0;p<arguments.length;++p)h[p]=arguments[p];if(p=this.__shady_parentNode,p!==null){var b=this.__shady_nextSibling;p.__shady_insertBefore(Ro.apply(null,Mt(h)),b)}},before:function(s){for(var h=[],p=0;p<arguments.length;++p)h[p]=arguments[p];p=this.__shady_parentNode,p!==null&&p.__shady_insertBefore(Ro.apply(null,Mt(h)),this)},remove:function(){var s=this.__shady_parentNode;s!==null&&s.__shady_removeChild(this)},replaceWith:function(s){for(var h=[],p=0;p<arguments.length;++p)h[p]=arguments[p];if(p=this.__shady_parentNode,p!==null){var b=this.__shady_nextSibling;p.__shady_removeChild(this),p.__shady_insertBefore(Ro.apply(null,Mt(h)),b)}}}),sp=window.document;function lp(s,h){if(h==="slot")s=s.__shady_parentNode,Va(s)&&Wi(bt(s).root);else if(s.localName==="slot"&&h==="name"&&(h=Qr(s))){if(h.g){ba(h);var p=s.Qa,b=Nh(s);if(b!==p){p=h.h[p];var S=p.indexOf(s);0<=S&&p.splice(S,1),p=h.h[b]||(h.h[b]=[]),p.push(s),1<p.length&&(h.h[b]=rr(p))}}Wi(h)}}var cu=wn({get previousElementSibling(){var s=bt(this);if(s&&s.previousSibling!==void 0){for(s=this.__shady_previousSibling;s&&s.nodeType!==Node.ELEMENT_NODE;)s=s.__shady_previousSibling;return s}return this.__shady_native_previousElementSibling},get nextElementSibling(){var s=bt(this);if(s&&s.nextSibling!==void 0){for(s=this.__shady_nextSibling;s&&s.nodeType!==Node.ELEMENT_NODE;)s=s.__shady_nextSibling;return s}return this.__shady_native_nextElementSibling},get slot(){return this.getAttribute("slot")},set slot(s){this.__shady_setAttribute("slot",s)},get className(){return this.getAttribute("class")||""},set className(s){this.__shady_setAttribute("class",s)},setAttribute:function(s,h){this.ownerDocument!==sp?this.__shady_native_setAttribute(s,h):xh(this,s,h)||(this.__shady_native_setAttribute(s,h),lp(this,s))},removeAttribute:function(s){this.ownerDocument!==sp?this.__shady_native_removeAttribute(s):xh(this,s,"")?this.getAttribute(s)===""&&this.__shady_native_removeAttribute(s):(this.__shady_native_removeAttribute(s),lp(this,s))}});st.fa||Yd.forEach(function(s){cu[s]=Zd(s)});var up=wn({attachShadow:function(s){if(!this)throw Error("Must provide a host.");if(!s)throw Error("Not enough arguments.");if(s.shadyUpgradeFragment&&!st.Na){var h=s.shadyUpgradeFragment;if(h.__proto__=ShadowRoot.prototype,vp(h,this,s),On(h,h),s=h.__noInsertionPoint?null:h.querySelectorAll("slot"),h.__noInsertionPoint=void 0,s&&s.length){var p=h;Ws(p),p.i.push.apply(p.i,Mt(s)),Wi(h)}h.host.__shady_native_appendChild(h)}else h=new Vs(Ho,this,s);return this.__CE_shadowRoot=h},get shadowRoot(){var s=bt(this);return s&&s.gb||null}});ch(cu,up);var Ah=document.implementation.createHTMLDocument("inert"),Ch=wn({get innerHTML(){return va(this)?dh(this.localName==="template"?this.content:this,ma):this.__shady_native_innerHTML},set innerHTML(s){if(this.localName==="template")this.__shady_native_innerHTML=s;else{Eh(this);var h=this.localName||"div";for(h=this.namespaceURI&&this.namespaceURI!==Ah.namespaceURI?Ah.createElementNS(this.namespaceURI,h):Ah.createElement(h),st.H?h.__shady_native_innerHTML=s:h.innerHTML=s;s=h.__shady_firstChild;)this.__shady_insertBefore(s)}}}),cp=wn({blur:function(){var s=bt(this);(s=(s=s&&s.root)&&s.activeElement)?s.__shady_blur():this.__shady_native_blur()}});st.fa||Jd.forEach(function(s){cp[s]=Zd(s)});var hp=wn({assignedNodes:function(s){if(this.localName==="slot"){var h=this.__shady_getRootNode();return h&&Pn(h)&&_i(h),(h=bt(this))?(s&&s.flatten?h.aa:h.assignedNodes)||[]:[]}},addEventListener:function(s,h,p){if(this.localName!=="slot"||s==="slotchange")yh.call(this,s,h,p);else{typeof p!="object"&&(p={capture:!!p});var b=this.__shady_parentNode;if(!b)throw Error("ShadyDOM cannot attach event to slot unless it has a `parentNode`");p.U=this,b.__shady_addEventListener(s,h,p)}},removeEventListener:function(s,h,p){if(this.localName!=="slot"||s==="slotchange")Hr.call(this,s,h,p);else{typeof p!="object"&&(p={capture:!!p});var b=this.__shady_parentNode;if(!b)throw Error("ShadyDOM cannot attach event to slot unless it has a `parentNode`");p.U=this,b.__shady_removeEventListener(s,h,p)}}}),Lh=wn({getElementById:function(s){return s===""?null:Th(this,function(h){return h.id==s},function(h){return!!h})[0]||null}});function ig(s,h){for(var p;h&&!s.has(p=h.__shady_getRootNode());)h=p.host;return h}function ag(s){var h=new Set;for(h.add(s);Pn(s)&&s.host;)s=s.host.__shady_getRootNode(),h.add(s);return h}var og="__shady_native_"+Fd(),Rh=wn({get activeElement(){var s=st.H?document.__shady_native_activeElement:document.activeElement;if(!s||!s.nodeType)return null;var h=!!Pn(this);if(!(this===document||h&&this.host!==s&&this.host.__shady_native_contains(s)))return null;for(h=Qr(s);h&&h!==this;)s=h.host,h=Qr(s);return this===document?h?null:s:h===this?s:null},elementsFromPoint:function(s,h){s=[].slice.call(document[og](s,h)),h=ag(this);for(var p=new Set,b=0;b<s.length;b++)p.add(ig(h,s[b]));var S=[];return p.forEach(function(P){return S.push(P)}),S},elementFromPoint:function(s,h){return this.__shady_elementsFromPoint(s,h)[0]||null}}),sg=window.document,lg=wn({importNode:function(s,h){if(s.ownerDocument!==sg||s.localName==="template")return this.__shady_native_importNode(s,h);var p=this.__shady_native_importNode(s,!1);if(h)for(s=s.__shady_firstChild;s;s=s.__shady_nextSibling)h=this.__shady_importNode(s,!0),p.__shady_appendChild(h);return p}}),fp=wn({dispatchEvent:Io,addEventListener:yh.bind(window),removeEventListener:Hr.bind(window)}),Bo={};Object.getOwnPropertyDescriptor(HTMLElement.prototype,"parentElement")&&(Bo.parentElement=lu.parentElement),Object.getOwnPropertyDescriptor(HTMLElement.prototype,"contains")&&(Bo.contains=lu.contains),Object.getOwnPropertyDescriptor(HTMLElement.prototype,"children")&&(Bo.children=Fo.children),Object.getOwnPropertyDescriptor(HTMLElement.prototype,"innerHTML")&&(Bo.innerHTML=Ch.innerHTML),Object.getOwnPropertyDescriptor(HTMLElement.prototype,"className")&&(Bo.className=cu.className);var nr={EventTarget:[bh],Node:[lu,window.EventTarget?null:bh],Text:[Gs],Comment:[Gs],CDATASection:[Gs],ProcessingInstruction:[Gs],Element:[cu,Fo,op,Gs,!st.H||"innerHTML"in Element.prototype?Ch:null,window.HTMLSlotElement?null:hp],HTMLElement:[cp,Bo],HTMLSlotElement:[hp],DocumentFragment:[ap,Lh],Document:[lg,ap,Lh,Rh],Window:[fp],CharacterData:[op]},Ya=st.H?null:["innerHTML","textContent"];function Kr(s,h,p,b){h.forEach(function(S){return s&&S&&hr(s,S,p,b)})}function Ja(s){var h=s?null:Ya,p;for(p in nr)Kr(window[p]&&window[p].prototype,nr[p],s,h)}["Text","Comment","CDATASection","ProcessingInstruction"].forEach(function(s){var h=window[s],p=Object.create(h.prototype);p.__shady_protoIsPatched=!0,Kr(p,nr.EventTarget),Kr(p,nr.Node),nr[s]&&Kr(p,nr[s]),h.prototype.__shady_patchedProto=p});function Za(s){return s.__shady_protoIsPatched=!0,Kr(s,nr.EventTarget),Kr(s,nr.Node),Kr(s,nr.Element),Kr(s,nr.HTMLElement),Kr(s,nr.HTMLSlotElement),s}var hu=st.Aa,Ph=st.H;function Hs(s,h){if(hu&&!s.__shady_protoIsPatched&&!Pn(s)){var p=Object.getPrototypeOf(s),b=p.hasOwnProperty("__shady_patchedProto")&&p.__shady_patchedProto;b||(b=Object.create(p),Za(b),p.__shady_patchedProto=b),Object.setPrototypeOf(s,b)}Ph||(h===1?qa(s):h===2&&an(s))}function dp(s,h,p,b){Hs(s,1),b=b||null;var S=En(s),P=b?En(b):null;S.previousSibling=b?P.previousSibling:h.__shady_lastChild,(P=bt(S.previousSibling))&&(P.nextSibling=s),(P=bt(S.nextSibling=b))&&(P.previousSibling=s),S.parentNode=h,b?b===p.firstChild&&(p.firstChild=s):(p.lastChild=s,p.firstChild||(p.firstChild=s)),p.childNodes=null}function ug(s,h,p){Hs(h,2);var b=En(h);if(b.firstChild!==void 0&&(b.childNodes=null),s.nodeType===Node.DOCUMENT_FRAGMENT_NODE)for(s=s.__shady_native_firstChild;s;s=s.__shady_native_nextSibling)dp(s,h,b,p);else dp(s,h,b,p)}function pp(s,h){var p=En(s);h=En(h),s===h.firstChild&&(h.firstChild=p.nextSibling),s===h.lastChild&&(h.lastChild=p.previousSibling),s=p.previousSibling;var b=p.nextSibling;s&&(En(s).nextSibling=b),b&&(En(b).previousSibling=s),p.parentNode=p.previousSibling=p.nextSibling=void 0,h.childNodes!==void 0&&(h.childNodes=null)}function On(s,h){var p=En(s);if(h||p.firstChild===void 0){p.childNodes=null;var b=p.firstChild=s.__shady_native_firstChild;for(p.lastChild=s.__shady_native_lastChild,Hs(s,2),p=b,b=void 0;p;p=p.__shady_native_nextSibling){var S=En(p);S.parentNode=h||s,S.nextSibling=p.__shady_native_nextSibling,S.previousSibling=b||null,b=p,Hs(p,1)}}}var Uo=wn({addEventListener:function(s,h,p){typeof p!="object"&&(p={capture:!!p}),p.U=p.U||this,this.host.__shady_addEventListener(s,h,p)},removeEventListener:function(s,h,p){typeof p!="object"&&(p={capture:!!p}),p.U=p.U||this,this.host.__shady_removeEventListener(s,h,p)}});function Go(s,h){hr(s,Uo,h),hr(s,Rh,h),hr(s,Ch,h),hr(s,Fo,h),st.J&&!h?(hr(s,lu,h),hr(s,Lh,h)):st.H||(hr(s,No),hr(s,Is),hr(s,ja))}var Ho={},Ka=st.deferConnectionCallbacks&&document.readyState==="loading",zs;function Oh(s){var h=[];do h.unshift(s);while(s=s.__shady_parentNode);return h}function Vs(s,h,p){if(s!==Ho)throw new TypeError("Illegal constructor");this.g=null,vp(this,h,p)}function vp(s,h,p){if(s.host=h,s.mode=p&&p.mode,On(s.host),h=En(s.host),h.root=s,h.gb=s.mode!=="closed"?s:null,h=En(s),h.firstChild=h.lastChild=h.parentNode=h.nextSibling=h.previousSibling=null,st.preferPerformance)for(;h=s.host.__shady_native_firstChild;)s.host.__shady_native_removeChild(h);else Wi(s)}function Wi(s){s.Y||(s.Y=!0,hh(function(){return _i(s)}))}function _i(s){var h;if(h=s.Y){for(var p;s;)e:{if(s.Y&&(p=s),h=s,s=h.host.__shady_getRootNode(),Pn(s)&&(h=bt(h.host))&&0<h.ia)break e;s=void 0}h=p}(p=h)&&p._renderSelf()}Vs.prototype._renderSelf=function(){var s=Ka;if(Ka=!0,this.Y=!1,this.g){ba(this);for(var h=0,p;h<this.g.length;h++){p=this.g[h];var b=bt(p),S=b.assignedNodes;if(b.assignedNodes=[],b.aa=[],b.Ga=S)for(b=0;b<S.length;b++){var P=bt(S[b]);P.ua=P.assignedSlot,P.assignedSlot===p&&(P.assignedSlot=null)}}for(h=this.host.__shady_firstChild;h;h=h.__shady_nextSibling)mp(this,h);for(h=0;h<this.g.length;h++){if(p=this.g[h],S=bt(p),!S.assignedNodes.length)for(b=p.__shady_firstChild;b;b=b.__shady_nextSibling)mp(this,b,p);if((b=(b=bt(p.__shady_parentNode))&&b.root)&&(zo(b)||b.Y)&&b._renderSelf(),fu(this,S.aa,S.assignedNodes),b=S.Ga){for(P=0;P<b.length;P++)bt(b[P]).ua=null;S.Ga=null,b.length>S.assignedNodes.length&&(S.xa=!0)}S.xa&&(S.xa=!1,gp(this,p))}for(p=this.g,h=[],S=0;S<p.length;S++)b=p[S].__shady_parentNode,(P=bt(b))&&P.root||!(0>h.indexOf(b))||h.push(b);for(p=0;p<h.length;p++){for(P=h[p],S=P===this?this.host:P,b=[],P=P.__shady_firstChild;P;P=P.__shady_nextSibling)if(P.localName=="slot")for(var k=bt(P).aa,K=0;K<k.length;K++)b.push(k[K]);else b.push(P);P=Bd(S),k=ng(b,b.length,P,P.length);for(var ne=K=0,ae=void 0;K<k.length&&(ae=k[K]);K++){for(var ve=0,Ge=void 0;ve<ae.ga.length&&(Ge=ae.ga[ve]);ve++)Ge.__shady_native_parentNode===S&&S.__shady_native_removeChild(Ge),P.splice(ae.index+ne,1);ne-=ae.na}for(ne=0,ae=void 0;ne<k.length&&(ae=k[ne]);ne++)for(K=P[ae.index],ve=ae.index;ve<ae.index+ae.na;ve++)Ge=b[ve],S.__shady_native_insertBefore(Ge,K),P.splice(ve,0,Ge)}}if(!st.preferPerformance&&!this.Fa)for(h=this.host.__shady_firstChild;h;h=h.__shady_nextSibling)p=bt(h),h.__shady_native_parentNode!==this.host||h.localName!=="slot"&&p.assignedSlot||this.host.__shady_native_removeChild(h);this.Fa=!0,Ka=s,zs&&zs()};function mp(s,h,p){var b=En(h),S=b.ua;b.ua=null,p||(p=(s=s.h[h.__shady_slot||"__catchall"])&&s[0]),p?(En(p).assignedNodes.push(h),b.assignedSlot=p):b.assignedSlot=void 0,S!==b.assignedSlot&&b.assignedSlot&&(En(b.assignedSlot).xa=!0)}function fu(s,h,p){for(var b=0,S=void 0;b<p.length&&(S=p[b]);b++)if(S.localName=="slot"){var P=bt(S).assignedNodes;P&&P.length&&fu(s,h,P)}else h.push(p[b])}function gp(s,h){h.__shady_native_dispatchEvent(new Event("slotchange")),h=bt(h),h.assignedSlot&&gp(s,h.assignedSlot)}function Ws(s){s.i=s.i||[],s.g=s.g||[],s.h=s.h||{}}function ba(s){if(s.i&&s.i.length){for(var h=s.i,p,b=0;b<h.length;b++){var S=h[b];On(S);var P=S.__shady_parentNode;On(P),P=bt(P),P.ia=(P.ia||0)+1,P=Nh(S),s.h[P]?(p=p||{},p[P]=!0,s.h[P].push(S)):s.h[P]=[S],s.g.push(S)}if(p)for(var k in p)s.h[k]=rr(s.h[k]);s.i=[]}}function Nh(s){var h=s.name||s.getAttribute("name")||"__catchall";return s.Qa=h}function rr(s){return s.sort(function(h,p){h=Oh(h);for(var b=Oh(p),S=0;S<h.length;S++){p=h[S];var P=b[S];if(p!==P)return h=ma(p.__shady_parentNode),h.indexOf(p)-h.indexOf(P)}})}function Yn(s,h){if(s.g){ba(s);var p=s.h,b;for(b in p)for(var S=p[b],P=0;P<S.length;P++){var k=S[P];if(uh(h,k)){S.splice(P,1);var K=s.g.indexOf(k);if(0<=K&&(s.g.splice(K,1),(K=bt(k.__shady_parentNode))&&K.ia&&K.ia--),P--,k=bt(k),K=k.aa)for(var ne=0;ne<K.length;ne++){var ae=K[ne],ve=ae.__shady_native_parentNode;ve&&ve.__shady_native_removeChild(ae)}k.aa=[],k.assignedNodes=[],K=!0}}return K}}function zo(s){return ba(s),!(!s.g||!s.g.length)}if(function(s){s.__proto__=DocumentFragment.prototype,Go(s,"__shady_"),Go(s),Object.defineProperties(s,{nodeType:{value:Node.DOCUMENT_FRAGMENT_NODE,configurable:!0},nodeName:{value:"#document-fragment",configurable:!0},nodeValue:{value:null,configurable:!0}}),["localName","namespaceURI","prefix"].forEach(function(h){Object.defineProperty(s,h,{value:void 0,configurable:!0})}),["ownerDocument","baseURI","isConnected"].forEach(function(h){Object.defineProperty(s,h,{get:function(){return this.host[h]},configurable:!0})})}(Vs.prototype),window.customElements&&window.customElements.define&&st.ya&&!st.preferPerformance){var Qa=new Map;zs=function(){var s=[];Qa.forEach(function(b,S){s.push([S,b])}),Qa.clear();for(var h=0;h<s.length;h++){var p=s[h][0];s[h][1]?p.__shadydom_connectedCallback():p.__shadydom_disconnectedCallback()}},Ka&&document.addEventListener("readystatechange",function(){Ka=!1,zs()},{once:!0});var lt=function(s,h,p){var b=0,S="__isConnected"+b++;return(h||p)&&(s.prototype.connectedCallback=s.prototype.__shadydom_connectedCallback=function(){Ka?Qa.set(this,!0):this[S]||(this[S]=!0,h&&h.call(this))},s.prototype.disconnectedCallback=s.prototype.__shadydom_disconnectedCallback=function(){Ka?this.isConnected||Qa.set(this,!1):this[S]&&(this[S]=!1,p&&p.call(this))}),s},xe=window.customElements.define,Jn=function(s,h){var p=h.prototype.connectedCallback,b=h.prototype.disconnectedCallback;xe.call(window.customElements,s,lt(h,p,b)),h.prototype.connectedCallback=p,h.prototype.disconnectedCallback=b};window.customElements.define=Jn,Object.defineProperty(window.CustomElementRegistry.prototype,"define",{value:Jn,configurable:!0})}function Qr(s){if(s=s.__shady_getRootNode(),Pn(s))return s}function zr(s){this.node=s}oe=zr.prototype,oe.addEventListener=function(s,h,p){return this.node.__shady_addEventListener(s,h,p)},oe.removeEventListener=function(s,h,p){return this.node.__shady_removeEventListener(s,h,p)},oe.appendChild=function(s){return this.node.__shady_appendChild(s)},oe.insertBefore=function(s,h){return this.node.__shady_insertBefore(s,h)},oe.removeChild=function(s){return this.node.__shady_removeChild(s)},oe.replaceChild=function(s,h){return this.node.__shady_replaceChild(s,h)},oe.cloneNode=function(s){return this.node.__shady_cloneNode(s)},oe.getRootNode=function(s){return this.node.__shady_getRootNode(s)},oe.contains=function(s){return this.node.__shady_contains(s)},oe.dispatchEvent=function(s){return this.node.__shady_dispatchEvent(s)},oe.setAttribute=function(s,h){this.node.__shady_setAttribute(s,h)},oe.getAttribute=function(s){return this.node.__shady_native_getAttribute(s)},oe.hasAttribute=function(s){return this.node.__shady_native_hasAttribute(s)},oe.removeAttribute=function(s){this.node.__shady_removeAttribute(s)},oe.attachShadow=function(s){return this.node.__shady_attachShadow(s)},oe.focus=function(){this.node.__shady_native_focus()},oe.blur=function(){this.node.__shady_blur()},oe.importNode=function(s,h){if(this.node.nodeType===Node.DOCUMENT_NODE)return this.node.__shady_importNode(s,h)},oe.getElementById=function(s){if(this.node.nodeType===Node.DOCUMENT_NODE)return this.node.__shady_getElementById(s)},oe.elementsFromPoint=function(s,h){return this.node.__shady_elementsFromPoint(s,h)},oe.elementFromPoint=function(s,h){return this.node.__shady_elementFromPoint(s,h)},oe.querySelector=function(s){return this.node.__shady_querySelector(s)},oe.querySelectorAll=function(s,h){return this.node.__shady_querySelectorAll(s,h)},oe.assignedNodes=function(s){if(this.node.localName==="slot")return this.node.__shady_assignedNodes(s)},oe.append=function(s){for(var h=[],p=0;p<arguments.length;++p)h[p]=arguments[p];return this.node.__shady_append.apply(this.node,Mt(h))},oe.prepend=function(s){for(var h=[],p=0;p<arguments.length;++p)h[p]=arguments[p];return this.node.__shady_prepend.apply(this.node,Mt(h))},oe.after=function(s){for(var h=[],p=0;p<arguments.length;++p)h[p]=arguments[p];return this.node.__shady_after.apply(this.node,Mt(h))},oe.before=function(s){for(var h=[],p=0;p<arguments.length;++p)h[p]=arguments[p];return this.node.__shady_before.apply(this.node,Mt(h))},oe.remove=function(){return this.node.__shady_remove()},oe.replaceWith=function(s){for(var h=[],p=0;p<arguments.length;++p)h[p]=arguments[p];return this.node.__shady_replaceWith.apply(this.node,Mt(h))},yt.Object.defineProperties(zr.prototype,{activeElement:{configurable:!0,enumerable:!0,get:function(){if(Pn(this.node)||this.node.nodeType===Node.DOCUMENT_NODE)return this.node.__shady_activeElement}},_activeElement:{configurable:!0,enumerable:!0,get:function(){return this.activeElement}},host:{configurable:!0,enumerable:!0,get:function(){if(Pn(this.node))return this.node.host}},parentNode:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_parentNode}},firstChild:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_firstChild}},lastChild:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_lastChild}},nextSibling:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_nextSibling}},previousSibling:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_previousSibling}},childNodes:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_childNodes}},parentElement:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_parentElement}},firstElementChild:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_firstElementChild}},lastElementChild:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_lastElementChild}},nextElementSibling:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_nextElementSibling}},previousElementSibling:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_previousElementSibling}},children:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_children}},childElementCount:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_childElementCount}},shadowRoot:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_shadowRoot}},assignedSlot:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_assignedSlot}},isConnected:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_isConnected}},innerHTML:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_innerHTML},set:function(s){this.node.__shady_innerHTML=s}},textContent:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_textContent},set:function(s){this.node.__shady_textContent=s}},slot:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_slot},set:function(s){this.node.__shady_slot=s}},className:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_className},set:function(s){this.node.__shady_className=s}}});function yp(s){Object.defineProperty(zr.prototype,s,{get:function(){return this.node["__shady_"+s]},set:function(h){this.node["__shady_"+s]=h},configurable:!0})}Yd.forEach(function(s){return yp(s)}),Jd.forEach(function(s){return yp(s)});var Jt=new WeakMap;function Qt(s){if(Pn(s)||s instanceof zr)return s;var h=Jt.get(s);return h||(h=new zr(s),Jt.set(s,h)),h}if(st.ya){var ir=st.H?function(s){return s}:function(s){return an(s),qa(s),s},wp={inUse:st.ya,patch:ir,isShadyRoot:Pn,enqueue:hh,flush:eu,flushInitial:function(s){!s.Fa&&s.Y&&_i(s)},settings:st,filterMutations:Jm,observeChildren:Xm,unobserveChildren:Ym,deferConnectionCallbacks:st.deferConnectionCallbacks,preferPerformance:st.preferPerformance,handlesDynamicScoping:!0,wrap:st.J?Qt:ir,wrapIfNeeded:st.J===!0?Qt:function(s){return s},Wrapper:zr,composedPath:iu,noPatch:st.J,patchOnDemand:st.Aa,nativeMethods:ph,nativeTree:zd,patchElementProto:Za};window.ShadyDOM=wp,mh(),Ja("__shady_"),Object.defineProperty(document,"_activeElement",Rh.activeElement),hr(Window.prototype,fp,"__shady_"),st.J?st.Aa&&hr(Element.prototype,up):(Ja(),tg()),Lr(),window.Event=Xd,window.CustomEvent=Do,window.MouseEvent=Fs,window.ShadowRoot=Vs}var Gn=window.Document.prototype.createElement,D=window.Document.prototype.createElementNS,kh=window.Document.prototype.importNode,bp=window.Document.prototype.prepend,Vr=window.Document.prototype.append,Ih=window.DocumentFragment.prototype.prepend,$i=window.DocumentFragment.prototype.append,Vo=window.Node.prototype.cloneNode,Wo=window.Node.prototype.appendChild,eo=window.Node.prototype.insertBefore,xa=window.Node.prototype.removeChild,to=window.Node.prototype.replaceChild,Si=Object.getOwnPropertyDescriptor(window.Node.prototype,"textContent"),ji=window.Element.prototype.attachShadow,qi=Object.getOwnPropertyDescriptor(window.Element.prototype,"innerHTML"),no=window.Element.prototype.getAttribute,$s=window.Element.prototype.setAttribute,js=window.Element.prototype.removeAttribute,Mi=window.Element.prototype.getAttributeNS,xp=window.Element.prototype.setAttributeNS,Ei=window.Element.prototype.removeAttributeNS,Ti=window.Element.prototype.insertAdjacentElement,du=window.Element.prototype.insertAdjacentHTML,pu=window.Element.prototype.prepend,_a=window.Element.prototype.append,vu=window.Element.prototype.before,qs=window.Element.prototype.after,mu=window.Element.prototype.replaceWith,ro=window.Element.prototype.remove,ht=window.HTMLElement,Sa=Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,"innerHTML"),Wr=window.HTMLElement.prototype.insertAdjacentElement,_p=window.HTMLElement.prototype.insertAdjacentHTML,Sp=new Set;"annotation-xml color-profile font-face font-face-src font-face-uri font-face-format font-face-name missing-glyph".split(" ").forEach(function(s){return Sp.add(s)});function Xi(s){var h=Sp.has(s);return s=/^[a-z][.0-9_a-z]*-[-.0-9_a-z]*$/.test(s),!h&&s}var gu=document.contains?document.contains.bind(document):document.documentElement.contains.bind(document.documentElement);function Dt(s){var h=s.isConnected;if(h!==void 0)return h;if(gu(s))return!0;for(;s&&!(s.__CE_isImportDocument||s instanceof Document);)s=s.parentNode||(window.ShadowRoot&&s instanceof ShadowRoot?s.host:void 0);return!(!s||!(s.__CE_isImportDocument||s instanceof Document))}function io(s){var h=s.children;if(h)return Array.prototype.slice.call(h);for(h=[],s=s.firstChild;s;s=s.nextSibling)s.nodeType===Node.ELEMENT_NODE&&h.push(s);return h}function yu(s,h){for(;h&&h!==s&&!h.nextSibling;)h=h.parentNode;return h&&h!==s?h.nextSibling:null}function wu(s,h,p){for(var b=s;b;){if(b.nodeType===Node.ELEMENT_NODE){var S=b;h(S);var P=S.localName;if(P==="link"&&S.getAttribute("rel")==="import"){if(b=S.import,p===void 0&&(p=new Set),b instanceof Node&&!p.has(b))for(p.add(b),b=b.firstChild;b;b=b.nextSibling)wu(b,h,p);b=yu(s,S);continue}else if(P==="template"){b=yu(s,S);continue}if(S=S.__CE_shadowRoot)for(S=S.firstChild;S;S=S.nextSibling)wu(S,h,p)}b=b.firstChild?b.firstChild:yu(s,b)}}function Xs(){var s=!($r==null||!$r.noDocumentConstructionObserver),h=!($r==null||!$r.shadyDomFastWalk);this.ca=[],this.g=[],this.W=!1,this.shadyDomFastWalk=h,this.nb=!s}function Ys(s,h,p,b){var S=window.ShadyDOM;if(s.shadyDomFastWalk&&S&&S.inUse){if(h.nodeType===Node.ELEMENT_NODE&&p(h),h.querySelectorAll)for(s=S.nativeMethods.querySelectorAll.call(h,"*"),h=0;h<s.length;h++)p(s[h])}else wu(h,p,b)}function Mp(s,h){s.W=!0,s.ca.push(h)}function $o(s,h){s.W=!0,s.g.push(h)}function ei(s,h){s.W&&Ys(s,h,function(p){return Yi(s,p)})}function Yi(s,h){if(s.W&&!h.__CE_patched){h.__CE_patched=!0;for(var p=0;p<s.ca.length;p++)s.ca[p](h);for(p=0;p<s.g.length;p++)s.g[p](h)}}function gr(s,h){var p=[];for(Ys(s,h,function(S){return p.push(S)}),h=0;h<p.length;h++){var b=p[h];b.__CE_state===1?s.connectedCallback(b):Js(s,b)}}function Rr(s,h){var p=[];for(Ys(s,h,function(S){return p.push(S)}),h=0;h<p.length;h++){var b=p[h];b.__CE_state===1&&s.disconnectedCallback(b)}}function Ji(s,h,p){p=p===void 0?{}:p;var b=p.ob,S=p.upgrade||function(k){return Js(s,k)},P=[];for(Ys(s,h,function(k){if(s.W&&Yi(s,k),k.localName==="link"&&k.getAttribute("rel")==="import"){var K=k.import;K instanceof Node&&(K.__CE_isImportDocument=!0,K.__CE_registry=document.__CE_registry),K&&K.readyState==="complete"?K.__CE_documentLoadHandled=!0:k.addEventListener("load",function(){var ne=k.import;if(!ne.__CE_documentLoadHandled){ne.__CE_documentLoadHandled=!0;var ae=new Set;b&&(b.forEach(function(ve){return ae.add(ve)}),ae.delete(ne)),Ji(s,ne,{ob:ae,upgrade:S})}})}else P.push(k)},b),h=0;h<P.length;h++)S(P[h])}function Js(s,h){try{var p=h.ownerDocument,b=p.__CE_registry,S=b&&(p.defaultView||p.__CE_isImportDocument)?yr(b,h.localName):void 0;if(S&&h.__CE_state===void 0){S.constructionStack.push(h);try{try{if(new S.constructorFunction!==h)throw Error("The custom element constructor did not produce the element being upgraded.")}finally{S.constructionStack.pop()}}catch(ne){throw h.__CE_state=2,ne}if(h.__CE_state=1,h.__CE_definition=S,S.attributeChangedCallback&&h.hasAttributes()){var P=S.observedAttributes;for(S=0;S<P.length;S++){var k=P[S],K=h.getAttribute(k);K!==null&&s.attributeChangedCallback(h,k,null,K,null)}}Dt(h)&&s.connectedCallback(h)}}catch(ne){ao(ne)}}Xs.prototype.connectedCallback=function(s){var h=s.__CE_definition;if(h.connectedCallback)try{h.connectedCallback.call(s)}catch(p){ao(p)}},Xs.prototype.disconnectedCallback=function(s){var h=s.__CE_definition;if(h.disconnectedCallback)try{h.disconnectedCallback.call(s)}catch(p){ao(p)}},Xs.prototype.attributeChangedCallback=function(s,h,p,b,S){var P=s.__CE_definition;if(P.attributeChangedCallback&&-1<P.observedAttributes.indexOf(h))try{P.attributeChangedCallback.call(s,h,p,b,S)}catch(k){ao(k)}};function Dh(s,h,p,b){var S=h.__CE_registry;if(S&&(b===null||b==="http://www.w3.org/1999/xhtml")&&(S=yr(S,p)))try{var P=new S.constructorFunction;if(P.__CE_state===void 0||P.__CE_definition===void 0)throw Error("Failed to construct '"+p+"': The returned value was not constructed with the HTMLElement constructor.");if(P.namespaceURI!=="http://www.w3.org/1999/xhtml")throw Error("Failed to construct '"+p+"': The constructed element's namespace must be the HTML namespace.");if(P.hasAttributes())throw Error("Failed to construct '"+p+"': The constructed element must not have any attributes.");if(P.firstChild!==null)throw Error("Failed to construct '"+p+"': The constructed element must not have any children.");if(P.parentNode!==null)throw Error("Failed to construct '"+p+"': The constructed element must not have a parent node.");if(P.ownerDocument!==h)throw Error("Failed to construct '"+p+"': The constructed element's owner document is incorrect.");if(P.localName!==p)throw Error("Failed to construct '"+p+"': The constructed element's local name is incorrect.");return P}catch(k){return ao(k),h=b===null?Gn.call(h,p):D.call(h,b,p),Object.setPrototypeOf(h,HTMLUnknownElement.prototype),h.__CE_state=2,h.__CE_definition=void 0,Yi(s,h),h}return h=b===null?Gn.call(h,p):D.call(h,b,p),Yi(s,h),h}function ao(s){var h=s.message,p=s.sourceURL||s.fileName||"",b=s.line||s.lineNumber||0,S=s.column||s.columnNumber||0,P=void 0;ErrorEvent.prototype.initErrorEvent===void 0?P=new ErrorEvent("error",{cancelable:!0,message:h,filename:p,lineno:b,colno:S,error:s}):(P=document.createEvent("ErrorEvent"),P.initErrorEvent("error",!1,!0,h,p,b),P.preventDefault=function(){Object.defineProperty(this,"defaultPrevented",{configurable:!0,get:function(){return!0}})}),P.error===void 0&&Object.defineProperty(P,"error",{configurable:!0,enumerable:!0,get:function(){return s}}),window.dispatchEvent(P),P.defaultPrevented||console.error(s)}function Ep(){var s=this;this.I=void 0,this.Ha=new Promise(function(h){s.g=h})}Ep.prototype.resolve=function(s){if(this.I)throw Error("Already resolved.");this.I=s,this.g(s)};function Tp(s){var h=document;this.X=void 0,this.S=s,this.g=h,Ji(this.S,this.g),this.g.readyState==="loading"&&(this.X=new MutationObserver(this.h.bind(this)),this.X.observe(this.g,{childList:!0,subtree:!0}))}function Qe(s){s.X&&s.X.disconnect()}Tp.prototype.h=function(s){var h=this.g.readyState;for(h!=="interactive"&&h!=="complete"||Qe(this),h=0;h<s.length;h++)for(var p=s[h].addedNodes,b=0;b<p.length;b++)Ji(this.S,p[b])};function Zn(s){this.ka=new Map,this.la=new Map,this.Ca=new Map,this.ta=!1,this.wa=new Map,this.ja=function(h){return h()},this.V=!1,this.ma=[],this.S=s,this.Da=s.nb?new Tp(s):void 0}oe=Zn.prototype,oe.eb=function(s,h){var p=this;if(!(h instanceof Function))throw new TypeError("Custom element constructor getters must be functions.");Ap(this,s),this.ka.set(s,h),this.ma.push(s),this.V||(this.V=!0,this.ja(function(){return Ai(p)}))},oe.define=function(s,h){var p=this;if(!(h instanceof Function))throw new TypeError("Custom element constructors must be functions.");Ap(this,s),Cp(this,s,h),this.ma.push(s),this.V||(this.V=!0,this.ja(function(){return Ai(p)}))};function Ap(s,h){if(!Xi(h))throw new SyntaxError("The element name '"+h+"' is not valid.");if(yr(s,h))throw Error("A custom element with name '"+(h+"' has already been defined."));if(s.ta)throw Error("A custom element is already being defined.")}function Cp(s,h,p){s.ta=!0;var b;try{var S=p.prototype;if(!(S instanceof Object))throw new TypeError("The custom element constructor's prototype is not an object.");var P=function(ve){var Ge=S[ve];if(Ge!==void 0&&!(Ge instanceof Function))throw Error("The '"+ve+"' callback must be a function.");return Ge},k=P("connectedCallback"),K=P("disconnectedCallback"),ne=P("adoptedCallback"),ae=(b=P("attributeChangedCallback"))&&p.observedAttributes||[]}catch(ve){throw ve}finally{s.ta=!1}return p={localName:h,constructorFunction:p,connectedCallback:k,disconnectedCallback:K,adoptedCallback:ne,attributeChangedCallback:b,observedAttributes:ae,constructionStack:[]},s.la.set(h,p),s.Ca.set(p.constructorFunction,p),p}oe.upgrade=function(s){Ji(this.S,s)};function Ai(s){if(s.V!==!1){s.V=!1;for(var h=[],p=s.ma,b=new Map,S=0;S<p.length;S++)b.set(p[S],[]);for(Ji(s.S,document,{upgrade:function(ne){if(ne.__CE_state===void 0){var ae=ne.localName,ve=b.get(ae);ve?ve.push(ne):s.la.has(ae)&&h.push(ne)}}}),S=0;S<h.length;S++)Js(s.S,h[S]);for(S=0;S<p.length;S++){for(var P=p[S],k=b.get(P),K=0;K<k.length;K++)Js(s.S,k[K]);(P=s.wa.get(P))&&P.resolve(void 0)}p.length=0}}oe.get=function(s){if(s=yr(this,s))return s.constructorFunction},oe.whenDefined=function(s){if(!Xi(s))return Promise.reject(new SyntaxError("'"+s+"' is not a valid custom element name."));var h=this.wa.get(s);if(h)return h.Ha;h=new Ep,this.wa.set(s,h);var p=this.la.has(s)||this.ka.has(s);return s=this.ma.indexOf(s)===-1,p&&s&&h.resolve(void 0),h.Ha},oe.polyfillWrapFlushCallback=function(s){this.Da&&Qe(this.Da);var h=this.ja;this.ja=function(p){return s(function(){return h(p)})}};function yr(s,h){var p=s.la.get(h);if(p)return p;if(p=s.ka.get(h)){s.ka.delete(h);try{return Cp(s,h,p())}catch(b){ao(b)}}}window.CustomElementRegistry=Zn,Zn.prototype.define=Zn.prototype.define,Zn.prototype.upgrade=Zn.prototype.upgrade,Zn.prototype.get=Zn.prototype.get,Zn.prototype.whenDefined=Zn.prototype.whenDefined,Zn.prototype.polyfillDefineLazy=Zn.prototype.eb,Zn.prototype.polyfillWrapFlushCallback=Zn.prototype.polyfillWrapFlushCallback;function ti(s,h,p){function b(S){return function(P){for(var k=[],K=0;K<arguments.length;++K)k[K]=arguments[K];K=[];for(var ne=[],ae=0;ae<k.length;ae++){var ve=k[ae];if(ve instanceof Element&&Dt(ve)&&ne.push(ve),ve instanceof DocumentFragment)for(ve=ve.firstChild;ve;ve=ve.nextSibling)K.push(ve);else K.push(ve)}for(S.apply(this,k),k=0;k<ne.length;k++)Rr(s,ne[k]);if(Dt(this))for(k=0;k<K.length;k++)ne=K[k],ne instanceof Element&&gr(s,ne)}}p.prepend!==void 0&&(h.prepend=b(p.prepend)),p.append!==void 0&&(h.append=b(p.append))}function Fh(s){Document.prototype.createElement=function(h){return Dh(s,this,h,null)},Document.prototype.importNode=function(h,p){return h=kh.call(this,h,!!p),this.__CE_registry?Ji(s,h):ei(s,h),h},Document.prototype.createElementNS=function(h,p){return Dh(s,this,p,h)},ti(s,Document.prototype,{prepend:bp,append:Vr})}function Zi(s){function h(b){return function(S){for(var P=[],k=0;k<arguments.length;++k)P[k]=arguments[k];k=[];for(var K=[],ne=0;ne<P.length;ne++){var ae=P[ne];if(ae instanceof Element&&Dt(ae)&&K.push(ae),ae instanceof DocumentFragment)for(ae=ae.firstChild;ae;ae=ae.nextSibling)k.push(ae);else k.push(ae)}for(b.apply(this,P),P=0;P<K.length;P++)Rr(s,K[P]);if(Dt(this))for(P=0;P<k.length;P++)K=k[P],K instanceof Element&&gr(s,K)}}var p=Element.prototype;vu!==void 0&&(p.before=h(vu)),qs!==void 0&&(p.after=h(qs)),mu!==void 0&&(p.replaceWith=function(b){for(var S=[],P=0;P<arguments.length;++P)S[P]=arguments[P];P=[];for(var k=[],K=0;K<S.length;K++){var ne=S[K];if(ne instanceof Element&&Dt(ne)&&k.push(ne),ne instanceof DocumentFragment)for(ne=ne.firstChild;ne;ne=ne.nextSibling)P.push(ne);else P.push(ne)}for(K=Dt(this),mu.apply(this,S),S=0;S<k.length;S++)Rr(s,k[S]);if(K)for(Rr(s,this),S=0;S<P.length;S++)k=P[S],k instanceof Element&&gr(s,k)}),ro!==void 0&&(p.remove=function(){var b=Dt(this);ro.call(this),b&&Rr(s,this)})}function jo(s){function h(S,P){Object.defineProperty(S,"innerHTML",{enumerable:P.enumerable,configurable:!0,get:P.get,set:function(k){var K=this,ne=void 0;if(Dt(this)&&(ne=[],Ys(s,this,function(Ge){Ge!==K&&ne.push(Ge)})),P.set.call(this,k),ne)for(var ae=0;ae<ne.length;ae++){var ve=ne[ae];ve.__CE_state===1&&s.disconnectedCallback(ve)}return this.ownerDocument.__CE_registry?Ji(s,this):ei(s,this),k}})}function p(S,P){S.insertAdjacentElement=function(k,K){var ne=Dt(K);return k=P.call(this,k,K),ne&&Rr(s,K),Dt(k)&&gr(s,K),k}}function b(S,P){function k(K,ne){for(var ae=[];K!==ne;K=K.nextSibling)ae.push(K);for(ne=0;ne<ae.length;ne++)Ji(s,ae[ne])}S.insertAdjacentHTML=function(K,ne){if(K=K.toLowerCase(),K==="beforebegin"){var ae=this.previousSibling;P.call(this,K,ne),k(ae||this.parentNode.firstChild,this)}else if(K==="afterbegin")ae=this.firstChild,P.call(this,K,ne),k(this.firstChild,ae);else if(K==="beforeend")ae=this.lastChild,P.call(this,K,ne),k(ae||this.firstChild,null);else if(K==="afterend")ae=this.nextSibling,P.call(this,K,ne),k(this.nextSibling,ae);else throw new SyntaxError("The value provided ("+String(K)+") is not one of 'beforebegin', 'afterbegin', 'beforeend', or 'afterend'.")}}ji&&(Element.prototype.attachShadow=function(S){if(S=ji.call(this,S),s.W&&!S.__CE_patched){S.__CE_patched=!0;for(var P=0;P<s.ca.length;P++)s.ca[P](S)}return this.__CE_shadowRoot=S}),qi&&qi.get?h(Element.prototype,qi):Sa&&Sa.get?h(HTMLElement.prototype,Sa):$o(s,function(S){h(S,{enumerable:!0,configurable:!0,get:function(){return Vo.call(this,!0).innerHTML},set:function(P){var k=this.localName==="template",K=k?this.content:this,ne=D.call(document,this.namespaceURI,this.localName);for(ne.innerHTML=P;0<K.childNodes.length;)xa.call(K,K.childNodes[0]);for(P=k?ne.content:ne;0<P.childNodes.length;)Wo.call(K,P.childNodes[0])}})}),Element.prototype.setAttribute=function(S,P){if(this.__CE_state!==1)return $s.call(this,S,P);var k=no.call(this,S);$s.call(this,S,P),P=no.call(this,S),s.attributeChangedCallback(this,S,k,P,null)},Element.prototype.setAttributeNS=function(S,P,k){if(this.__CE_state!==1)return xp.call(this,S,P,k);var K=Mi.call(this,S,P);xp.call(this,S,P,k),k=Mi.call(this,S,P),s.attributeChangedCallback(this,P,K,k,S)},Element.prototype.removeAttribute=function(S){if(this.__CE_state!==1)return js.call(this,S);var P=no.call(this,S);js.call(this,S),P!==null&&s.attributeChangedCallback(this,S,P,null,null)},Element.prototype.removeAttributeNS=function(S,P){if(this.__CE_state!==1)return Ei.call(this,S,P);var k=Mi.call(this,S,P);Ei.call(this,S,P);var K=Mi.call(this,S,P);k!==K&&s.attributeChangedCallback(this,P,k,K,S)},Wr?p(HTMLElement.prototype,Wr):Ti&&p(Element.prototype,Ti),_p?b(HTMLElement.prototype,_p):du&&b(Element.prototype,du),ti(s,Element.prototype,{prepend:pu,append:_a}),Zi(s)}var oo={};function Lp(s){function h(){var p=this.constructor,b=document.__CE_registry.Ca.get(p);if(!b)throw Error("Failed to construct a custom element: The constructor was not registered with `customElements`.");var S=b.constructionStack;if(S.length===0)return S=Gn.call(document,b.localName),Object.setPrototypeOf(S,p.prototype),S.__CE_state=1,S.__CE_definition=b,Yi(s,S),S;var P=S.length-1,k=S[P];if(k===oo)throw Error("Failed to construct '"+b.localName+"': This element was already constructed.");return S[P]=oo,Object.setPrototypeOf(k,p.prototype),Yi(s,k),k}h.prototype=ht.prototype,Object.defineProperty(HTMLElement.prototype,"constructor",{writable:!0,configurable:!0,enumerable:!1,value:h}),window.HTMLElement=h}function Bh(s){function h(p,b){Object.defineProperty(p,"textContent",{enumerable:b.enumerable,configurable:!0,get:b.get,set:function(S){if(this.nodeType===Node.TEXT_NODE)b.set.call(this,S);else{var P=void 0;if(this.firstChild){var k=this.childNodes,K=k.length;if(0<K&&Dt(this)){P=Array(K);for(var ne=0;ne<K;ne++)P[ne]=k[ne]}}if(b.set.call(this,S),P)for(S=0;S<P.length;S++)Rr(s,P[S])}}})}Node.prototype.insertBefore=function(p,b){if(p instanceof DocumentFragment){var S=io(p);if(p=eo.call(this,p,b),Dt(this))for(b=0;b<S.length;b++)gr(s,S[b]);return p}return S=p instanceof Element&&Dt(p),b=eo.call(this,p,b),S&&Rr(s,p),Dt(this)&&gr(s,p),b},Node.prototype.appendChild=function(p){if(p instanceof DocumentFragment){var b=io(p);if(p=Wo.call(this,p),Dt(this))for(var S=0;S<b.length;S++)gr(s,b[S]);return p}return b=p instanceof Element&&Dt(p),S=Wo.call(this,p),b&&Rr(s,p),Dt(this)&&gr(s,p),S},Node.prototype.cloneNode=function(p){return p=Vo.call(this,!!p),this.ownerDocument.__CE_registry?Ji(s,p):ei(s,p),p},Node.prototype.removeChild=function(p){var b=p instanceof Element&&Dt(p),S=xa.call(this,p);return b&&Rr(s,p),S},Node.prototype.replaceChild=function(p,b){if(p instanceof DocumentFragment){var S=io(p);if(p=to.call(this,p,b),Dt(this))for(Rr(s,b),b=0;b<S.length;b++)gr(s,S[b]);return p}S=p instanceof Element&&Dt(p);var P=to.call(this,p,b),k=Dt(this);return k&&Rr(s,b),S&&Rr(s,p),k&&gr(s,p),P},Si&&Si.get?h(Node.prototype,Si):Mp(s,function(p){h(p,{enumerable:!0,configurable:!0,get:function(){for(var b=[],S=this.firstChild;S;S=S.nextSibling)S.nodeType!==Node.COMMENT_NODE&&b.push(S.textContent);return b.join("")},set:function(b){for(;this.firstChild;)xa.call(this,this.firstChild);b!=null&&b!==""&&Wo.call(this,document.createTextNode(b))}})})}var $r=window.customElements;function bu(){var s=new Xs;Lp(s),Fh(s),ti(s,DocumentFragment.prototype,{prepend:Ih,append:$i}),Bh(s),jo(s),s=new Zn(s),document.__CE_registry=s,Object.defineProperty(window,"customElements",{configurable:!0,enumerable:!0,value:s})}$r&&!$r.forcePolyfill&&typeof $r.define=="function"&&typeof $r.get=="function"||bu(),window.__CE_installPolyfill=bu;function ni(){this.end=this.start=0,this.rules=this.parent=this.previous=null,this.cssText=this.parsedCssText="",this.atRule=!1,this.type=0,this.parsedSelector=this.selector=this.keyframesName=""}function xu(s){var h=s=s.replace(cg,"").replace(ut,""),p=new ni;p.start=0,p.end=h.length;for(var b=p,S=0,P=h.length;S<P;S++)if(h[S]==="{"){b.rules||(b.rules=[]);var k=b,K=k.rules[k.rules.length-1]||null;b=new ni,b.start=S+1,b.parent=k,b.previous=K,k.rules.push(b)}else h[S]==="}"&&(b.end=S+1,b=b.parent||p);return jr(p,s)}function jr(s,h){var p=h.substring(s.start,s.end-1);if(s.parsedCssText=s.cssText=p.trim(),s.parent&&(p=h.substring(s.previous?s.previous.end:s.parent.start,s.start-1),p=_u(p),p=p.replace(Au," "),p=p.substring(p.lastIndexOf(";")+1),p=s.parsedSelector=s.selector=p.trim(),s.atRule=p.indexOf("@")===0,s.atRule?p.indexOf("@media")===0?s.type=Ye:p.match(Uh)&&(s.type=Zs,s.keyframesName=s.selector.split(Au).pop()):s.type=p.indexOf("--")===0?Eu:Mu),p=s.rules)for(var b=0,S=p.length,P=void 0;b<S&&(P=p[b]);b++)jr(P,h);return s}function _u(s){return s.replace(/\\([0-9a-f]{1,6})\s/gi,function(h,p){for(h=p,p=6-h.length;p--;)h="0"+h;return"\\"+h})}function Su(s,h,p){p=p===void 0?"":p;var b="";if(s.cssText||s.rules){var S=s.rules,P;if((P=S)&&(P=S[0],P=!(P&&P.selector&&P.selector.indexOf("--")===0)),P){P=0;for(var k=S.length,K=void 0;P<k&&(K=S[P]);P++)b=Su(K,h,b)}else h?h=s.cssText:(h=s.cssText,h=h.replace(wr,"").replace(tn,""),h=h.replace(Tu,"").replace(at,"")),(b=h.trim())&&(b="  "+b+`
`)}return b&&(s.selector&&(p+=s.selector+` {
`),p+=b,s.selector&&(p+=`}

`)),p}var Mu=1,Zs=7,Ye=4,Eu=1e3,cg=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//gim,ut=/@import[^;]*;/gim,wr=/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?(?:[;\n]|$)/gim,tn=/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?{[^}]*?}(?:[;\n]|$)?/gim,Tu=/@apply\s*\(?[^);]*\)?\s*(?:[;\n]|$)?/gim,at=/[^;:]*?:[^;]*?var\([^;]*\)(?:[;\n]|$)?/gim,Uh=/^@[^\s]*keyframes/,Au=/\s+/g,bn=!(window.ShadyDOM&&window.ShadyDOM.inUse),Ks;function qo(s){Ks=s&&s.shimcssproperties?!1:bn||!(navigator.userAgent.match(/AppleWebKit\/601|Edge\/15/)||!window.CSS||!CSS.supports||!CSS.supports("box-shadow","0 0 0 var(--foo)"))}var Xo;window.ShadyCSS&&window.ShadyCSS.cssBuild!==void 0&&(Xo=window.ShadyCSS.cssBuild);var Ci=!(!window.ShadyCSS||!window.ShadyCSS.disableRuntime);window.ShadyCSS&&window.ShadyCSS.nativeCss!==void 0?Ks=window.ShadyCSS.nativeCss:window.ShadyCSS?(qo(window.ShadyCSS),window.ShadyCSS=void 0):qo(window.WebComponents&&window.WebComponents.flags);var Ve=Ks,Yo=/(?:^|[;\s{]\s*)(--[\w-]*?)\s*:\s*(?:((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};{])+)|\{([^}]*)\}(?:(?=[;\s}])|$))/gi,Cu=/(?:^|\W+)@apply\s*\(?([^);\n]*)\)?/gi,Rp=/(--[\w-]+)\s*([:,;)]|$)/gi,hg=/(animation\s*:)|(animation-name\s*:)/,Li=/@media\s(.*)/,Gh=/\{[^}]*\}/g,so=new Set;function Hn(s,h){return s?(typeof s=="string"&&(s=xu(s)),h&&dt(s,h),Su(s,Ve)):""}function Ki(s){return!s.__cssRules&&s.textContent&&(s.__cssRules=xu(s.textContent)),s.__cssRules||null}function Nn(s){return!!s.parent&&s.parent.type===Zs}function dt(s,h,p,b){if(s){var S=!1,P=s.type;if(b&&P===Ye){var k=s.selector.match(Li);k&&(window.matchMedia(k[1]).matches||(S=!0))}if(P===Mu?h(s):p&&P===Zs?p(s):P===Eu&&(S=!0),(s=s.rules)&&!S)for(S=0,P=s.length,k=void 0;S<P&&(k=s[S]);S++)dt(k,h,p,b)}}function Lu(s,h,p,b){var S=document.createElement("style");return h&&S.setAttribute("scope",h),S.textContent=s,Qi(S,p,b),S}var Pr=null;function Ru(s){s=document.createComment(" Shady DOM styles for "+s+" ");var h=document.head;return h.insertBefore(s,(Pr?Pr.nextSibling:null)||h.firstChild),Pr=s}function Qi(s,h,p){h=h||document.head,h.insertBefore(s,p&&p.nextSibling||h.firstChild),Pr?s.compareDocumentPosition(Pr)===Node.DOCUMENT_POSITION_PRECEDING&&(Pr=s):Pr=s}function Ri(s,h){for(var p=0,b=s.length;h<b;h++)if(s[h]==="(")p++;else if(s[h]===")"&&--p==0)return h;return-1}function ea(s,h){var p=s.indexOf("var(");if(p===-1)return h(s,"","","");var b=Ri(s,p+3),S=s.substring(p+4,b);return p=s.substring(0,p),s=ea(s.substring(b+1),h),b=S.indexOf(","),b===-1?h(p,S.trim(),"",s):h(p,S.substring(0,b).trim(),S.substring(b+1).trim(),s)}function Jo(s,h){bn?s.setAttribute("class",h):window.ShadyDOM.nativeMethods.setAttribute.call(s,"class",h)}var lo=window.ShadyDOM&&window.ShadyDOM.wrap||function(s){return s};function ta(s){var h=s.localName,p="";return h?-1<h.indexOf("-")||(p=h,h=s.getAttribute&&s.getAttribute("is")||""):(h=s.is,p=s.extends),{is:h,ha:p}}function Qs(s){for(var h=[],p="",b=0;0<=b&&b<s.length;b++)if(s[b]==="("){var S=Ri(s,b);p+=s.slice(b,S+1),b=S}else s[b]===","?(h.push(p),p=""):p+=s[b];return p&&h.push(p),h}function na(s){if(Xo!==void 0)return Xo;if(s.__cssBuild===void 0){var h=s.getAttribute("css-build");if(h)s.__cssBuild=h;else{e:{if(h=s.localName==="template"?s.content.firstChild:s.firstChild,h instanceof Comment&&(h=h.textContent.trim().split(":"),h[0]==="css-build")){h=h[1];break e}h=""}if(h!==""){var p=s.localName==="template"?s.content.firstChild:s.firstChild;p.parentNode.removeChild(p)}s.__cssBuild=h}}return s.__cssBuild||""}function Zo(s){return s=s===void 0?"":s,s!==""&&Ve?bn?s==="shadow":s==="shady":!1}function ra(){}function Ko(s,h){ia(dr,s,function(p){ri(p,h||"")})}function ia(s,h,p){h.nodeType===Node.ELEMENT_NODE&&p(h);var b;if(h.localName==="template"?b=(h.content||h._content||h).childNodes:b=h.children||h.childNodes,b)for(h=0;h<b.length;h++)ia(s,b[h],p)}function ri(s,h,p){if(h){if(s.classList)p?(s.classList.remove("style-scope"),s.classList.remove(h)):(s.classList.add("style-scope"),s.classList.add(h));else if(s.getAttribute){var b=s.getAttribute("class");p?b&&(h=b.replace("style-scope","").replace(h,""),Jo(s,h)):Jo(s,(b?b+" ":"")+"style-scope "+h)}}}function Pu(s,h,p){ia(dr,s,function(b){ri(b,h,!0),ri(b,p)})}function St(s,h){ia(dr,s,function(p){ri(p,h||"",!0)})}function el(s,h,p,b,S){var P=dr;return S=S===void 0?"":S,S===""&&(bn||(b===void 0?"":b)==="shady"?S=Hn(h,p):(s=ta(s),S=Ou(P,h,s.is,s.ha,p)+`

`)),S.trim()}function Ou(s,h,p,b,S){var P=Hh(p,b);return p=p?"."+p:"",Hn(h,function(k){k.i||(k.selector=k.F=qr(s,k,s.h,p,P),k.i=!0),S&&S(k,p,P)})}function Hh(s,h){return h?"[is="+s+"]":s}function qr(s,h,p,b,S){var P=Qs(h.selector);if(!Nn(h)){h=0;for(var k=P.length,K=void 0;h<k&&(K=P[h]);h++)P[h]=p.call(s,K,b,S)}return P.filter(function(ne){return!!ne}).join(",")}function Nu(s){return s.replace(zh,function(h,p,b){return-1<b.indexOf("+")?b=b.replace(/\+/g,"___"):-1<b.indexOf("___")&&(b=b.replace(/___/g,"+")),":"+p+"("+b+")"})}function ku(s){for(var h=[],p;p=s.match(uo);){var b=p.index,S=Ri(s,b);if(S===-1)throw Error(p.input+" selector missing ')'");p=s.slice(b,S+1),s=s.replace(p,"\uE000"),h.push(p)}return{Ba:s,matches:h}}function Zt(s,h){var p=s.split("\uE000");return h.reduce(function(b,S,P){return b+S+p[P+1]},p[0])}ra.prototype.h=function(s,h,p){var b=!1;s=s.trim();var S=zh.test(s);S&&(s=s.replace(zh,function(K,ne,ae){return":"+ne+"("+ae.replace(/\s/g,"")+")"}),s=Nu(s));var P=uo.test(s);if(P){var k=ku(s);s=k.Ba,k=k.matches}return s=s.replace(fr,":host $1"),s=s.replace(dg,function(K,ne,ae){return b||(K=fg(ae,ne,h,p),b=b||K.stop,ne=K.Ua,ae=K.value),ne+ae}),P&&(s=Zt(s,k)),S&&(s=Nu(s)),s=s.replace(ts,function(K,ne,ae,ve){return'[dir="'+ae+'"] '+ne+ve+", "+ne+'[dir="'+ae+'"]'+ve})};function fg(s,h,p,b){var S=s.indexOf("::slotted");if(0<=s.indexOf(":host")?s=es(s,b):S!==0&&(s=p?Qo(s,p):s),p=!1,0<=S&&(h="",p=!0),p){var P=!0;p&&(s=s.replace(fn,function(k,K){return" > "+K}))}return{value:s,Ua:h,stop:P}}function Qo(s,h){s=s.split(/(\[.+?\])/);for(var p=[],b=0;b<s.length;b++)if(b%2==1)p.push(s[b]);else{var S=s[b];(S!==""||b!==s.length-1)&&(S=S.split(":"),S[0]+=h,p.push(S.join(":")))}return p.join("")}function es(s,h){var p=s.match(Pi);return(p=p&&p[2].trim()||"")?p[0].match(Pp)?s.replace(Pi,function(b,S,P){return h+P}):p.split(Pp)[0]===h?p:"should_not_match":s.replace(":host",h)}function Kn(s){s.selector===":root"&&(s.selector="html")}ra.prototype.i=function(s){return s.match(":host")?"":s.match("::slotted")?this.h(s,":not(.style-scope)"):Qo(s.trim(),":not(.style-scope)")},yt.Object.defineProperties(ra.prototype,{g:{configurable:!0,enumerable:!0,get:function(){return"style-scope"}}});var zh=/:(nth[-\w]+)\(([^)]+)\)/,dg=/(^|[\s>+~]+)((?:\[.+?\]|[^\s>+~=[])+)/g,Pp=/[[.:#*]/,fr=/^(::slotted)/,Pi=/(:host)(?:\(((?:\([^)(]*\)|[^)(]*)+?)\))/,fn=/(?:::slotted)(?:\(((?:\([^)(]*\)|[^)(]*)+?)\))/,ts=/(.*):dir\((?:(ltr|rtl))\)(.*)/,uo=/:(?:matches|any|-(?:webkit|moz)-any)/,dr=new ra;function ii(s,h,p,b,S){this.M=s||null,this.h=h||null,this.za=p||[],this.K=null,this.cssBuild=S||"",this.ha=b||"",this.g=this.L=this.R=null}function ar(s){return s?s.__styleInfo:null}function Ma(s,h){return s.__styleInfo=h}ii.prototype.i=function(){return this.M},ii.prototype._getStyleRules=ii.prototype.i;function tl(s){var h=this.matches||this.matchesSelector||this.mozMatchesSelector||this.msMatchesSelector||this.oMatchesSelector||this.webkitMatchesSelector;return h&&h.call(this,s)}var Iu=/:host\s*>\s*/,Op=navigator.userAgent.match("Trident");function Np(){}function pg(s){var h={},p=[],b=0;dt(s,function(P){Oi(P),P.index=b++,P=P.D.cssText;for(var k;k=Rp.exec(P);){var K=k[1];k[2]!==":"&&(h[K]=!0)}},function(P){p.push(P)}),s.h=p,s=[];for(var S in h)s.push(S);return s}function Oi(s){if(!s.D){var h={},p={};Du(s,p)&&(h.P=p,s.rules=null),h.cssText=s.parsedCssText.replace(Gh,"").replace(Yo,""),s.D=h}}function Du(s,h){var p=s.D;if(p){if(p.P)return Object.assign(h,p.P),!0}else{p=s.parsedCssText;for(var b;s=Yo.exec(p);)b=(s[2]||s[3]).trim(),(b!=="inherit"||b!=="unset")&&(h[s[1].trim()]=b),b=!0;return b}}function nl(s,h,p){return h&&(h=0<=h.indexOf(";")?Vh(s,h,p):ea(h,function(b,S,P,k){return S?((S=nl(s,p[S],p))&&S!=="initial"?S==="apply-shim-inherit"&&(S="inherit"):S=nl(s,p[P]||P,p)||P,b+(S||"")+k):b+k})),h&&h.trim()||""}function Vh(s,h,p){h=h.split(";");for(var b=0,S,P;b<h.length;b++)if(S=h[b]){if(Cu.lastIndex=0,P=Cu.exec(S))S=nl(s,p[P[1]],p);else if(P=S.indexOf(":"),P!==-1){var k=S.substring(P);k=k.trim(),k=nl(s,k,p)||k,S=S.substring(0,P)+k}h[b]=S&&S.lastIndexOf(";")===S.length-1?S.slice(0,-1):S||""}return h.join(";")}function vg(s,h){var p={},b=[];return dt(s,function(S){S.D||Oi(S);var P=S.F||S.parsedSelector;h&&S.D.P&&P&&tl.call(h,P)&&(Du(S,p),S=S.index,P=parseInt(S/32,10),b[P]=(b[P]||0)|1<<S%32)},null,!0),{P:p,key:b}}function mg(s,h,p,b){if(h.D||Oi(h),h.D.P){var S=ta(s);s=S.is,S=S.ha,S=s?Hh(s,S):"html";var P=h.parsedSelector,k=!!P.match(Iu)||S==="html"&&-1<P.indexOf("html"),K=P.indexOf(":host")===0&&!k;p==="shady"&&(k=P===S+" > *."+S||P.indexOf("html")!==-1,K=!k&&P.indexOf(S)===0),(k||K)&&(p=S,K&&(h.F||(h.F=qr(dr,h,dr.h,s?"."+s:"",S)),p=h.F||S),k&&S==="html"&&(p=h.F||h.O),b({Ba:p,ab:K,qb:k}))}}function gg(s,h,p){var b={},S={};return dt(h,function(P){mg(s,P,p,function(k){tl.call(s._element||s,k.Ba)&&(k.ab?Du(P,b):Du(P,S))})},null,!0),{hb:S,Za:b}}function yg(s,h,p,b){var S=ta(h),P=Hh(S.is,S.ha),k=new RegExp("(?:^|[^.#[:])"+(h.extends?"\\"+P.slice(0,-1)+"\\]":P)+"($|[.:[\\s>+~])"),K=ar(h);S=K.M,K=K.cssBuild;var ne=wg(S,b);return el(h,S,function(ae){var ve="";if(ae.D||Oi(ae),ae.D.cssText&&(ve=Vh(s,ae.D.cssText,p)),ae.cssText=ve,!bn&&!Nn(ae)&&ae.cssText){var Ge=ve=ae.cssText;if(ae.Ia==null&&(ae.Ia=hg.test(ve)),ae.Ia)if(ae.pa==null){ae.pa=[];for(var nn in ne)Ge=ne[nn],Ge=Ge(ve),ve!==Ge&&(ve=Ge,ae.pa.push(nn))}else{for(nn=0;nn<ae.pa.length;++nn)Ge=ne[ae.pa[nn]],ve=Ge(ve);Ge=ve}ae.cssText=Ge,ae.F=ae.F||ae.selector,ve="."+b,nn=Qs(ae.F),Ge=0;for(var Tt=nn.length,We=void 0;Ge<Tt&&(We=nn[Ge]);Ge++)nn[Ge]=We.match(k)?We.replace(P,ve):ve+" "+We;ae.selector=nn.join(",")}},K)}function wg(s,h){s=s.h;var p={};if(!bn&&s)for(var b=0,S=s[b];b<s.length;S=s[++b]){var P=S,k=h;P.u=new RegExp("\\b"+P.keyframesName+"(?!\\B|-)","g"),P.g=P.keyframesName+"-"+k,P.F=P.F||P.selector,P.selector=P.F.replace(P.keyframesName,P.g),p[S.keyframesName]=bg(S)}return p}function bg(s){return function(h){return h.replace(s.u,s.g)}}function xg(s,h){var p=Fu,b=Ki(s);s.textContent=Hn(b,function(S){var P=S.cssText=S.parsedCssText;S.D&&S.D.cssText&&(P=P.replace(wr,"").replace(tn,""),S.cssText=Vh(p,P,h))})}yt.Object.defineProperties(Np.prototype,{g:{configurable:!0,enumerable:!0,get:function(){return"x-scope"}}});var Fu=new Np,ns={},Bu=window.customElements;if(Bu&&!bn&&!Ci){var _g=Bu.define;Bu.define=function(s,h,p){ns[s]||(ns[s]=Ru(s)),_g.call(Bu,s,h,p)}}function kp(){this.cache={}}kp.prototype.store=function(s,h,p,b){var S=this.cache[s]||[];S.push({P:h,styleElement:p,L:b}),100<S.length&&S.shift(),this.cache[s]=S};function Ip(){}var Sg=new RegExp(dr.g+"\\s*([^\\s]*)");function Dp(s){return(s=(s.classList&&s.classList.value?s.classList.value:s.getAttribute("class")||"").match(Sg))?s[1]:""}function Wh(s){var h=lo(s).getRootNode();return h===s||h===s.ownerDocument?"":(s=h.host)?ta(s).is:""}function Fp(s){for(var h=0;h<s.length;h++){var p=s[h];if(p.target!==document.documentElement&&p.target!==document.head)for(var b=0;b<p.addedNodes.length;b++){var S=p.addedNodes[b];if(S.nodeType===Node.ELEMENT_NODE){var P=S.getRootNode(),k=Dp(S);if(k&&P===S.ownerDocument&&(S.localName!=="style"&&S.localName!=="template"||na(S)===""))St(S,k);else if(P instanceof ShadowRoot)for(P=Wh(S),P!==k&&Pu(S,k,P),S=window.ShadyDOM.nativeMethods.querySelectorAll.call(S,":not(."+dr.g+")"),k=0;k<S.length;k++){P=S[k];var K=Wh(P);K&&ri(P,K)}}}}}if(!(bn||window.ShadyDOM&&window.ShadyDOM.handlesDynamicScoping)){var Bp=new MutationObserver(Fp),Up=function(s){Bp.observe(s,{childList:!0,subtree:!0})};if(window.customElements&&!window.customElements.polyfillWrapFlushCallback)Up(document);else{var $h=function(){Up(document.body)};window.HTMLImports?window.HTMLImports.whenReady($h):requestAnimationFrame(function(){if(document.readyState==="loading"){var s=function(){$h(),document.removeEventListener("readystatechange",s)};document.addEventListener("readystatechange",s)}else $h()})}Ip=function(){Fp(Bp.takeRecords())}}var Uu={},Mg=Promise.resolve();function Eg(s){(s=Uu[s])&&(s._applyShimCurrentVersion=s._applyShimCurrentVersion||0,s._applyShimValidatingVersion=s._applyShimValidatingVersion||0,s._applyShimNextVersion=(s._applyShimNextVersion||0)+1)}function Gp(s){return s._applyShimCurrentVersion===s._applyShimNextVersion}function Tg(s){s._applyShimValidatingVersion=s._applyShimNextVersion,s._validating||(s._validating=!0,Mg.then(function(){s._applyShimCurrentVersion=s._applyShimNextVersion,s._validating=!1}))}var Hp={},zp=new kp;function Et(){this.da={},this.i=document.documentElement;var s=new ni;s.rules=[],this.u=Ma(this.i,new ii(s)),this.O=!1,this.g=this.h=null}oe=Et.prototype,oe.flush=function(){Ip()},oe.Xa=function(s){return Ki(s)},oe.lb=function(s){return Hn(s)},oe.prepareTemplate=function(s,h,p){this.prepareTemplateDom(s,h),this.prepareTemplateStyles(s,h,p)},oe.prepareTemplateStyles=function(s,h,p){if(!s._prepared&&!Ci){bn||ns[h]||(ns[h]=Ru(h)),s._prepared=!0,s.name=h,s.extends=p,Uu[h]=s;var b=na(s),S=Zo(b);p={is:h,extends:p};for(var P=[],k=s.content.querySelectorAll("style"),K=0;K<k.length;K++){var ne=k[K];if(ne.hasAttribute("shady-unscoped")){if(!bn){var ae=ne.textContent;if(!so.has(ae)){so.add(ae);var ve=document.createElement("style");ve.setAttribute("shady-unscoped",""),ve.textContent=ae,document.head.appendChild(ve)}ne.parentNode.removeChild(ne)}}else P.push(ne.textContent),ne.parentNode.removeChild(ne)}P=P.join("").trim()+(Hp[h]||""),rl(this),S||((k=!b)&&(k=Cu.test(P)||Yo.test(P),Cu.lastIndex=0,Yo.lastIndex=0),K=xu(P),k&&Ve&&this.h&&this.h.transformRules(K,h),s._styleAst=K),k=[],Ve||(k=pg(s._styleAst)),(!k.length||Ve)&&(K=bn?s.content:null,h=ns[h]||null,b=el(p,s._styleAst,null,b,S?P:""),b=b.length?Lu(b,p.is,K,h):null,s._style=b),s.g=k}},oe.fb=function(s,h){Hp[h]=s.join(" ")},oe.prepareTemplateDom=function(s,h){if(!Ci){var p=na(s);bn||p==="shady"||s._domPrepared||(s._domPrepared=!0,Ko(s.content,h))}};function Vp(s){var h=ta(s),p=h.is;h=h.ha;var b=ns[p]||null,S=Uu[p];if(S){p=S._styleAst;var P=S.g;return S=na(S),h=new ii(p,b,P,h,S),Ma(s,h),h}}function Ag(s){!s.g&&window.ShadyCSS&&window.ShadyCSS.CustomStyleInterface&&(s.g=window.ShadyCSS.CustomStyleInterface,s.g.transformCallback=function(h){s.Ma(h)},s.g.validateCallback=function(){requestAnimationFrame(function(){(s.g.enqueued||s.O)&&s.flushCustomStyles()})})}function rl(s){if(!s.h&&window.ShadyCSS&&window.ShadyCSS.ApplyShim){s.h=window.ShadyCSS.ApplyShim,s.h.invalidCallback=Eg;var h=!0}else h=!1;return Ag(s),h}oe.flushCustomStyles=function(){if(!Ci){var s=rl(this);if(this.g){var h=this.g.processStyles();if((s||this.g.enqueued)&&!Zo(this.u.cssBuild)){if(Ve){if(!this.u.cssBuild)for(s=0;s<h.length;s++){var p=this.g.getStyleForCustomStyle(h[s]);if(p&&Ve&&this.h){var b=Ki(p);rl(this),this.h.transformRules(b),p.textContent=Hn(b)}}}else{for(Cg(this,h),qh(this,this.i,this.u),s=0;s<h.length;s++)(p=this.g.getStyleForCustomStyle(h[s]))&&xg(p,this.u.R);this.O&&this.styleDocument()}this.g.enqueued=!1}}}};function Cg(s,h){h=h.map(function(p){return s.g.getStyleForCustomStyle(p)}).filter(function(p){return!!p}),h.sort(function(p,b){return p=b.compareDocumentPosition(p),p&Node.DOCUMENT_POSITION_FOLLOWING?1:p&Node.DOCUMENT_POSITION_PRECEDING?-1:0}),s.u.M.rules=h.map(function(p){return Ki(p)})}oe.styleElement=function(s,h){if(Ci){if(h){ar(s)||Ma(s,new ii(null));var p=ar(s);p.K=p.K||{},Object.assign(p.K,h),Wp(this,s,p)}}else if(p=ar(s)||Vp(s)){if(s!==this.i&&(this.O=!0),h&&(p.K=p.K||{},Object.assign(p.K,h)),Ve)Wp(this,s,p);else if(this.flush(),qh(this,s,p),p.za&&p.za.length){h=ta(s).is;var b;e:{if(b=zp.cache[h])for(var S=b.length-1;0<=S;S--){var P=b[S];t:{for(var k=p.za,K=0;K<k.length;K++){var ne=k[K];if(P.P[ne]!==p.R[ne]){k=!1;break t}}k=!0}if(k){b=P;break e}}b=void 0}k=b?b.styleElement:null,S=p.L,(P=b&&b.L)||(P=this.da[h]=(this.da[h]||0)+1,P=h+"-"+P),p.L=P,P=p.L,K=Fu,K=k?k.textContent||"":yg(K,s,p.R,P),ne=ar(s);var ae=ne.g;ae&&!bn&&ae!==k&&(ae._useCount--,0>=ae._useCount&&ae.parentNode&&ae.parentNode.removeChild(ae)),bn?ne.g?(ne.g.textContent=K,k=ne.g):K&&(k=Lu(K,P,s.shadowRoot,ne.h)):k?k.parentNode||(Op&&-1<K.indexOf("@media")&&(k.textContent=K),Qi(k,null,ne.h)):K&&(k=Lu(K,P,null,ne.h)),k&&(k._useCount=k._useCount||0,ne.g!=k&&k._useCount++,ne.g=k),P=k,bn||(k=p.L,ne=K=s.getAttribute("class")||"",S&&(ne=K.replace(new RegExp("\\s*x-scope\\s*"+S+"\\s*","g")," ")),ne+=(ne?" ":"")+"x-scope "+k,K!==ne&&Jo(s,ne)),b||zp.store(h,p.R,P,p.L)}}};function Wp(s,h,p){var b=ta(h).is;if(p.K){var S=p.K,P;for(P in S)P===null?h.style.removeProperty(P):h.style.setProperty(P,S[P])}S=Uu[b],!(!S&&h!==s.i||S&&na(S)!=="")&&S&&S._style&&!Gp(S)&&((Gp(S)||S._applyShimValidatingVersion!==S._applyShimNextVersion)&&(rl(s),s.h&&s.h.transformRules(S._styleAst,b),S._style.textContent=el(h,p.M),Tg(S)),bn&&(s=h.shadowRoot)&&(s=s.querySelector("style"))&&(s.textContent=el(h,p.M)),p.M=S._styleAst)}function jh(s,h){return(h=lo(h).getRootNode().host)?ar(h)||Vp(h)?h:jh(s,h):s.i}function qh(s,h,p){var b=jh(s,h),S=ar(b),P=S.R;b===s.i||P||(qh(s,b,S),P=S.R),s=Object.create(P||null),b=gg(h,p.M,p.cssBuild),h=vg(S.M,h).P,Object.assign(s,b.Za,h,b.hb),h=p.K;for(var k in h)((S=h[k])||S===0)&&(s[k]=S);for(k=Fu,h=Object.getOwnPropertyNames(s),S=0;S<h.length;S++)b=h[S],s[b]=nl(k,s[b],s);p.R=s}oe.styleDocument=function(s){this.styleSubtree(this.i,s)},oe.styleSubtree=function(s,h){var p=lo(s),b=p.shadowRoot,S=s===this.i;if((b||S)&&this.styleElement(s,h),s=S?p:b)for(s=Array.from(s.querySelectorAll("*")).filter(function(P){return lo(P).shadowRoot}),h=0;h<s.length;h++)this.styleSubtree(s[h])},oe.Ma=function(s){var h=this,p=na(s);if(p!==this.u.cssBuild&&(this.u.cssBuild=p),!Zo(p)){var b=Ki(s);dt(b,function(S){if(bn)Kn(S);else{var P=dr;S.selector=S.parsedSelector,Kn(S),S.selector=S.F=qr(P,S,P.i,void 0,void 0)}Ve&&p===""&&(rl(h),h.h&&h.h.transformRule(S))}),Ve?s.textContent=Hn(b):this.u.M.rules.push(b)}},oe.getComputedStyleValue=function(s,h){var p;return Ve||(p=(ar(s)||ar(jh(this,s))).R[h]),(p=p||window.getComputedStyle(s).getPropertyValue(h))?p.trim():""},oe.kb=function(s,h){var p=lo(s).getRootNode();if(h=h?(typeof h=="string"?h:String(h)).split(/\s/):[],p=p.host&&p.host.localName,!p){var b=s.getAttribute("class");if(b){b=b.split(/\s/);for(var S=0;S<b.length;S++)if(b[S]===dr.g){p=b[S+1];break}}}p&&h.push(dr.g,p),Ve||(p=ar(s))&&p.L&&h.push(Fu.g,p.L),Jo(s,h.join(" "))},oe.Ta=function(s){return ar(s)},oe.jb=function(s,h){ri(s,h)},oe.mb=function(s,h){ri(s,h,!0)},oe.ib=function(s){return Wh(s)},oe.Va=function(s){return Dp(s)},Et.prototype.flush=Et.prototype.flush,Et.prototype.prepareTemplate=Et.prototype.prepareTemplate,Et.prototype.styleElement=Et.prototype.styleElement,Et.prototype.styleDocument=Et.prototype.styleDocument,Et.prototype.styleSubtree=Et.prototype.styleSubtree,Et.prototype.getComputedStyleValue=Et.prototype.getComputedStyleValue,Et.prototype.setElementClass=Et.prototype.kb,Et.prototype._styleInfoForNode=Et.prototype.Ta,Et.prototype.transformCustomStyleForDocument=Et.prototype.Ma,Et.prototype.getStyleAst=Et.prototype.Xa,Et.prototype.styleAstToString=Et.prototype.lb,Et.prototype.flushCustomStyles=Et.prototype.flushCustomStyles,Et.prototype.scopeNode=Et.prototype.jb,Et.prototype.unscopeNode=Et.prototype.mb,Et.prototype.scopeForNode=Et.prototype.ib,Et.prototype.currentScopeForNode=Et.prototype.Va,Et.prototype.prepareAdoptedCssText=Et.prototype.fb,Object.defineProperties(Et.prototype,{nativeShadow:{get:function(){return bn}},nativeCss:{get:function(){return Ve}}});var br=new Et,Xh,Yh;window.ShadyCSS&&(Xh=window.ShadyCSS.ApplyShim,Yh=window.ShadyCSS.CustomStyleInterface),window.ShadyCSS={ScopingShim:br,prepareTemplate:function(s,h,p){br.flushCustomStyles(),br.prepareTemplate(s,h,p)},prepareTemplateDom:function(s,h){br.prepareTemplateDom(s,h)},prepareTemplateStyles:function(s,h,p){br.flushCustomStyles(),br.prepareTemplateStyles(s,h,p)},styleSubtree:function(s,h){br.flushCustomStyles(),br.styleSubtree(s,h)},styleElement:function(s){br.flushCustomStyles(),br.styleElement(s)},styleDocument:function(s){br.flushCustomStyles(),br.styleDocument(s)},flushCustomStyles:function(){br.flushCustomStyles()},getComputedStyleValue:function(s,h){return br.getComputedStyleValue(s,h)},nativeCss:Ve,nativeShadow:bn,cssBuild:Xo,disableRuntime:Ci},Xh&&(window.ShadyCSS.ApplyShim=Xh),Yh&&(window.ShadyCSS.CustomStyleInterface=Yh),function(s){function h(We){return We==""&&(P.call(this),this.m=!0),We.toLowerCase()}function p(We){var Vt=We.charCodeAt(0);return 32<Vt&&127>Vt&&[34,35,60,62,63,96].indexOf(Vt)==-1?We:encodeURIComponent(We)}function b(We){var Vt=We.charCodeAt(0);return 32<Vt&&127>Vt&&[34,35,60,62,96].indexOf(Vt)==-1?We:encodeURIComponent(We)}function S(We,Vt,Rt){function Cn(oi){Ta.push(oi)}var mt=Vt||"scheme start",xr=0,nt="",Ea=!1,ai=!1,Ta=[];e:for(;(We[xr-1]!=null||xr==0)&&!this.m;){var _e=We[xr];switch(mt){case"scheme start":if(_e&&Ge.test(_e))nt+=_e.toLowerCase(),mt="scheme";else if(Vt){Cn("Invalid scheme.");break e}else{nt="",mt="no scheme";continue}break;case"scheme":if(_e&&nn.test(_e))nt+=_e.toLowerCase();else if(_e==":"){if(this.l=nt,nt="",Vt)break e;ae[this.l]!==void 0&&(this.G=!0),mt=this.l=="file"?"relative":this.G&&Rt&&Rt.l==this.l?"relative or authority":this.G?"authority first slash":"scheme data"}else if(Vt){_e!=null&&Cn("Code point not allowed in scheme: "+_e);break e}else{nt="",xr=0,mt="no scheme";continue}break;case"scheme data":_e=="?"?(this.A="?",mt="query"):_e=="#"?(this.C="#",mt="fragment"):_e!=null&&_e!="	"&&_e!=`
`&&_e!="\r"&&(this.va+=p(_e));break;case"no scheme":if(Rt&&ae[Rt.l]!==void 0){mt="relative";continue}else Cn("Missing scheme."),P.call(this),this.m=!0;break;case"relative or authority":if(_e=="/"&&We[xr+1]=="/")mt="authority ignore slashes";else{Cn("Expected /, got: "+_e),mt="relative";continue}break;case"relative":if(this.G=!0,this.l!="file"&&(this.l=Rt.l),_e==null){this.o=Rt.o,this.v=Rt.v,this.s=Rt.s.slice(),this.A=Rt.A,this.B=Rt.B,this.j=Rt.j;break e}else if(_e=="/"||_e=="\\")_e=="\\"&&Cn("\\ is an invalid code point."),mt="relative slash";else if(_e=="?")this.o=Rt.o,this.v=Rt.v,this.s=Rt.s.slice(),this.A="?",this.B=Rt.B,this.j=Rt.j,mt="query";else if(_e=="#")this.o=Rt.o,this.v=Rt.v,this.s=Rt.s.slice(),this.A=Rt.A,this.C="#",this.B=Rt.B,this.j=Rt.j,mt="fragment";else{mt=We[xr+1];var ln=We[xr+2];(this.l!="file"||!Ge.test(_e)||mt!=":"&&mt!="|"||ln!=null&&ln!="/"&&ln!="\\"&&ln!="?"&&ln!="#")&&(this.o=Rt.o,this.v=Rt.v,this.B=Rt.B,this.j=Rt.j,this.s=Rt.s.slice(),this.s.pop()),mt="relative path";continue}break;case"relative slash":if(_e=="/"||_e=="\\")_e=="\\"&&Cn("\\ is an invalid code point."),mt=this.l=="file"?"file host":"authority ignore slashes";else{this.l!="file"&&(this.o=Rt.o,this.v=Rt.v,this.B=Rt.B,this.j=Rt.j),mt="relative path";continue}break;case"authority first slash":if(_e=="/")mt="authority second slash";else{Cn("Expected '/', got: "+_e),mt="authority ignore slashes";continue}break;case"authority second slash":if(mt="authority ignore slashes",_e!="/"){Cn("Expected '/', got: "+_e);continue}break;case"authority ignore slashes":if(_e!="/"&&_e!="\\"){mt="authority";continue}else Cn("Expected authority, got: "+_e);break;case"authority":if(_e=="@"){for(Ea&&(Cn("@ already seen."),nt+="%40"),Ea=!0,_e=0;_e<nt.length;_e++)ln=nt[_e],ln=="	"||ln==`
`||ln=="\r"?Cn("Invalid whitespace in authority."):ln==":"&&this.j===null?this.j="":(ln=p(ln),this.j!==null?this.j+=ln:this.B+=ln);nt=""}else if(_e==null||_e=="/"||_e=="\\"||_e=="?"||_e=="#"){xr-=nt.length,nt="",mt="host";continue}else nt+=_e;break;case"file host":if(_e==null||_e=="/"||_e=="\\"||_e=="?"||_e=="#"){nt.length!=2||!Ge.test(nt[0])||nt[1]!=":"&&nt[1]!="|"?(nt.length!=0&&(this.o=h.call(this,nt),nt=""),mt="relative path start"):mt="relative path";continue}else _e=="	"||_e==`
`||_e=="\r"?Cn("Invalid whitespace in file host."):nt+=_e;break;case"host":case"hostname":if(_e!=":"||ai)if(_e==null||_e=="/"||_e=="\\"||_e=="?"||_e=="#"){if(this.o=h.call(this,nt),nt="",mt="relative path start",Vt)break e;continue}else _e!="	"&&_e!=`
`&&_e!="\r"?(_e=="["?ai=!0:_e=="]"&&(ai=!1),nt+=_e):Cn("Invalid code point in host/hostname: "+_e);else if(this.o=h.call(this,nt),nt="",mt="port",Vt=="hostname")break e;break;case"port":if(/[0-9]/.test(_e))nt+=_e;else if(_e==null||_e=="/"||_e=="\\"||_e=="?"||_e=="#"||Vt){if(nt!=""&&(nt=parseInt(nt,10),nt!=ae[this.l]&&(this.v=nt+""),nt=""),Vt)break e;mt="relative path start";continue}else _e=="	"||_e==`
`||_e=="\r"?Cn("Invalid code point in port: "+_e):(P.call(this),this.m=!0);break;case"relative path start":if(_e=="\\"&&Cn("'\\' not allowed in path."),mt="relative path",_e!="/"&&_e!="\\")continue;break;case"relative path":_e!=null&&_e!="/"&&_e!="\\"&&(Vt||_e!="?"&&_e!="#")?_e!="	"&&_e!=`
`&&_e!="\r"&&(nt+=p(_e)):(_e=="\\"&&Cn("\\ not allowed in relative path."),(ln=ve[nt.toLowerCase()])&&(nt=ln),nt==".."?(this.s.pop(),_e!="/"&&_e!="\\"&&this.s.push("")):nt=="."&&_e!="/"&&_e!="\\"?this.s.push(""):nt!="."&&(this.l=="file"&&this.s.length==0&&nt.length==2&&Ge.test(nt[0])&&nt[1]=="|"&&(nt=nt[0]+":"),this.s.push(nt)),nt="",_e=="?"?(this.A="?",mt="query"):_e=="#"&&(this.C="#",mt="fragment"));break;case"query":Vt||_e!="#"?_e!=null&&_e!="	"&&_e!=`
`&&_e!="\r"&&(this.A+=b(_e)):(this.C="#",mt="fragment");break;case"fragment":_e!=null&&_e!="	"&&_e!=`
`&&_e!="\r"&&(this.C+=_e)}xr++}}function P(){this.B=this.va=this.l="",this.j=null,this.v=this.o="",this.s=[],this.C=this.A="",this.G=this.m=!1}function k(We,Vt){Vt===void 0||Vt instanceof k||(Vt=new k(String(Vt))),this.g=We,P.call(this),S.call(this,this.g.replace(/^[ \t\r\n\f]+|[ \t\r\n\f]+$/g,""),null,Vt)}var K=!1;try{var ne=new URL("b","http://a");ne.pathname="c%20d",K=ne.href==="http://a/c%20d"}catch{}if(!K){var ae=Object.create(null);ae.ftp=21,ae.file=0,ae.gopher=70,ae.http=80,ae.https=443,ae.ws=80,ae.wss=443;var ve=Object.create(null);ve["%2e"]=".",ve[".%2e"]="..",ve["%2e."]="..",ve["%2e%2e"]="..";var Ge=/[a-zA-Z]/,nn=/[a-zA-Z0-9+\-.]/;k.prototype={toString:function(){return this.href},get href(){if(this.m)return this.g;var We="";return(this.B!=""||this.j!=null)&&(We=this.B+(this.j!=null?":"+this.j:"")+"@"),this.protocol+(this.G?"//"+We+this.host:"")+this.pathname+this.A+this.C},set href(We){P.call(this),S.call(this,We)},get protocol(){return this.l+":"},set protocol(We){this.m||S.call(this,We+":","scheme start")},get host(){return this.m?"":this.v?this.o+":"+this.v:this.o},set host(We){!this.m&&this.G&&S.call(this,We,"host")},get hostname(){return this.o},set hostname(We){!this.m&&this.G&&S.call(this,We,"hostname")},get port(){return this.v},set port(We){!this.m&&this.G&&S.call(this,We,"port")},get pathname(){return this.m?"":this.G?"/"+this.s.join("/"):this.va},set pathname(We){!this.m&&this.G&&(this.s=[],S.call(this,We,"relative path start"))},get search(){return this.m||!this.A||this.A=="?"?"":this.A},set search(We){!this.m&&this.G&&(this.A="?",We[0]=="?"&&(We=We.slice(1)),S.call(this,We,"query"))},get hash(){return this.m||!this.C||this.C=="#"?"":this.C},set hash(We){this.m||(We?(this.C="#",We[0]=="#"&&(We=We.slice(1)),S.call(this,We,"fragment")):this.C="")},get origin(){var We;if(this.m||!this.l)return"";switch(this.l){case"data":case"file":case"javascript":case"mailto":return"null"}return(We=this.host)?this.l+"://"+We:""}};var Tt=s.URL;Tt&&(k.createObjectURL=function(We){return Tt.createObjectURL.apply(Tt,arguments)},k.revokeObjectURL=function(We){Tt.revokeObjectURL(We)}),s.URL=k}}(window);var $p=window.customElements,jp=!1,Jh=null;$p.polyfillWrapFlushCallback&&$p.polyfillWrapFlushCallback(function(s){Jh=s,jp&&s()});function Gu(){window.HTMLTemplateElement.bootstrap&&window.HTMLTemplateElement.bootstrap(window.document),Jh&&Jh(),jp=!0,window.WebComponents.ready=!0,document.dispatchEvent(new CustomEvent("WebComponentsReady",{bubbles:!0}))}document.readyState!=="complete"?(window.addEventListener("load",Gu),window.addEventListener("DOMContentLoaded",function(){window.removeEventListener("load",Gu),Gu()})):Gu()}).call(FT)});var zT=xT((_d,Sd)=>{(function(oe){"use strict";function me(Ne,Ce,qe,vt){var tt=Ce&&Ce.prototype instanceof Ke?Ce:Ke,mn=Object.create(tt.prototype),Un=new To(vt||[]);return mn._invoke=Mt(Ne,qe,Un),mn}function Re(Ne,Ce,qe){try{return{type:"normal",arg:Ne.call(Ce,qe)}}catch(vt){return{type:"throw",arg:vt}}}function Ke(){}function yt(){}function Yt(){}function hn(Ne){["next","throw","return"].forEach(function(Ce){Ne[Ce]=function(qe){return this._invoke(Ce,qe)}})}function Ct(Ne){function Ce(tt,mn,Un,tr){var cr=Re(Ne[tt],Ne,mn);if(cr.type==="throw")tr(cr.arg);else{var yi=cr.arg,Hi=yi.value;return Hi&&typeof Hi=="object"&&Ar.call(Hi,"__await")?Promise.resolve(Hi.__await).then(function(zi){Ce("next",zi,Un,tr)},function(zi){Ce("throw",zi,Un,tr)}):Promise.resolve(Hi).then(function(zi){yi.value=zi,Un(yi)},tr)}}function qe(tt,mn){function Un(){return new Promise(function(tr,cr){Ce(tt,mn,tr,cr)})}return vt=vt?vt.then(Un,Un):Un()}var vt;this._invoke=qe}function Mt(Ne,Ce,qe){var vt="suspendedStart";return function(tt,mn){if(vt==="executing")throw new Error("Generator is already running");if(vt==="completed"){if(tt==="throw")throw mn;return gi()}for(qe.method=tt,qe.arg=mn;;){var Un=qe.delegate;if(Un){var tr=Bn(Un,qe);if(tr){if(tr===qn)continue;return tr}}if(qe.method==="next")qe.sent=qe._sent=qe.arg;else if(qe.method==="throw"){if(vt==="suspendedStart")throw vt="completed",qe.arg;qe.dispatchException(qe.arg)}else qe.method==="return"&&qe.abrupt("return",qe.arg);vt="executing";var cr=Re(Ne,Ce,qe);if(cr.type==="normal"){if(vt=qe.done?"completed":"suspendedYield",cr.arg===qn)continue;return{value:cr.arg,done:qe.done}}cr.type==="throw"&&(vt="completed",qe.method="throw",qe.arg=cr.arg)}}}function Bn(Ne,Ce){var qe=Ne.iterator[Ce.method];if(qe===void 0){if(Ce.delegate=null,Ce.method==="throw"){if(Ne.iterator.return&&(Ce.method="return",Ce.arg=void 0,Bn(Ne,Ce),Ce.method==="throw"))return qn;Ce.method="throw",Ce.arg=new TypeError("The iterator does not provide a 'throw' method")}return qn}var vt=Re(qe,Ne.iterator,Ce.arg);if(vt.type==="throw")return Ce.method="throw",Ce.arg=vt.arg,Ce.delegate=null,qn;var tt=vt.arg;if(!tt)return Ce.method="throw",Ce.arg=new TypeError("iterator result is not an object"),Ce.delegate=null,qn;if(tt.done)Ce[Ne.resultName]=tt.value,Ce.next=Ne.nextLoc,Ce.method!=="return"&&(Ce.method="next",Ce.arg=void 0);else return tt;return Ce.delegate=null,qn}function As(Ne){var Ce={tryLoc:Ne[0]};1 in Ne&&(Ce.catchLoc=Ne[1]),2 in Ne&&(Ce.finallyLoc=Ne[2],Ce.afterLoc=Ne[3]),this.tryEntries.push(Ce)}function Eo(Ne){var Ce=Ne.completion||{};Ce.type="normal",delete Ce.arg,Ne.completion=Ce}function To(Ne){this.tryEntries=[{tryLoc:"root"}],Ne.forEach(As,this),this.reset(!0)}function Xe(Ne){if(Ne){var Ce=Ne[Fr];if(Ce)return Ce.call(Ne);if(typeof Ne.next=="function")return Ne;if(!isNaN(Ne.length)){var qe=-1,vt=function tt(){for(;++qe<Ne.length;)if(Ar.call(Ne,qe))return tt.value=Ne[qe],tt.done=!1,tt;return tt.value=void 0,tt.done=!0,tt};return vt.next=vt}}return{next:gi}}function gi(){return{value:void 0,done:!0}}var Dr=Object.prototype,Ar=Dr.hasOwnProperty,Ga=typeof Symbol=="function"?Symbol:{},Fr=Ga.iterator||"@@iterator",Gi=Ga.asyncIterator||"@@asyncIterator",fa=Ga.toStringTag||"@@toStringTag",da=typeof Sd=="object",vr=oe.regeneratorRuntime;if(vr)return void(da&&(Sd.exports=vr));vr=oe.regeneratorRuntime=da?Sd.exports:{},vr.wrap=me;var qn={},Ha={};Ha[Fr]=function(){return this};var Ao=Object.getPrototypeOf,Co=Ao&&Ao(Ao(Xe([])));Co&&Co!==Dr&&Ar.call(Co,Fr)&&(Ha=Co);var on=Yt.prototype=Ke.prototype=Object.create(Ha);yt.prototype=on.constructor=Yt,Yt.constructor=yt,Yt[fa]=yt.displayName="GeneratorFunction",vr.isGeneratorFunction=function(Ne){var Ce=typeof Ne=="function"&&Ne.constructor;return!!Ce&&(Ce===yt||(Ce.displayName||Ce.name)==="GeneratorFunction")},vr.mark=function(Ne){return Object.setPrototypeOf?Object.setPrototypeOf(Ne,Yt):(Ne.__proto__=Yt,!(fa in Ne)&&(Ne[fa]="GeneratorFunction")),Ne.prototype=Object.create(on),Ne},vr.awrap=function(Ne){return{__await:Ne}},hn(Ct.prototype),Ct.prototype[Gi]=function(){return this},vr.AsyncIterator=Ct,vr.async=function(Ne,Ce,qe,vt){var tt=new Ct(me(Ne,Ce,qe,vt));return vr.isGeneratorFunction(Ce)?tt:tt.next().then(function(mn){return mn.done?mn.value:tt.next()})},hn(on),on[fa]="Generator",on[Fr]=function(){return this},on.toString=function(){return"[object Generator]"},vr.keys=function(Ne){var Ce=[];for(var qe in Ne)Ce.push(qe);return Ce.reverse(),function vt(){for(;Ce.length;){var tt=Ce.pop();if(tt in Ne)return vt.value=tt,vt.done=!1,vt}return vt.done=!0,vt}},vr.values=Xe,To.prototype={constructor:To,reset:function(Ne){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Eo),!Ne)for(var Ce in this)Ce.charAt(0)==="t"&&Ar.call(this,Ce)&&!isNaN(+Ce.slice(1))&&(this[Ce]=void 0)},stop:function(){this.done=!0;var Ne=this.tryEntries[0],Ce=Ne.completion;if(Ce.type==="throw")throw Ce.arg;return this.rval},dispatchException:function(Ne){function Ce(cr,yi){return mn.type="throw",mn.arg=Ne,qe.next=cr,yi&&(qe.method="next",qe.arg=void 0),!!yi}if(this.done)throw Ne;for(var qe=this,vt=this.tryEntries.length-1;0<=vt;--vt){var tt=this.tryEntries[vt],mn=tt.completion;if(tt.tryLoc==="root")return Ce("end");if(tt.tryLoc<=this.prev){var Un=Ar.call(tt,"catchLoc"),tr=Ar.call(tt,"finallyLoc");if(Un&&tr){if(this.prev<tt.catchLoc)return Ce(tt.catchLoc,!0);if(this.prev<tt.finallyLoc)return Ce(tt.finallyLoc)}else if(Un){if(this.prev<tt.catchLoc)return Ce(tt.catchLoc,!0)}else if(tr){if(this.prev<tt.finallyLoc)return Ce(tt.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(Ne,Ce){for(var qe,vt=this.tryEntries.length-1;0<=vt;--vt)if(qe=this.tryEntries[vt],qe.tryLoc<=this.prev&&Ar.call(qe,"finallyLoc")&&this.prev<qe.finallyLoc){var tt=qe;break}tt&&(Ne==="break"||Ne==="continue")&&tt.tryLoc<=Ce&&Ce<=tt.finallyLoc&&(tt=null);var mn=tt?tt.completion:{};return mn.type=Ne,mn.arg=Ce,tt?(this.method="next",this.next=tt.finallyLoc,qn):this.complete(mn)},complete:function(Ne,Ce){if(Ne.type==="throw")throw Ne.arg;return Ne.type==="break"||Ne.type==="continue"?this.next=Ne.arg:Ne.type==="return"?(this.rval=this.arg=Ne.arg,this.method="return",this.next="end"):Ne.type==="normal"&&Ce&&(this.next=Ce),qn},finish:function(Ne){for(var Ce,qe=this.tryEntries.length-1;0<=qe;--qe)if(Ce=this.tryEntries[qe],Ce.finallyLoc===Ne)return this.complete(Ce.completion,Ce.afterLoc),Eo(Ce),qn},catch:function(Ne){for(var Ce,qe=this.tryEntries.length-1;0<=qe;--qe)if(Ce=this.tryEntries[qe],Ce.tryLoc===Ne){var vt=Ce.completion;if(vt.type==="throw"){var tt=vt.arg;Eo(Ce)}return tt}throw new Error("illegal catch attempt")},delegateYield:function(Ne,Ce,qe){return this.delegate={iterator:Xe(Ne),resultName:Ce,nextLoc:qe},this.method==="next"&&(this.arg=void 0),qn}}})(function(){return this}()||Function("return this")());function Pw(oe,me){return nO(oe)||tO(oe,me)||Ow(oe,me)||eO()}function eO(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tO(oe,me){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(oe)))){var Re=[],Ke=!0,yt=!1,Yt=void 0;try{for(var hn=oe[Symbol.iterator](),Ct;!(Ke=(Ct=hn.next()).done)&&(Re.push(Ct.value),!(me&&Re.length===me));Ke=!0);}catch(Mt){yt=!0,Yt=Mt}finally{try{!Ke&&hn.return!=null&&hn.return()}finally{if(yt)throw Yt}}return Re}}function nO(oe){if(Array.isArray(oe))return oe}function et(oe,me,Re){return typeof Reflect!="undefined"&&Reflect.get?et=Reflect.get:et=function(yt,Yt,hn){var Ct=rO(yt,Yt);if(!!Ct){var Mt=Object.getOwnPropertyDescriptor(Ct,Yt);return Mt.get?Mt.get.call(hn):Mt.value}},et(oe,me,Re||oe)}function rO(oe,me){for(;!Object.prototype.hasOwnProperty.call(oe,me)&&(oe=Ze(oe),oe!==null););return oe}function kt(oe,me,Re){return me in oe?Object.defineProperty(oe,me,{value:Re,enumerable:!0,configurable:!0,writable:!0}):oe[me]=Re,oe}function jt(oe,me){var Re;if(typeof Symbol=="undefined"||oe[Symbol.iterator]==null){if(Array.isArray(oe)||(Re=Ow(oe))||me&&oe&&typeof oe.length=="number"){Re&&(oe=Re);var Ke=0,yt=function(){};return{s:yt,n:function(){return Ke>=oe.length?{done:!0}:{done:!1,value:oe[Ke++]}},e:function(Bn){throw Bn},f:yt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Yt=!0,hn=!1,Ct;return{s:function(){Re=oe[Symbol.iterator]()},n:function(){var Bn=Re.next();return Yt=Bn.done,Bn},e:function(Bn){hn=!0,Ct=Bn},f:function(){try{!Yt&&Re.return!=null&&Re.return()}finally{if(hn)throw Ct}}}}function Fm(oe){return oO(oe)||aO(oe)||Ow(oe)||iO()}function iO(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ow(oe,me){if(!!oe){if(typeof oe=="string")return Nw(oe,me);var Re=Object.prototype.toString.call(oe).slice(8,-1);if(Re==="Object"&&oe.constructor&&(Re=oe.constructor.name),Re==="Map"||Re==="Set")return Array.from(oe);if(Re==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Re))return Nw(oe,me)}}function aO(oe){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(oe))return Array.from(oe)}function oO(oe){if(Array.isArray(oe))return Nw(oe)}function Nw(oe,me){(me==null||me>oe.length)&&(me=oe.length);for(var Re=0,Ke=new Array(me);Re<me;Re++)Ke[Re]=oe[Re];return Ke}function UT(oe,me,Re,Ke,yt,Yt,hn){try{var Ct=oe[Yt](hn),Mt=Ct.value}catch(Bn){Re(Bn);return}Ct.done?me(Mt):Promise.resolve(Mt).then(Ke,yt)}function pt(oe){return function(){var me=this,Re=arguments;return new Promise(function(Ke,yt){var Yt=oe.apply(me,Re);function hn(Mt){UT(Yt,Ke,yt,hn,Ct,"next",Mt)}function Ct(Mt){UT(Yt,Ke,yt,hn,Ct,"throw",Mt)}hn(void 0)})}}function ye(oe,me){if(!Ht(oe,me))throw new TypeError("Cannot call a class as a function")}function GT(oe,me){for(var Re=0;Re<me.length;Re++){var Ke=me[Re];Ke.enumerable=Ke.enumerable||!1,Ke.configurable=!0,"value"in Ke&&(Ke.writable=!0),Object.defineProperty(oe,Ke.key,Ke)}}function Pe(oe,me,Re){return me&&GT(oe.prototype,me),Re&&GT(oe,Re),oe}function ke(oe,me){if(typeof me!="function"&&me!==null)throw new TypeError("Super expression must either be null or a function");oe.prototype=Object.create(me&&me.prototype,{constructor:{value:oe,writable:!0,configurable:!0}}),me&&xd(oe,me)}function Ie(oe){var me=HT();return function(){var Ke=Ze(oe),yt;if(me){var Yt=Ze(this).constructor;yt=Reflect.construct(Ke,arguments,Yt)}else yt=Ke.apply(this,arguments);return bd(this,yt)}}function bd(oe,me){return me&&(cn(me)==="object"||typeof me=="function")?me:Tr(oe)}function Tr(oe){if(oe===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return oe}function kw(oe){var me=typeof Map=="function"?new Map:void 0;return kw=function(Ke){if(Ke===null||!sO(Ke))return Ke;if(typeof Ke!="function")throw new TypeError("Super expression must either be null or a function");if(typeof me!="undefined"){if(me.has(Ke))return me.get(Ke);me.set(Ke,yt)}function yt(){return Bm(Ke,arguments,Ze(this).constructor)}return yt.prototype=Object.create(Ke.prototype,{constructor:{value:yt,enumerable:!1,writable:!0,configurable:!0}}),xd(yt,Ke)},kw(oe)}function Bm(oe,me,Re){return HT()?Bm=Reflect.construct:Bm=function(yt,Yt,hn){var Ct=[null];Ct.push.apply(Ct,Yt);var Mt=Function.bind.apply(yt,Ct),Bn=new Mt;return hn&&xd(Bn,hn.prototype),Bn},Bm.apply(null,arguments)}function HT(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function sO(oe){return Function.toString.call(oe).indexOf("[native code]")!==-1}function xd(oe,me){return xd=Object.setPrototypeOf||function(Ke,yt){return Ke.__proto__=yt,Ke},xd(oe,me)}function Ze(oe){return Ze=Object.setPrototypeOf?Object.getPrototypeOf:function(Re){return Re.__proto__||Object.getPrototypeOf(Re)},Ze(oe)}function Ht(oe,me){return me!=null&&typeof Symbol!="undefined"&&me[Symbol.hasInstance]?!!me[Symbol.hasInstance](oe):oe instanceof me}function cn(oe){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?cn=function(Re){return typeof Re}:cn=function(Re){return Re&&typeof Symbol=="function"&&Re.constructor===Symbol&&Re!==Symbol.prototype?"symbol":typeof Re},cn(oe)}(function(oe,me){(typeof _d=="undefined"?"undefined":cn(_d))==="object"&&typeof Sd!="undefined"?me(_d):typeof define=="function"&&define.amd?define(["exports"],me):(oe=typeof globalThis!="undefined"?globalThis:oe||self,me(oe.ModelViewerElement={}))})(_d,function(oe){"use strict";var me,Re="Function.prototype.bind called on incompatible ",Ke=Array.prototype.slice,yt=Object.prototype.toString,Yt="[object Function]",hn=function(t){var e=this;if(typeof e!="function"||yt.call(e)!==Yt)throw new TypeError(Re+e);for(var n=Ke.call(arguments,1),r,i=function(){if(Ht(this,r)){var d=e.apply(this,n.concat(Ke.call(arguments)));return Object(d)===d?d:this}else return e.apply(t,n.concat(Ke.call(arguments)))},o=Math.max(0,e.length-n.length),l=[],u=0;u<o;u++)l.push("$"+u);if(r=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this,arguments); }")(i),e.prototype){var c=function(){};c.prototype=e.prototype,r.prototype=new c,c.prototype=null}return r},Ct=Function.prototype.bind||hn,Mt=Ct.call(Function.call,Object.prototype.hasOwnProperty),Bn=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},As=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(cn(Symbol.iterator)==="symbol")return!0;var t={},e=Symbol("test"),n=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var r=42;t[e]=r;for(e in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var i=Object.getOwnPropertySymbols(t);if(i.length!==1||i[0]!==e||!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(t,e);if(o.value!==r||o.enumerable!==!0)return!1}return!0},Eo=Bn.Symbol,To=function(){return typeof Eo!="function"||typeof Symbol!="function"||cn(Eo("foo"))!=="symbol"||cn(Symbol("bar"))!=="symbol"?!1:As()},Xe,gi=TypeError,Dr=Object.getOwnPropertyDescriptor;if(Dr)try{Dr({},"")}catch{Dr=null}var Ar=function(){throw new gi},Ga=Dr?function(){try{return arguments.callee,Ar}catch{try{return Dr(arguments,"callee").get}catch{return Ar}}}():Ar,Fr=To(),Gi=Object.getPrototypeOf||function(a){return a.__proto__},fa=Xe,da=Xe,vr=Xe,qn=typeof Uint8Array=="undefined"?Xe:Gi(Uint8Array),Ha={"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?Xe:ArrayBuffer,"%ArrayBufferPrototype%":typeof ArrayBuffer=="undefined"?Xe:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":Fr?Gi([][Symbol.iterator]()):Xe,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":Xe,"%AsyncFunction%":da,"%AsyncFunctionPrototype%":Xe,"%AsyncGenerator%":Xe,"%AsyncGeneratorFunction%":vr,"%AsyncGeneratorPrototype%":Xe,"%AsyncIteratorPrototype%":Xe,"%Atomics%":typeof Atomics=="undefined"?Xe:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":typeof DataView=="undefined"?Xe:DataView,"%DataViewPrototype%":typeof DataView=="undefined"?Xe:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":typeof Float32Array=="undefined"?Xe:Float32Array,"%Float32ArrayPrototype%":typeof Float32Array=="undefined"?Xe:Float32Array.prototype,"%Float64Array%":typeof Float64Array=="undefined"?Xe:Float64Array,"%Float64ArrayPrototype%":typeof Float64Array=="undefined"?Xe:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":Xe,"%GeneratorFunction%":fa,"%GeneratorPrototype%":Xe,"%Int8Array%":typeof Int8Array=="undefined"?Xe:Int8Array,"%Int8ArrayPrototype%":typeof Int8Array=="undefined"?Xe:Int8Array.prototype,"%Int16Array%":typeof Int16Array=="undefined"?Xe:Int16Array,"%Int16ArrayPrototype%":typeof Int16Array=="undefined"?Xe:Int8Array.prototype,"%Int32Array%":typeof Int32Array=="undefined"?Xe:Int32Array,"%Int32ArrayPrototype%":typeof Int32Array=="undefined"?Xe:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Fr?Gi(Gi([][Symbol.iterator]())):Xe,"%JSON%":(typeof JSON=="undefined"?"undefined":cn(JSON))==="object"?JSON:Xe,"%JSONParse%":(typeof JSON=="undefined"?"undefined":cn(JSON))==="object"?JSON.parse:Xe,"%Map%":typeof Map=="undefined"?Xe:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!Fr?Xe:Gi(new Map()[Symbol.iterator]()),"%MapPrototype%":typeof Map=="undefined"?Xe:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?Xe:Promise,"%PromisePrototype%":typeof Promise=="undefined"?Xe:Promise.prototype,"%PromiseProto_then%":typeof Promise=="undefined"?Xe:Promise.prototype.then,"%Promise_all%":typeof Promise=="undefined"?Xe:Promise.all,"%Promise_reject%":typeof Promise=="undefined"?Xe:Promise.reject,"%Promise_resolve%":typeof Promise=="undefined"?Xe:Promise.resolve,"%Proxy%":typeof Proxy=="undefined"?Xe:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":typeof Reflect=="undefined"?Xe:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":typeof Set=="undefined"?Xe:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!Fr?Xe:Gi(new Set()[Symbol.iterator]()),"%SetPrototype%":typeof Set=="undefined"?Xe:Set.prototype,"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?Xe:SharedArrayBuffer,"%SharedArrayBufferPrototype%":typeof SharedArrayBuffer=="undefined"?Xe:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":Fr?Gi(""[Symbol.iterator]()):Xe,"%StringPrototype%":String.prototype,"%Symbol%":Fr?Symbol:Xe,"%SymbolPrototype%":Fr?Symbol.prototype:Xe,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":Ga,"%TypedArray%":qn,"%TypedArrayPrototype%":qn?qn.prototype:Xe,"%TypeError%":gi,"%TypeErrorPrototype%":gi.prototype,"%Uint8Array%":typeof Uint8Array=="undefined"?Xe:Uint8Array,"%Uint8ArrayPrototype%":typeof Uint8Array=="undefined"?Xe:Uint8Array.prototype,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?Xe:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":typeof Uint8ClampedArray=="undefined"?Xe:Uint8ClampedArray.prototype,"%Uint16Array%":typeof Uint16Array=="undefined"?Xe:Uint16Array,"%Uint16ArrayPrototype%":typeof Uint16Array=="undefined"?Xe:Uint16Array.prototype,"%Uint32Array%":typeof Uint32Array=="undefined"?Xe:Uint32Array,"%Uint32ArrayPrototype%":typeof Uint32Array=="undefined"?Xe:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":typeof WeakMap=="undefined"?Xe:WeakMap,"%WeakMapPrototype%":typeof WeakMap=="undefined"?Xe:WeakMap.prototype,"%WeakSet%":typeof WeakSet=="undefined"?Xe:WeakSet,"%WeakSetPrototype%":typeof WeakSet=="undefined"?Xe:WeakSet.prototype},Ao=Ct.call(Function.call,String.prototype.replace),Co=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,on=/\\(\\)?/g,Ne=function(t){var e=[];return Ao(t,Co,function(n,r,i,o){e[e.length]=i?Ao(o,on,"$1"):r||n}),e},Ce=function(t,e){if(!(t in Ha))throw new SyntaxError("intrinsic "+t+" does not exist!");if(typeof Ha[t]=="undefined"&&!e)throw new gi("intrinsic "+t+" exists, but is not available. Please file an issue!");return Ha[t]},qe=function(t,e){if(typeof t!="string"||t.length===0)throw new TypeError("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof e!="boolean")throw new TypeError('"allowMissing" argument must be a boolean');for(var n=Ne(t),r=Ce("%"+(n.length>0?n[0]:"")+"%",e),i=1;i<n.length;i+=1)if(r!=null)if(Dr&&i+1>=n.length){var o=Dr(r,n[i]);if(!e&&!(n[i]in r))throw new gi("base intrinsic for "+t+" exists, but the property is not available.");r=o?o.get||o.value:r[n[i]]}else r=r[n[i]];return r},vt=qe("%TypeError%"),tt=function(t,e){if(t==null)throw new vt(e||"Cannot call method on "+t);return t},mn=tt,Un=qe("%Function%"),tr=Un.apply,cr=Un.call,yi=function(){return Ct.apply(cr,arguments)},Hi=function(){return Ct.apply(tr,arguments)};yi.apply=Hi;var zi=yi(qe("String.prototype.indexOf")),Fl=function(t,e){var n=qe(t,!!e);return typeof n=="function"&&zi(t,".prototype.")?yi(n):n},Um=Fl("Object.prototype.propertyIsEnumerable"),Dc=function(t){var e=mn(t),n=[];for(var r in e)Mt(e,r)&&Um(e,r)&&n.push(e[r]);return n},Gm=function(){return typeof Object.values=="function"?Object.values:Dc},Bl=Object.prototype.toString,Cs=function(t){var e=Bl.call(t),n=e==="[object Arguments]";return n||(n=e!=="[object Array]"&&t!==null&&cn(t)==="object"&&typeof t.length=="number"&&t.length>=0&&Bl.call(t.callee)==="[object Function]"),n},Fc;if(!Object.keys){var za=Object.prototype.hasOwnProperty,Bc=Object.prototype.toString,Uc=Cs,Ul=Object.prototype.propertyIsEnumerable,Gc=!Ul.call({toString:null},"toString"),Hc=Ul.call(function(){},"prototype"),Gl=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],zc=function(t){var e=t.constructor;return e&&e.prototype===t},Vc={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},Hl=function(){if(typeof window=="undefined")return!1;for(var a in window)try{if(!Vc["$"+a]&&za.call(window,a)&&window[a]!==null&&cn(window[a])==="object")try{zc(window[a])}catch{return!0}}catch{return!0}return!1}(),Hm=function(t){if(typeof window=="undefined"||!Hl)return zc(t);try{return zc(t)}catch{return!1}};Fc=function(t){var e=t!==null&&cn(t)==="object",n=Bc.call(t)==="[object Function]",r=Uc(t),i=e&&Bc.call(t)==="[object String]",o=[];if(!e&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var l=Hc&&n;if(i&&t.length>0&&!za.call(t,0))for(var u=0;u<t.length;++u)o.push(String(u));if(r&&t.length>0)for(var c=0;c<t.length;++c)o.push(String(c));else for(var f in t)!(l&&f==="prototype")&&za.call(t,f)&&o.push(String(f));if(Gc)for(var d=Hm(t),v=0;v<Gl.length;++v)!(d&&Gl[v]==="constructor")&&za.call(t,Gl[v])&&o.push(Gl[v]);return o}}var Wc=Fc,$c=Array.prototype.slice,zl=Object.keys,Vl=zl?function(t){return zl(t)}:Wc,Ed=Object.keys;Vl.shim=function(){if(Object.keys){var t=function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2);t||(Object.keys=function(n){return Cs(n)?Ed($c.call(n)):Ed(n)})}else Object.keys=Vl;return Object.keys||Vl};var jc=Vl,qc=typeof Symbol=="function"&&cn(Symbol("foo"))==="symbol",Xc=Object.prototype.toString,zm=Array.prototype.concat,Yc=Object.defineProperty,Vm=function(t){return typeof t=="function"&&Xc.call(t)==="[object Function]"},Jc=function(){var t={};try{Yc(t,"x",{enumerable:!1,value:t});for(var e in t)return!1;return t.x===t}catch{return!1}},Wl=Yc&&Jc(),Zc=function(t,e,n,r){e in t&&(!Vm(r)||!r())||(Wl?Yc(t,e,{configurable:!0,enumerable:!1,value:n,writable:!0}):t[e]=n)},$l=function(t,e){var n=arguments.length>2?arguments[2]:{},r=jc(e);qc&&(r=zm.call(r,Object.getOwnPropertySymbols(e)));for(var i=0;i<r.length;i+=1)Zc(t,r[i],e[r[i]],n[r[i]])};$l.supportsDescriptors=!!Wl;var Kc=$l,Wm=function(){var t=Gm();return Kc(Object,{values:t},{values:function(){return Object.values!==t}}),t};Wm();var Bw="{{lit-".concat(String(Math.random()).slice(2),"}}");var Uw=window.trustedTypes&&trustedTypes.createPolicy("lit-html",{createHTML:function(t){return t}});var Td=!1;(function(){try{var a={get capture(){return Td=!0,!1}};window.addEventListener("test",a,a),window.removeEventListener("test",a,a)}catch{}})();typeof window!="undefined"&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.3.0");typeof window.ShadyCSS=="undefined"||typeof window.ShadyCSS.prepareTemplateDom=="undefined"&&console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1.");var jl;window.JSCompiler_renameProperty=function(a,t){return a};var Ls={toAttribute:function(t,e){switch(e){case Boolean:return t?"":null;case Object:case Array:return t==null?t:JSON.stringify(t)}return t},fromAttribute:function(t,e){switch(e){case Boolean:return t!==null;case Number:return t===null?null:Number(t);case Object:case Array:return JSON.parse(t)}return t}},Ad=function(t,e){return e!==t&&(e===e||t===t)},Qc={attribute:!0,type:String,converter:Ls,reflect:!1,hasChanged:Ad},ql=1,Rs=1<<2,Ps=1<<3,eh=1<<4,th="finalized",nh=function(a){ke(e,a);var t=Ie(e);function e(){var n;return ye(this,e),n=t.call(this),n.initialize(),n}return Pe(e,[{key:"initialize",value:function(){var r=this;this._updateState=0,this._updatePromise=new Promise(function(i){return r._enableUpdatingResolver=i}),this._changedProperties=new Map,this._saveInstanceProperties(),this.requestUpdateInternal()}},{key:"_saveInstanceProperties",value:function(){var r=this;this.constructor._classProperties.forEach(function(i,o){if(r.hasOwnProperty(o)){var l=r[o];delete r[o],r._instanceProperties||(r._instanceProperties=new Map),r._instanceProperties.set(o,l)}})}},{key:"_applyInstanceProperties",value:function(){var r=this;this._instanceProperties.forEach(function(i,o){return r[o]=i}),this._instanceProperties=void 0}},{key:"connectedCallback",value:function(){this.enableUpdating()}},{key:"enableUpdating",value:function(){this._enableUpdatingResolver!==void 0&&(this._enableUpdatingResolver(),this._enableUpdatingResolver=void 0)}},{key:"disconnectedCallback",value:function(){}},{key:"attributeChangedCallback",value:function(r,i,o){i!==o&&this._attributeToProperty(r,o)}},{key:"_propertyToAttribute",value:function(r,i){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Qc,l=this.constructor,u=l._attributeNameForProperty(r,o);if(u!==void 0){var c=l._propertyValueToAttribute(i,o);if(c===void 0)return;this._updateState=this._updateState|Ps,c==null?this.removeAttribute(u):this.setAttribute(u,c),this._updateState=this._updateState&~Ps}}},{key:"_attributeToProperty",value:function(r,i){if(!(this._updateState&Ps)){var o=this.constructor,l=o._attributeToPropertyMap.get(r);if(l!==void 0){var u=o.getPropertyOptions(l);this._updateState=this._updateState|eh,this[l]=o._propertyValueFromAttribute(i,u),this._updateState=this._updateState&~eh}}}},{key:"requestUpdateInternal",value:function(r,i,o){var l=!0;if(r!==void 0){var u=this.constructor;o=o||u.getPropertyOptions(r),u._valueHasChanged(this[r],i,o.hasChanged)?(this._changedProperties.has(r)||this._changedProperties.set(r,i),o.reflect===!0&&!(this._updateState&eh)&&(this._reflectingProperties===void 0&&(this._reflectingProperties=new Map),this._reflectingProperties.set(r,o))):l=!1}!this._hasRequestedUpdate&&l&&(this._updatePromise=this._enqueueUpdate())}},{key:"requestUpdate",value:function(r,i){return this.requestUpdateInternal(r,i),this.updateComplete}},{key:"_enqueueUpdate",value:function(){var n=pt(regeneratorRuntime.mark(function i(){var o;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return this._updateState=this._updateState|Rs,u.prev=1,u.next=4,this._updatePromise;case 4:u.next=8;break;case 6:u.prev=6,u.t0=u.catch(1);case 8:if(o=this.performUpdate(),o==null){u.next=12;break}return u.next=12,o;case 12:return u.abrupt("return",!this._hasRequestedUpdate);case 13:case"end":return u.stop()}},i,this,[[1,6]])}));function r(){return n.apply(this,arguments)}return r}()},{key:"performUpdate",value:function(){if(!!this._hasRequestedUpdate){this._instanceProperties&&this._applyInstanceProperties();var r=!1,i=this._changedProperties;try{r=this.shouldUpdate(i),r?this.update(i):this._markUpdated()}catch(o){throw r=!1,this._markUpdated(),o}r&&(this._updateState&ql||(this._updateState=this._updateState|ql,this.firstUpdated(i)),this.updated(i))}}},{key:"_markUpdated",value:function(){this._changedProperties=new Map,this._updateState=this._updateState&~Rs}},{key:"_getUpdateComplete",value:function(){return this._updatePromise}},{key:"shouldUpdate",value:function(r){return!0}},{key:"update",value:function(r){var i=this;this._reflectingProperties!==void 0&&this._reflectingProperties.size>0&&(this._reflectingProperties.forEach(function(o,l){return i._propertyToAttribute(l,i[l],o)}),this._reflectingProperties=void 0),this._markUpdated()}},{key:"updated",value:function(r){}},{key:"firstUpdated",value:function(r){}},{key:"_hasRequestedUpdate",get:function(){return this._updateState&Rs}},{key:"hasUpdated",get:function(){return this._updateState&ql}},{key:"updateComplete",get:function(){return this._getUpdateComplete()}}],[{key:"_ensureClassProperties",value:function(){var r=this;if(!this.hasOwnProperty(JSCompiler_renameProperty("_classProperties",this))){this._classProperties=new Map;var i=Object.getPrototypeOf(this)._classProperties;i!==void 0&&i.forEach(function(o,l){return r._classProperties.set(l,o)})}}},{key:"createProperty",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Qc;if(this._ensureClassProperties(),this._classProperties.set(r,i),!(i.noAccessor||this.prototype.hasOwnProperty(r))){var o=cn(r)==="symbol"?Symbol():"__".concat(r),l=this.getPropertyDescriptor(r,o,i);l!==void 0&&Object.defineProperty(this.prototype,r,l)}}},{key:"getPropertyDescriptor",value:function(r,i,o){return{get:function(){return this[i]},set:function(u){var c=this[r];this[i]=u,this.requestUpdateInternal(r,c,o)},configurable:!0,enumerable:!0}}},{key:"getPropertyOptions",value:function(r){return this._classProperties&&this._classProperties.get(r)||Qc}},{key:"finalize",value:function(){var r=Object.getPrototypeOf(this);if(r.hasOwnProperty(th)||r.finalize(),this[th]=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(JSCompiler_renameProperty("properties",this))){var i=this.properties,o=[].concat(Fm(Object.getOwnPropertyNames(i)),Fm(typeof Object.getOwnPropertySymbols=="function"?Object.getOwnPropertySymbols(i):[])),l=jt(o),u;try{for(l.s();!(u=l.n()).done;){var c=u.value;this.createProperty(c,i[c])}}catch(f){l.e(f)}finally{l.f()}}}},{key:"_attributeNameForProperty",value:function(r,i){var o=i.attribute;return o===!1?void 0:typeof o=="string"?o:typeof r=="string"?r.toLowerCase():void 0}},{key:"_valueHasChanged",value:function(r,i){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ad;return o(r,i)}},{key:"_propertyValueFromAttribute",value:function(r,i){var o=i.type,l=i.converter||Ls,u=typeof l=="function"?l:l.fromAttribute;return u?u(r,o):r}},{key:"_propertyValueToAttribute",value:function(r,i){if(i.reflect!==void 0){var o=i.type,l=i.converter,u=l&&l.toAttribute||Ls.toAttribute;return u(r,o)}}},{key:"observedAttributes",get:function(){var r=this;this.finalize();var i=[];return this._classProperties.forEach(function(o,l){var u=r._attributeNameForProperty(l,o);u!==void 0&&(r._attributeToPropertyMap.set(u,l),i.push(u))}),i}}]),e}(kw(HTMLElement));jl=th,nh[jl]=!0;var rh=function(t,e){return e.kind==="method"&&e.descriptor&&!("value"in e.descriptor)?Object.assign(Object.assign({},e),{finisher:function(r){r.createProperty(e.key,t)}}):{kind:"field",key:Symbol(),placement:"own",descriptor:{},initializer:function(){typeof e.initializer=="function"&&(this[e.key]=e.initializer.call(this))},finisher:function(r){r.createProperty(e.key,t)}}},ih=function(t,e,n){e.constructor.createProperty(n,t)};function It(a){return function(t,e){return e!==void 0?ih(a,t,e):rh(a,t)}}var Gw=window.ShadowRoot&&(window.ShadyCSS===void 0||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype;(window.litElementVersions||(window.litElementVersions=[])).push("2.4.0");var Cd=navigator.xr!=null&&self.XRSession!=null&&navigator.xr.isSessionSupported!=null,ah=Cd&&self.XRSession.prototype.requestHitTestSource,Xl=self.ResizeObserver!=null,Yl=self.IntersectionObserver!=null,Ld=ah,$m=function(){var a=navigator.userAgent||navigator.vendor||self.opera,t=!1;return(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))&&(t=!0),t}(),jm=/\bCrOS\b/.test(navigator.userAgent),pa=!1,Rd=/android/i.test(navigator.userAgent),Pd=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!self.MSStream||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,Br=function(){var a=document.createElement("a");return Boolean(a.relList&&a.relList.supports&&a.relList.supports("ar"))}(),Od=/Safari\//.test(navigator.userAgent),Jl=Pd&&/CriOS\//.test(navigator.userAgent),Nd=Pd&&Od,kd=`
<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="#000000">
    <!-- NOTE(cdata): This SVG filter is a stop-gap until we can implement
         support for dynamic re-coloring of UI components -->
    <defs>
      <filter id="drop-shadow" x="-100%" y="-100%" width="300%" height="300%">
        <feGaussianBlur in="SourceAlpha" stdDeviation="1"/>
        <feOffset dx="0" dy="0" result="offsetblur"/>
        <feFlood flood-color="#000000"/>
        <feComposite in2="offsetblur" operator="in"/>
        <feMerge>
          <feMergeNode/>
          <feMergeNode in="SourceGraphic"/>
        </feMerge>
      </filter>
    </defs>
    <path filter="url(#drop-shadow)" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg>`,Id=`
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="36">
    <defs>
        <path id="A" d="M.001.232h24.997V36H.001z" />
    </defs>
    <g transform="translate(-11 -4)" fill="none" fill-rule="evenodd">
        <path fill-opacity="0" fill="#fff" d="M0 0h44v44H0z" />
        <g transform="translate(11 3)">
            <path d="M8.733 11.165c.04-1.108.766-2.027 1.743-2.307a2.54 2.54 0 0 1 .628-.089c.16 0 .314.017.463.044 1.088.2 1.9 1.092 1.9 2.16v8.88h1.26c2.943-1.39 5-4.45 5-8.025a9.01 9.01 0 0 0-1.9-5.56l-.43-.5c-.765-.838-1.683-1.522-2.712-2-1.057-.49-2.226-.77-3.46-.77s-2.4.278-3.46.77c-1.03.478-1.947 1.162-2.71 2l-.43.5a9.01 9.01 0 0 0-1.9 5.56 9.04 9.04 0 0 0 .094 1.305c.03.21.088.41.13.617l.136.624c.083.286.196.56.305.832l.124.333a8.78 8.78 0 0 0 .509.953l.065.122a8.69 8.69 0 0 0 3.521 3.191l1.11.537v-9.178z" fill-opacity=".5" fill="#e4e4e4" />
            <path d="M22.94 26.218l-2.76 7.74c-.172.485-.676.8-1.253.8H12.24c-1.606 0-3.092-.68-3.98-1.82-1.592-2.048-3.647-3.822-6.11-5.27-.095-.055-.15-.137-.152-.23-.004-.1.046-.196.193-.297.56-.393 1.234-.6 1.926-.6a3.43 3.43 0 0 1 .691.069l4.922.994V10.972c0-.663.615-1.203 1.37-1.203s1.373.54 1.373 1.203v9.882h2.953c.273 0 .533.073.757.21l6.257 3.874c.027.017.045.042.07.06.41.296.586.77.426 1.22M4.1 16.614c-.024-.04-.042-.083-.065-.122a8.69 8.69 0 0 1-.509-.953c-.048-.107-.08-.223-.124-.333l-.305-.832c-.058-.202-.09-.416-.136-.624l-.13-.617a9.03 9.03 0 0 1-.094-1.305c0-2.107.714-4.04 1.9-5.56l.43-.5c.764-.84 1.682-1.523 2.71-2 1.058-.49 2.226-.77 3.46-.77s2.402.28 3.46.77c1.03.477 1.947 1.16 2.712 2l.428.5a9 9 0 0 1 1.901 5.559c0 3.577-2.056 6.636-5 8.026h-1.26v-8.882c0-1.067-.822-1.96-1.9-2.16-.15-.028-.304-.044-.463-.044-.22 0-.427.037-.628.09-.977.28-1.703 1.198-1.743 2.306v9.178l-1.11-.537C6.18 19.098 4.96 18 4.1 16.614M22.97 24.09l-6.256-3.874c-.102-.063-.218-.098-.33-.144 2.683-1.8 4.354-4.855 4.354-8.243 0-.486-.037-.964-.104-1.43a9.97 9.97 0 0 0-1.57-4.128l-.295-.408-.066-.092a10.05 10.05 0 0 0-.949-1.078c-.342-.334-.708-.643-1.094-.922-1.155-.834-2.492-1.412-3.94-1.65l-.732-.088-.748-.03a9.29 9.29 0 0 0-1.482.119c-1.447.238-2.786.816-3.94 1.65a9.33 9.33 0 0 0-.813.686 9.59 9.59 0 0 0-.845.877l-.385.437-.36.5-.288.468-.418.778-.04.09c-.593 1.28-.93 2.71-.93 4.222 0 3.832 2.182 7.342 5.56 8.938l1.437.68v4.946L5 25.64a4.44 4.44 0 0 0-.888-.086c-.017 0-.034.003-.05.003-.252.004-.503.033-.75.08a5.08 5.08 0 0 0-.237.056c-.193.046-.382.107-.568.18-.075.03-.15.057-.225.1-.25.114-.494.244-.723.405a1.31 1.31 0 0 0-.566 1.122 1.28 1.28 0 0 0 .645 1.051C4 29.925 5.96 31.614 7.473 33.563a5.06 5.06 0 0 0 .434.491c1.086 1.082 2.656 1.713 4.326 1.715h6.697c.748-.001 1.43-.333 1.858-.872.142-.18.256-.38.336-.602l2.757-7.74c.094-.26.13-.53.112-.794s-.088-.52-.203-.76a2.19 2.19 0 0 0-.821-.91" fill-opacity=".6" fill="#000" />
            <path d="M22.444 24.94l-6.257-3.874a1.45 1.45 0 0 0-.757-.211h-2.953v-9.88c0-.663-.616-1.203-1.373-1.203s-1.37.54-1.37 1.203v16.643l-4.922-.994a3.44 3.44 0 0 0-.692-.069 3.35 3.35 0 0 0-1.925.598c-.147.102-.198.198-.194.298.004.094.058.176.153.23 2.462 1.448 4.517 3.22 6.11 5.27.887 1.14 2.373 1.82 3.98 1.82h6.686c.577 0 1.08-.326 1.253-.8l2.76-7.74c.16-.448-.017-.923-.426-1.22-.025-.02-.043-.043-.07-.06z" fill="#fff" />
            <g transform="translate(0 .769)">
                <mask id="B" fill="#fff">
                    <use xlink:href="#A" />
                </mask>
                <path d="M23.993 24.992a1.96 1.96 0 0 1-.111.794l-2.758 7.74c-.08.22-.194.423-.336.602-.427.54-1.11.87-1.857.872h-6.698c-1.67-.002-3.24-.633-4.326-1.715-.154-.154-.3-.318-.434-.49C5.96 30.846 4 29.157 1.646 27.773c-.385-.225-.626-.618-.645-1.05a1.31 1.31 0 0 1 .566-1.122 4.56 4.56 0 0 1 .723-.405l.225-.1a4.3 4.3 0 0 1 .568-.18l.237-.056c.248-.046.5-.075.75-.08.018 0 .034-.003.05-.003.303-.001.597.027.89.086l3.722.752V20.68l-1.436-.68c-3.377-1.596-5.56-5.106-5.56-8.938 0-1.51.336-2.94.93-4.222.015-.03.025-.06.04-.09.127-.267.268-.525.418-.778.093-.16.186-.316.288-.468.063-.095.133-.186.2-.277L3.773 5c.118-.155.26-.29.385-.437.266-.3.544-.604.845-.877a9.33 9.33 0 0 1 .813-.686C6.97 2.167 8.31 1.59 9.757 1.35a9.27 9.27 0 0 1 1.481-.119 8.82 8.82 0 0 1 .748.031c.247.02.49.05.733.088 1.448.238 2.786.816 3.94 1.65.387.28.752.588 1.094.922a9.94 9.94 0 0 1 .949 1.078l.066.092c.102.133.203.268.295.408a9.97 9.97 0 0 1 1.571 4.128c.066.467.103.945.103 1.43 0 3.388-1.67 6.453-4.353 8.243.11.046.227.08.33.144l6.256 3.874c.37.23.645.55.82.9.115.24.185.498.203.76m.697-1.195c-.265-.55-.677-1.007-1.194-1.326l-5.323-3.297c2.255-2.037 3.564-4.97 3.564-8.114 0-2.19-.637-4.304-1.84-6.114-.126-.188-.26-.37-.4-.552-.645-.848-1.402-1.6-2.252-2.204C15.472.91 13.393.232 11.238.232A10.21 10.21 0 0 0 5.23 2.19c-.848.614-1.606 1.356-2.253 2.205-.136.18-.272.363-.398.55C1.374 6.756.737 8.87.737 11.06c0 4.218 2.407 8.08 6.133 9.842l.863.41v3.092l-2.525-.51c-.356-.07-.717-.106-1.076-.106a5.45 5.45 0 0 0-3.14.996c-.653.46-1.022 1.202-.99 1.983a2.28 2.28 0 0 0 1.138 1.872c2.24 1.318 4.106 2.923 5.543 4.772 1.26 1.62 3.333 2.59 5.55 2.592h6.698c1.42-.001 2.68-.86 3.134-2.138l2.76-7.74c.272-.757.224-1.584-.134-2.325" fill-opacity=".05" fill="#000" mask="url(#B)" />
            </g>
        </g>
    </g>
</svg>`,Dd=`
<svg version="1.1" id="view_x5F_in_x5F_AR_x5F_icon"
	 xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px"
	 viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve">
<rect id="Bounding_Box" x="0" y="0" fill="none" width="24" height="24"/>
<g id="Art_layer">
	<path d="M3,4c0-0.55,0.45-1,1-1h2V1H4C2.35,1,1,2.35,1,4v2h2V4z"/>
	<path d="M20,3c0.55,0,1,0.45,1,1v2h2V4c0-1.65-1.35-3-3-3h-2v2H20z"/>
	<path d="M4,21c-0.55,0-1-0.45-1-1v-2H1v2c0,1.65,1.35,3,3,3h2v-2H4z"/>
	<path d="M20,21c0.55,0,1-0.45,1-1v-2h2v2c0,1.65-1.35,3-3,3h-2v-2H20z"/>
	<g>
		<path d="M18.25,7.6l-5.5-3.18c-0.46-0.27-1.04-0.27-1.5,0L5.75,7.6C5.29,7.87,5,8.36,5,8.9v6.35c0,0.54,0.29,1.03,0.75,1.3
			l5.5,3.18c0.46,0.27,1.04,0.27,1.5,0l5.5-3.18c0.46-0.27,0.75-0.76,0.75-1.3V8.9C19,8.36,18.71,7.87,18.25,7.6z M7,14.96v-4.62
			l4,2.32v4.61L7,14.96z M12,10.93L8,8.61l4-2.31l4,2.31L12,10.93z M13,17.27v-4.61l4-2.32v4.62L13,17.27z"/>
	</g>
</g>
</svg>`,oh=document.createElement("template");oh.innerHTML=`
<style>
:host {
  display: block;
  position: relative;
  contain: strict;
  width: 300px;
  height: 150px;
}

/* NOTE: This ruleset is our integration surface area with the
 * :focus-visible polyfill.
 *
 * @see https://github.com/WICG/focus-visible/pull/196 */
:host([data-js-focus-visible]:focus:not(.focus-visible)),
:host([data-js-focus-visible]) :focus:not(.focus-visible) {
  outline: none;
}

.container {
  position: relative;
}

.annotation-container {
  position: absolute;
  pointer-events: none;
  top: 0;
}

.userInput {
  width: 100%;
  height: 100%;
  display: block;
  position: relative;
  overflow: hidden;
}

canvas {
  position: absolute;
  display: none;
  pointer-events: none;
  /* NOTE(cdata): Chrome 76 and below apparently have a bug
   * that causes our canvas not to display pixels unless it is
   * on its own render layer
   * @see https://github.com/GoogleWebComponents/model-viewer/pull/755#issuecomment-536597893
   */
  transform: translateZ(0);
}

canvas.show {
  display: block;
}

/* Adapted from HTML5 Boilerplate
 *
 * @see https://github.com/h5bp/html5-boilerplate/blob/ceb4620c78fc82e13534fc44202a3f168754873f/dist/css/main.css#L122-L133 */
.screen-reader-only {
  border: 0;
  clip: rect(0, 0, 0, 0);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  white-space: nowrap;
  width: 1px;
}

.slot {
  position: absolute;
  pointer-events: none;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.slot > * {
  pointer-events: initial;
}

.annotation-wrapper ::slotted(*) {
  opacity: var(--max-hotspot-opacity, 1);
  transition: opacity 0.3s;
}

.pointer-tumbling .annotation-wrapper ::slotted(*) {
  pointer-events: none;
}

.annotation-wrapper ::slotted(*) {
  pointer-events: initial;
}

.annotation-wrapper.hide ::slotted(*) {
  opacity: var(--min-hotspot-opacity, 0.25);
}

.slot.poster {
  z-index: 1000;
  opacity: 0;
  transition: opacity 0.3s 0.3s;
  background-color: inherit;
}

.slot.poster.show {
  opacity: 1;
  transition: none;
}

.slot.poster > * {
  pointer-events: initial;
}

.slot.poster:not(.show) > * {
  pointer-events: none;
}

#default-poster {
  width: 100%;
  height: 100%;
  /* The default poster is a <button> so we need to set display
   * to prevent it from being affected by text-align: */
  display: block;
  position: absolute;
  border: none;
  padding: 0;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  background-color: var(--poster-color, #fff);
  background-image: var(--poster-image, none);
}

#default-progress-bar {
  display: block;
  position: relative;
  width: 100%;
  height: 100%;
  pointer-events: none;
  overflow: hidden;
}

#default-progress-bar > .mask {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: var(--progress-mask, #fff);
  transition: opacity 0.3s;
  opacity: 0.2;
}

#default-progress-bar > .bar {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: var(--progress-bar-height, 5px);
  transition: transform 0.09s;
  transform-origin: top left;
  transform: scaleX(0);
  overflow: hidden;
}

#default-progress-bar > .bar:before {
  content: '';
  display: block;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;

  background-color: var(--progress-bar-color, rgba(0, 0, 0, 0.4));

  transition: none;
  transform-origin: top left;
  transform: translateY(0);
}

#default-progress-bar > .bar.hide:before {
  transition: transform 0.3s 1s;
  transform: translateY(-100%);
}

.slot.interaction-prompt {
  display: var(--interaction-prompt-display, flex);
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  align-items: center;
  justify-content: center;

  opacity: 0;
  will-change: opacity;
  overflow: hidden;
  transition: opacity 0.3s;
}

.slot.interaction-prompt.visible {
  opacity: 1;
}

.slot.interaction-prompt > .animated-container {
  will-change: transform, opacity;
}

.slot.interaction-prompt > * {
  pointer-events: none;
}

.slot.ar-button {
  -moz-user-select: none;
  -webkit-tap-highlight-color: transparent;
  user-select: none;

  display: var(--ar-button-display, block);
}

.slot.ar-button:not(.enabled) {
  display: none;
}

.fab {
  display: flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
  width: 40px;
  height: 40px;
  cursor: pointer;
  background-color: #fff;
  box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.15);
  border-radius: 100px;
}

.fab > * {
  opacity: 0.87;
}

#default-ar-button {
  position: absolute;
  bottom: 16px;
  right: 16px;
  transform: scale(var(--ar-button-scale, 1));
  transform-origin: bottom right;
}

.slot.default {
  z-index: 1001;
  pointer-events: none;
}

.slot.progress-bar {
  pointer-events: none;
}

.slot.exit-webxr-ar-button {
  pointer-events: none;
}

.slot.exit-webxr-ar-button:not(.enabled) {
  display: none;
}

#default-exit-webxr-ar-button {
  display: flex;
  align-items: center;
  justify-content: center;
  position: absolute;
  top: 16px;
  left: 16px;
  width: 40px;
  height: 40px;
  box-sizing: border-box;
}

#default-exit-webxr-ar-button > svg {
  fill: #fff;
}
</style>
<div class="container">
  <div class="userInput" tabindex="0" role="img"
      aria-label="A depiction of a 3D model"
      aria-live="polite">
    <canvas></canvas>
  </div>

  <!-- NOTE(cdata): We need to wrap slots because browsers without ShadowDOM
        will have their <slot> elements removed by ShadyCSS -->
  <div class="slot poster">
    <slot name="poster">
      <button type="button" id="default-poster" aria-hidden="true" aria-label="Activate to view in 3D!"></button>
    </slot>
  </div>

  <div class="slot ar-button">
    <slot name="ar-button">
      <a id="default-ar-button" class="fab"
          tabindex="2"
          aria-label="View this 3D model up close">
        `.concat(Dd,`
      </a>
    </slot>
  </div>

  <div class="slot interaction-prompt">
    <div class="animated-container" part="interaction-prompt">
      <slot name="interaction-prompt" aria-hidden="true">
        `).concat(Id,`
      </slot>
    </div>
  </div>

  <div class="slot default">
    <slot></slot>

    <div class="slot progress-bar">
      <slot name="progress-bar">
        <div id="default-progress-bar" aria-hidden="true">
          <div class="mask"></div>
          <div class="bar"></div>
        </div>
      </slot>
    </div>
    
    <div class="slot exit-webxr-ar-button">
      <slot name="exit-webxr-ar-button">
        <a id="default-exit-webxr-ar-button"
            tabindex="3"
            aria-label="Exit AR"
            aria-hidden="true">
          `).concat(kd,`
        </a>
      </slot>
    </div>
  </div>
</div>`);var En=function(t){var e=document.createElement("template");return e.innerHTML=oh.innerHTML,window.ShadyCSS&&window.ShadyCSS.prepareTemplate(e,t),e};Number.EPSILON===void 0&&(Number.EPSILON=Math.pow(2,-52)),Number.isInteger===void 0&&(Number.isInteger=function(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a}),Math.sign===void 0&&(Math.sign=function(a){return a<0?-1:a>0?1:+a}),"name"in Function.prototype||Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),Object.assign===void 0&&(Object.assign=function(a){if(a==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(a),e=1;e<arguments.length;e++){var n=arguments[e];if(n!=null)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t});var bt="120",st=0,Zl=1,Fd=2,va=1,Pn=2,Va=3,Ur=0,Tn=1,wi=2,sh=1,Zr=0,Lo=1,lh=2,uh=3,Os=4,Bd=5,ma=100,Ud=101,hr=102,Kl=103,wn=104,ch=200,Gd=201,Ro=202,Ns=203,Ql=204,hh=205,eu=206,fh=207,qm=208,Xm=209,Ym=210,Jm=0,Zm=1,Km=2,tu=3,Hd=4,Qm=5,eg=6,dh=7,Wa=0,ph=1,zd=2,$a=0,ks=1,An=2,Cr=3,mr=4,vh=5,nu=300,Po=301,Oo=302,mh=303,Is=304,ja=306,No=307,bi=1e3,Xn=1001,qa=1002,an=1003,Vi=1004,Xa=1005,sn=1006,Ds=1007,ga=1008,xi=1009,Vd=1010,ru=1011,iu=1012,gh=1013,ko=1014,Gr=1015,ya=1016,Wd=1017,$d=1018,jd=1019,Io=1020,yh=1021,Hr=1022,Lr=1023,qd=1024,wh=1025,Xd=Lr,Do=1026,Fs=1027,tg=1028,Yd=1029,Jd=1030,Zd=1031,Bs=1032,ng=1033,Kd=33776,bh=33777,au=33778,wa=33779,xh=35840,_h=35841,Sh=35842,Us=35843,Mh=36196,ou=37492,su=37496,Qd=37808,ep=37809,Eh=37810,tp=37811,np=37812,rp=37813,lu=37814,Gs=37815,Th=37816,ip=37817,uu=37818,Fo=37819,rg=37820,ap=37821,op=36492,sp=37840,lp=37841,cu=37842,up=37843,Ah=37844,Ch=37845,cp=37846,hp=37847,Lh=37848,ig=37849,ag=37850,og=37851,Rh=37852,sg=37853,lg=2200,fp=2201,Bo=2202,nr=2300,Ya=2301,Kr=2302,Ja=2400,Za=2401,hu=2402,Ph=2500,Hs=2501,dp=0,ug=1,pp=2,On=3e3,Uo=3001,Go=3007,Ho=3002,Ka=3003,zs=3004,Oh=3005,Vs=3006,vp=3200,Wi=3201,_i=0,mp=1,fu=7680,gp=519,Ws=35044,ba=35048,Nh="300 es";function rr(){}Object.assign(rr.prototype,{addEventListener:function(t,e){this._listeners===void 0&&(this._listeners={});var n=this._listeners;n[t]===void 0&&(n[t]=[]),n[t].indexOf(e)===-1&&n[t].push(e)},hasEventListener:function(t,e){if(this._listeners===void 0)return!1;var n=this._listeners;return n[t]!==void 0&&n[t].indexOf(e)!==-1},removeEventListener:function(t,e){if(this._listeners!==void 0){var n=this._listeners,r=n[t];if(r!==void 0){var i=r.indexOf(e);i!==-1&&r.splice(i,1)}}},dispatchEvent:function(t){if(this._listeners!==void 0){var e=this._listeners,n=e[t.type];if(n!==void 0){t.target=this;for(var r=n.slice(0),i=0,o=r.length;i<o;i++)r[i].call(this,t)}}}});for(var Yn=[],zo=0;zo<256;zo++)Yn[zo]=(zo<16?"0":"")+zo.toString(16);var Qa=1234567,lt={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0,i=Yn[t&255]+Yn[t>>8&255]+Yn[t>>16&255]+Yn[t>>24&255]+"-"+Yn[e&255]+Yn[e>>8&255]+"-"+Yn[e>>16&15|64]+Yn[e>>24&255]+"-"+Yn[n&63|128]+Yn[n>>8&255]+"-"+Yn[n>>16&255]+Yn[n>>24&255]+Yn[r&255]+Yn[r>>8&255]+Yn[r>>16&255]+Yn[r>>24&255];return i.toUpperCase()},clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){return t!==void 0&&(Qa=t%2147483647),Qa=Qa*16807%2147483647,(Qa-1)/2147483646},degToRad:function(t){return t*lt.DEG2RAD},radToDeg:function(t){return t*lt.RAD2DEG},isPowerOfTwo:function(t){return(t&t-1)==0&&t!==0},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,n,r,i){var o=Math.cos,l=Math.sin,u=o(n/2),c=l(n/2),f=o((e+r)/2),d=l((e+r)/2),v=o((e-r)/2),m=l((e-r)/2),g=o((r-e)/2),w=l((r-e)/2);switch(i){case"XYX":t.set(u*d,c*v,c*m,u*f);break;case"YZY":t.set(c*m,u*d,c*v,u*f);break;case"ZXZ":t.set(c*v,c*m,u*d,u*f);break;case"XZX":t.set(u*d,c*w,c*g,u*f);break;case"YXY":t.set(c*g,u*d,c*w,u*f);break;case"ZYZ":t.set(c*w,c*g,u*d,u*f);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}},xe=function(){function a(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;ye(this,a),Object.defineProperty(this,"isVector2",{value:!0}),this.x=t,this.y=e}return Pe(a,[{key:"set",value:function(e,n){return this.x=e,this.y=n,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setComponent",value:function(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"add",value:function(e,n){return n!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,n)):(this.x+=e.x,this.y+=e.y,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"addVectors",value:function(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}},{key:"addScaledVector",value:function(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}},{key:"sub",value:function(e,n){return n!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,n)):(this.x-=e.x,this.y-=e.y,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"subVectors",value:function(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"applyMatrix3",value:function(e){var n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}},{key:"clamp",value:function(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}},{key:"clampScalar",value:function(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}},{key:"clampLength",value:function(e,n){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"cross",value:function(e){return this.x*e.y-this.y*e.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){var e=Math.atan2(-this.y,-this.x)+Math.PI;return e}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var n=this.x-e.x,r=this.y-e.y;return n*n+r*r}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}},{key:"lerpVectors",value:function(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"fromArray",value:function(e,n){return n===void 0&&(n=0),this.x=e[n],this.y=e[n+1],this}},{key:"toArray",value:function(e,n){return e===void 0&&(e=[]),n===void 0&&(n=0),e[n]=this.x,e[n+1]=this.y,e}},{key:"fromBufferAttribute",value:function(e,n,r){return r!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(n),this.y=e.getY(n),this}},{key:"rotateAround",value:function(e,n){var r=Math.cos(n),i=Math.sin(n),o=this.x-e.x,l=this.y-e.y;return this.x=o*r-l*i+e.x,this.y=o*i+l*r+e.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:"width",get:function(){return this.x},set:function(e){this.x=e}},{key:"height",get:function(){return this.y},set:function(e){this.y=e}}]),a}(),Jn=function(){function a(){ye(this,a),Object.defineProperty(this,"isMatrix3",{value:!0}),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}return Pe(a,[{key:"set",value:function(e,n,r,i,o,l,u,c,f){var d=this.elements;return d[0]=e,d[1]=i,d[2]=u,d[3]=n,d[4]=o,d[5]=c,d[6]=r,d[7]=l,d[8]=f,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"clone",value:function(){return new this.constructor().fromArray(this.elements)}},{key:"copy",value:function(e){var n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}},{key:"extractBasis",value:function(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(e){var n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,n){var r=e.elements,i=n.elements,o=this.elements,l=r[0],u=r[3],c=r[6],f=r[1],d=r[4],v=r[7],m=r[2],g=r[5],w=r[8],_=i[0],x=i[3],y=i[6],E=i[1],R=i[4],A=i[7],T=i[2],C=i[5],I=i[8];return o[0]=l*_+u*E+c*T,o[3]=l*x+u*R+c*C,o[6]=l*y+u*A+c*I,o[1]=f*_+d*E+v*T,o[4]=f*x+d*R+v*C,o[7]=f*y+d*A+v*I,o[2]=m*_+g*E+w*T,o[5]=m*x+g*R+w*C,o[8]=m*y+g*A+w*I,this}},{key:"multiplyScalar",value:function(e){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}},{key:"determinant",value:function(){var e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],l=e[4],u=e[5],c=e[6],f=e[7],d=e[8];return n*l*d-n*u*f-r*o*d+r*u*c+i*o*f-i*l*c}},{key:"getInverse",value:function(e,n){n!==void 0&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");var r=e.elements,i=this.elements,o=r[0],l=r[1],u=r[2],c=r[3],f=r[4],d=r[5],v=r[6],m=r[7],g=r[8],w=g*f-d*m,_=d*v-g*c,x=m*c-f*v,y=o*w+l*_+u*x;if(y===0)return this.set(0,0,0,0,0,0,0,0,0);var E=1/y;return i[0]=w*E,i[1]=(u*m-g*l)*E,i[2]=(d*l-u*f)*E,i[3]=_*E,i[4]=(g*o-u*v)*E,i[5]=(u*c-d*o)*E,i[6]=x*E,i[7]=(l*v-m*o)*E,i[8]=(f*o-l*c)*E,this}},{key:"transpose",value:function(){var e,n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}},{key:"getNormalMatrix",value:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()}},{key:"transposeIntoArray",value:function(e){var n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}},{key:"setUvTransform",value:function(e,n,r,i,o,l,u){var c=Math.cos(o),f=Math.sin(o);this.set(r*c,r*f,-r*(c*l+f*u)+l+e,-i*f,i*c,-i*(-f*l+c*u)+u+n,0,0,1)}},{key:"scale",value:function(e,n){var r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=n,r[4]*=n,r[7]*=n,this}},{key:"rotate",value:function(e){var n=Math.cos(e),r=Math.sin(e),i=this.elements,o=i[0],l=i[3],u=i[6],c=i[1],f=i[4],d=i[7];return i[0]=n*o+r*c,i[3]=n*l+r*f,i[6]=n*u+r*d,i[1]=-r*o+n*c,i[4]=-r*l+n*f,i[7]=-r*u+n*d,this}},{key:"translate",value:function(e,n){var r=this.elements;return r[0]+=e*r[2],r[3]+=e*r[5],r[6]+=e*r[8],r[1]+=n*r[2],r[4]+=n*r[5],r[7]+=n*r[8],this}},{key:"equals",value:function(e){for(var n=this.elements,r=e.elements,i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}},{key:"fromArray",value:function(e,n){n===void 0&&(n=0);for(var r=0;r<9;r++)this.elements[r]=e[r+n];return this}},{key:"toArray",value:function(e,n){e===void 0&&(e=[]),n===void 0&&(n=0);var r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}}]),a}(),Qr,zr={getDataURL:function(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement=="undefined")return t.src;var e;if(Ht(t,HTMLCanvasElement))e=t;else{Qr===void 0&&(Qr=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Qr.width=t.width,Qr.height=t.height;var n=Qr.getContext("2d");Ht(t,ImageData)?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=Qr}return e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}},yp=0;function Jt(a,t,e,n,r,i,o,l,u,c){Object.defineProperty(this,"id",{value:yp++}),this.uuid=lt.generateUUID(),this.name="",this.image=a!==void 0?a:Jt.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=t!==void 0?t:Jt.DEFAULT_MAPPING,this.wrapS=e!==void 0?e:Xn,this.wrapT=n!==void 0?n:Xn,this.magFilter=r!==void 0?r:sn,this.minFilter=i!==void 0?i:ga,this.anisotropy=u!==void 0?u:1,this.format=o!==void 0?o:Lr,this.internalFormat=null,this.type=l!==void 0?l:xi,this.offset=new xe(0,0),this.repeat=new xe(1,1),this.center=new xe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Jn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c!==void 0?c:On,this.version=0,this.onUpdate=null}Jt.DEFAULT_IMAGE=void 0,Jt.DEFAULT_MAPPING=nu,Jt.prototype=Object.assign(Object.create(rr.prototype),{constructor:Jt,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){var e=t===void 0||typeof t=="string";if(!e&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){var r=this.image;if(r.uuid===void 0&&(r.uuid=lt.generateUUID()),!e&&t.images[r.uuid]===void 0){var i;if(Array.isArray(r)){i=[];for(var o=0,l=r.length;o<l;o++)i.push(zr.getDataURL(r[o]))}else i=zr.getDataURL(r);t.images[r.uuid]={uuid:r.uuid,url:i}}n.image=r.uuid}return e||(t.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping!==nu)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case bi:t.x=t.x-Math.floor(t.x);break;case Xn:t.x=t.x<0?0:1;break;case qa:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case bi:t.y=t.y-Math.floor(t.y);break;case Xn:t.y=t.y<0?0:1;break;case qa:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}}),Object.defineProperty(Jt.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}});var Qt=function(){function a(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;ye(this,a),Object.defineProperty(this,"isVector4",{value:!0}),this.x=t,this.y=e,this.z=n,this.w=r}return Pe(a,[{key:"set",value:function(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setW",value:function(e){return this.w=e,this}},{key:"setComponent",value:function(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}},{key:"add",value:function(e,n){return n!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,n)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}},{key:"addVectors",value:function(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}},{key:"addScaledVector",value:function(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}},{key:"sub",value:function(e,n){return n!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,n)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}},{key:"subVectors",value:function(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}},{key:"applyMatrix4",value:function(e){var n=this.x,r=this.y,i=this.z,o=this.w,l=e.elements;return this.x=l[0]*n+l[4]*r+l[8]*i+l[12]*o,this.y=l[1]*n+l[5]*r+l[9]*i+l[13]*o,this.z=l[2]*n+l[6]*r+l[10]*i+l[14]*o,this.w=l[3]*n+l[7]*r+l[11]*i+l[15]*o,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"setAxisAngleFromQuaternion",value:function(e){this.w=2*Math.acos(e.w);var n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}},{key:"setAxisAngleFromRotationMatrix",value:function(e){var n,r,i,o,l=.01,u=.1,c=e.elements,f=c[0],d=c[4],v=c[8],m=c[1],g=c[5],w=c[9],_=c[2],x=c[6],y=c[10];if(Math.abs(d-m)<l&&Math.abs(v-_)<l&&Math.abs(w-x)<l){if(Math.abs(d+m)<u&&Math.abs(v+_)<u&&Math.abs(w+x)<u&&Math.abs(f+g+y-3)<u)return this.set(1,0,0,0),this;n=Math.PI;var E=(f+1)/2,R=(g+1)/2,A=(y+1)/2,T=(d+m)/4,C=(v+_)/4,I=(w+x)/4;return E>R&&E>A?E<l?(r=0,i=.707106781,o=.707106781):(r=Math.sqrt(E),i=T/r,o=C/r):R>A?R<l?(r=.707106781,i=0,o=.707106781):(i=Math.sqrt(R),r=T/i,o=I/i):A<l?(r=.707106781,i=.707106781,o=0):(o=Math.sqrt(A),r=C/o,i=I/o),this.set(r,i,o,n),this}var j=Math.sqrt((x-w)*(x-w)+(v-_)*(v-_)+(m-d)*(m-d));return Math.abs(j)<.001&&(j=1),this.x=(x-w)/j,this.y=(v-_)/j,this.z=(m-d)/j,this.w=Math.acos((f+g+y-1)/2),this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}},{key:"clamp",value:function(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}},{key:"clampScalar",value:function(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}},{key:"clampLength",value:function(e,n){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}},{key:"lerpVectors",value:function(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}},{key:"fromArray",value:function(e,n){return n===void 0&&(n=0),this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}},{key:"toArray",value:function(e,n){return e===void 0&&(e=[]),n===void 0&&(n=0),e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}},{key:"fromBufferAttribute",value:function(e,n,r){return r!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:"width",get:function(){return this.z},set:function(e){this.z=e}},{key:"height",get:function(){return this.w},set:function(e){this.w=e}}]),a}();function ir(a,t,e){this.width=a,this.height=t,this.scissor=new Qt(0,0,a,t),this.scissorTest=!1,this.viewport=new Qt(0,0,a,t),e=e||{},this.texture=new Jt(void 0,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture.image={},this.texture.image.width=a,this.texture.image.height=t,this.texture.generateMipmaps=e.generateMipmaps!==void 0?e.generateMipmaps:!1,this.texture.minFilter=e.minFilter!==void 0?e.minFilter:sn,this.depthBuffer=e.depthBuffer!==void 0?e.depthBuffer:!0,this.stencilBuffer=e.stencilBuffer!==void 0?e.stencilBuffer:!1,this.depthTexture=e.depthTexture!==void 0?e.depthTexture:null}ir.prototype=Object.assign(Object.create(rr.prototype),{constructor:ir,isWebGLRenderTarget:!0,setSize:function(t,e){(this.width!==t||this.height!==e)&&(this.width=t,this.height=e,this.texture.image.width=t,this.texture.image.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function wp(a,t,e){ir.call(this,a,t,e),this.samples=4}wp.prototype=Object.assign(Object.create(ir.prototype),{constructor:wp,isWebGLMultisampleRenderTarget:!0,copy:function(t){return ir.prototype.copy.call(this,t),this.samples=t.samples,this}});var Gn=function(){function a(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;ye(this,a),Object.defineProperty(this,"isQuaternion",{value:!0}),this._x=t,this._y=e,this._z=n,this._w=r}return Pe(a,[{key:"set",value:function(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(e,n){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var r=e._x,i=e._y,o=e._z,l=e._order,u=Math.cos,c=Math.sin,f=u(r/2),d=u(i/2),v=u(o/2),m=c(r/2),g=c(i/2),w=c(o/2);switch(l){case"XYZ":this._x=m*d*v+f*g*w,this._y=f*g*v-m*d*w,this._z=f*d*w+m*g*v,this._w=f*d*v-m*g*w;break;case"YXZ":this._x=m*d*v+f*g*w,this._y=f*g*v-m*d*w,this._z=f*d*w-m*g*v,this._w=f*d*v+m*g*w;break;case"ZXY":this._x=m*d*v-f*g*w,this._y=f*g*v+m*d*w,this._z=f*d*w+m*g*v,this._w=f*d*v-m*g*w;break;case"ZYX":this._x=m*d*v-f*g*w,this._y=f*g*v+m*d*w,this._z=f*d*w-m*g*v,this._w=f*d*v+m*g*w;break;case"YZX":this._x=m*d*v+f*g*w,this._y=f*g*v+m*d*w,this._z=f*d*w-m*g*v,this._w=f*d*v-m*g*w;break;case"XZY":this._x=m*d*v-f*g*w,this._y=f*g*v-m*d*w,this._z=f*d*w+m*g*v,this._w=f*d*v+m*g*w;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+l)}return n!==!1&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(e,n){var r=n/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var n=e.elements,r=n[0],i=n[4],o=n[8],l=n[1],u=n[5],c=n[9],f=n[2],d=n[6],v=n[10],m=r+u+v;if(m>0){var g=.5/Math.sqrt(m+1);this._w=.25/g,this._x=(d-c)*g,this._y=(o-f)*g,this._z=(l-i)*g}else if(r>u&&r>v){var w=2*Math.sqrt(1+r-u-v);this._w=(d-c)/w,this._x=.25*w,this._y=(i+l)/w,this._z=(o+f)/w}else if(u>v){var _=2*Math.sqrt(1+u-r-v);this._w=(o-f)/_,this._x=(i+l)/_,this._y=.25*_,this._z=(c+d)/_}else{var x=2*Math.sqrt(1+v-r-u);this._w=(l-i)/x,this._x=(o+f)/x,this._y=(c+d)/x,this._z=.25*x}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(e,n){var r=1e-6,i=e.dot(n)+1;return i<r?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=i),this.normalize()}},{key:"angleTo",value:function(e){return 2*Math.acos(Math.abs(lt.clamp(this.dot(e),-1,1)))}},{key:"rotateTowards",value:function(e,n){var r=this.angleTo(e);if(r===0)return this;var i=Math.min(1,n/r);return this.slerp(e,i),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"inverse",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}},{key:"multiply",value:function(e,n){return n!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,n)):this.multiplyQuaternions(this,e)}},{key:"premultiply",value:function(e){return this.multiplyQuaternions(e,this)}},{key:"multiplyQuaternions",value:function(e,n){var r=e._x,i=e._y,o=e._z,l=e._w,u=n._x,c=n._y,f=n._z,d=n._w;return this._x=r*d+l*u+i*f-o*c,this._y=i*d+l*c+o*u-r*f,this._z=o*d+l*f+r*c-i*u,this._w=l*d-r*u-i*c-o*f,this._onChangeCallback(),this}},{key:"slerp",value:function(e,n){if(n===0)return this;if(n===1)return this.copy(e);var r=this._x,i=this._y,o=this._z,l=this._w,u=l*e._w+r*e._x+i*e._y+o*e._z;if(u<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,u=-u):this.copy(e),u>=1)return this._w=l,this._x=r,this._y=i,this._z=o,this;var c=1-u*u;if(c<=Number.EPSILON){var f=1-n;return this._w=f*l+n*this._w,this._x=f*r+n*this._x,this._y=f*i+n*this._y,this._z=f*o+n*this._z,this.normalize(),this._onChangeCallback(),this}var d=Math.sqrt(c),v=Math.atan2(d,u),m=Math.sin((1-n)*v)/d,g=Math.sin(n*v)/d;return this._w=l*m+this._w*g,this._x=r*m+this._x*g,this._y=i*m+this._y*g,this._z=o*m+this._z*g,this._onChangeCallback(),this}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}},{key:"fromArray",value:function(e,n){return n===void 0&&(n=0),this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}},{key:"toArray",value:function(e,n){return e===void 0&&(e=[]),n===void 0&&(n=0),e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}},{key:"fromBufferAttribute",value:function(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}}],[{key:"slerp",value:function(e,n,r,i){return r.copy(e).slerp(n,i)}},{key:"slerpFlat",value:function(e,n,r,i,o,l,u){var c=r[i+0],f=r[i+1],d=r[i+2],v=r[i+3],m=o[l+0],g=o[l+1],w=o[l+2],_=o[l+3];if(v!==_||c!==m||f!==g||d!==w){var x=1-u,y=c*m+f*g+d*w+v*_,E=y>=0?1:-1,R=1-y*y;if(R>Number.EPSILON){var A=Math.sqrt(R),T=Math.atan2(A,y*E);x=Math.sin(x*T)/A,u=Math.sin(u*T)/A}var C=u*E;if(c=c*x+m*C,f=f*x+g*C,d=d*x+w*C,v=v*x+_*C,x===1-u){var I=1/Math.sqrt(c*c+f*f+d*d+v*v);c*=I,f*=I,d*=I,v*=I}}e[n]=c,e[n+1]=f,e[n+2]=d,e[n+3]=v}},{key:"multiplyQuaternionsFlat",value:function(e,n,r,i,o,l){var u=r[i],c=r[i+1],f=r[i+2],d=r[i+3],v=o[l],m=o[l+1],g=o[l+2],w=o[l+3];return e[n]=u*w+d*v+c*g-f*m,e[n+1]=c*w+d*m+f*v-u*g,e[n+2]=f*w+d*g+u*m-c*v,e[n+3]=d*w-u*v-c*m-f*g,e}}]),a}(),D=function(){function a(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;ye(this,a),Object.defineProperty(this,"isVector3",{value:!0}),this.x=t,this.y=e,this.z=n}return Pe(a,[{key:"set",value:function(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setComponent",value:function(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"add",value:function(e,n){return n!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,n)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this}},{key:"addVectors",value:function(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}},{key:"addScaledVector",value:function(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}},{key:"sub",value:function(e,n){return n!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,n)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:"subVectors",value:function(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}},{key:"multiply",value:function(e,n){return n!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,n)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"multiplyVectors",value:function(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}},{key:"applyEuler",value:function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(bp.setFromEuler(e))}},{key:"applyAxisAngle",value:function(e,n){return this.applyQuaternion(bp.setFromAxisAngle(e,n))}},{key:"applyMatrix3",value:function(e){var n=this.x,r=this.y,i=this.z,o=e.elements;return this.x=o[0]*n+o[3]*r+o[6]*i,this.y=o[1]*n+o[4]*r+o[7]*i,this.z=o[2]*n+o[5]*r+o[8]*i,this}},{key:"applyNormalMatrix",value:function(e){return this.applyMatrix3(e).normalize()}},{key:"applyMatrix4",value:function(e){var n=this.x,r=this.y,i=this.z,o=e.elements,l=1/(o[3]*n+o[7]*r+o[11]*i+o[15]);return this.x=(o[0]*n+o[4]*r+o[8]*i+o[12])*l,this.y=(o[1]*n+o[5]*r+o[9]*i+o[13])*l,this.z=(o[2]*n+o[6]*r+o[10]*i+o[14])*l,this}},{key:"applyQuaternion",value:function(e){var n=this.x,r=this.y,i=this.z,o=e.x,l=e.y,u=e.z,c=e.w,f=c*n+l*i-u*r,d=c*r+u*n-o*i,v=c*i+o*r-l*n,m=-o*n-l*r-u*i;return this.x=f*c+m*-o+d*-u-v*-l,this.y=d*c+m*-l+v*-o-f*-u,this.z=v*c+m*-u+f*-l-d*-o,this}},{key:"project",value:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}},{key:"unproject",value:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}},{key:"transformDirection",value:function(e){var n=this.x,r=this.y,i=this.z,o=e.elements;return this.x=o[0]*n+o[4]*r+o[8]*i,this.y=o[1]*n+o[5]*r+o[9]*i,this.z=o[2]*n+o[6]*r+o[10]*i,this.normalize()}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}},{key:"clamp",value:function(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}},{key:"clampScalar",value:function(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}},{key:"clampLength",value:function(e,n){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}},{key:"lerpVectors",value:function(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}},{key:"cross",value:function(e,n){return n!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,n)):this.crossVectors(this,e)}},{key:"crossVectors",value:function(e,n){var r=e.x,i=e.y,o=e.z,l=n.x,u=n.y,c=n.z;return this.x=i*c-o*u,this.y=o*l-r*c,this.z=r*u-i*l,this}},{key:"projectOnVector",value:function(e){var n=e.lengthSq();if(n===0)return this.set(0,0,0);var r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}},{key:"projectOnPlane",value:function(e){return kh.copy(this).projectOnVector(e),this.sub(kh)}},{key:"reflect",value:function(e){return this.sub(kh.copy(e).multiplyScalar(2*this.dot(e)))}},{key:"angleTo",value:function(e){var n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;var r=this.dot(e)/n;return Math.acos(lt.clamp(r,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}},{key:"setFromSpherical",value:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}},{key:"setFromSphericalCoords",value:function(e,n,r){var i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}},{key:"setFromCylindrical",value:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}},{key:"setFromCylindricalCoords",value:function(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}},{key:"setFromMatrixPosition",value:function(e){var n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}},{key:"setFromMatrixScale",value:function(e){var n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}},{key:"setFromMatrixColumn",value:function(e,n){return this.fromArray(e.elements,n*4)}},{key:"setFromMatrix3Column",value:function(e,n){return this.fromArray(e.elements,n*3)}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}},{key:"fromArray",value:function(e,n){return n===void 0&&(n=0),this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}},{key:"toArray",value:function(e,n){return e===void 0&&(e=[]),n===void 0&&(n=0),e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}},{key:"fromBufferAttribute",value:function(e,n,r){return r!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}]),a}(),kh=new D,bp=new Gn,Vr=function(){function a(t,e){ye(this,a),Object.defineProperty(this,"isBox3",{value:!0}),this.min=t!==void 0?t:new D(1/0,1/0,1/0),this.max=e!==void 0?e:new D(-1/0,-1/0,-1/0)}return Pe(a,[{key:"set",value:function(e,n){return this.min.copy(e),this.max.copy(n),this}},{key:"setFromArray",value:function(e){for(var n=1/0,r=1/0,i=1/0,o=-1/0,l=-1/0,u=-1/0,c=0,f=e.length;c<f;c+=3){var d=e[c],v=e[c+1],m=e[c+2];d<n&&(n=d),v<r&&(r=v),m<i&&(i=m),d>o&&(o=d),v>l&&(l=v),m>u&&(u=m)}return this.min.set(n,r,i),this.max.set(o,l,u),this}},{key:"setFromBufferAttribute",value:function(e){for(var n=1/0,r=1/0,i=1/0,o=-1/0,l=-1/0,u=-1/0,c=0,f=e.count;c<f;c++){var d=e.getX(c),v=e.getY(c),m=e.getZ(c);d<n&&(n=d),v<r&&(r=v),m<i&&(i=m),d>o&&(o=d),v>l&&(l=v),m>u&&(u=m)}return this.min.set(n,r,i),this.max.set(o,l,u),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}},{key:"setFromCenterAndSize",value:function(e,n){var r=Vo.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}},{key:"setFromObject",value:function(e){return this.makeEmpty(),this.expandByObject(e)}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(e){return e===void 0&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new D),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return e===void 0&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new D),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"expandByObject",value:function(e){e.updateWorldMatrix(!1,!1);var n=e.geometry;n!==void 0&&(n.boundingBox===null&&n.computeBoundingBox(),Wo.copy(n.boundingBox),Wo.applyMatrix4(e.matrixWorld),this.union(Wo));for(var r=e.children,i=0,o=r.length;i<o;i++)this.expandByObject(r[i]);return this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}},{key:"getParameter",value:function(e,n){return n===void 0&&(console.warn("THREE.Box3: .getParameter() target is now required"),n=new D),n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}},{key:"intersectsSphere",value:function(e){return this.clampPoint(e.center,Vo),Vo.distanceToSquared(e.center)<=e.radius*e.radius}},{key:"intersectsPlane",value:function(e){var n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}},{key:"intersectsTriangle",value:function(e){if(this.isEmpty())return!1;this.getCenter(no),$s.subVectors(this.max,no),eo.subVectors(e.a,no),xa.subVectors(e.b,no),to.subVectors(e.c,no),Si.subVectors(xa,eo),ji.subVectors(to,xa),qi.subVectors(eo,to);var n=[0,-Si.z,Si.y,0,-ji.z,ji.y,0,-qi.z,qi.y,Si.z,0,-Si.x,ji.z,0,-ji.x,qi.z,0,-qi.x,-Si.y,Si.x,0,-ji.y,ji.x,0,-qi.y,qi.x,0];return!Ih(n,eo,xa,to,$s)||(n=[1,0,0,0,1,0,0,0,1],!Ih(n,eo,xa,to,$s))?!1:(js.crossVectors(Si,ji),n=[js.x,js.y,js.z],Ih(n,eo,xa,to,$s))}},{key:"clampPoint",value:function(e,n){return n===void 0&&(console.warn("THREE.Box3: .clampPoint() target is now required"),n=new D),n.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){var n=Vo.copy(e).clamp(this.min,this.max);return n.sub(e).length()}},{key:"getBoundingSphere",value:function(e){return e===void 0&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=this.getSize(Vo).length()*.5,e}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"applyMatrix4",value:function(e){return this.isEmpty()?this:($i[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),$i[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),$i[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),$i[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),$i[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),$i[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),$i[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),$i[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints($i),this)}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),a}();function Ih(a,t,e,n,r){for(var i=0,o=a.length-3;i<=o;i+=3){Mi.fromArray(a,i);var l=r.x*Math.abs(Mi.x)+r.y*Math.abs(Mi.y)+r.z*Math.abs(Mi.z),u=t.dot(Mi),c=e.dot(Mi),f=n.dot(Mi);if(Math.max(-Math.max(u,c,f),Math.min(u,c,f))>l)return!1}return!0}var $i=[new D,new D,new D,new D,new D,new D,new D,new D],Vo=new D,Wo=new Vr,eo=new D,xa=new D,to=new D,Si=new D,ji=new D,qi=new D,no=new D,$s=new D,js=new D,Mi=new D,xp=new Vr,Ei=function(){function a(t,e){ye(this,a),this.center=t!==void 0?t:new D,this.radius=e!==void 0?e:-1}return Pe(a,[{key:"set",value:function(e,n){return this.center.copy(e),this.radius=n,this}},{key:"setFromPoints",value:function(e,n){var r=this.center;n!==void 0?r.copy(n):xp.setFromPoints(e).getCenter(r);for(var i=0,o=0,l=e.length;o<l;o++)i=Math.max(i,r.distanceToSquared(e[o]));return this.radius=Math.sqrt(i),this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"copy",value:function(e){return this.center.copy(e.center),this.radius=e.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(e){return e.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(e){var n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}},{key:"intersectsBox",value:function(e){return e.intersectsSphere(this)}},{key:"intersectsPlane",value:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(e,n){var r=this.center.distanceToSquared(e);return n===void 0&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),n=new D),n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}},{key:"getBoundingBox",value:function(e){return e===void 0&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new Vr),this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}},{key:"applyMatrix4",value:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}},{key:"translate",value:function(e){return this.center.add(e),this}},{key:"equals",value:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}]),a}(),Ti=new D,du=new D,pu=new D,_a=new D,vu=new D,qs=new D,mu=new D,ro=function(){function a(t,e){ye(this,a),this.origin=t!==void 0?t:new D,this.direction=e!==void 0?e:new D(0,0,-1)}return Pe(a,[{key:"set",value:function(e,n){return this.origin.copy(e),this.direction.copy(n),this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"copy",value:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}},{key:"at",value:function(e,n){return n===void 0&&(console.warn("THREE.Ray: .at() target is now required"),n=new D),n.copy(this.direction).multiplyScalar(e).add(this.origin)}},{key:"lookAt",value:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this}},{key:"recast",value:function(e){return this.origin.copy(this.at(e,Ti)),this}},{key:"closestPointToPoint",value:function(e,n){n===void 0&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),n=new D),n.subVectors(e,this.origin);var r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.direction).multiplyScalar(r).add(this.origin)}},{key:"distanceToPoint",value:function(e){return Math.sqrt(this.distanceSqToPoint(e))}},{key:"distanceSqToPoint",value:function(e){var n=Ti.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Ti.copy(this.direction).multiplyScalar(n).add(this.origin),Ti.distanceToSquared(e))}},{key:"distanceSqToSegment",value:function(e,n,r,i){du.copy(e).add(n).multiplyScalar(.5),pu.copy(n).sub(e).normalize(),_a.copy(this.origin).sub(du);var o=e.distanceTo(n)*.5,l=-this.direction.dot(pu),u=_a.dot(this.direction),c=-_a.dot(pu),f=_a.lengthSq(),d=Math.abs(1-l*l),v,m,g,w;if(d>0)if(v=l*c-u,m=l*u-c,w=o*d,v>=0)if(m>=-w)if(m<=w){var _=1/d;v*=_,m*=_,g=v*(v+l*m+2*u)+m*(l*v+m+2*c)+f}else m=o,v=Math.max(0,-(l*m+u)),g=-v*v+m*(m+2*c)+f;else m=-o,v=Math.max(0,-(l*m+u)),g=-v*v+m*(m+2*c)+f;else m<=-w?(v=Math.max(0,-(-l*o+u)),m=v>0?-o:Math.min(Math.max(-o,-c),o),g=-v*v+m*(m+2*c)+f):m<=w?(v=0,m=Math.min(Math.max(-o,-c),o),g=m*(m+2*c)+f):(v=Math.max(0,-(l*o+u)),m=v>0?o:Math.min(Math.max(-o,-c),o),g=-v*v+m*(m+2*c)+f);else m=l>0?-o:o,v=Math.max(0,-(l*m+u)),g=-v*v+m*(m+2*c)+f;return r&&r.copy(this.direction).multiplyScalar(v).add(this.origin),i&&i.copy(pu).multiplyScalar(m).add(du),g}},{key:"intersectSphere",value:function(e,n){Ti.subVectors(e.center,this.origin);var r=Ti.dot(this.direction),i=Ti.dot(Ti)-r*r,o=e.radius*e.radius;if(i>o)return null;var l=Math.sqrt(o-i),u=r-l,c=r+l;return u<0&&c<0?null:u<0?this.at(c,n):this.at(u,n)}},{key:"intersectsSphere",value:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}},{key:"distanceToPlane",value:function(e){var n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;var r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}},{key:"intersectPlane",value:function(e,n){var r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}},{key:"intersectsPlane",value:function(e){var n=e.distanceToPoint(this.origin);if(n===0)return!0;var r=e.normal.dot(this.direction);return r*n<0}},{key:"intersectBox",value:function(e,n){var r,i,o,l,u,c,f=1/this.direction.x,d=1/this.direction.y,v=1/this.direction.z,m=this.origin;return f>=0?(r=(e.min.x-m.x)*f,i=(e.max.x-m.x)*f):(r=(e.max.x-m.x)*f,i=(e.min.x-m.x)*f),d>=0?(o=(e.min.y-m.y)*d,l=(e.max.y-m.y)*d):(o=(e.max.y-m.y)*d,l=(e.min.y-m.y)*d),r>l||o>i||((o>r||r!==r)&&(r=o),(l<i||i!==i)&&(i=l),v>=0?(u=(e.min.z-m.z)*v,c=(e.max.z-m.z)*v):(u=(e.max.z-m.z)*v,c=(e.min.z-m.z)*v),r>c||u>i)||((u>r||r!==r)&&(r=u),(c<i||i!==i)&&(i=c),i<0)?null:this.at(r>=0?r:i,n)}},{key:"intersectsBox",value:function(e){return this.intersectBox(e,Ti)!==null}},{key:"intersectTriangle",value:function(e,n,r,i,o){vu.subVectors(n,e),qs.subVectors(r,e),mu.crossVectors(vu,qs);var l=this.direction.dot(mu),u;if(l>0){if(i)return null;u=1}else if(l<0)u=-1,l=-l;else return null;_a.subVectors(this.origin,e);var c=u*this.direction.dot(qs.crossVectors(_a,qs));if(c<0)return null;var f=u*this.direction.dot(vu.cross(_a));if(f<0||c+f>l)return null;var d=-u*_a.dot(mu);return d<0?null:this.at(d/l,o)}},{key:"applyMatrix4",value:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}},{key:"equals",value:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}]),a}(),ht=function(){function a(){ye(this,a),Object.defineProperty(this,"isMatrix4",{value:!0}),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}return Pe(a,[{key:"set",value:function(e,n,r,i,o,l,u,c,f,d,v,m,g,w,_,x){var y=this.elements;return y[0]=e,y[4]=n,y[8]=r,y[12]=i,y[1]=o,y[5]=l,y[9]=u,y[13]=c,y[2]=f,y[6]=d,y[10]=v,y[14]=m,y[3]=g,y[7]=w,y[11]=_,y[15]=x,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return new a().fromArray(this.elements)}},{key:"copy",value:function(e){var n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}},{key:"copyPosition",value:function(e){var n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}},{key:"extractBasis",value:function(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(e){var n=this.elements,r=e.elements,i=1/Sa.setFromMatrixColumn(e,0).length(),o=1/Sa.setFromMatrixColumn(e,1).length(),l=1/Sa.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*o,n[5]=r[5]*o,n[6]=r[6]*o,n[7]=0,n[8]=r[8]*l,n[9]=r[9]*l,n[10]=r[10]*l,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}},{key:"makeRotationFromEuler",value:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var n=this.elements,r=e.x,i=e.y,o=e.z,l=Math.cos(r),u=Math.sin(r),c=Math.cos(i),f=Math.sin(i),d=Math.cos(o),v=Math.sin(o);if(e.order==="XYZ"){var m=l*d,g=l*v,w=u*d,_=u*v;n[0]=c*d,n[4]=-c*v,n[8]=f,n[1]=g+w*f,n[5]=m-_*f,n[9]=-u*c,n[2]=_-m*f,n[6]=w+g*f,n[10]=l*c}else if(e.order==="YXZ"){var x=c*d,y=c*v,E=f*d,R=f*v;n[0]=x+R*u,n[4]=E*u-y,n[8]=l*f,n[1]=l*v,n[5]=l*d,n[9]=-u,n[2]=y*u-E,n[6]=R+x*u,n[10]=l*c}else if(e.order==="ZXY"){var A=c*d,T=c*v,C=f*d,I=f*v;n[0]=A-I*u,n[4]=-l*v,n[8]=C+T*u,n[1]=T+C*u,n[5]=l*d,n[9]=I-A*u,n[2]=-l*f,n[6]=u,n[10]=l*c}else if(e.order==="ZYX"){var j=l*d,U=l*v,B=u*d,Z=u*v;n[0]=c*d,n[4]=B*f-U,n[8]=j*f+Z,n[1]=c*v,n[5]=Z*f+j,n[9]=U*f-B,n[2]=-f,n[6]=u*c,n[10]=l*c}else if(e.order==="YZX"){var Q=l*c,J=l*f,q=u*c,Y=u*f;n[0]=c*d,n[4]=Y-Q*v,n[8]=q*v+J,n[1]=v,n[5]=l*d,n[9]=-u*d,n[2]=-f*d,n[6]=J*v+q,n[10]=Q-Y*v}else if(e.order==="XZY"){var ee=l*c,le=l*f,ue=u*c,he=u*f;n[0]=c*d,n[4]=-v,n[8]=f*d,n[1]=ee*v+he,n[5]=l*d,n[9]=le*v-ue,n[2]=ue*v-le,n[6]=u*d,n[10]=he*v+ee}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(e){return this.compose(_p,e,Sp)}},{key:"lookAt",value:function(e,n,r){var i=this.elements;return Dt.subVectors(e,n),Dt.lengthSq()===0&&(Dt.z=1),Dt.normalize(),Xi.crossVectors(r,Dt),Xi.lengthSq()===0&&(Math.abs(r.z)===1?Dt.x+=1e-4:Dt.z+=1e-4,Dt.normalize(),Xi.crossVectors(r,Dt)),Xi.normalize(),gu.crossVectors(Dt,Xi),i[0]=Xi.x,i[4]=gu.x,i[8]=Dt.x,i[1]=Xi.y,i[5]=gu.y,i[9]=Dt.y,i[2]=Xi.z,i[6]=gu.z,i[10]=Dt.z,this}},{key:"multiply",value:function(e,n){return n!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,n)):this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,n){var r=e.elements,i=n.elements,o=this.elements,l=r[0],u=r[4],c=r[8],f=r[12],d=r[1],v=r[5],m=r[9],g=r[13],w=r[2],_=r[6],x=r[10],y=r[14],E=r[3],R=r[7],A=r[11],T=r[15],C=i[0],I=i[4],j=i[8],U=i[12],B=i[1],Z=i[5],Q=i[9],J=i[13],q=i[2],Y=i[6],ee=i[10],le=i[14],ue=i[3],he=i[7],pe=i[11],de=i[15];return o[0]=l*C+u*B+c*q+f*ue,o[4]=l*I+u*Z+c*Y+f*he,o[8]=l*j+u*Q+c*ee+f*pe,o[12]=l*U+u*J+c*le+f*de,o[1]=d*C+v*B+m*q+g*ue,o[5]=d*I+v*Z+m*Y+g*he,o[9]=d*j+v*Q+m*ee+g*pe,o[13]=d*U+v*J+m*le+g*de,o[2]=w*C+_*B+x*q+y*ue,o[6]=w*I+_*Z+x*Y+y*he,o[10]=w*j+_*Q+x*ee+y*pe,o[14]=w*U+_*J+x*le+y*de,o[3]=E*C+R*B+A*q+T*ue,o[7]=E*I+R*Z+A*Y+T*he,o[11]=E*j+R*Q+A*ee+T*pe,o[15]=E*U+R*J+A*le+T*de,this}},{key:"multiplyScalar",value:function(e){var n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}},{key:"determinant",value:function(){var e=this.elements,n=e[0],r=e[4],i=e[8],o=e[12],l=e[1],u=e[5],c=e[9],f=e[13],d=e[2],v=e[6],m=e[10],g=e[14],w=e[3],_=e[7],x=e[11],y=e[15];return w*(+o*c*v-i*f*v-o*u*m+r*f*m+i*u*g-r*c*g)+_*(+n*c*g-n*f*m+o*l*m-i*l*g+i*f*d-o*c*d)+x*(+n*f*v-n*u*g-o*l*v+r*l*g+o*u*d-r*f*d)+y*(-i*u*d-n*c*v+n*u*m+i*l*v-r*l*m+r*c*d)}},{key:"transpose",value:function(){var e=this.elements,n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}},{key:"setPosition",value:function(e,n,r){var i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}},{key:"getInverse",value:function(e,n){n!==void 0&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");var r=this.elements,i=e.elements,o=i[0],l=i[1],u=i[2],c=i[3],f=i[4],d=i[5],v=i[6],m=i[7],g=i[8],w=i[9],_=i[10],x=i[11],y=i[12],E=i[13],R=i[14],A=i[15],T=w*R*m-E*_*m+E*v*x-d*R*x-w*v*A+d*_*A,C=y*_*m-g*R*m-y*v*x+f*R*x+g*v*A-f*_*A,I=g*E*m-y*w*m+y*d*x-f*E*x-g*d*A+f*w*A,j=y*w*v-g*E*v-y*d*_+f*E*_+g*d*R-f*w*R,U=o*T+l*C+u*I+c*j;if(U===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var B=1/U;return r[0]=T*B,r[1]=(E*_*c-w*R*c-E*u*x+l*R*x+w*u*A-l*_*A)*B,r[2]=(d*R*c-E*v*c+E*u*m-l*R*m-d*u*A+l*v*A)*B,r[3]=(w*v*c-d*_*c-w*u*m+l*_*m+d*u*x-l*v*x)*B,r[4]=C*B,r[5]=(g*R*c-y*_*c+y*u*x-o*R*x-g*u*A+o*_*A)*B,r[6]=(y*v*c-f*R*c-y*u*m+o*R*m+f*u*A-o*v*A)*B,r[7]=(f*_*c-g*v*c+g*u*m-o*_*m-f*u*x+o*v*x)*B,r[8]=I*B,r[9]=(y*w*c-g*E*c-y*l*x+o*E*x+g*l*A-o*w*A)*B,r[10]=(f*E*c-y*d*c+y*l*m-o*E*m-f*l*A+o*d*A)*B,r[11]=(g*d*c-f*w*c-g*l*m+o*w*m+f*l*x-o*d*x)*B,r[12]=j*B,r[13]=(g*E*u-y*w*u+y*l*_-o*E*_-g*l*R+o*w*R)*B,r[14]=(y*d*u-f*E*u-y*l*v+o*E*v+f*l*R-o*d*R)*B,r[15]=(f*w*u-g*d*u+g*l*v-o*w*v-f*l*_+o*d*_)*B,this}},{key:"scale",value:function(e){var n=this.elements,r=e.x,i=e.y,o=e.z;return n[0]*=r,n[4]*=i,n[8]*=o,n[1]*=r,n[5]*=i,n[9]*=o,n[2]*=r,n[6]*=i,n[10]*=o,n[3]*=r,n[7]*=i,n[11]*=o,this}},{key:"getMaxScaleOnAxis",value:function(){var e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}},{key:"makeTranslation",value:function(e,n,r){return this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}},{key:"makeRotationX",value:function(e){var n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}},{key:"makeRotationY",value:function(e){var n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(e){var n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(e,n){var r=Math.cos(n),i=Math.sin(n),o=1-r,l=e.x,u=e.y,c=e.z,f=o*l,d=o*u;return this.set(f*l+r,f*u-i*c,f*c+i*u,0,f*u+i*c,d*u+r,d*c-i*l,0,f*c-i*u,d*c+i*l,o*c*c+r,0,0,0,0,1),this}},{key:"makeScale",value:function(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}},{key:"makeShear",value:function(e,n,r){return this.set(1,n,r,0,e,1,r,0,e,n,1,0,0,0,0,1),this}},{key:"compose",value:function(e,n,r){var i=this.elements,o=n._x,l=n._y,u=n._z,c=n._w,f=o+o,d=l+l,v=u+u,m=o*f,g=o*d,w=o*v,_=l*d,x=l*v,y=u*v,E=c*f,R=c*d,A=c*v,T=r.x,C=r.y,I=r.z;return i[0]=(1-(_+y))*T,i[1]=(g+A)*T,i[2]=(w-R)*T,i[3]=0,i[4]=(g-A)*C,i[5]=(1-(m+y))*C,i[6]=(x+E)*C,i[7]=0,i[8]=(w+R)*I,i[9]=(x-E)*I,i[10]=(1-(m+_))*I,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}},{key:"decompose",value:function(e,n,r){var i=this.elements,o=Sa.set(i[0],i[1],i[2]).length(),l=Sa.set(i[4],i[5],i[6]).length(),u=Sa.set(i[8],i[9],i[10]).length(),c=this.determinant();c<0&&(o=-o),e.x=i[12],e.y=i[13],e.z=i[14],Wr.copy(this);var f=1/o,d=1/l,v=1/u;return Wr.elements[0]*=f,Wr.elements[1]*=f,Wr.elements[2]*=f,Wr.elements[4]*=d,Wr.elements[5]*=d,Wr.elements[6]*=d,Wr.elements[8]*=v,Wr.elements[9]*=v,Wr.elements[10]*=v,n.setFromRotationMatrix(Wr),r.x=o,r.y=l,r.z=u,this}},{key:"makePerspective",value:function(e,n,r,i,o,l){l===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var u=this.elements,c=2*o/(n-e),f=2*o/(r-i),d=(n+e)/(n-e),v=(r+i)/(r-i),m=-(l+o)/(l-o),g=-2*l*o/(l-o);return u[0]=c,u[4]=0,u[8]=d,u[12]=0,u[1]=0,u[5]=f,u[9]=v,u[13]=0,u[2]=0,u[6]=0,u[10]=m,u[14]=g,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}},{key:"makeOrthographic",value:function(e,n,r,i,o,l){var u=this.elements,c=1/(n-e),f=1/(r-i),d=1/(l-o),v=(n+e)*c,m=(r+i)*f,g=(l+o)*d;return u[0]=2*c,u[4]=0,u[8]=0,u[12]=-v,u[1]=0,u[5]=2*f,u[9]=0,u[13]=-m,u[2]=0,u[6]=0,u[10]=-2*d,u[14]=-g,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}},{key:"equals",value:function(e){for(var n=this.elements,r=e.elements,i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}},{key:"fromArray",value:function(e,n){n===void 0&&(n=0);for(var r=0;r<16;r++)this.elements[r]=e[r+n];return this}},{key:"toArray",value:function(e,n){e===void 0&&(e=[]),n===void 0&&(n=0);var r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}]),a}(),Sa=new D,Wr=new ht,_p=new D(0,0,0),Sp=new D(1,1,1),Xi=new D,gu=new D,Dt=new D,io=function(){function a(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:a.DefaultOrder;ye(this,a),Object.defineProperty(this,"isEuler",{value:!0}),this._x=t,this._y=e,this._z=n,this._order=r}return Pe(a,[{key:"set",value:function(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._order=i||this._order,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e,n,r){var i=lt.clamp,o=e.elements,l=o[0],u=o[4],c=o[8],f=o[1],d=o[5],v=o[9],m=o[2],g=o[6],w=o[10];switch(n=n||this._order,n){case"XYZ":this._y=Math.asin(i(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-v,w),this._z=Math.atan2(-u,l)):(this._x=Math.atan2(g,d),this._z=0);break;case"YXZ":this._x=Math.asin(-i(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(c,w),this._z=Math.atan2(f,d)):(this._y=Math.atan2(-m,l),this._z=0);break;case"ZXY":this._x=Math.asin(i(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(-m,w),this._z=Math.atan2(-u,d)):(this._y=0,this._z=Math.atan2(f,l));break;case"ZYX":this._y=Math.asin(-i(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(g,w),this._z=Math.atan2(f,l)):(this._x=0,this._z=Math.atan2(-u,d));break;case"YZX":this._z=Math.asin(i(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(-v,d),this._y=Math.atan2(-m,l)):(this._x=0,this._y=Math.atan2(c,w));break;case"XZY":this._z=Math.asin(-i(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(g,d),this._y=Math.atan2(c,l)):(this._x=Math.atan2(-v,w),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r!==!1&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(e,n,r){return yu.makeRotationFromQuaternion(e),this.setFromRotationMatrix(yu,n,r)}},{key:"setFromVector3",value:function(e,n){return this.set(e.x,e.y,e.z,n||this._order)}},{key:"reorder",value:function(e){return wu.setFromEuler(this),this.setFromQuaternion(wu,e)}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}},{key:"fromArray",value:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(e,n){return e===void 0&&(e=[]),n===void 0&&(n=0),e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}},{key:"toVector3",value:function(e){return e?e.set(this._x,this._y,this._z):new D(this._x,this._y,this._z)}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}}]),a}();io.DefaultOrder="XYZ",io.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var yu=new ht,wu=new Gn,Xs=function(){function a(){ye(this,a),this.mask=1|0}return Pe(a,[{key:"set",value:function(e){this.mask=1<<e|0}},{key:"enable",value:function(e){this.mask|=1<<e|0}},{key:"enableAll",value:function(){this.mask=4294967295|0}},{key:"toggle",value:function(e){this.mask^=1<<e|0}},{key:"disable",value:function(e){this.mask&=~(1<<e|0)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(e){return(this.mask&e.mask)!=0}}]),a}(),Ys=0,Mp=new D,$o=new Gn,ei=new ht,Yi=new D,gr=new D,Rr=new D,Ji=new Gn,Js=new D(1,0,0),Dh=new D(0,1,0),ao=new D(0,0,1),Ep={type:"added"},Tp={type:"removed"};function Qe(){Object.defineProperty(this,"id",{value:Ys++}),this.uuid=lt.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Qe.DefaultUp.clone();var a=new D,t=new io,e=new Gn,n=new D(1,1,1);function r(){e.setFromEuler(t,!1)}function i(){t.setFromQuaternion(e,void 0,!1)}t._onChange(r),e._onChange(i),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:a},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:e},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new ht},normalMatrix:{value:new Jn}}),this.matrix=new ht,this.matrixWorld=new ht,this.matrixAutoUpdate=Qe.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Xs,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}Qe.DefaultUp=new D(0,1,0),Qe.DefaultMatrixAutoUpdate=!0,Qe.prototype=Object.assign(Object.create(rr.prototype),{constructor:Qe,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(t,e){return $o.setFromAxisAngle(t,e),this.quaternion.multiply($o),this},rotateOnWorldAxis:function(t,e){return $o.setFromAxisAngle(t,e),this.quaternion.premultiply($o),this},rotateX:function(t){return this.rotateOnAxis(Js,t)},rotateY:function(t){return this.rotateOnAxis(Dh,t)},rotateZ:function(t){return this.rotateOnAxis(ao,t)},translateOnAxis:function(t,e){return Mp.copy(t).applyQuaternion(this.quaternion),this.position.add(Mp.multiplyScalar(e)),this},translateX:function(t){return this.translateOnAxis(Js,t)},translateY:function(t){return this.translateOnAxis(Dh,t)},translateZ:function(t){return this.translateOnAxis(ao,t)},localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(t){return t.applyMatrix4(ei.getInverse(this.matrixWorld))},lookAt:function(t,e,n){t.isVector3?Yi.copy(t):Yi.set(t,e,n);var r=this.parent;this.updateWorldMatrix(!0,!1),gr.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ei.lookAt(gr,Yi,this.up):ei.lookAt(Yi,gr,this.up),this.quaternion.setFromRotationMatrix(ei),r&&(ei.extractRotation(r.matrixWorld),$o.setFromRotationMatrix(ei),this.quaternion.premultiply($o.inverse()))},add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.parent!==null&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Ep)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}var n=this.children.indexOf(t);return n!==-1&&(t.parent=null,this.children.splice(n,1),t.dispatchEvent(Tp)),this},attach:function(t){return this.updateWorldMatrix(!0,!1),ei.getInverse(this.matrixWorld),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),ei.multiply(t.parent.matrixWorld)),t.applyMatrix4(ei),t.updateWorldMatrix(!1,!1),this.add(t),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n],o=i.getObjectByProperty(t,e);if(o!==void 0)return o}},getWorldPosition:function(t){return t===void 0&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new D),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(t){return t===void 0&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),t=new Gn),this.updateMatrixWorld(!0),this.matrixWorld.decompose(gr,t,Rr),t},getWorldScale:function(t){return t===void 0&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),t=new D),this.updateMatrixWorld(!0),this.matrixWorld.decompose(gr,Ji,t),t},getWorldDirection:function(t){t===void 0&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new D),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].traverse(t)},traverseVisible:function(t){if(this.visible!==!1){t(this);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;e!==null&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){var n=this.parent;if(t===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),e===!0)for(var r=this.children,i=0,o=r.length;i<o;i++)r[i].updateWorldMatrix(!1,!0)},toJSON:function(t){var e=t===void 0||typeof t=="string",n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON());function i(A,T){return A[T.uuid]===void 0&&(A[T.uuid]=T.toJSON(t)),T.uuid}if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(t.geometries,this.geometry);var o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){var l=o.shapes;if(Array.isArray(l))for(var u=0,c=l.length;u<c;u++){var f=l[u];i(t.shapes,f)}else i(t.shapes,l)}}if(this.material!==void 0)if(Array.isArray(this.material)){for(var d=[],v=0,m=this.material.length;v<m;v++)d.push(i(t.materials,this.material[v]));r.material=d}else r.material=i(t.materials,this.material);if(this.children.length>0){r.children=[];for(var g=0;g<this.children.length;g++)r.children.push(this.children[g].toJSON(t).object)}if(e){var w=R(t.geometries),_=R(t.materials),x=R(t.textures),y=R(t.images),E=R(t.shapes);w.length>0&&(n.geometries=w),_.length>0&&(n.materials=_),x.length>0&&(n.textures=x),y.length>0&&(n.images=y),E.length>0&&(n.shapes=E)}return n.object=r,n;function R(A){var T=[];for(var C in A){var I=A[C];delete I.metadata,T.push(I)}return T}},clone:function(t){return new this.constructor().copy(this,t)},copy:function(t,e){if(e===void 0&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(var n=0;n<t.children.length;n++){var r=t.children[n];this.add(r.clone())}return this}});var Zn=new D,Ap=new D,Cp=new Jn,Ai=function(){function a(t,e){ye(this,a),Object.defineProperty(this,"isPlane",{value:!0}),this.normal=t!==void 0?t:new D(1,0,0),this.constant=e!==void 0?e:0}return Pe(a,[{key:"set",value:function(e,n){return this.normal.copy(e),this.constant=n,this}},{key:"setComponents",value:function(e,n,r,i){return this.normal.set(e,n,r),this.constant=i,this}},{key:"setFromNormalAndCoplanarPoint",value:function(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(e,n,r){var i=Zn.subVectors(r,n).cross(Ap.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"copy",value:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this}},{key:"normalize",value:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(e){return this.normal.dot(e)+this.constant}},{key:"distanceToSphere",value:function(e){return this.distanceToPoint(e.center)-e.radius}},{key:"projectPoint",value:function(e,n){return n===void 0&&(console.warn("THREE.Plane: .projectPoint() target is now required"),n=new D),n.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}},{key:"intersectLine",value:function(e,n){n===void 0&&(console.warn("THREE.Plane: .intersectLine() target is now required"),n=new D);var r=e.delta(Zn),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):void 0;var o=-(e.start.dot(this.normal)+this.constant)/i;if(!(o<0||o>1))return n.copy(r).multiplyScalar(o).add(e.start)}},{key:"intersectsLine",value:function(e){var n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}},{key:"intersectsBox",value:function(e){return e.intersectsPlane(this)}},{key:"intersectsSphere",value:function(e){return e.intersectsPlane(this)}},{key:"coplanarPoint",value:function(e){return e===void 0&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new D),e.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(e,n){var r=n||Cp.getNormalMatrix(e),i=this.coplanarPoint(Zn).applyMatrix4(e),o=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(o),this}},{key:"translate",value:function(e){return this.constant-=e.dot(this.normal),this}},{key:"equals",value:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}]),a}(),yr=new D,ti=new D,Fh=new D,Zi=new D,jo=new D,oo=new D,Lp=new D,Bh=new D,$r=new D,bu=new D,ni=function(){function a(t,e,n){ye(this,a),this.a=t!==void 0?t:new D,this.b=e!==void 0?e:new D,this.c=n!==void 0?n:new D}return Pe(a,[{key:"set",value:function(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}},{key:"setFromPointsAndIndices",value:function(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"copy",value:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}},{key:"getArea",value:function(){return yr.subVectors(this.c,this.b),ti.subVectors(this.a,this.b),yr.cross(ti).length()*.5}},{key:"getMidpoint",value:function(e){return e===void 0&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new D),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(e){return a.getNormal(this.a,this.b,this.c,e)}},{key:"getPlane",value:function(e){return e===void 0&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new Ai),e.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(e,n){return a.getBarycoord(e,this.a,this.b,this.c,n)}},{key:"getUV",value:function(e,n,r,i,o){return a.getUV(e,this.a,this.b,this.c,n,r,i,o)}},{key:"containsPoint",value:function(e){return a.containsPoint(e,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(e){return a.isFrontFacing(this.a,this.b,this.c,e)}},{key:"intersectsBox",value:function(e){return e.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(e,n){n===void 0&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),n=new D);var r=this.a,i=this.b,o=this.c,l,u;jo.subVectors(i,r),oo.subVectors(o,r),Bh.subVectors(e,r);var c=jo.dot(Bh),f=oo.dot(Bh);if(c<=0&&f<=0)return n.copy(r);$r.subVectors(e,i);var d=jo.dot($r),v=oo.dot($r);if(d>=0&&v<=d)return n.copy(i);var m=c*v-d*f;if(m<=0&&c>=0&&d<=0)return l=c/(c-d),n.copy(r).addScaledVector(jo,l);bu.subVectors(e,o);var g=jo.dot(bu),w=oo.dot(bu);if(w>=0&&g<=w)return n.copy(o);var _=g*f-c*w;if(_<=0&&f>=0&&w<=0)return u=f/(f-w),n.copy(r).addScaledVector(oo,u);var x=d*w-g*v;if(x<=0&&v-d>=0&&g-w>=0)return Lp.subVectors(o,i),u=(v-d)/(v-d+(g-w)),n.copy(i).addScaledVector(Lp,u);var y=1/(x+_+m);return l=_*y,u=m*y,n.copy(r).addScaledVector(jo,l).addScaledVector(oo,u)}},{key:"equals",value:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}],[{key:"getNormal",value:function(e,n,r,i){i===void 0&&(console.warn("THREE.Triangle: .getNormal() target is now required"),i=new D),i.subVectors(r,n),yr.subVectors(e,n),i.cross(yr);var o=i.lengthSq();return o>0?i.multiplyScalar(1/Math.sqrt(o)):i.set(0,0,0)}},{key:"getBarycoord",value:function(e,n,r,i,o){yr.subVectors(i,n),ti.subVectors(r,n),Fh.subVectors(e,n);var l=yr.dot(yr),u=yr.dot(ti),c=yr.dot(Fh),f=ti.dot(ti),d=ti.dot(Fh),v=l*f-u*u;if(o===void 0&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),o=new D),v===0)return o.set(-2,-1,-1);var m=1/v,g=(f*c-u*d)*m,w=(l*d-u*c)*m;return o.set(1-g-w,w,g)}},{key:"containsPoint",value:function(e,n,r,i){return this.getBarycoord(e,n,r,i,Zi),Zi.x>=0&&Zi.y>=0&&Zi.x+Zi.y<=1}},{key:"getUV",value:function(e,n,r,i,o,l,u,c){return this.getBarycoord(e,n,r,i,Zi),c.set(0,0),c.addScaledVector(o,Zi.x),c.addScaledVector(l,Zi.y),c.addScaledVector(u,Zi.z),c}},{key:"isFrontFacing",value:function(e,n,r,i){return yr.subVectors(r,n),ti.subVectors(e,n),yr.cross(ti).dot(i)<0}}]),a}(),xu={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},jr={h:0,s:0,l:0},_u={h:0,s:0,l:0};function Su(a,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?a+(t-a)*6*e:e<1/2?t:e<2/3?a+(t-a)*6*(2/3-e):a}function Mu(a){return a<.04045?a*.0773993808:Math.pow(a*.9478672986+.0521327014,2.4)}function Zs(a){return a<.0031308?a*12.92:1.055*Math.pow(a,.41666)-.055}var Ye=function(){function a(t,e,n){return ye(this,a),Object.defineProperty(this,"isColor",{value:!0}),e===void 0&&n===void 0?this.set(t):this.setRGB(t,e,n)}return Pe(a,[{key:"set",value:function(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}},{key:"setScalar",value:function(e){return this.r=e,this.g=e,this.b=e,this}},{key:"setHex",value:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,this}},{key:"setRGB",value:function(e,n,r){return this.r=e,this.g=n,this.b=r,this}},{key:"setHSL",value:function(e,n,r){if(e=lt.euclideanModulo(e,1),n=lt.clamp(n,0,1),r=lt.clamp(r,0,1),n===0)this.r=this.g=this.b=r;else{var i=r<=.5?r*(1+n):r+n-r*n,o=2*r-i;this.r=Su(o,i,e+1/3),this.g=Su(o,i,e),this.b=Su(o,i,e-1/3)}return this}},{key:"setStyle",value:function(e){function n(m){m!==void 0&&parseFloat(m)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var r;if(r=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var i,o=r[1],l=r[2];switch(o){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(l))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,n(i[5]),this;if(i=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(l))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,n(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(l)){var u=parseFloat(i[1])/360,c=parseInt(i[2],10)/100,f=parseInt(i[3],10)/100;return n(i[5]),this.setHSL(u,c,f)}break}}else if(r=/^\#([A-Fa-f0-9]+)$/.exec(e)){var d=r[1],v=d.length;if(v===3)return this.r=parseInt(d.charAt(0)+d.charAt(0),16)/255,this.g=parseInt(d.charAt(1)+d.charAt(1),16)/255,this.b=parseInt(d.charAt(2)+d.charAt(2),16)/255,this;if(v===6)return this.r=parseInt(d.charAt(0)+d.charAt(1),16)/255,this.g=parseInt(d.charAt(2)+d.charAt(3),16)/255,this.b=parseInt(d.charAt(4)+d.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}},{key:"setColorName",value:function(e){var n=xu[e];return n!==void 0?this.setHex(n):console.warn("THREE.Color: Unknown color "+e),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}},{key:"copyGammaToLinear",value:function(e,n){return n===void 0&&(n=2),this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this}},{key:"copyLinearToGamma",value:function(e,n){n===void 0&&(n=2);var r=n>0?1/n:1;return this.r=Math.pow(e.r,r),this.g=Math.pow(e.g,r),this.b=Math.pow(e.b,r),this}},{key:"convertGammaToLinear",value:function(e){return this.copyGammaToLinear(this,e),this}},{key:"convertLinearToGamma",value:function(e){return this.copyLinearToGamma(this,e),this}},{key:"copySRGBToLinear",value:function(e){return this.r=Mu(e.r),this.g=Mu(e.g),this.b=Mu(e.b),this}},{key:"copyLinearToSRGB",value:function(e){return this.r=Zs(e.r),this.g=Zs(e.g),this.b=Zs(e.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){return this.r*255<<16^this.g*255<<8^this.b*255<<0}},{key:"getHexString",value:function(){return("000000"+this.getHex().toString(16)).slice(-6)}},{key:"getHSL",value:function(e){e===void 0&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var n=this.r,r=this.g,i=this.b,o=Math.max(n,r,i),l=Math.min(n,r,i),u,c,f=(l+o)/2;if(l===o)u=0,c=0;else{var d=o-l;switch(c=f<=.5?d/(o+l):d/(2-o-l),o){case n:u=(r-i)/d+(r<i?6:0);break;case r:u=(i-n)/d+2;break;case i:u=(n-r)/d+4;break}u/=6}return e.h=u,e.s=c,e.l=f,e}},{key:"getStyle",value:function(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"}},{key:"offsetHSL",value:function(e,n,r){return this.getHSL(jr),jr.h+=e,jr.s+=n,jr.l+=r,this.setHSL(jr.h,jr.s,jr.l),this}},{key:"add",value:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}},{key:"addColors",value:function(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}},{key:"addScalar",value:function(e){return this.r+=e,this.g+=e,this.b+=e,this}},{key:"sub",value:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}},{key:"multiply",value:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}},{key:"multiplyScalar",value:function(e){return this.r*=e,this.g*=e,this.b*=e,this}},{key:"lerp",value:function(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}},{key:"lerpHSL",value:function(e,n){this.getHSL(jr),e.getHSL(_u);var r=lt.lerp(jr.h,_u.h,n),i=lt.lerp(jr.s,_u.s,n),o=lt.lerp(jr.l,_u.l,n);return this.setHSL(r,i,o),this}},{key:"equals",value:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}},{key:"fromArray",value:function(e,n){return n===void 0&&(n=0),this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}},{key:"toArray",value:function(e,n){return e===void 0&&(e=[]),n===void 0&&(n=0),e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}},{key:"fromBufferAttribute",value:function(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}},{key:"toJSON",value:function(){return this.getHex()}}]),a}();Ye.NAMES=xu,Ye.prototype.r=1,Ye.prototype.g=1,Ye.prototype.b=1;var Eu=function(){function a(t,e,n,r,i,o){ye(this,a),this.a=t,this.b=e,this.c=n,this.normal=r&&r.isVector3?r:new D,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new Ye,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=o!==void 0?o:0}return Pe(a,[{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"copy",value:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var n=0,r=e.vertexNormals.length;n<r;n++)this.vertexNormals[n]=e.vertexNormals[n].clone();for(var i=0,o=e.vertexColors.length;i<o;i++)this.vertexColors[i]=e.vertexColors[i].clone();return this}}]),a}(),cg=0;function ut(){Object.defineProperty(this,"id",{value:cg++}),this.uuid=lt.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=Lo,this.side=Ur,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=Ql,this.blendDst=hh,this.blendEquation=ma,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=tu,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=gp,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=fu,this.stencilZFail=fu,this.stencilZPass=fu,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}ut.prototype=Object.assign(Object.create(rr.prototype),{constructor:ut,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(t){if(t!==void 0)for(var e in t){var n=t[e];if(n===void 0){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}if(e==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===sh;continue}var r=this[e];if(r===void 0){console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.");continue}r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n}},toJSON:function(t){var e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,this.combine!==void 0&&(n.combine=this.combine),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),this.size!==void 0&&(n.size=this.size),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Lo&&(n.blending=this.blending),this.flatShading===!0&&(n.flatShading=this.flatShading),this.side!==Ur&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(n.morphTargets=!0),this.morphNormals===!0&&(n.morphNormals=!0),this.skinning===!0&&(n.skinning=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(n.userData=this.userData);function r(l){var u=[];for(var c in l){var f=l[c];delete f.metadata,u.push(f)}return u}if(e){var i=r(t.textures),o=r(t.images);i.length>0&&(n.textures=i),o.length>0&&(n.images=o)}return n},clone:function(){return new this.constructor().copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;var e=t.clippingPlanes,n=null;if(e!==null){var r=e.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=e[i].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(ut.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}});function wr(a){ut.call(this),this.type="MeshBasicMaterial",this.color=new Ye(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Wa,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(a)}wr.prototype=Object.create(ut.prototype),wr.prototype.constructor=wr,wr.prototype.isMeshBasicMaterial=!0,wr.prototype.copy=function(a){return ut.prototype.copy.call(this,a),this.color.copy(a.color),this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this};var tn=new D,Tu=new xe;function at(a,t,e){if(Array.isArray(a))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=a,this.itemSize=t,this.count=a!==void 0?a.length/t:0,this.normalized=e===!0,this.usage=Ws,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(at.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}}),Object.assign(at.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[t+r]=e.array[n+r];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];o===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new Ye),e[n++]=o.r,e[n++]=o.g,e[n++]=o.b}return this},copyVector2sArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new xe),e[n++]=o.x,e[n++]=o.y}return this},copyVector3sArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new D),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z}return this},copyVector4sArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new Qt),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z,e[n++]=o.w}return this},applyMatrix3:function(t){if(this.itemSize===2)for(var e=0,n=this.count;e<n;e++)Tu.fromBufferAttribute(this,e),Tu.applyMatrix3(t),this.setXY(e,Tu.x,Tu.y);else if(this.itemSize===3)for(var r=0,i=this.count;r<i;r++)tn.fromBufferAttribute(this,r),tn.applyMatrix3(t),this.setXYZ(r,tn.x,tn.y,tn.z);return this},applyMatrix4:function(t){for(var e=0,n=this.count;e<n;e++)tn.x=this.getX(e),tn.y=this.getY(e),tn.z=this.getZ(e),tn.applyMatrix4(t),this.setXYZ(e,tn.x,tn.y,tn.z);return this},applyNormalMatrix:function(t){for(var e=0,n=this.count;e<n;e++)tn.x=this.getX(e),tn.y=this.getY(e),tn.z=this.getZ(e),tn.applyNormalMatrix(t),this.setXYZ(e,tn.x,tn.y,tn.z);return this},transformDirection:function(t){for(var e=0,n=this.count;e<n;e++)tn.x=this.getX(e),tn.y=this.getY(e),tn.z=this.getZ(e),tn.transformDirection(t),this.setXYZ(e,tn.x,tn.y,tn.z);return this},set:function(t,e){return e===void 0&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this},setXYZW:function(t,e,n,r,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=i,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}});function Uh(a,t,e){at.call(this,new Int8Array(a),t,e)}Uh.prototype=Object.create(at.prototype),Uh.prototype.constructor=Uh;function Au(a,t,e){at.call(this,new Uint8Array(a),t,e)}Au.prototype=Object.create(at.prototype),Au.prototype.constructor=Au;function bn(a,t,e){at.call(this,new Uint8ClampedArray(a),t,e)}bn.prototype=Object.create(at.prototype),bn.prototype.constructor=bn;function Ks(a,t,e){at.call(this,new Int16Array(a),t,e)}Ks.prototype=Object.create(at.prototype),Ks.prototype.constructor=Ks;function qo(a,t,e){at.call(this,new Uint16Array(a),t,e)}qo.prototype=Object.create(at.prototype),qo.prototype.constructor=qo;function Xo(a,t,e){at.call(this,new Int32Array(a),t,e)}Xo.prototype=Object.create(at.prototype),Xo.prototype.constructor=Xo;function Ci(a,t,e){at.call(this,new Uint32Array(a),t,e)}Ci.prototype=Object.create(at.prototype),Ci.prototype.constructor=Ci;function Ve(a,t,e){at.call(this,new Float32Array(a),t,e)}Ve.prototype=Object.create(at.prototype),Ve.prototype.constructor=Ve;function Yo(a,t,e){at.call(this,new Float64Array(a),t,e)}Yo.prototype=Object.create(at.prototype),Yo.prototype.constructor=Yo;var Cu=function(){function a(){ye(this,a),this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}return Pe(a,[{key:"computeGroups",value:function(e){var n=[],r,i,o=void 0,l=e.faces;for(i=0;i<l.length;i++){var u=l[i];u.materialIndex!==o&&(o=u.materialIndex,r!==void 0&&(r.count=i*3-r.start,n.push(r)),r={start:i*3,materialIndex:o})}r!==void 0&&(r.count=i*3-r.start,n.push(r)),this.groups=n}},{key:"fromGeometry",value:function(e){var n=e.faces,r=e.vertices,i=e.faceVertexUvs,o=i[0]&&i[0].length>0,l=i[1]&&i[1].length>0,u=e.morphTargets,c=u.length,f;if(c>0){f=[];for(var d=0;d<c;d++)f[d]={name:u[d].name,data:[]};this.morphTargets.position=f}var v=e.morphNormals,m=v.length,g;if(m>0){g=[];for(var w=0;w<m;w++)g[w]={name:v[w].name,data:[]};this.morphTargets.normal=g}var _=e.skinIndices,x=e.skinWeights,y=_.length===r.length,E=x.length===r.length;r.length>0&&n.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(var R=0;R<n.length;R++){var A=n[R];this.vertices.push(r[A.a],r[A.b],r[A.c]);var T=A.vertexNormals;if(T.length===3)this.normals.push(T[0],T[1],T[2]);else{var C=A.normal;this.normals.push(C,C,C)}var I=A.vertexColors;if(I.length===3)this.colors.push(I[0],I[1],I[2]);else{var j=A.color;this.colors.push(j,j,j)}if(o===!0){var U=i[0][R];U!==void 0?this.uvs.push(U[0],U[1],U[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",R),this.uvs.push(new xe,new xe,new xe))}if(l===!0){var B=i[1][R];B!==void 0?this.uvs2.push(B[0],B[1],B[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",R),this.uvs2.push(new xe,new xe,new xe))}for(var Z=0;Z<c;Z++){var Q=u[Z].vertices;f[Z].data.push(Q[A.a],Q[A.b],Q[A.c])}for(var J=0;J<m;J++){var q=v[J].vertexNormals[R];g[J].data.push(q.a,q.b,q.c)}y&&this.skinIndices.push(_[A.a],_[A.b],_[A.c]),E&&this.skinWeights.push(x[A.a],x[A.b],x[A.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this}}]),a}();function Rp(a){if(a.length===0)return-1/0;for(var t=a[0],e=1,n=a.length;e<n;++e)a[e]>t&&(t=a[e]);return t}var hg=1,Li=new ht,Gh=new Qe,so=new D,Hn=new Vr,Ki=new Vr,Nn=new D;function dt(){Object.defineProperty(this,"id",{value:hg+=2}),this.uuid=lt.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}dt.prototype=Object.assign(Object.create(rr.prototype),{constructor:dt,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(Rp(t)>65535?Ci:qo)(t,1):this.index=t},getAttribute:function(t){return this.attributes[t]},setAttribute:function(t,e){return this.attributes[t]=e,this},deleteAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,n){this.groups.push({start:t,count:e,materialIndex:n!==void 0?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix4:function(t){var e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);var n=this.attributes.normal;if(n!==void 0){var r=new Jn().getNormalMatrix(t);n.applyNormalMatrix(r),n.needsUpdate=!0}var i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(t),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},rotateX:function(t){return Li.makeRotationX(t),this.applyMatrix4(Li),this},rotateY:function(t){return Li.makeRotationY(t),this.applyMatrix4(Li),this},rotateZ:function(t){return Li.makeRotationZ(t),this.applyMatrix4(Li),this},translate:function(t,e,n){return Li.makeTranslation(t,e,n),this.applyMatrix4(Li),this},scale:function(t,e,n){return Li.makeScale(t,e,n),this.applyMatrix4(Li),this},lookAt:function(t){return Gh.lookAt(t),Gh.updateMatrix(),this.applyMatrix4(Gh.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(so).negate(),this.translate(so.x,so.y,so.z),this},setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){var n=new Ve(e.vertices.length*3,3),r=new Ve(e.colors.length*3,3);if(this.setAttribute("position",n.copyVector3sArray(e.vertices)),this.setAttribute("color",r.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var i=new Ve(e.lineDistances.length,1);this.setAttribute("lineDistance",i.copyArray(e.lineDistances))}e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];e.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new Ve(e,3)),this},updateFromObject:function(t){var e=t.geometry;if(t.isMesh){var n=e.__directGeometry;if(e.elementsNeedUpdate===!0&&(n=void 0,e.elementsNeedUpdate=!1),n===void 0)return this.fromGeometry(e);n.verticesNeedUpdate=e.verticesNeedUpdate,n.normalsNeedUpdate=e.normalsNeedUpdate,n.colorsNeedUpdate=e.colorsNeedUpdate,n.uvsNeedUpdate=e.uvsNeedUpdate,n.groupsNeedUpdate=e.groupsNeedUpdate,e.verticesNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.groupsNeedUpdate=!1,e=n}if(e.verticesNeedUpdate===!0){var r=this.attributes.position;r!==void 0&&(r.copyVector3sArray(e.vertices),r.needsUpdate=!0),e.verticesNeedUpdate=!1}if(e.normalsNeedUpdate===!0){var i=this.attributes.normal;i!==void 0&&(i.copyVector3sArray(e.normals),i.needsUpdate=!0),e.normalsNeedUpdate=!1}if(e.colorsNeedUpdate===!0){var o=this.attributes.color;o!==void 0&&(o.copyColorsArray(e.colors),o.needsUpdate=!0),e.colorsNeedUpdate=!1}if(e.uvsNeedUpdate){var l=this.attributes.uv;l!==void 0&&(l.copyVector2sArray(e.uvs),l.needsUpdate=!0),e.uvsNeedUpdate=!1}if(e.lineDistancesNeedUpdate){var u=this.attributes.lineDistance;u!==void 0&&(u.copyArray(e.lineDistances),u.needsUpdate=!0),e.lineDistancesNeedUpdate=!1}return e.groupsNeedUpdate&&(e.computeGroups(t.geometry),this.groups=e.groups,e.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=new Cu().fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(t.vertices.length*3);if(this.setAttribute("position",new at(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){var n=new Float32Array(t.normals.length*3);this.setAttribute("normal",new at(n,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var r=new Float32Array(t.colors.length*3);this.setAttribute("color",new at(r,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var i=new Float32Array(t.uvs.length*2);this.setAttribute("uv",new at(i,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var o=new Float32Array(t.uvs2.length*2);this.setAttribute("uv2",new at(o,2).copyVector2sArray(t.uvs2))}this.groups=t.groups;for(var l in t.morphTargets){for(var u=[],c=t.morphTargets[l],f=0,d=c.length;f<d;f++){var v=c[f],m=new Ve(v.data.length*3,3);m.name=v.name,u.push(m.copyVector3sArray(v.data))}this.morphAttributes[l]=u}if(t.skinIndices.length>0){var g=new Ve(t.skinIndices.length*4,4);this.setAttribute("skinIndex",g.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var w=new Ve(t.skinWeights.length*4,4);this.setAttribute("skinWeight",w.copyVector4sArray(t.skinWeights))}return t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Vr);var t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new D(-1/0,-1/0,-1/0),new D(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(var n=0,r=e.length;n<r;n++){var i=e[n];Hn.setFromBufferAttribute(i),this.morphTargetsRelative?(Nn.addVectors(this.boundingBox.min,Hn.min),this.boundingBox.expandByPoint(Nn),Nn.addVectors(this.boundingBox.max,Hn.max),this.boundingBox.expandByPoint(Nn)):(this.boundingBox.expandByPoint(Hn.min),this.boundingBox.expandByPoint(Hn.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Ei);var t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new D,1/0);return}if(t){var n=this.boundingSphere.center;if(Hn.setFromBufferAttribute(t),e)for(var r=0,i=e.length;r<i;r++){var o=e[r];Ki.setFromBufferAttribute(o),this.morphTargetsRelative?(Nn.addVectors(Hn.min,Ki.min),Hn.expandByPoint(Nn),Nn.addVectors(Hn.max,Ki.max),Hn.expandByPoint(Nn)):(Hn.expandByPoint(Ki.min),Hn.expandByPoint(Ki.max))}Hn.getCenter(n);for(var l=0,u=0,c=t.count;u<c;u++)Nn.fromBufferAttribute(t,u),l=Math.max(l,n.distanceToSquared(Nn));if(e)for(var f=0,d=e.length;f<d;f++)for(var v=e[f],m=this.morphTargetsRelative,g=0,w=v.count;g<w;g++)Nn.fromBufferAttribute(v,g),m&&(so.fromBufferAttribute(t,g),Nn.add(so)),l=Math.max(l,n.distanceToSquared(Nn));this.boundingSphere.radius=Math.sqrt(l),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.getAttribute("position");if(e!==void 0){var n=this.getAttribute("normal");if(n===void 0)n=new at(new Float32Array(e.count*3),3),this.setAttribute("normal",n);else for(var r=0,i=n.count;r<i;r++)n.setXYZ(r,0,0,0);var o=new D,l=new D,u=new D,c=new D,f=new D,d=new D,v=new D,m=new D;if(t)for(var g=0,w=t.count;g<w;g+=3){var _=t.getX(g+0),x=t.getX(g+1),y=t.getX(g+2);o.fromBufferAttribute(e,_),l.fromBufferAttribute(e,x),u.fromBufferAttribute(e,y),v.subVectors(u,l),m.subVectors(o,l),v.cross(m),c.fromBufferAttribute(n,_),f.fromBufferAttribute(n,x),d.fromBufferAttribute(n,y),c.add(v),f.add(v),d.add(v),n.setXYZ(_,c.x,c.y,c.z),n.setXYZ(x,f.x,f.y,f.z),n.setXYZ(y,d.x,d.y,d.z)}else for(var E=0,R=e.count;E<R;E+=3)o.fromBufferAttribute(e,E+0),l.fromBufferAttribute(e,E+1),u.fromBufferAttribute(e,E+2),v.subVectors(u,l),m.subVectors(o,l),v.cross(m),n.setXYZ(E+0,v.x,v.y,v.z),n.setXYZ(E+1,v.x,v.y,v.z),n.setXYZ(E+2,v.x,v.y,v.z);this.normalizeNormals(),n.needsUpdate=!0}},merge:function(t,e){if(!(t&&t.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);return}e===void 0&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(t.attributes[r]!==void 0)for(var i=n[r],o=i.array,l=t.attributes[r],u=l.array,c=l.itemSize*e,f=Math.min(u.length,o.length-c),d=0,v=c;d<f;d++,v++)o[v]=u[d];return this},normalizeNormals:function(){for(var t=this.attributes.normal,e=0,n=t.count;e<n;e++)Nn.fromBufferAttribute(t,e),Nn.normalize(),t.setXYZ(e,Nn.x,Nn.y,Nn.z)},toNonIndexed:function(){function t(R,A){for(var T=R.array,C=R.itemSize,I=R.normalized,j=new T.constructor(A.length*C),U=0,B=0,Z=0,Q=A.length;Z<Q;Z++){U=A[Z]*C;for(var J=0;J<C;J++)j[B++]=T[U++]}return new at(j,C,I)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new dt,n=this.index.array,r=this.attributes;for(var i in r){var o=r[i],l=t(o,n);e.setAttribute(i,l)}var u=this.morphAttributes;for(var c in u){for(var f=[],d=u[c],v=0,m=d.length;v<m;v++){var g=d[v],w=t(g,n);f.push(w)}e.morphAttributes[c]=f}e.morphTargetsRelative=this.morphTargetsRelative;for(var _=this.groups,x=0,y=_.length;x<y;x++){var E=_[x];e.addGroup(E.start,E.count,E.materialIndex)}return e},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){var e=this.parameters;for(var n in e)e[n]!==void 0&&(t[n]=e[n]);return t}t.data={attributes:{}};var r=this.index;r!==null&&(t.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var i=this.attributes;for(var o in i){var l=i[o],u=l.toJSON(t.data);l.name!==""&&(u.name=l.name),t.data.attributes[o]=u}var c={},f=!1;for(var d in this.morphAttributes){for(var v=this.morphAttributes[d],m=[],g=0,w=v.length;g<w;g++){var _=v[g],x=_.toJSON(t.data);_.name!==""&&(x.name=_.name),m.push(x)}m.length>0&&(c[d]=m,f=!0)}f&&(t.data.morphAttributes=c,t.data.morphTargetsRelative=this.morphTargetsRelative);var y=this.groups;y.length>0&&(t.data.groups=JSON.parse(JSON.stringify(y)));var E=this.boundingSphere;return E!==null&&(t.data.boundingSphere={center:E.center.toArray(),radius:E.radius}),t},clone:function(){return new dt().copy(this)},copy:function(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var e={};this.name=t.name;var n=t.index;n!==null&&this.setIndex(n.clone(e));var r=t.attributes;for(var i in r){var o=r[i];this.setAttribute(i,o.clone(e))}var l=t.morphAttributes;for(var u in l){for(var c=[],f=l[u],d=0,v=f.length;d<v;d++)c.push(f[d].clone(e));this.morphAttributes[u]=c}this.morphTargetsRelative=t.morphTargetsRelative;for(var m=t.groups,g=0,w=m.length;g<w;g++){var _=m[g];this.addGroup(_.start,_.count,_.materialIndex)}var x=t.boundingBox;x!==null&&(this.boundingBox=x.clone());var y=t.boundingSphere;return y!==null&&(this.boundingSphere=y.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Lu=new ht,Pr=new ro,Ru=new Ei,Qi=new D,Ri=new D,ea=new D,Jo=new D,lo=new D,ta=new D,Qs=new D,na=new D,Zo=new D,ra=new xe,Ko=new xe,ia=new xe,ri=new D,Pu=new D;function St(a,t){Qe.call(this),this.type="Mesh",this.geometry=a!==void 0?a:new dt,this.material=t!==void 0?t:new wr,this.updateMorphTargets()}St.prototype=Object.assign(Object.create(Qe.prototype),{constructor:St,isMesh:!0,copy:function(t){return Qe.prototype.copy.call(this,t),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this},updateMorphTargets:function(){var t=this.geometry;if(t.isBufferGeometry){var e=t.morphAttributes,n=Object.keys(e);if(n.length>0){var r=e[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,o=r.length;i<o;i++){var l=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=i}}}}else{var u=t.morphTargets;u!==void 0&&u.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(t,e){var n=this.geometry,r=this.material,i=this.matrixWorld;if(r!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),Ru.copy(n.boundingSphere),Ru.applyMatrix4(i),t.ray.intersectsSphere(Ru)!==!1&&(Lu.getInverse(i),Pr.copy(t.ray).applyMatrix4(Lu),!(n.boundingBox!==null&&Pr.intersectsBox(n.boundingBox)===!1)))){var o;if(n.isBufferGeometry){var l=n.index,u=n.attributes.position,c=n.morphAttributes.position,f=n.morphTargetsRelative,d=n.attributes.uv,v=n.attributes.uv2,m=n.groups,g=n.drawRange;if(l!==null)if(Array.isArray(r))for(var w=0,_=m.length;w<_;w++)for(var x=m[w],y=r[x.materialIndex],E=Math.max(x.start,g.start),R=Math.min(x.start+x.count,g.start+g.count),A=E,T=R;A<T;A+=3){var C=l.getX(A),I=l.getX(A+1),j=l.getX(A+2);o=Ou(this,y,t,Pr,u,c,f,d,v,C,I,j),o&&(o.faceIndex=Math.floor(A/3),o.face.materialIndex=x.materialIndex,e.push(o))}else for(var U=Math.max(0,g.start),B=Math.min(l.count,g.start+g.count),Z=U,Q=B;Z<Q;Z+=3){var J=l.getX(Z),q=l.getX(Z+1),Y=l.getX(Z+2);o=Ou(this,r,t,Pr,u,c,f,d,v,J,q,Y),o&&(o.faceIndex=Math.floor(Z/3),e.push(o))}else if(u!==void 0)if(Array.isArray(r))for(var ee=0,le=m.length;ee<le;ee++)for(var ue=m[ee],he=r[ue.materialIndex],pe=Math.max(ue.start,g.start),de=Math.min(ue.start+ue.count,g.start+g.count),Oe=pe,H=de;Oe<H;Oe+=3){var L=Oe,G=Oe+1,z=Oe+2;o=Ou(this,he,t,Pr,u,c,f,d,v,L,G,z),o&&(o.faceIndex=Math.floor(Oe/3),o.face.materialIndex=ue.materialIndex,e.push(o))}else for(var M=Math.max(0,g.start),O=Math.min(u.count,g.start+g.count),N=M,W=O;N<W;N+=3){var ie=N,te=N+1,se=N+2;o=Ou(this,r,t,Pr,u,c,f,d,v,ie,te,se),o&&(o.faceIndex=Math.floor(N/3),e.push(o))}}else if(n.isGeometry){var ce=Array.isArray(r),be=n.vertices,Te=n.faces,Ee,F=n.faceVertexUvs[0];F.length>0&&(Ee=F);for(var V=0,Me=Te.length;V<Me;V++){var ge=Te[V],De=ce?r[ge.materialIndex]:r;if(De!==void 0){var re=be[ge.a],Fe=be[ge.b],Be=be[ge.c];if(o=el(this,De,t,Pr,re,Fe,Be,ri),o){if(Ee&&Ee[V]){var je=Ee[V];ra.copy(je[0]),Ko.copy(je[1]),ia.copy(je[2]),o.uv=ni.getUV(ri,re,Fe,Be,ra,Ko,ia,new xe)}o.face=ge,o.faceIndex=V,e.push(o)}}}}}}});function el(a,t,e,n,r,i,o,l){var u;if(t.side===Tn?u=n.intersectTriangle(o,i,r,!0,l):u=n.intersectTriangle(r,i,o,t.side!==wi,l),u===null)return null;Pu.copy(l),Pu.applyMatrix4(a.matrixWorld);var c=e.ray.origin.distanceTo(Pu);return c<e.near||c>e.far?null:{distance:c,point:Pu.clone(),object:a}}function Ou(a,t,e,n,r,i,o,l,u,c,f,d){Qi.fromBufferAttribute(r,c),Ri.fromBufferAttribute(r,f),ea.fromBufferAttribute(r,d);var v=a.morphTargetInfluences;if(t.morphTargets&&i&&v){Qs.set(0,0,0),na.set(0,0,0),Zo.set(0,0,0);for(var m=0,g=i.length;m<g;m++){var w=v[m],_=i[m];w!==0&&(Jo.fromBufferAttribute(_,c),lo.fromBufferAttribute(_,f),ta.fromBufferAttribute(_,d),o?(Qs.addScaledVector(Jo,w),na.addScaledVector(lo,w),Zo.addScaledVector(ta,w)):(Qs.addScaledVector(Jo.sub(Qi),w),na.addScaledVector(lo.sub(Ri),w),Zo.addScaledVector(ta.sub(ea),w)))}Qi.add(Qs),Ri.add(na),ea.add(Zo)}a.isSkinnedMesh&&(a.boneTransform(c,Qi),a.boneTransform(f,Ri),a.boneTransform(d,ea));var x=el(a,t,e,n,Qi,Ri,ea,ri);if(x){l&&(ra.fromBufferAttribute(l,c),Ko.fromBufferAttribute(l,f),ia.fromBufferAttribute(l,d),x.uv=ni.getUV(ri,Qi,Ri,ea,ra,Ko,ia,new xe)),u&&(ra.fromBufferAttribute(u,c),Ko.fromBufferAttribute(u,f),ia.fromBufferAttribute(u,d),x.uv2=ni.getUV(ri,Qi,Ri,ea,ra,Ko,ia,new xe));var y=new Eu(c,f,d);ni.getNormal(Qi,Ri,ea,y.normal),x.face=y}return x}var Hh=0,qr=new ht,Nu=new Qe,ku=new D;function Zt(){Object.defineProperty(this,"id",{value:Hh+=2}),this.uuid=lt.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}Zt.prototype=Object.assign(Object.create(rr.prototype),{constructor:Zt,isGeometry:!0,applyMatrix4:function(t){for(var e=new Jn().getNormalMatrix(t),n=0,r=this.vertices.length;n<r;n++){var i=this.vertices[n];i.applyMatrix4(t)}for(var o=0,l=this.faces.length;o<l;o++){var u=this.faces[o];u.normal.applyMatrix3(e).normalize();for(var c=0,f=u.vertexNormals.length;c<f;c++)u.vertexNormals[c].applyMatrix3(e).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(t){return qr.makeRotationX(t),this.applyMatrix4(qr),this},rotateY:function(t){return qr.makeRotationY(t),this.applyMatrix4(qr),this},rotateZ:function(t){return qr.makeRotationZ(t),this.applyMatrix4(qr),this},translate:function(t,e,n){return qr.makeTranslation(t,e,n),this.applyMatrix4(qr),this},scale:function(t,e,n){return qr.makeScale(t,e,n),this.applyMatrix4(qr),this},lookAt:function(t){return Nu.lookAt(t),Nu.updateMatrix(),this.applyMatrix4(Nu.matrix),this},fromBufferGeometry:function(t){var e=this,n=t.index!==null?t.index:void 0,r=t.attributes;if(r.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var i=r.position,o=r.normal,l=r.color,u=r.uv,c=r.uv2;c!==void 0&&(this.faceVertexUvs[1]=[]);for(var f=0;f<i.count;f++)e.vertices.push(new D().fromBufferAttribute(i,f)),l!==void 0&&e.colors.push(new Ye().fromBufferAttribute(l,f));function d(A,T,C,I){var j=l===void 0?[]:[e.colors[A].clone(),e.colors[T].clone(),e.colors[C].clone()],U=o===void 0?[]:[new D().fromBufferAttribute(o,A),new D().fromBufferAttribute(o,T),new D().fromBufferAttribute(o,C)],B=new Eu(A,T,C,U,j,I);e.faces.push(B),u!==void 0&&e.faceVertexUvs[0].push([new xe().fromBufferAttribute(u,A),new xe().fromBufferAttribute(u,T),new xe().fromBufferAttribute(u,C)]),c!==void 0&&e.faceVertexUvs[1].push([new xe().fromBufferAttribute(c,A),new xe().fromBufferAttribute(c,T),new xe().fromBufferAttribute(c,C)])}var v=t.groups;if(v.length>0)for(var m=0;m<v.length;m++)for(var g=v[m],w=g.start,_=g.count,x=w,y=w+_;x<y;x+=3)n!==void 0?d(n.getX(x),n.getX(x+1),n.getX(x+2),g.materialIndex):d(x,x+1,x+2,g.materialIndex);else if(n!==void 0)for(var E=0;E<n.count;E+=3)d(n.getX(E),n.getX(E+1),n.getX(E+2));else for(var R=0;R<i.count;R+=3)d(R,R+1,R+2);return this.computeFaceNormals(),t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(ku).negate(),this.translate(ku.x,ku.y,ku.z),this},normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,n=e===0?1:1/e,r=new ht;return r.set(n,0,0,-n*t.x,0,n,0,-n*t.y,0,0,n,-n*t.z,0,0,0,1),this.applyMatrix4(r),this},computeFaceNormals:function(){for(var t=new D,e=new D,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],o=this.vertices[i.a],l=this.vertices[i.b],u=this.vertices[i.c];t.subVectors(u,l),e.subVectors(o,l),t.cross(e),t.normalize(),i.normal.copy(t)}},computeVertexNormals:function(t){t===void 0&&(t=!0);for(var e=new Array(this.vertices.length),n=0,r=this.vertices.length;n<r;n++)e[n]=new D;if(t)for(var i=new D,o=new D,l=0,u=this.faces.length;l<u;l++){var c=this.faces[l],f=this.vertices[c.a],d=this.vertices[c.b],v=this.vertices[c.c];i.subVectors(v,d),o.subVectors(f,d),i.cross(o),e[c.a].add(i),e[c.b].add(i),e[c.c].add(i)}else{this.computeFaceNormals();for(var m=0,g=this.faces.length;m<g;m++){var w=this.faces[m];e[w.a].add(w.normal),e[w.b].add(w.normal),e[w.c].add(w.normal)}}for(var _=0,x=this.vertices.length;_<x;_++)e[_].normalize();for(var y=0,E=this.faces.length;y<E;y++){var R=this.faces[y],A=R.vertexNormals;A.length===3?(A[0].copy(e[R.a]),A[1].copy(e[R.b]),A[2].copy(e[R.c])):(A[0]=e[R.a].clone(),A[1]=e[R.b].clone(),A[2]=e[R.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){this.computeFaceNormals();for(var t=0,e=this.faces.length;t<e;t++){var n=this.faces[t],r=n.vertexNormals;r.length===3?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){for(var t=0,e=this.faces.length;t<e;t++){var n=this.faces[t];n.__originalFaceNormal?n.__originalFaceNormal.copy(n.normal):n.__originalFaceNormal=n.normal.clone(),n.__originalVertexNormals||(n.__originalVertexNormals=[]);for(var r=0,i=n.vertexNormals.length;r<i;r++)n.__originalVertexNormals[r]?n.__originalVertexNormals[r].copy(n.vertexNormals[r]):n.__originalVertexNormals[r]=n.vertexNormals[r].clone()}var o=new Zt;o.faces=this.faces;for(var l=0,u=this.morphTargets.length;l<u;l++){if(!this.morphNormals[l]){this.morphNormals[l]={},this.morphNormals[l].faceNormals=[],this.morphNormals[l].vertexNormals=[];for(var c=this.morphNormals[l].faceNormals,f=this.morphNormals[l].vertexNormals,d=0,v=this.faces.length;d<v;d++){var m=new D,g={a:new D,b:new D,c:new D};c.push(m),f.push(g)}}var w=this.morphNormals[l];o.vertices=this.morphTargets[l].vertices,o.computeFaceNormals(),o.computeVertexNormals();for(var _=0,x=this.faces.length;_<x;_++){var y=this.faces[_],E=w.faceNormals[_],R=w.vertexNormals[_];E.copy(y.normal),R.a.copy(y.vertexNormals[0]),R.b.copy(y.vertexNormals[1]),R.c.copy(y.vertexNormals[2])}}for(var A=0,T=this.faces.length;A<T;A++){var C=this.faces[A];C.normal=C.__originalFaceNormal,C.vertexNormals=C.__originalVertexNormals}},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Vr),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Ei),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,n){if(!(t&&t.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t);return}var r,i=this.vertices.length,o=this.vertices,l=t.vertices,u=this.faces,c=t.faces,f=this.colors,d=t.colors;n===void 0&&(n=0),e!==void 0&&(r=new Jn().getNormalMatrix(e));for(var v=0,m=l.length;v<m;v++){var g=l[v],w=g.clone();e!==void 0&&w.applyMatrix4(e),o.push(w)}for(var _=0,x=d.length;_<x;_++)f.push(d[_].clone());for(var y=0,E=c.length;y<E;y++){var R=c[y],A=void 0,T=void 0,C=R.vertexNormals,I=R.vertexColors,j=new Eu(R.a+i,R.b+i,R.c+i);j.normal.copy(R.normal),r!==void 0&&j.normal.applyMatrix3(r).normalize();for(var U=0,B=C.length;U<B;U++)A=C[U].clone(),r!==void 0&&A.applyMatrix3(r).normalize(),j.vertexNormals.push(A);j.color.copy(R.color);for(var Z=0,Q=I.length;Z<Q;Z++)T=I[Z],j.vertexColors.push(T.clone());j.materialIndex=R.materialIndex+n,u.push(j)}for(var J=0,q=t.faceVertexUvs.length;J<q;J++){var Y=t.faceVertexUvs[J];this.faceVertexUvs[J]===void 0&&(this.faceVertexUvs[J]=[]);for(var ee=0,le=Y.length;ee<le;ee++){for(var ue=Y[ee],he=[],pe=0,de=ue.length;pe<de;pe++)he.push(ue[pe].clone());this.faceVertexUvs[J].push(he)}}},mergeMesh:function(t){if(!(t&&t.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t);return}t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)},mergeVertices:function(){for(var t={},e=[],n=[],r=4,i=Math.pow(10,r),o=0,l=this.vertices.length;o<l;o++){var u=this.vertices[o],c=Math.round(u.x*i)+"_"+Math.round(u.y*i)+"_"+Math.round(u.z*i);t[c]===void 0?(t[c]=o,e.push(this.vertices[o]),n[o]=e.length-1):n[o]=n[t[c]]}for(var f=[],d=0,v=this.faces.length;d<v;d++){var m=this.faces[d];m.a=n[m.a],m.b=n[m.b],m.c=n[m.c];for(var g=[m.a,m.b,m.c],w=0;w<3;w++)if(g[w]===g[(w+1)%3]){f.push(d);break}}for(var _=f.length-1;_>=0;_--){var x=f[_];this.faces.splice(x,1);for(var y=0,E=this.faceVertexUvs.length;y<E;y++)this.faceVertexUvs[y].splice(x,1)}var R=this.vertices.length-e.length;return this.vertices=e,R},setFromPoints:function(t){this.vertices=[];for(var e=0,n=t.length;e<n;e++){var r=t[e];this.vertices.push(new D(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){for(var t=this.faces,e=t.length,n=0;n<e;n++)t[n]._id=n;function r(d,v){return d.materialIndex-v.materialIndex}t.sort(r);var i=this.faceVertexUvs[0],o=this.faceVertexUvs[1],l,u;i&&i.length===e&&(l=[]),o&&o.length===e&&(u=[]);for(var c=0;c<e;c++){var f=t[c]._id;l&&l.push(i[f]),u&&u.push(o[f])}l&&(this.faceVertexUvs[0]=l),u&&(this.faceVertexUvs[1]=u)},toJSON:function(){var t={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),this.parameters!==void 0){var e=this.parameters;for(var n in e)e[n]!==void 0&&(t[n]=e[n]);return t}for(var r=[],i=0;i<this.vertices.length;i++){var o=this.vertices[i];r.push(o.x,o.y,o.z)}for(var l=[],u=[],c={},f=[],d={},v=[],m={},g=0;g<this.faces.length;g++){var w=this.faces[g],_=!0,x=!1,y=this.faceVertexUvs[0][g]!==void 0,E=w.normal.length()>0,R=w.vertexNormals.length>0,A=w.color.r!==1||w.color.g!==1||w.color.b!==1,T=w.vertexColors.length>0,C=0;if(C=B(C,0,0),C=B(C,1,_),C=B(C,2,x),C=B(C,3,y),C=B(C,4,E),C=B(C,5,R),C=B(C,6,A),C=B(C,7,T),l.push(C),l.push(w.a,w.b,w.c),l.push(w.materialIndex),y){var I=this.faceVertexUvs[0][g];l.push(J(I[0]),J(I[1]),J(I[2]))}if(E&&l.push(Z(w.normal)),R){var j=w.vertexNormals;l.push(Z(j[0]),Z(j[1]),Z(j[2]))}if(A&&l.push(Q(w.color)),T){var U=w.vertexColors;l.push(Q(U[0]),Q(U[1]),Q(U[2]))}}function B(q,Y,ee){return ee?q|1<<Y:q&~(1<<Y)}function Z(q){var Y=q.x.toString()+q.y.toString()+q.z.toString();return c[Y]!==void 0||(c[Y]=u.length/3,u.push(q.x,q.y,q.z)),c[Y]}function Q(q){var Y=q.r.toString()+q.g.toString()+q.b.toString();return d[Y]!==void 0||(d[Y]=f.length,f.push(q.getHex())),d[Y]}function J(q){var Y=q.x.toString()+q.y.toString();return m[Y]!==void 0||(m[Y]=v.length/2,v.push(q.x,q.y)),m[Y]}return t.data={},t.data.vertices=r,t.data.normals=u,f.length>0&&(t.data.colors=f),v.length>0&&(t.data.uvs=[v]),t.data.faces=l,t},clone:function(){return new Zt().copy(this)},copy:function(t){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;for(var e=t.vertices,n=0,r=e.length;n<r;n++)this.vertices.push(e[n].clone());for(var i=t.colors,o=0,l=i.length;o<l;o++)this.colors.push(i[o].clone());for(var u=t.faces,c=0,f=u.length;c<f;c++)this.faces.push(u[c].clone());for(var d=0,v=t.faceVertexUvs.length;d<v;d++){var m=t.faceVertexUvs[d];this.faceVertexUvs[d]===void 0&&(this.faceVertexUvs[d]=[]);for(var g=0,w=m.length;g<w;g++){for(var _=m[g],x=[],y=0,E=_.length;y<E;y++){var R=_[y];x.push(R.clone())}this.faceVertexUvs[d].push(x)}}for(var A=t.morphTargets,T=0,C=A.length;T<C;T++){var I={};if(I.name=A[T].name,A[T].vertices!==void 0){I.vertices=[];for(var j=0,U=A[T].vertices.length;j<U;j++)I.vertices.push(A[T].vertices[j].clone())}if(A[T].normals!==void 0){I.normals=[];for(var B=0,Z=A[T].normals.length;B<Z;B++)I.normals.push(A[T].normals[B].clone())}this.morphTargets.push(I)}for(var Q=t.morphNormals,J=0,q=Q.length;J<q;J++){var Y={};if(Q[J].vertexNormals!==void 0){Y.vertexNormals=[];for(var ee=0,le=Q[J].vertexNormals.length;ee<le;ee++){var ue=Q[J].vertexNormals[ee],he={};he.a=ue.a.clone(),he.b=ue.b.clone(),he.c=ue.c.clone(),Y.vertexNormals.push(he)}}if(Q[J].faceNormals!==void 0){Y.faceNormals=[];for(var pe=0,de=Q[J].faceNormals.length;pe<de;pe++)Y.faceNormals.push(Q[J].faceNormals[pe].clone())}this.morphNormals.push(Y)}for(var Oe=t.skinWeights,H=0,L=Oe.length;H<L;H++)this.skinWeights.push(Oe[H].clone());for(var G=t.skinIndices,z=0,M=G.length;z<M;z++)this.skinIndices.push(G[z].clone());for(var O=t.lineDistances,N=0,W=O.length;N<W;N++)this.lineDistances.push(O[N]);var ie=t.boundingBox;ie!==null&&(this.boundingBox=ie.clone());var te=t.boundingSphere;return te!==null&&(this.boundingSphere=te.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var fg=function(a){ke(e,a);var t=Ie(e);function e(n,r,i,o,l,u){var c;return ye(this,e),c=t.call(this),c.type="BoxGeometry",c.parameters={width:n,height:r,depth:i,widthSegments:o,heightSegments:l,depthSegments:u},c.fromBufferGeometry(new Qo(n,r,i,o,l,u)),c.mergeVertices(),c}return e}(Zt),Qo=function(a){ke(e,a);var t=Ie(e);function e(){var n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1,c=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1;ye(this,e),n=t.call(this),n.type="BoxBufferGeometry",n.parameters={width:r,height:i,depth:o,widthSegments:l,heightSegments:u,depthSegments:c};var f=Tr(n);l=Math.floor(l),u=Math.floor(u),c=Math.floor(c);var d=[],v=[],m=[],g=[],w=0,_=0;x("z","y","x",-1,-1,o,i,r,c,u,0),x("z","y","x",1,-1,o,i,-r,c,u,1),x("x","z","y",1,1,r,o,i,l,c,2),x("x","z","y",1,-1,r,o,-i,l,c,3),x("x","y","z",1,-1,r,i,o,l,u,4),x("x","y","z",-1,-1,r,i,-o,l,u,5),n.setIndex(d),n.setAttribute("position",new Ve(v,3)),n.setAttribute("normal",new Ve(m,3)),n.setAttribute("uv",new Ve(g,2));function x(y,E,R,A,T,C,I,j,U,B,Z){for(var Q=C/U,J=I/B,q=C/2,Y=I/2,ee=j/2,le=U+1,ue=B+1,he=0,pe=0,de=new D,Oe=0;Oe<ue;Oe++)for(var H=Oe*J-Y,L=0;L<le;L++){var G=L*Q-q;de[y]=G*A,de[E]=H*T,de[R]=ee,v.push(de.x,de.y,de.z),de[y]=0,de[E]=0,de[R]=j>0?1:-1,m.push(de.x,de.y,de.z),g.push(L/U),g.push(1-Oe/B),he+=1}for(var z=0;z<B;z++)for(var M=0;M<U;M++){var O=w+M+le*z,N=w+M+le*(z+1),W=w+(M+1)+le*(z+1),ie=w+(M+1)+le*z;d.push(O,N,ie),d.push(N,W,ie),pe+=6}f.addGroup(_,pe,Z),_+=pe,w+=he}return n}return e}(dt);function es(a){var t={};for(var e in a){t[e]={};for(var n in a[e]){var r=a[e][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?t[e][n]=r.clone():Array.isArray(r)?t[e][n]=r.slice():t[e][n]=r}}return t}function Kn(a){for(var t={},e=0;e<a.length;e++){var n=es(a[e]);for(var r in n)t[r]=n[r]}return t}var zh={clone:es,merge:Kn},dg=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Pp=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;function fr(a){ut.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=dg,this.fragmentShader=Pp,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,a!==void 0&&(a.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(a))}fr.prototype=Object.create(ut.prototype),fr.prototype.constructor=fr,fr.prototype.isShaderMaterial=!0,fr.prototype.copy=function(a){return ut.prototype.copy.call(this,a),this.fragmentShader=a.fragmentShader,this.vertexShader=a.vertexShader,this.uniforms=es(a.uniforms),this.defines=Object.assign({},a.defines),this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.lights=a.lights,this.clipping=a.clipping,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this.extensions=Object.assign({},a.extensions),this.glslVersion=a.glslVersion,this},fr.prototype.toJSON=function(a){var t=ut.prototype.toJSON.call(this,a);t.glslVersion=this.glslVersion,t.uniforms={};for(var e in this.uniforms){var n=this.uniforms[e],r=n.value;r&&r.isTexture?t.uniforms[e]={type:"t",value:r.toJSON(a).uuid}:r&&r.isColor?t.uniforms[e]={type:"c",value:r.getHex()}:r&&r.isVector2?t.uniforms[e]={type:"v2",value:r.toArray()}:r&&r.isVector3?t.uniforms[e]={type:"v3",value:r.toArray()}:r&&r.isVector4?t.uniforms[e]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?t.uniforms[e]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?t.uniforms[e]={type:"m4",value:r.toArray()}:t.uniforms[e]={value:r}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var i={};for(var o in this.extensions)this.extensions[o]===!0&&(i[o]=!0);return Object.keys(i).length>0&&(t.extensions=i),t};function Pi(){Qe.call(this),this.type="Camera",this.matrixWorldInverse=new ht,this.projectionMatrix=new ht,this.projectionMatrixInverse=new ht}Pi.prototype=Object.assign(Object.create(Qe.prototype),{constructor:Pi,isCamera:!0,copy:function(t,e){return Qe.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){t===void 0&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new D),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){Qe.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(t,e){Qe.prototype.updateWorldMatrix.call(this,t,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return new this.constructor().copy(this)}});function fn(a,t,e,n){Pi.call(this),this.type="PerspectiveCamera",this.fov=a!==void 0?a:50,this.zoom=1,this.near=e!==void 0?e:.1,this.far=n!==void 0?n:2e3,this.focus=10,this.aspect=t!==void 0?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}fn.prototype=Object.assign(Object.create(Pi.prototype),{constructor:fn,isPerspectiveCamera:!0,copy:function(t,e){return Pi.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){var e=.5*this.getFilmHeight()/t;this.fov=lt.RAD2DEG*2*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(lt.DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/t},getEffectiveFOV:function(){return lt.RAD2DEG*2*Math.atan(Math.tan(lt.DEG2RAD*.5*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,n,r,i,o){this.aspect=t/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(lt.DEG2RAD*.5*this.fov)/this.zoom,n=2*e,r=this.aspect*n,i=-.5*r,o=this.view;if(this.view!==null&&this.view.enabled){var l=o.fullWidth,u=o.fullHeight;i+=o.offsetX*r/l,e-=o.offsetY*n/u,r*=o.width/l,n*=o.height/u}var c=this.filmOffset;c!==0&&(i+=t*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,e,e-n,t,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=Qe.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}});var ts=90,uo=1;function dr(a,t,e){if(Qe.call(this),this.type="CubeCamera",e.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=e;var n=new fn(ts,uo,a,t);n.layers=this.layers,n.up.set(0,-1,0),n.lookAt(new D(1,0,0)),this.add(n);var r=new fn(ts,uo,a,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new D(-1,0,0)),this.add(r);var i=new fn(ts,uo,a,t);i.layers=this.layers,i.up.set(0,0,1),i.lookAt(new D(0,1,0)),this.add(i);var o=new fn(ts,uo,a,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(new D(0,-1,0)),this.add(o);var l=new fn(ts,uo,a,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new D(0,0,1)),this.add(l);var u=new fn(ts,uo,a,t);u.layers=this.layers,u.up.set(0,-1,0),u.lookAt(new D(0,0,-1)),this.add(u),this.update=function(c,f){this.parent===null&&this.updateMatrixWorld();var d=c.xr.enabled,v=c.getRenderTarget();c.xr.enabled=!1;var m=e.texture.generateMipmaps;e.texture.generateMipmaps=!1,c.setRenderTarget(e,0),c.render(f,n),c.setRenderTarget(e,1),c.render(f,r),c.setRenderTarget(e,2),c.render(f,i),c.setRenderTarget(e,3),c.render(f,o),c.setRenderTarget(e,4),c.render(f,l),e.texture.generateMipmaps=m,c.setRenderTarget(e,5),c.render(f,u),c.setRenderTarget(v),c.xr.enabled=d},this.clear=function(c,f,d,v){for(var m=c.getRenderTarget(),g=0;g<6;g++)c.setRenderTarget(e,g),c.clear(f,d,v);c.setRenderTarget(m)}}dr.prototype=Object.create(Qe.prototype),dr.prototype.constructor=dr;function ii(a,t,e){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=e),ir.call(this,a,a,t),this.texture.isWebGLCubeRenderTargetTexture=!0}ii.prototype=Object.create(ir.prototype),ii.prototype.constructor=ii,ii.prototype.isWebGLCubeRenderTarget=!0,ii.prototype.fromEquirectangularTexture=function(a,t){this.texture.type=t.type,this.texture.format=Lr,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;var e={uniforms:{tEquirect:{value:null}},vertexShader:`

			varying vec3 vWorldDirection;

			vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

				return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

			}

			void main() {

				vWorldDirection = transformDirection( position, modelMatrix );

				#include <begin_vertex>
				#include <project_vertex>

			}
		`,fragmentShader:`

			uniform sampler2D tEquirect;

			varying vec3 vWorldDirection;

			#include <common>

			void main() {

				vec3 direction = normalize( vWorldDirection );

				vec2 sampleUV = equirectUv( direction );

				gl_FragColor = texture2D( tEquirect, sampleUV );

			}
		`},n=new Qo(5,5,5),r=new fr({name:"CubemapFromEquirect",uniforms:es(e.uniforms),vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,side:Tn,blending:Zr});r.uniforms.tEquirect.value=t;var i=new St(n,r),o=t.minFilter;t.minFilter===ga&&(t.minFilter=sn);var l=new dr(1,10,this);return l.update(a,i),t.minFilter=o,i.geometry.dispose(),i.material.dispose(),this};function ar(a,t,e,n,r,i,o,l,u,c,f,d){Jt.call(this,null,i,o,l,u,c,n,r,f,d),this.image={data:a||null,width:t||1,height:e||1},this.magFilter=u!==void 0?u:an,this.minFilter=c!==void 0?c:an,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}ar.prototype=Object.create(Jt.prototype),ar.prototype.constructor=ar,ar.prototype.isDataTexture=!0;var Ma=new Ei,tl=new D,Iu=function(){function a(t,e,n,r,i,o){ye(this,a),this.planes=[t!==void 0?t:new Ai,e!==void 0?e:new Ai,n!==void 0?n:new Ai,r!==void 0?r:new Ai,i!==void 0?i:new Ai,o!==void 0?o:new Ai]}return Pe(a,[{key:"set",value:function(e,n,r,i,o,l){var u=this.planes;return u[0].copy(e),u[1].copy(n),u[2].copy(r),u[3].copy(i),u[4].copy(o),u[5].copy(l),this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"copy",value:function(e){for(var n=this.planes,r=0;r<6;r++)n[r].copy(e.planes[r]);return this}},{key:"setFromProjectionMatrix",value:function(e){var n=this.planes,r=e.elements,i=r[0],o=r[1],l=r[2],u=r[3],c=r[4],f=r[5],d=r[6],v=r[7],m=r[8],g=r[9],w=r[10],_=r[11],x=r[12],y=r[13],E=r[14],R=r[15];return n[0].setComponents(u-i,v-c,_-m,R-x).normalize(),n[1].setComponents(u+i,v+c,_+m,R+x).normalize(),n[2].setComponents(u+o,v+f,_+g,R+y).normalize(),n[3].setComponents(u-o,v-f,_-g,R-y).normalize(),n[4].setComponents(u-l,v-d,_-w,R-E).normalize(),n[5].setComponents(u+l,v+d,_+w,R+E).normalize(),this}},{key:"intersectsObject",value:function(e){var n=e.geometry;return n.boundingSphere===null&&n.computeBoundingSphere(),Ma.copy(n.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Ma)}},{key:"intersectsSprite",value:function(e){return Ma.center.set(0,0,0),Ma.radius=.7071067811865476,Ma.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ma)}},{key:"intersectsSphere",value:function(e){for(var n=this.planes,r=e.center,i=-e.radius,o=0;o<6;o++){var l=n[o].distanceToPoint(r);if(l<i)return!1}return!0}},{key:"intersectsBox",value:function(e){for(var n=this.planes,r=0;r<6;r++){var i=n[r];if(tl.x=i.normal.x>0?e.max.x:e.min.x,tl.y=i.normal.y>0?e.max.y:e.min.y,tl.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(tl)<0)return!1}return!0}},{key:"containsPoint",value:function(e){for(var n=this.planes,r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}}]),a}();function Op(){var a=null,t=!1,e=null,n=null;function r(i,o){e(i,o),n=a.requestAnimationFrame(r)}return{start:function(){t!==!0&&e!==null&&(n=a.requestAnimationFrame(r),t=!0)},stop:function(){a.cancelAnimationFrame(n),t=!1},setAnimationLoop:function(o){e=o},setContext:function(o){a=o}}}function Np(a,t){var e=t.isWebGL2,n=new WeakMap;function r(c,f){var d=c.array,v=c.usage,m=a.createBuffer();a.bindBuffer(f,m),a.bufferData(f,d,v),c.onUploadCallback();var g=5126;return Ht(d,Float32Array)?g=5126:Ht(d,Float64Array)?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):Ht(d,Uint16Array)?g=5123:Ht(d,Int16Array)?g=5122:Ht(d,Uint32Array)?g=5125:Ht(d,Int32Array)?g=5124:Ht(d,Int8Array)?g=5120:Ht(d,Uint8Array)&&(g=5121),{buffer:m,type:g,bytesPerElement:d.BYTES_PER_ELEMENT,version:c.version}}function i(c,f,d){var v=f.array,m=f.updateRange;a.bindBuffer(d,c),m.count===-1?a.bufferSubData(d,0,v):(e?a.bufferSubData(d,m.offset*v.BYTES_PER_ELEMENT,v,m.offset,m.count):a.bufferSubData(d,m.offset*v.BYTES_PER_ELEMENT,v.subarray(m.offset,m.offset+m.count)),m.count=-1)}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),n.get(c)}function l(c){c.isInterleavedBufferAttribute&&(c=c.data);var f=n.get(c);f&&(a.deleteBuffer(f.buffer),n.delete(c))}function u(c,f){if(c.isGLBufferAttribute){var d=n.get(c);(!d||d.version<c.version)&&n.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);var v=n.get(c);v===void 0?n.set(c,r(c,f)):v.version<c.version&&(i(v.buffer,c,f),v.version=c.version)}return{get:o,remove:l,update:u}}var pg=function(a){ke(e,a);var t=Ie(e);function e(n,r,i,o){var l;return ye(this,e),l=t.call(this),l.type="PlaneGeometry",l.parameters={width:n,height:r,widthSegments:i,heightSegments:o},l.fromBufferGeometry(new Oi(n,r,i,o)),l.mergeVertices(),l}return e}(Zt),Oi=function(a){ke(e,a);var t=Ie(e);function e(n,r,i,o){var l;ye(this,e),l=t.call(this),l.type="PlaneBufferGeometry",l.parameters={width:n,height:r,widthSegments:i,heightSegments:o},n=n||1,r=r||1;for(var u=n/2,c=r/2,f=Math.floor(i)||1,d=Math.floor(o)||1,v=f+1,m=d+1,g=n/f,w=r/d,_=[],x=[],y=[],E=[],R=0;R<m;R++)for(var A=R*w-c,T=0;T<v;T++){var C=T*g-u;x.push(C,-A,0),y.push(0,0,1),E.push(T/f),E.push(1-R/d)}for(var I=0;I<d;I++)for(var j=0;j<f;j++){var U=j+v*I,B=j+v*(I+1),Z=j+1+v*(I+1),Q=j+1+v*I;_.push(U,B,Q),_.push(B,Z,Q)}return l.setIndex(_),l.setAttribute("position",new Ve(x,3)),l.setAttribute("normal",new Ve(y,3)),l.setAttribute("uv",new Ve(E,2)),l}return e}(dt),Du=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,nl=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Vh=`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif`,vg=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif`,mg=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,gg="vec3 transformed = vec3( position );",yg=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,wg=`vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	return vec2( -1.04, 1.04 ) * a004 + r.zw;
}
float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
#else
	if( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
	}
	return 1.0;
#endif
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {
	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );
	return ( 1.0 - specularColor ) * fresnel + specularColor;
}
vec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {
	float fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );
	vec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;
	return Fr * fresnel + F0;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + viewDir );
	float dotNL = saturate( dot( normal, incidentLight.direction ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
vec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	return specularColor * brdf.x + brdf.y;
}
void BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	vec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	vec3 FssEss = F * brdf.x + brdf.y;
	float Ess = brdf.x + brdf.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}
#if defined( USE_SHEEN )
float D_Charlie(float roughness, float NoH) {
	float invAlpha = 1.0 / roughness;
	float cos2h = NoH * NoH;
	float sin2h = max(1.0 - cos2h, 0.0078125);	return (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);
}
float V_Neubelt(float NoV, float NoL) {
	return saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));
}
vec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {
	vec3 N = geometry.normal;
	vec3 V = geometry.viewDir;
	vec3 H = normalize( V + L );
	float dotNH = saturate( dot( N, H ) );
	return specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );
}
#endif`,bg=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 );
		fDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,xg=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,Fu=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,ns=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Bu=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,_g=`#ifdef USE_COLOR
	diffuseColor.rgb *= vColor;
#endif`,kp=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,Ip=`#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,Sg=`#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor.xyz *= color.xyz;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,Dp=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,Wh=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_maxMipLevel 8.0
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_maxTileSize 256.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		float texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );
		vec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );
		vec2 f = fract( uv );
		uv += 0.5 - f;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		if ( mipInt < cubeUV_maxMipLevel ) {
			uv.y += 2.0 * cubeUV_maxTileSize;
		}
		uv.y += filterInt * 2.0 * cubeUV_minTileSize;
		uv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );
		uv *= texelSize;
		vec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x += texelSize;
		vec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.y += texelSize;
		vec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x -= texelSize;
		vec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		vec3 tm = mix( tl, tr, f.x );
		vec3 bm = mix( bl, br, f.x );
		return mix( tm, bm, f.y );
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Fp=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Bp=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Up=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,$h=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Uu=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Mg="gl_FragColor = linearToOutputTexel( gl_FragColor );",Eg=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value ) {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,Gp=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifndef ENVMAP_TYPE_CUBE_UV
		envColor = envMapTexelToLinear( envColor );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Tg=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Hp=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,zp=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Et=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Vp=`#ifdef USE_FOG
	fogDepth = - mvPosition.z;
#endif`,Ag=`#ifdef USE_FOG
	varying float fogDepth;
#endif`,rl=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Cg=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Wp=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,jh=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel= texture2D( lightMap, vUv2 );
	reflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
#endif`,qh=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,br=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
	#pragma unroll_loop_end
#endif`,Xh=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {
	vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif`,Yh=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float sigma = PI * roughness * roughness / ( 1.0 + roughness );
		float desiredMIPLevel = maxMIPLevelScalar + log2( sigma );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( -viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
		#else
			vec3 reflectVec = refract( -viewDir, normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif`,$p=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,jp=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,Jh=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Gu=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,s=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;
material.specularRoughness = min( material.specularRoughness, 1.0 );
#ifdef REFLECTIVITY
	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
#endif
#ifdef CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheen;
#endif`,h=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float specularRoughness;
	vec3 specularColor;
#ifdef CLEARCOAT
	float clearcoat;
	float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	vec3 sheenColor;
#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearcoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifdef CLEARCOAT
		float ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = ccDotNL * directLight.color;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			ccIrradiance *= PI;
		#endif
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
		reflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
	#else
		float clearcoatDHR = 0.0;
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(
			material.specularRoughness,
			directLight.direction,
			geometry,
			material.sheenColor
		);
	#else
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);
	#endif
	reflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef CLEARCOAT
		float ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		reflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
		float ccDotNL = ccDotNV;
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
	#else
		float clearcoatDHR = 0.0;
	#endif
	float clearcoatInv = 1.0 - clearcoatDHR;
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	BRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,p=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,b=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );
	#ifdef CLEARCOAT
		clearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );
	#endif
#endif`,S=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,P=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,k=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,K=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,ne=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,ae=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,ve=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Ge=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,nn=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Tt=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,We=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Vt=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
	objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
	objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
	objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
#endif`,Rt=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifndef USE_MORPHNORMALS
		uniform float morphTargetInfluences[ 8 ];
	#else
		uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,Cn=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	transformed += morphTarget0 * morphTargetInfluences[ 0 ];
	transformed += morphTarget1 * morphTargetInfluences[ 1 ];
	transformed += morphTarget2 * morphTargetInfluences[ 2 ];
	transformed += morphTarget3 * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
		transformed += morphTarget4 * morphTargetInfluences[ 4 ];
		transformed += morphTarget5 * morphTargetInfluences[ 5 ];
		transformed += morphTarget6 * morphTargetInfluences[ 6 ];
		transformed += morphTarget7 * morphTargetInfluences[ 7 ];
	#endif
#endif`,mt=`#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
			bitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,xr=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( -vViewPosition, normal, mapN );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );
#endif`,nt=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		float scale = sign( st1.t * st0.s - st0.t * st1.s );
		vec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );
		vec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );
		vec3 N = normalize( surf_norm );
		mat3 tsn = mat3( S, T, N );
		mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		return normalize( tsn * mapN );
	}
#endif`,Ea=`#ifdef CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,ai=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );
	#endif
#endif`,Ta=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,_e=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,ln=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,oi=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Zh=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Hu=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,il=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,zu=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,co=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,He=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Pt=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,un=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Le=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Je=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,Ot=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,dn=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Or=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Ni=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Aa=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,wt=`#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,zn=`#ifdef USE_TRANSMISSIONMAP
	totalTransmission *= texture2D( transmissionMap, vUv ).r;
#endif`,Vu=`#ifdef USE_TRANSMISSIONMAP
	uniform sampler2D transmissionMap;
#endif`,Kh=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,Wu=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,Lg=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,qp=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,jT=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,qT=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,XT=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,YT=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,JT=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,ZT=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,KT=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,QT=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,e1=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,t1=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,n1=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,r1=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,i1=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,a1=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,o1=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,s1=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
	
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,l1=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <skinbase_vertex>
	#ifdef USE_ENVMAP
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,u1=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,c1=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,h1=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,f1=`#define MATCAP
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#ifndef FLAT_SHADED
		vNormal = normalize( transformedNormal );
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,d1=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,p1=`#define TOON
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,v1=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,m1=`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,g1=`#define STANDARD
#ifdef PHYSICAL
	#define REFLECTIVITY
	#define CLEARCOAT
	#define TRANSMISSION
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef TRANSMISSION
	uniform float transmission;
#endif
#ifdef REFLECTIVITY
	uniform float reflectivity;
#endif
#ifdef CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <transmissionmap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#ifdef TRANSMISSION
		float totalTransmission = transmission;
	#endif
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <transmissionmap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#ifdef TRANSMISSION
		diffuseColor.a *= saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );
	#endif
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,y1=`#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,w1=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,b1=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,x1=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,_1=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,S1=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,M1=`#include <common>
#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,E1=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,T1=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Nt={alphamap_fragment:Du,alphamap_pars_fragment:nl,alphatest_fragment:Vh,aomap_fragment:vg,aomap_pars_fragment:mg,begin_vertex:gg,beginnormal_vertex:yg,bsdfs:wg,bumpmap_pars_fragment:bg,clipping_planes_fragment:xg,clipping_planes_pars_fragment:Fu,clipping_planes_pars_vertex:ns,clipping_planes_vertex:Bu,color_fragment:_g,color_pars_fragment:kp,color_pars_vertex:Ip,color_vertex:Sg,common:Dp,cube_uv_reflection_fragment:Wh,defaultnormal_vertex:Fp,displacementmap_pars_vertex:Bp,displacementmap_vertex:Up,emissivemap_fragment:$h,emissivemap_pars_fragment:Uu,encodings_fragment:Mg,encodings_pars_fragment:Eg,envmap_fragment:Gp,envmap_common_pars_fragment:Tg,envmap_pars_fragment:Hp,envmap_pars_vertex:zp,envmap_physical_pars_fragment:Yh,envmap_vertex:Et,fog_vertex:Vp,fog_pars_vertex:Ag,fog_fragment:rl,fog_pars_fragment:Cg,gradientmap_pars_fragment:Wp,lightmap_fragment:jh,lightmap_pars_fragment:qh,lights_lambert_vertex:br,lights_pars_begin:Xh,lights_toon_fragment:$p,lights_toon_pars_fragment:jp,lights_phong_fragment:Jh,lights_phong_pars_fragment:Gu,lights_physical_fragment:s,lights_physical_pars_fragment:h,lights_fragment_begin:p,lights_fragment_maps:b,lights_fragment_end:S,logdepthbuf_fragment:P,logdepthbuf_pars_fragment:k,logdepthbuf_pars_vertex:K,logdepthbuf_vertex:ne,map_fragment:ae,map_pars_fragment:ve,map_particle_fragment:Ge,map_particle_pars_fragment:nn,metalnessmap_fragment:Tt,metalnessmap_pars_fragment:We,morphnormal_vertex:Vt,morphtarget_pars_vertex:Rt,morphtarget_vertex:Cn,normal_fragment_begin:mt,normal_fragment_maps:xr,normalmap_pars_fragment:nt,clearcoat_normal_fragment_begin:Ea,clearcoat_normal_fragment_maps:ai,clearcoat_pars_fragment:Ta,packing:_e,premultiplied_alpha_fragment:ln,project_vertex:oi,dithering_fragment:Zh,dithering_pars_fragment:Hu,roughnessmap_fragment:il,roughnessmap_pars_fragment:zu,shadowmap_pars_fragment:co,shadowmap_pars_vertex:He,shadowmap_vertex:Pt,shadowmask_pars_fragment:un,skinbase_vertex:Le,skinning_pars_vertex:Je,skinning_vertex:Ot,skinnormal_vertex:dn,specularmap_fragment:Or,specularmap_pars_fragment:Ni,tonemapping_fragment:Aa,tonemapping_pars_fragment:wt,transmissionmap_fragment:zn,transmissionmap_pars_fragment:Vu,uv_pars_fragment:Kh,uv_pars_vertex:Wu,uv_vertex:Lg,uv2_pars_fragment:qp,uv2_pars_vertex:jT,uv2_vertex:qT,worldpos_vertex:XT,background_frag:YT,background_vert:JT,cube_frag:ZT,cube_vert:KT,depth_frag:QT,depth_vert:e1,distanceRGBA_frag:t1,distanceRGBA_vert:n1,equirect_frag:r1,equirect_vert:i1,linedashed_frag:a1,linedashed_vert:o1,meshbasic_frag:s1,meshbasic_vert:l1,meshlambert_frag:u1,meshlambert_vert:c1,meshmatcap_frag:h1,meshmatcap_vert:f1,meshtoon_frag:d1,meshtoon_vert:p1,meshphong_frag:v1,meshphong_vert:m1,meshphysical_frag:g1,meshphysical_vert:y1,normal_frag:w1,normal_vert:b1,points_frag:x1,points_vert:_1,shadow_frag:S1,shadow_vert:M1,sprite_frag:E1,sprite_vert:T1},$e={common:{diffuse:{value:new Ye(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Jn},uv2Transform:{value:new Jn},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new xe(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ye(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ye(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Jn}},sprite:{diffuse:{value:new Ye(15658734)},opacity:{value:1},center:{value:new xe(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Jn}}},Ca={basic:{uniforms:Kn([$e.common,$e.specularmap,$e.envmap,$e.aomap,$e.lightmap,$e.fog]),vertexShader:Nt.meshbasic_vert,fragmentShader:Nt.meshbasic_frag},lambert:{uniforms:Kn([$e.common,$e.specularmap,$e.envmap,$e.aomap,$e.lightmap,$e.emissivemap,$e.fog,$e.lights,{emissive:{value:new Ye(0)}}]),vertexShader:Nt.meshlambert_vert,fragmentShader:Nt.meshlambert_frag},phong:{uniforms:Kn([$e.common,$e.specularmap,$e.envmap,$e.aomap,$e.lightmap,$e.emissivemap,$e.bumpmap,$e.normalmap,$e.displacementmap,$e.fog,$e.lights,{emissive:{value:new Ye(0)},specular:{value:new Ye(1118481)},shininess:{value:30}}]),vertexShader:Nt.meshphong_vert,fragmentShader:Nt.meshphong_frag},standard:{uniforms:Kn([$e.common,$e.envmap,$e.aomap,$e.lightmap,$e.emissivemap,$e.bumpmap,$e.normalmap,$e.displacementmap,$e.roughnessmap,$e.metalnessmap,$e.fog,$e.lights,{emissive:{value:new Ye(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Nt.meshphysical_vert,fragmentShader:Nt.meshphysical_frag},toon:{uniforms:Kn([$e.common,$e.aomap,$e.lightmap,$e.emissivemap,$e.bumpmap,$e.normalmap,$e.displacementmap,$e.gradientmap,$e.fog,$e.lights,{emissive:{value:new Ye(0)}}]),vertexShader:Nt.meshtoon_vert,fragmentShader:Nt.meshtoon_frag},matcap:{uniforms:Kn([$e.common,$e.bumpmap,$e.normalmap,$e.displacementmap,$e.fog,{matcap:{value:null}}]),vertexShader:Nt.meshmatcap_vert,fragmentShader:Nt.meshmatcap_frag},points:{uniforms:Kn([$e.points,$e.fog]),vertexShader:Nt.points_vert,fragmentShader:Nt.points_frag},dashed:{uniforms:Kn([$e.common,$e.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Nt.linedashed_vert,fragmentShader:Nt.linedashed_frag},depth:{uniforms:Kn([$e.common,$e.displacementmap]),vertexShader:Nt.depth_vert,fragmentShader:Nt.depth_frag},normal:{uniforms:Kn([$e.common,$e.bumpmap,$e.normalmap,$e.displacementmap,{opacity:{value:1}}]),vertexShader:Nt.normal_vert,fragmentShader:Nt.normal_frag},sprite:{uniforms:Kn([$e.sprite,$e.fog]),vertexShader:Nt.sprite_vert,fragmentShader:Nt.sprite_frag},background:{uniforms:{uvTransform:{value:new Jn},t2D:{value:null}},vertexShader:Nt.background_vert,fragmentShader:Nt.background_frag},cube:{uniforms:Kn([$e.envmap,{opacity:{value:1}}]),vertexShader:Nt.cube_vert,fragmentShader:Nt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Nt.equirect_vert,fragmentShader:Nt.equirect_frag},distanceRGBA:{uniforms:Kn([$e.common,$e.displacementmap,{referencePosition:{value:new D},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Nt.distanceRGBA_vert,fragmentShader:Nt.distanceRGBA_frag},shadow:{uniforms:Kn([$e.lights,$e.fog,{color:{value:new Ye(0)},opacity:{value:1}}]),vertexShader:Nt.shadow_vert,fragmentShader:Nt.shadow_frag}};Ca.physical={uniforms:Kn([Ca.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new xe(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Ye(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:Nt.meshphysical_vert,fragmentShader:Nt.meshphysical_frag};function A1(a,t,e,n,r){var i=new Ye(0),o=0,l,u,c=null,f=0,d=null;function v(g,w,_,x){var y=w.isScene===!0?w.background:null;y&&y.isTexture&&(y=t.get(y));var E=a.xr,R=E.getSession&&E.getSession();R&&R.environmentBlendMode==="additive"&&(y=null),y===null?m(i,o):y&&y.isColor&&(m(y,1),x=!0),(a.autoClear||x)&&a.clear(a.autoClearColor,a.autoClearDepth,a.autoClearStencil),y&&(y.isCubeTexture||y.isWebGLCubeRenderTarget||y.isWebGLCubeRenderTargetTexture||y.mapping===ja)?(u===void 0&&(u=new St(new Qo(1,1,1),new fr({name:"BackgroundCubeMaterial",uniforms:es(Ca.cube.uniforms),vertexShader:Ca.cube.vertexShader,fragmentShader:Ca.cube.fragmentShader,side:Tn,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(A,T,C){this.matrixWorld.copyPosition(C.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(u)),y.isWebGLCubeRenderTarget&&(y=y.texture),u.material.uniforms.envMap.value=y,u.material.uniforms.flipEnvMap.value=y.isCubeTexture?-1:1,(c!==y||f!==y.version||d!==a.toneMapping)&&(u.material.needsUpdate=!0,c=y,f=y.version,d=a.toneMapping),g.unshift(u,u.geometry,u.material,0,0,null)):y&&y.isTexture&&(l===void 0&&(l=new St(new Oi(2,2),new fr({name:"BackgroundMaterial",uniforms:es(Ca.background.uniforms),vertexShader:Ca.background.vertexShader,fragmentShader:Ca.background.fragmentShader,side:Ur,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(l)),l.material.uniforms.t2D.value=y,y.matrixAutoUpdate===!0&&y.updateMatrix(),l.material.uniforms.uvTransform.value.copy(y.matrix),(c!==y||f!==y.version||d!==a.toneMapping)&&(l.material.needsUpdate=!0,c=y,f=y.version,d=a.toneMapping),g.unshift(l,l.geometry,l.material,0,0,null))}function m(g,w){e.buffers.color.setClear(g.r,g.g,g.b,w,r)}return{getClearColor:function(){return i},setClearColor:function(w,_){i.set(w),o=_!==void 0?_:1,m(i,o)},getClearAlpha:function(){return o},setClearAlpha:function(w){o=w,m(i,o)},render:v}}function C1(a,t,e,n){var r=a.getParameter(34921),i=n.isWebGL2?null:t.get("OES_vertex_array_object"),o=n.isWebGL2||i!==null,l={},u=w(null),c=u;function f(Q,J,q,Y,ee){var le=!1;if(o){var ue=g(Y,q,J);c!==ue&&(c=ue,v(c.object)),le=_(Y,ee),le&&x(Y,ee)}else{var he=J.wireframe===!0;(c.geometry!==Y.id||c.program!==q.id||c.wireframe!==he)&&(c.geometry=Y.id,c.program=q.id,c.wireframe=he,le=!0)}Q.isInstancedMesh===!0&&(le=!0),ee!==null&&e.update(ee,34963),le&&(C(Q,J,q,Y),ee!==null&&a.bindBuffer(34963,e.get(ee).buffer))}function d(){return n.isWebGL2?a.createVertexArray():i.createVertexArrayOES()}function v(Q){return n.isWebGL2?a.bindVertexArray(Q):i.bindVertexArrayOES(Q)}function m(Q){return n.isWebGL2?a.deleteVertexArray(Q):i.deleteVertexArrayOES(Q)}function g(Q,J,q){var Y=q.wireframe===!0,ee=l[Q.id];ee===void 0&&(ee={},l[Q.id]=ee);var le=ee[J.id];le===void 0&&(le={},ee[J.id]=le);var ue=le[Y];return ue===void 0&&(ue=w(d()),le[Y]=ue),ue}function w(Q){for(var J=[],q=[],Y=[],ee=0;ee<r;ee++)J[ee]=0,q[ee]=0,Y[ee]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:J,enabledAttributes:q,attributeDivisors:Y,object:Q,attributes:{},index:null}}function _(Q,J){var q=c.attributes,Y=Q.attributes;if(Object.keys(q).length!==Object.keys(Y).length)return!0;for(var ee in Y){var le=q[ee],ue=Y[ee];if(le===void 0||le.attribute!==ue||le.data!==ue.data)return!0}return c.index!==J}function x(Q,J){var q={},Y=Q.attributes;for(var ee in Y){var le=Y[ee],ue={};ue.attribute=le,le.data&&(ue.data=le.data),q[ee]=ue}c.attributes=q,c.index=J}function y(){for(var Q=c.newAttributes,J=0,q=Q.length;J<q;J++)Q[J]=0}function E(Q){R(Q,0)}function R(Q,J){var q=c.newAttributes,Y=c.enabledAttributes,ee=c.attributeDivisors;if(q[Q]=1,Y[Q]===0&&(a.enableVertexAttribArray(Q),Y[Q]=1),ee[Q]!==J){var le=n.isWebGL2?a:t.get("ANGLE_instanced_arrays");le[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Q,J),ee[Q]=J}}function A(){for(var Q=c.newAttributes,J=c.enabledAttributes,q=0,Y=J.length;q<Y;q++)J[q]!==Q[q]&&(a.disableVertexAttribArray(q),J[q]=0)}function T(Q,J,q,Y,ee,le){n.isWebGL2===!0&&(q===5124||q===5125)?a.vertexAttribIPointer(Q,J,q,ee,le):a.vertexAttribPointer(Q,J,q,Y,ee,le)}function C(Q,J,q,Y){if(!(n.isWebGL2===!1&&(Q.isInstancedMesh||Y.isInstancedBufferGeometry)&&t.get("ANGLE_instanced_arrays")===null)){y();var ee=Y.attributes,le=q.getAttributes(),ue=J.defaultAttributeValues;for(var he in le){var pe=le[he];if(pe>=0){var de=ee[he];if(de!==void 0){var Oe=de.normalized,H=de.itemSize,L=e.get(de);if(L===void 0)continue;var G=L.buffer,z=L.type,M=L.bytesPerElement;if(de.isInterleavedBufferAttribute){var O=de.data,N=O.stride,W=de.offset;O&&O.isInstancedInterleavedBuffer?(R(pe,O.meshPerAttribute),Y._maxInstanceCount===void 0&&(Y._maxInstanceCount=O.meshPerAttribute*O.count)):E(pe),a.bindBuffer(34962,G),T(pe,H,z,Oe,N*M,W*M)}else de.isInstancedBufferAttribute?(R(pe,de.meshPerAttribute),Y._maxInstanceCount===void 0&&(Y._maxInstanceCount=de.meshPerAttribute*de.count)):E(pe),a.bindBuffer(34962,G),T(pe,H,z,Oe,0,0)}else if(he==="instanceMatrix"){var ie=e.get(Q.instanceMatrix);if(ie===void 0)continue;var te=ie.buffer,se=ie.type;R(pe+0,1),R(pe+1,1),R(pe+2,1),R(pe+3,1),a.bindBuffer(34962,te),a.vertexAttribPointer(pe+0,4,se,!1,64,0),a.vertexAttribPointer(pe+1,4,se,!1,64,16),a.vertexAttribPointer(pe+2,4,se,!1,64,32),a.vertexAttribPointer(pe+3,4,se,!1,64,48)}else if(he==="instanceColor"){var ce=e.get(Q.instanceColor);if(ce===void 0)continue;var be=ce.buffer,Te=ce.type;R(pe,1),a.bindBuffer(34962,be),a.vertexAttribPointer(pe,3,Te,!1,12,0)}else if(ue!==void 0){var Ee=ue[he];if(Ee!==void 0)switch(Ee.length){case 2:a.vertexAttrib2fv(pe,Ee);break;case 3:a.vertexAttrib3fv(pe,Ee);break;case 4:a.vertexAttrib4fv(pe,Ee);break;default:a.vertexAttrib1fv(pe,Ee)}}}}A()}}function I(){B();for(var Q in l){var J=l[Q];for(var q in J){var Y=J[q];for(var ee in Y)m(Y[ee].object),delete Y[ee];delete J[q]}delete l[Q]}}function j(Q){if(l[Q.id]!==void 0){var J=l[Q.id];for(var q in J){var Y=J[q];for(var ee in Y)m(Y[ee].object),delete Y[ee];delete J[q]}delete l[Q.id]}}function U(Q){for(var J in l){var q=l[J];if(q[Q.id]!==void 0){var Y=q[Q.id];for(var ee in Y)m(Y[ee].object),delete Y[ee];delete q[Q.id]}}}function B(){Z(),c!==u&&(c=u,v(c.object))}function Z(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:f,reset:B,resetDefaultState:Z,dispose:I,releaseStatesOfGeometry:j,releaseStatesOfProgram:U,initAttributes:y,enableAttribute:E,disableUnusedAttributes:A}}function L1(a,t,e,n){var r=n.isWebGL2,i;function o(c){i=c}function l(c,f){a.drawArrays(i,c,f),e.update(f,i,1)}function u(c,f,d){if(d!==0){var v,m;if(r)v=a,m="drawArraysInstanced";else if(v=t.get("ANGLE_instanced_arrays"),m="drawArraysInstancedANGLE",v===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}v[m](i,c,f,d),e.update(f,i,d)}}this.setMode=o,this.render=l,this.renderInstances=u}function R1(a,t,e){var n;function r(){if(n!==void 0)return n;var T=t.get("EXT_texture_filter_anisotropic");return T!==null?n=a.getParameter(T.MAX_TEXTURE_MAX_ANISOTROPY_EXT):n=0,n}function i(T){if(T==="highp"){if(a.getShaderPrecisionFormat(35633,36338).precision>0&&a.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";T="mediump"}return T==="mediump"&&a.getShaderPrecisionFormat(35633,36337).precision>0&&a.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var o=typeof WebGL2RenderingContext!="undefined"&&Ht(a,WebGL2RenderingContext)||typeof WebGL2ComputeRenderingContext!="undefined"&&Ht(a,WebGL2ComputeRenderingContext),l=e.precision!==void 0?e.precision:"highp",u=i(l);u!==l&&(console.warn("THREE.WebGLRenderer:",l,"not supported, using",u,"instead."),l=u);var c=e.logarithmicDepthBuffer===!0,f=a.getParameter(34930),d=a.getParameter(35660),v=a.getParameter(3379),m=a.getParameter(34076),g=a.getParameter(34921),w=a.getParameter(36347),_=a.getParameter(36348),x=a.getParameter(36349),y=d>0,E=o||!!t.get("OES_texture_float"),R=y&&E,A=o?a.getParameter(36183):0;return{isWebGL2:o,getMaxAnisotropy:r,getMaxPrecision:i,precision:l,logarithmicDepthBuffer:c,maxTextures:f,maxVertexTextures:d,maxTextureSize:v,maxCubemapSize:m,maxAttributes:g,maxVertexUniforms:w,maxVaryings:_,maxFragmentUniforms:x,vertexTextures:y,floatFragmentTextures:E,floatVertexTextures:R,maxSamples:A}}function P1(a){var t=this,e=null,n=0,r=!1,i=!1,o=new Ai,l=new Jn,u={value:null,needsUpdate:!1};this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(d,v,m){var g=d.length!==0||v||n!==0||r;return r=v,e=f(d,m,0),n=d.length,g},this.beginShadows=function(){i=!0,f(null)},this.endShadows=function(){i=!1,c()},this.setState=function(d,v,m){var g=d.clippingPlanes,w=d.clipIntersection,_=d.clipShadows,x=a.get(d);if(!r||g===null||g.length===0||i&&!_)i?f(null):c();else{var y=i?0:n,E=y*4,R=x.clippingState||null;u.value=R,R=f(g,v,E,m);for(var A=0;A!==E;++A)R[A]=e[A];x.clippingState=R,this.numIntersection=w?this.numPlanes:0,this.numPlanes+=y}};function c(){u.value!==e&&(u.value=e,u.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}function f(d,v,m,g){var w=d!==null?d.length:0,_=null;if(w!==0){if(_=u.value,g!==!0||_===null){var x=m+w*4,y=v.matrixWorldInverse;l.getNormalMatrix(y),(_===null||_.length<x)&&(_=new Float32Array(x));for(var E=0,R=m;E!==w;++E,R+=4)o.copy(d[E]).applyMatrix4(y,l),o.normal.toArray(_,R),_[R+3]=o.constant}u.value=_,u.needsUpdate=!0}return t.numPlanes=w,t.numIntersection=0,_}}function O1(a){var t=new WeakMap;function e(i,o){return o===mh?i.mapping=Po:o===Is&&(i.mapping=Oo),i}function n(i){if(i&&i.isTexture){var o=i.mapping;if(o===mh||o===Is)if(t.has(i)){var l=t.get(i).texture;return e(l,i.mapping)}else{var u=i.image;if(u&&u.height>0){var c=a.getRenderList(),f=a.getRenderTarget(),d=a.getRenderState(),v=new ii(u.height/2);return v.fromEquirectangularTexture(a,i),t.set(i,v),a.setRenderTarget(f),a.setRenderList(c),a.setRenderState(d),e(v.texture,i.mapping)}else return null}}return i}function r(){t=new WeakMap}return{get:n,dispose:r}}function N1(a){var t={};return{has:function(n){if(t[n]!==void 0)return t[n]!==null;var r;switch(n){case"WEBGL_depth_texture":r=a.getExtension("WEBGL_depth_texture")||a.getExtension("MOZ_WEBGL_depth_texture")||a.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=a.getExtension("WEBGL_compressed_texture_s3tc")||a.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=a.getExtension("WEBGL_compressed_texture_pvrtc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=a.getExtension(n)}return t[n]=r,r!==null},get:function(n){return this.has(n)||console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]}}}function k1(a,t,e,n){var r=new WeakMap,i=new WeakMap;function o(d){var v=d.target,m=r.get(v);m.index!==null&&t.remove(m.index);for(var g in m.attributes)t.remove(m.attributes[g]);v.removeEventListener("dispose",o),r.delete(v);var w=i.get(m);w&&(t.remove(w),i.delete(m)),n.releaseStatesOfGeometry(v),v.isInstancedBufferGeometry===!0&&delete v._maxInstanceCount,e.memory.geometries--}function l(d,v){var m=r.get(v);return m||(v.addEventListener("dispose",o),v.isBufferGeometry?m=v:v.isGeometry&&(v._bufferGeometry===void 0&&(v._bufferGeometry=new dt().setFromObject(d)),m=v._bufferGeometry),r.set(v,m),e.memory.geometries++,m)}function u(d){var v=d.attributes;for(var m in v)t.update(v[m],34962);var g=d.morphAttributes;for(var w in g)for(var _=g[w],x=0,y=_.length;x<y;x++)t.update(_[x],34962)}function c(d){var v=[],m=d.index,g=d.attributes.position,w=0;if(m!==null){var _=m.array;w=m.version;for(var x=0,y=_.length;x<y;x+=3){var E=_[x+0],R=_[x+1],A=_[x+2];v.push(E,R,R,A,A,E)}}else{var T=g.array;w=g.version;for(var C=0,I=T.length/3-1;C<I;C+=3){var j=C+0,U=C+1,B=C+2;v.push(j,U,U,B,B,j)}}var Z=new(Rp(v)>65535?Ci:qo)(v,1);Z.version=w;var Q=i.get(d);Q&&t.remove(Q),i.set(d,Z)}function f(d){var v=i.get(d);if(v){var m=d.index;m!==null&&v.version<m.version&&c(d)}else c(d);return i.get(d)}return{get:l,update:u,getWireframeAttribute:f}}function I1(a,t,e,n){var r=n.isWebGL2,i;function o(v){i=v}var l,u;function c(v){l=v.type,u=v.bytesPerElement}function f(v,m){a.drawElements(i,m,l,v*u),e.update(m,i,1)}function d(v,m,g){if(g!==0){var w,_;if(r)w=a,_="drawElementsInstanced";else if(w=t.get("ANGLE_instanced_arrays"),_="drawElementsInstancedANGLE",w===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}w[_](i,m,l,v*u,g),e.update(m,i,g)}}this.setMode=o,this.setIndex=c,this.render=f,this.renderInstances=d}function D1(a){var t={geometries:0,textures:0},e={frame:0,calls:0,triangles:0,points:0,lines:0};function n(i,o,l){switch(e.calls++,o){case 4:e.triangles+=l*(i/3);break;case 1:e.lines+=l*(i/2);break;case 3:e.lines+=l*(i-1);break;case 2:e.lines+=l*i;break;case 0:e.points+=l*i;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0}return{memory:t,render:e,programs:null,autoReset:!0,reset:r,update:n}}function F1(a,t){return a[0]-t[0]}function B1(a,t){return Math.abs(t[1])-Math.abs(a[1])}function U1(a){for(var t={},e=new Float32Array(8),n=[],r=0;r<8;r++)n[r]=[r,0];function i(o,l,u,c){var f=o.morphTargetInfluences,d=f===void 0?0:f.length,v=t[l.id];if(v===void 0){v=[];for(var m=0;m<d;m++)v[m]=[m,0];t[l.id]=v}for(var g=0;g<d;g++){var w=v[g];w[0]=g,w[1]=f[g]}v.sort(B1);for(var _=0;_<8;_++)_<d&&v[_][1]?(n[_][0]=v[_][0],n[_][1]=v[_][1]):(n[_][0]=Number.MAX_SAFE_INTEGER,n[_][1]=0);n.sort(F1);for(var x=u.morphTargets&&l.morphAttributes.position,y=u.morphNormals&&l.morphAttributes.normal,E=0,R=0;R<8;R++){var A=n[R],T=A[0],C=A[1];T!==Number.MAX_SAFE_INTEGER&&C?(x&&l.getAttribute("morphTarget"+R)!==x[T]&&l.setAttribute("morphTarget"+R,x[T]),y&&l.getAttribute("morphNormal"+R)!==y[T]&&l.setAttribute("morphNormal"+R,y[T]),e[R]=C,E+=C):(x&&l.getAttribute("morphTarget"+R)!==void 0&&l.deleteAttribute("morphTarget"+R),y&&l.getAttribute("morphNormal"+R)!==void 0&&l.deleteAttribute("morphNormal"+R),e[R]=0)}var I=l.morphTargetsRelative?1:1-E;c.getUniforms().setValue(a,"morphTargetBaseInfluence",I),c.getUniforms().setValue(a,"morphTargetInfluences",e)}return{update:i}}function G1(a,t,e,n){var r=new WeakMap;function i(l){var u=n.render.frame,c=l.geometry,f=t.get(l,c);return r.get(f)!==u&&(c.isGeometry&&f.updateFromObject(l),t.update(f),r.set(f,u)),l.isInstancedMesh&&(e.update(l.instanceMatrix,34962),l.instanceColor!==null&&e.update(l.instanceColor,34962)),f}function o(){r=new WeakMap}return{update:i,dispose:o}}function rs(a,t,e,n,r,i,o,l,u,c){a=a!==void 0?a:[],t=t!==void 0?t:Po,o=o!==void 0?o:Hr,Jt.call(this,a,t,e,n,r,i,o,l,u,c),this.flipY=!1}rs.prototype=Object.create(Jt.prototype),rs.prototype.constructor=rs,rs.prototype.isCubeTexture=!0,Object.defineProperty(rs.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}});function Qh(a,t,e,n){Jt.call(this,null),this.image={data:a||null,width:t||1,height:e||1,depth:n||1},this.magFilter=an,this.minFilter=an,this.wrapR=Xn,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}Qh.prototype=Object.create(Jt.prototype),Qh.prototype.constructor=Qh,Qh.prototype.isDataTexture2DArray=!0;function ef(a,t,e,n){Jt.call(this,null),this.image={data:a||null,width:t||1,height:e||1,depth:n||1},this.magFilter=an,this.minFilter=an,this.wrapR=Xn,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}ef.prototype=Object.create(Jt.prototype),ef.prototype.constructor=ef,ef.prototype.isDataTexture3D=!0;var Hw=new Jt,H1=new Qh,z1=new ef,zw=new rs,Vw=[],Ww=[],$w=new Float32Array(16),jw=new Float32Array(9),qw=new Float32Array(4);function $u(a,t,e){var n=a[0];if(n<=0||n>0)return a;var r=t*e,i=Vw[r];if(i===void 0&&(i=new Float32Array(r),Vw[r]=i),t!==0){n.toArray(i,0);for(var o=1,l=0;o!==t;++o)l+=e,a[o].toArray(i,l)}return i}function ki(a,t){if(a.length!==t.length)return!1;for(var e=0,n=a.length;e<n;e++)if(a[e]!==t[e])return!1;return!0}function si(a,t){for(var e=0,n=t.length;e<n;e++)a[e]=t[e]}function Xw(a,t){var e=Ww[t];e===void 0&&(e=new Int32Array(t),Ww[t]=e);for(var n=0;n!==t;++n)e[n]=a.allocateTextureUnit();return e}function V1(a,t){var e=this.cache;e[0]!==t&&(a.uniform1f(this.addr,t),e[0]=t)}function W1(a,t){var e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(a.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(ki(e,t))return;a.uniform2fv(this.addr,t),si(e,t)}}function $1(a,t){var e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(a.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(t.r!==void 0)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(a.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(ki(e,t))return;a.uniform3fv(this.addr,t),si(e,t)}}function j1(a,t){var e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(a.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(ki(e,t))return;a.uniform4fv(this.addr,t),si(e,t)}}function q1(a,t){var e=this.cache,n=t.elements;if(n===void 0){if(ki(e,t))return;a.uniformMatrix2fv(this.addr,!1,t),si(e,t)}else{if(ki(e,n))return;qw.set(n),a.uniformMatrix2fv(this.addr,!1,qw),si(e,n)}}function X1(a,t){var e=this.cache,n=t.elements;if(n===void 0){if(ki(e,t))return;a.uniformMatrix3fv(this.addr,!1,t),si(e,t)}else{if(ki(e,n))return;jw.set(n),a.uniformMatrix3fv(this.addr,!1,jw),si(e,n)}}function Y1(a,t){var e=this.cache,n=t.elements;if(n===void 0){if(ki(e,t))return;a.uniformMatrix4fv(this.addr,!1,t),si(e,t)}else{if(ki(e,n))return;$w.set(n),a.uniformMatrix4fv(this.addr,!1,$w),si(e,n)}}function J1(a,t,e){var n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(a.uniform1i(this.addr,r),n[0]=r),e.safeSetTexture2D(t||Hw,r)}function Z1(a,t,e){var n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(a.uniform1i(this.addr,r),n[0]=r),e.setTexture2DArray(t||H1,r)}function K1(a,t,e){var n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(a.uniform1i(this.addr,r),n[0]=r),e.setTexture3D(t||z1,r)}function Q1(a,t,e){var n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(a.uniform1i(this.addr,r),n[0]=r),e.safeSetTextureCube(t||zw,r)}function eA(a,t){var e=this.cache;e[0]!==t&&(a.uniform1i(this.addr,t),e[0]=t)}function tA(a,t){var e=this.cache;ki(e,t)||(a.uniform2iv(this.addr,t),si(e,t))}function nA(a,t){var e=this.cache;ki(e,t)||(a.uniform3iv(this.addr,t),si(e,t))}function rA(a,t){var e=this.cache;ki(e,t)||(a.uniform4iv(this.addr,t),si(e,t))}function iA(a,t){var e=this.cache;e[0]!==t&&(a.uniform1ui(this.addr,t),e[0]=t)}function aA(a){switch(a){case 5126:return V1;case 35664:return W1;case 35665:return $1;case 35666:return j1;case 35674:return q1;case 35675:return X1;case 35676:return Y1;case 5124:case 35670:return eA;case 35667:case 35671:return tA;case 35668:case 35672:return nA;case 35669:case 35673:return rA;case 5125:return iA;case 35678:case 36198:case 36298:case 36306:case 35682:return J1;case 35679:case 36299:case 36307:return K1;case 35680:case 36300:case 36308:case 36293:return Q1;case 36289:case 36303:case 36311:case 36292:return Z1}}function oA(a,t){a.uniform1fv(this.addr,t)}function sA(a,t){a.uniform1iv(this.addr,t)}function lA(a,t){a.uniform2iv(this.addr,t)}function uA(a,t){a.uniform3iv(this.addr,t)}function cA(a,t){a.uniform4iv(this.addr,t)}function hA(a,t){var e=$u(t,this.size,2);a.uniform2fv(this.addr,e)}function fA(a,t){var e=$u(t,this.size,3);a.uniform3fv(this.addr,e)}function dA(a,t){var e=$u(t,this.size,4);a.uniform4fv(this.addr,e)}function pA(a,t){var e=$u(t,this.size,4);a.uniformMatrix2fv(this.addr,!1,e)}function vA(a,t){var e=$u(t,this.size,9);a.uniformMatrix3fv(this.addr,!1,e)}function mA(a,t){var e=$u(t,this.size,16);a.uniformMatrix4fv(this.addr,!1,e)}function gA(a,t,e){var n=t.length,r=Xw(e,n);a.uniform1iv(this.addr,r);for(var i=0;i!==n;++i)e.safeSetTexture2D(t[i]||Hw,r[i])}function yA(a,t,e){var n=t.length,r=Xw(e,n);a.uniform1iv(this.addr,r);for(var i=0;i!==n;++i)e.safeSetTextureCube(t[i]||zw,r[i])}function wA(a){switch(a){case 5126:return oA;case 35664:return hA;case 35665:return fA;case 35666:return dA;case 35674:return pA;case 35675:return vA;case 35676:return mA;case 5124:case 35670:return sA;case 35667:case 35671:return lA;case 35668:case 35672:return uA;case 35669:case 35673:return cA;case 35678:case 36198:case 36298:case 36306:case 35682:return gA;case 35680:case 36300:case 36308:case 36293:return yA}}function bA(a,t,e){this.id=a,this.addr=e,this.cache=[],this.setValue=aA(t.type)}function Yw(a,t,e){this.id=a,this.addr=e,this.cache=[],this.size=t.size,this.setValue=wA(t.type)}Yw.prototype.updateCache=function(a){var t=this.cache;Ht(a,Float32Array)&&t.length!==a.length&&(this.cache=new Float32Array(a.length)),si(t,a)};function Jw(a){this.id=a,this.seq=[],this.map={}}Jw.prototype.setValue=function(a,t,e){for(var n=this.seq,r=0,i=n.length;r!==i;++r){var o=n[r];o.setValue(a,t[o.id],e)}};var Rg=/([\w\d_]+)(\])?(\[|\.)?/g;function Zw(a,t){a.seq.push(t),a.map[t.id]=t}function xA(a,t,e){var n=a.name,r=n.length;for(Rg.lastIndex=0;;){var i=Rg.exec(n),o=Rg.lastIndex,l=i[1],u=i[2]==="]",c=i[3];if(u&&(l=l|0),c===void 0||c==="["&&o+2===r){Zw(e,c===void 0?new bA(l,a,t):new Yw(l,a,t));break}else{var f=e.map,d=f[l];d===void 0&&(d=new Jw(l),Zw(e,d)),e=d}}}function is(a,t){this.seq=[],this.map={};for(var e=a.getProgramParameter(t,35718),n=0;n<e;++n){var r=a.getActiveUniform(t,n),i=a.getUniformLocation(t,r.name);xA(r,i,this)}}is.prototype.setValue=function(a,t,e,n){var r=this.map[t];r!==void 0&&r.setValue(a,e,n)},is.prototype.setOptional=function(a,t,e){var n=t[e];n!==void 0&&this.setValue(a,e,n)},is.upload=function(a,t,e,n){for(var r=0,i=t.length;r!==i;++r){var o=t[r],l=e[o.id];l.needsUpdate!==!1&&o.setValue(a,l.value,n)}},is.seqWithValue=function(a,t){for(var e=[],n=0,r=a.length;n!==r;++n){var i=a[n];i.id in t&&e.push(i)}return e};function Kw(a,t,e){var n=a.createShader(t);return a.shaderSource(n,e),a.compileShader(n),n}var _A=0;function SA(a){for(var t=a.split(`
`),e=0;e<t.length;e++)t[e]=e+1+": "+t[e];return t.join(`
`)}function Qw(a){switch(a){case On:return["Linear","( value )"];case Uo:return["sRGB","( value )"];case Ho:return["RGBE","( value )"];case zs:return["RGBM","( value, 7.0 )"];case Oh:return["RGBM","( value, 16.0 )"];case Vs:return["RGBD","( value, 256.0 )"];case Go:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case Ka:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",a),["Linear","( value )"]}}function eb(a,t,e){var n=a.getShaderParameter(t,35713),r=a.getShaderInfoLog(t).trim();if(n&&r==="")return"";var i=a.getShaderSource(t);return"THREE.WebGLShader: gl.getShaderInfoLog() "+e+`
`+r+SA(i)}function tf(a,t){var e=Qw(t);return"vec4 "+a+"( vec4 value ) { return "+e[0]+"ToLinear"+e[1]+"; }"}function MA(a,t){var e=Qw(t);return"vec4 "+a+"( vec4 value ) { return LinearTo"+e[0]+e[1]+"; }"}function EA(a,t){var e;switch(t){case ks:e="Linear";break;case An:e="Reinhard";break;case Cr:e="OptimizedCineon";break;case mr:e="ACESFilmic";break;case vh:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),e="Linear"}return"vec3 "+a+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}function TA(a){var t=[a.extensionDerivatives||a.envMapCubeUV||a.bumpMap||a.tangentSpaceNormalMap||a.clearcoatNormalMap||a.flatShading||a.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(a.extensionFragDepth||a.logarithmicDepthBuffer)&&a.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",a.extensionDrawBuffers&&a.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(a.extensionShaderTextureLOD||a.envMap)&&a.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""];return t.filter(nf).join(`
`)}function AA(a){var t=[];for(var e in a){var n=a[e];n!==!1&&t.push("#define "+e+" "+n)}return t.join(`
`)}function CA(a,t){for(var e={},n=a.getProgramParameter(t,35721),r=0;r<n;r++){var i=a.getActiveAttrib(t,r),o=i.name;e[o]=a.getAttribLocation(t,o)}return e}function nf(a){return a!==""}function tb(a,t){return a.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function nb(a,t){return a.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var LA=/^[ \t]*#include +<([\w\d./]+)>/gm;function Pg(a){return a.replace(LA,RA)}function RA(a,t){var e=Nt[t];if(e===void 0)throw new Error("Can not resolve #include <"+t+">");return Pg(e)}var PA=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,OA=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function rb(a){return a.replace(OA,ib).replace(PA,NA)}function NA(a,t,e,n){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),ib(a,t,e,n)}function ib(a,t,e,n){for(var r="",i=parseInt(t);i<parseInt(e);i++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+i+" ]").replace(/UNROLLED_LOOP_INDEX/g,i);return r}function ab(a){var t="precision "+a.precision+` float;
precision `+a.precision+" int;";return a.precision==="highp"?t+=`
#define HIGH_PRECISION`:a.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:a.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function kA(a){var t="SHADOWMAP_TYPE_BASIC";return a.shadowMapType===va?t="SHADOWMAP_TYPE_PCF":a.shadowMapType===Pn?t="SHADOWMAP_TYPE_PCF_SOFT":a.shadowMapType===Va&&(t="SHADOWMAP_TYPE_VSM"),t}function IA(a){var t="ENVMAP_TYPE_CUBE";if(a.envMap)switch(a.envMapMode){case Po:case Oo:t="ENVMAP_TYPE_CUBE";break;case ja:case No:t="ENVMAP_TYPE_CUBE_UV";break}return t}function DA(a){var t="ENVMAP_MODE_REFLECTION";if(a.envMap)switch(a.envMapMode){case Oo:case No:t="ENVMAP_MODE_REFRACTION";break}return t}function FA(a){var t="ENVMAP_BLENDING_NONE";if(a.envMap)switch(a.combine){case Wa:t="ENVMAP_BLENDING_MULTIPLY";break;case ph:t="ENVMAP_BLENDING_MIX";break;case zd:t="ENVMAP_BLENDING_ADD";break}return t}function BA(a,t,e,n){var r=a.getContext(),i=e.defines,o=e.vertexShader,l=e.fragmentShader,u=kA(e),c=IA(e),f=DA(e),d=FA(e),v=a.gammaFactor>0?a.gammaFactor:1,m=e.isWebGL2?"":TA(e),g=AA(i),w=r.createProgram(),_,x,y=e.glslVersion?"#version "+e.glslVersion+`
`:"";e.isRawShaderMaterial?(_=[g].filter(nf).join(`
`),_.length>0&&(_+=`
`),x=[m,g].filter(nf).join(`
`),x.length>0&&(x+=`
`)):(_=[ab(e),"#define SHADER_NAME "+e.shaderName,g,e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+v,"#define MAX_BONES "+e.maxBones,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+f:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMap&&e.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",e.normalMap&&e.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.displacementMap&&e.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.vertexTangents?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexUvs?"#define USE_UV":"",e.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.useVertexTexture?"#define BONE_TEXTURE":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&e.flatShading===!1?"#define USE_MORPHNORMALS":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+u:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.logarithmicDepthBuffer&&e.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(nf).join(`
`),x=[m,ab(e),"#define SHADER_NAME "+e.shaderName,g,e.alphaTest?"#define ALPHATEST "+e.alphaTest+(e.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+v,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+c:"",e.envMap?"#define "+f:"",e.envMap?"#define "+d:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMap&&e.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",e.normalMap&&e.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.sheen?"#define USE_SHEEN":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.vertexTangents?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor?"#define USE_COLOR":"",e.vertexUvs?"#define USE_UV":"",e.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+u:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.logarithmicDepthBuffer&&e.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(e.extensionShaderTextureLOD||e.envMap)&&e.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",e.toneMapping!==$a?"#define TONE_MAPPING":"",e.toneMapping!==$a?Nt.tonemapping_pars_fragment:"",e.toneMapping!==$a?EA("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",Nt.encodings_pars_fragment,e.map?tf("mapTexelToLinear",e.mapEncoding):"",e.matcap?tf("matcapTexelToLinear",e.matcapEncoding):"",e.envMap?tf("envMapTexelToLinear",e.envMapEncoding):"",e.emissiveMap?tf("emissiveMapTexelToLinear",e.emissiveMapEncoding):"",e.lightMap?tf("lightMapTexelToLinear",e.lightMapEncoding):"",MA("linearToOutputTexel",e.outputEncoding),e.depthPacking?"#define DEPTH_PACKING "+e.depthPacking:"",`
`].filter(nf).join(`
`)),o=Pg(o),o=tb(o,e),o=nb(o,e),l=Pg(l),l=tb(l,e),l=nb(l,e),o=rb(o),l=rb(l),e.isWebGL2&&e.isRawShaderMaterial!==!0&&(y=`#version 300 es
`,_=["#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+_,x=["#define varying in",e.glslVersion===Nh?"":"out highp vec4 pc_fragColor;",e.glslVersion===Nh?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+x);var E=y+_+o,R=y+x+l,A=Kw(r,35633,E),T=Kw(r,35632,R);if(r.attachShader(w,A),r.attachShader(w,T),e.index0AttributeName!==void 0?r.bindAttribLocation(w,0,e.index0AttributeName):e.morphTargets===!0&&r.bindAttribLocation(w,0,"position"),r.linkProgram(w),a.debug.checkShaderErrors){var C=r.getProgramInfoLog(w).trim(),I=r.getShaderInfoLog(A).trim(),j=r.getShaderInfoLog(T).trim(),U=!0,B=!0;if(r.getProgramParameter(w,35714)===!1){U=!1;var Z=eb(r,A,"vertex"),Q=eb(r,T,"fragment");console.error("THREE.WebGLProgram: shader error: ",r.getError(),"35715",r.getProgramParameter(w,35715),"gl.getProgramInfoLog",C,Z,Q)}else C!==""?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",C):(I===""||j==="")&&(B=!1);B&&(this.diagnostics={runnable:U,programLog:C,vertexShader:{log:I,prefix:_},fragmentShader:{log:j,prefix:x}})}r.deleteShader(A),r.deleteShader(T);var J;this.getUniforms=function(){return J===void 0&&(J=new is(r,w)),J};var q;return this.getAttributes=function(){return q===void 0&&(q=CA(r,w)),q},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(w),this.program=void 0},this.name=e.shaderName,this.id=_A++,this.cacheKey=t,this.usedTimes=1,this.program=w,this.vertexShader=A,this.fragmentShader=T,this}function UA(a,t,e,n,r,i){var o=[],l=n.isWebGL2,u=n.logarithmicDepthBuffer,c=n.floatVertexTextures,f=n.maxVertexUniforms,d=n.vertexTextures,v=n.precision,m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},g=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];function w(T){var C=T.skeleton,I=C.bones;if(c)return 1024;var j=f,U=Math.floor((j-20)/4),B=Math.min(U,I.length);return B<I.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+I.length+" bones. This GPU supports "+B+"."),0):B}function _(T){var C;return T?T.isTexture?C=T.encoding:T.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),C=T.texture.encoding):C=On,C}function x(T,C,I,j,U){var B=j.fog,Z=T.isMeshStandardMaterial?j.environment:null,Q=t.get(T.envMap||Z),J=m[T.type],q=U.isSkinnedMesh?w(U):0;T.precision!==null&&(v=n.getMaxPrecision(T.precision),v!==T.precision&&console.warn("THREE.WebGLProgram.getParameters:",T.precision,"not supported, using",v,"instead."));var Y,ee;if(J){var le=Ca[J];Y=le.vertexShader,ee=le.fragmentShader}else Y=T.vertexShader,ee=T.fragmentShader;var ue=a.getRenderTarget(),he={isWebGL2:l,shaderID:J,shaderName:T.type,vertexShader:Y,fragmentShader:ee,defines:T.defines,isRawShaderMaterial:T.isRawShaderMaterial===!0,glslVersion:T.glslVersion,precision:v,instancing:U.isInstancedMesh===!0,instancingColor:U.isInstancedMesh===!0&&U.instanceColor!==null,supportsVertexTextures:d,outputEncoding:ue!==null?_(ue.texture):a.outputEncoding,map:!!T.map,mapEncoding:_(T.map),matcap:!!T.matcap,matcapEncoding:_(T.matcap),envMap:!!Q,envMapMode:Q&&Q.mapping,envMapEncoding:_(Q),envMapCubeUV:!!Q&&(Q.mapping===ja||Q.mapping===No),lightMap:!!T.lightMap,lightMapEncoding:_(T.lightMap),aoMap:!!T.aoMap,emissiveMap:!!T.emissiveMap,emissiveMapEncoding:_(T.emissiveMap),bumpMap:!!T.bumpMap,normalMap:!!T.normalMap,objectSpaceNormalMap:T.normalMapType===mp,tangentSpaceNormalMap:T.normalMapType===_i,clearcoatMap:!!T.clearcoatMap,clearcoatRoughnessMap:!!T.clearcoatRoughnessMap,clearcoatNormalMap:!!T.clearcoatNormalMap,displacementMap:!!T.displacementMap,roughnessMap:!!T.roughnessMap,metalnessMap:!!T.metalnessMap,specularMap:!!T.specularMap,alphaMap:!!T.alphaMap,gradientMap:!!T.gradientMap,sheen:!!T.sheen,transmissionMap:!!T.transmissionMap,combine:T.combine,vertexTangents:T.normalMap&&T.vertexTangents,vertexColors:T.vertexColors,vertexUvs:!!T.map||!!T.bumpMap||!!T.normalMap||!!T.specularMap||!!T.alphaMap||!!T.emissiveMap||!!T.roughnessMap||!!T.metalnessMap||!!T.clearcoatMap||!!T.clearcoatRoughnessMap||!!T.clearcoatNormalMap||!!T.displacementMap||!!T.transmissionMap,uvsVertexOnly:!(!!T.map||!!T.bumpMap||!!T.normalMap||!!T.specularMap||!!T.alphaMap||!!T.emissiveMap||!!T.roughnessMap||!!T.metalnessMap||!!T.clearcoatNormalMap||!!T.transmissionMap)&&!!T.displacementMap,fog:!!B,useFog:T.fog,fogExp2:B&&B.isFogExp2,flatShading:T.flatShading,sizeAttenuation:T.sizeAttenuation,logarithmicDepthBuffer:u,skinning:T.skinning&&q>0,maxBones:q,useVertexTexture:c,morphTargets:T.morphTargets,morphNormals:T.morphNormals,maxMorphTargets:a.maxMorphTargets,maxMorphNormals:a.maxMorphNormals,numDirLights:C.directional.length,numPointLights:C.point.length,numSpotLights:C.spot.length,numRectAreaLights:C.rectArea.length,numHemiLights:C.hemi.length,numDirLightShadows:C.directionalShadowMap.length,numPointLightShadows:C.pointShadowMap.length,numSpotLightShadows:C.spotShadowMap.length,numClippingPlanes:i.numPlanes,numClipIntersection:i.numIntersection,dithering:T.dithering,shadowMapEnabled:a.shadowMap.enabled&&I.length>0,shadowMapType:a.shadowMap.type,toneMapping:T.toneMapped?a.toneMapping:$a,physicallyCorrectLights:a.physicallyCorrectLights,premultipliedAlpha:T.premultipliedAlpha,alphaTest:T.alphaTest,doubleSided:T.side===wi,flipSided:T.side===Tn,depthPacking:T.depthPacking!==void 0?T.depthPacking:!1,index0AttributeName:T.index0AttributeName,extensionDerivatives:T.extensions&&T.extensions.derivatives,extensionFragDepth:T.extensions&&T.extensions.fragDepth,extensionDrawBuffers:T.extensions&&T.extensions.drawBuffers,extensionShaderTextureLOD:T.extensions&&T.extensions.shaderTextureLOD,rendererExtensionFragDepth:l||e.has("EXT_frag_depth"),rendererExtensionDrawBuffers:l||e.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:l||e.has("EXT_shader_texture_lod"),customProgramCacheKey:T.customProgramCacheKey()};return he}function y(T){var C=[];if(T.shaderID?C.push(T.shaderID):(C.push(T.fragmentShader),C.push(T.vertexShader)),T.defines!==void 0)for(var I in T.defines)C.push(I),C.push(T.defines[I]);if(T.isRawShaderMaterial===!1){for(var j=0;j<g.length;j++)C.push(T[g[j]]);C.push(a.outputEncoding),C.push(a.gammaFactor)}return C.push(T.customProgramCacheKey),C.join()}function E(T){var C=m[T.type],I;if(C){var j=Ca[C];I=zh.clone(j.uniforms)}else I=T.uniforms;return I}function R(T,C){for(var I,j=0,U=o.length;j<U;j++){var B=o[j];if(B.cacheKey===C){I=B,++I.usedTimes;break}}return I===void 0&&(I=new BA(a,C,T,r),o.push(I)),I}function A(T){if(--T.usedTimes==0){var C=o.indexOf(T);o[C]=o[o.length-1],o.pop(),T.destroy()}}return{getParameters:x,getProgramCacheKey:y,getUniforms:E,acquireProgram:R,releaseProgram:A,programs:o}}function GA(){var a=new WeakMap;function t(i){var o=a.get(i);return o===void 0&&(o={},a.set(i,o)),o}function e(i){a.delete(i)}function n(i,o,l){a.get(i)[o]=l}function r(){a=new WeakMap}return{get:t,remove:e,update:n,dispose:r}}function HA(a,t){return a.groupOrder!==t.groupOrder?a.groupOrder-t.groupOrder:a.renderOrder!==t.renderOrder?a.renderOrder-t.renderOrder:a.program!==t.program?a.program.id-t.program.id:a.material.id!==t.material.id?a.material.id-t.material.id:a.z!==t.z?a.z-t.z:a.id-t.id}function zA(a,t){return a.groupOrder!==t.groupOrder?a.groupOrder-t.groupOrder:a.renderOrder!==t.renderOrder?a.renderOrder-t.renderOrder:a.z!==t.z?t.z-a.z:a.id-t.id}function ob(a){var t=[],e=0,n=[],r=[],i={id:-1};function o(){e=0,n.length=0,r.length=0}function l(v,m,g,w,_,x){var y=t[e],E=a.get(g);return y===void 0?(y={id:v.id,object:v,geometry:m,material:g,program:E.program||i,groupOrder:w,renderOrder:v.renderOrder,z:_,group:x},t[e]=y):(y.id=v.id,y.object=v,y.geometry=m,y.material=g,y.program=E.program||i,y.groupOrder=w,y.renderOrder=v.renderOrder,y.z=_,y.group=x),e++,y}function u(v,m,g,w,_,x){var y=l(v,m,g,w,_,x);(g.transparent===!0?r:n).push(y)}function c(v,m,g,w,_,x){var y=l(v,m,g,w,_,x);(g.transparent===!0?r:n).unshift(y)}function f(v,m){n.length>1&&n.sort(v||HA),r.length>1&&r.sort(m||zA)}function d(){for(var v=e,m=t.length;v<m;v++){var g=t[v];if(g.id===null)break;g.id=null,g.object=null,g.geometry=null,g.material=null,g.program=null,g.group=null}}return{opaque:n,transparent:r,init:o,push:u,unshift:c,finish:d,sort:f}}function VA(a){var t=new WeakMap;function e(r,i){var o=t.get(r),l;return o===void 0?(l=new ob(a),t.set(r,new WeakMap),t.get(r).set(i,l)):(l=o.get(i),l===void 0&&(l=new ob(a),o.set(i,l))),l}function n(){t=new WeakMap}return{get:e,dispose:n}}function WA(){var a={};return{get:function(e){if(a[e.id]!==void 0)return a[e.id];var n;switch(e.type){case"DirectionalLight":n={direction:new D,color:new Ye};break;case"SpotLight":n={position:new D,direction:new D,color:new Ye,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new D,color:new Ye,distance:0,decay:0};break;case"HemisphereLight":n={direction:new D,skyColor:new Ye,groundColor:new Ye};break;case"RectAreaLight":n={color:new Ye,position:new D,halfWidth:new D,halfHeight:new D};break}return a[e.id]=n,n}}}function $A(){var a={};return{get:function(e){if(a[e.id]!==void 0)return a[e.id];var n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new xe};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new xe};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new xe,shadowCameraNear:1,shadowCameraFar:1e3};break}return a[e.id]=n,n}}}var jA=0;function qA(a,t){return(t.castShadow?1:0)-(a.castShadow?1:0)}function XA(){for(var a=new WA,t=$A(),e={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},n=0;n<9;n++)e.probe.push(new D);var r=new D,i=new ht,o=new ht;function l(u,c,f){for(var d=0,v=0,m=0,g=0;g<9;g++)e.probe[g].set(0,0,0);var w=0,_=0,x=0,y=0,E=0,R=0,A=0,T=0,C=f.matrixWorldInverse;u.sort(qA);for(var I=0,j=u.length;I<j;I++){var U=u[I],B=U.color,Z=U.intensity,Q=U.distance,J=U.shadow&&U.shadow.map?U.shadow.map.texture:null;if(U.isAmbientLight)d+=B.r*Z,v+=B.g*Z,m+=B.b*Z;else if(U.isLightProbe)for(var q=0;q<9;q++)e.probe[q].addScaledVector(U.sh.coefficients[q],Z);else if(U.isDirectionalLight){var Y=a.get(U);if(Y.color.copy(U.color).multiplyScalar(U.intensity),Y.direction.setFromMatrixPosition(U.matrixWorld),r.setFromMatrixPosition(U.target.matrixWorld),Y.direction.sub(r),Y.direction.transformDirection(C),U.castShadow){var ee=U.shadow,le=t.get(U);le.shadowBias=ee.bias,le.shadowNormalBias=ee.normalBias,le.shadowRadius=ee.radius,le.shadowMapSize=ee.mapSize,e.directionalShadow[w]=le,e.directionalShadowMap[w]=J,e.directionalShadowMatrix[w]=U.shadow.matrix,R++}e.directional[w]=Y,w++}else if(U.isSpotLight){var ue=a.get(U);if(ue.position.setFromMatrixPosition(U.matrixWorld),ue.position.applyMatrix4(C),ue.color.copy(B).multiplyScalar(Z),ue.distance=Q,ue.direction.setFromMatrixPosition(U.matrixWorld),r.setFromMatrixPosition(U.target.matrixWorld),ue.direction.sub(r),ue.direction.transformDirection(C),ue.coneCos=Math.cos(U.angle),ue.penumbraCos=Math.cos(U.angle*(1-U.penumbra)),ue.decay=U.decay,U.castShadow){var he=U.shadow,pe=t.get(U);pe.shadowBias=he.bias,pe.shadowNormalBias=he.normalBias,pe.shadowRadius=he.radius,pe.shadowMapSize=he.mapSize,e.spotShadow[x]=pe,e.spotShadowMap[x]=J,e.spotShadowMatrix[x]=U.shadow.matrix,T++}e.spot[x]=ue,x++}else if(U.isRectAreaLight){var de=a.get(U);de.color.copy(B).multiplyScalar(Z),de.position.setFromMatrixPosition(U.matrixWorld),de.position.applyMatrix4(C),o.identity(),i.copy(U.matrixWorld),i.premultiply(C),o.extractRotation(i),de.halfWidth.set(U.width*.5,0,0),de.halfHeight.set(0,U.height*.5,0),de.halfWidth.applyMatrix4(o),de.halfHeight.applyMatrix4(o),e.rectArea[y]=de,y++}else if(U.isPointLight){var Oe=a.get(U);if(Oe.position.setFromMatrixPosition(U.matrixWorld),Oe.position.applyMatrix4(C),Oe.color.copy(U.color).multiplyScalar(U.intensity),Oe.distance=U.distance,Oe.decay=U.decay,U.castShadow){var H=U.shadow,L=t.get(U);L.shadowBias=H.bias,L.shadowNormalBias=H.normalBias,L.shadowRadius=H.radius,L.shadowMapSize=H.mapSize,L.shadowCameraNear=H.camera.near,L.shadowCameraFar=H.camera.far,e.pointShadow[_]=L,e.pointShadowMap[_]=J,e.pointShadowMatrix[_]=U.shadow.matrix,A++}e.point[_]=Oe,_++}else if(U.isHemisphereLight){var G=a.get(U);G.direction.setFromMatrixPosition(U.matrixWorld),G.direction.transformDirection(C),G.direction.normalize(),G.skyColor.copy(U.color).multiplyScalar(Z),G.groundColor.copy(U.groundColor).multiplyScalar(Z),e.hemi[E]=G,E++}}y>0&&(e.rectAreaLTC1=$e.LTC_1,e.rectAreaLTC2=$e.LTC_2),e.ambient[0]=d,e.ambient[1]=v,e.ambient[2]=m;var z=e.hash;(z.directionalLength!==w||z.pointLength!==_||z.spotLength!==x||z.rectAreaLength!==y||z.hemiLength!==E||z.numDirectionalShadows!==R||z.numPointShadows!==A||z.numSpotShadows!==T)&&(e.directional.length=w,e.spot.length=x,e.rectArea.length=y,e.point.length=_,e.hemi.length=E,e.directionalShadow.length=R,e.directionalShadowMap.length=R,e.pointShadow.length=A,e.pointShadowMap.length=A,e.spotShadow.length=T,e.spotShadowMap.length=T,e.directionalShadowMatrix.length=R,e.pointShadowMatrix.length=A,e.spotShadowMatrix.length=T,z.directionalLength=w,z.pointLength=_,z.spotLength=x,z.rectAreaLength=y,z.hemiLength=E,z.numDirectionalShadows=R,z.numPointShadows=A,z.numSpotShadows=T,e.version=jA++)}return{setup:l,state:e}}function sb(){var a=new XA,t=[],e=[];function n(){t.length=0,e.length=0}function r(u){t.push(u)}function i(u){e.push(u)}function o(u){a.setup(t,e,u)}var l={lightsArray:t,shadowsArray:e,lights:a};return{init:n,state:l,setupLights:o,pushLight:r,pushShadow:i}}function YA(){var a=new WeakMap;function t(n,r){var i;return a.has(n)===!1?(i=new sb,a.set(n,new WeakMap),a.get(n).set(r,i)):a.get(n).has(r)===!1?(i=new sb,a.get(n).set(r,i)):i=a.get(n).get(r),i}function e(){a=new WeakMap}return{get:t,dispose:e}}function al(a){ut.call(this),this.type="MeshDepthMaterial",this.depthPacking=vp,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(a)}al.prototype=Object.create(ut.prototype),al.prototype.constructor=al,al.prototype.isMeshDepthMaterial=!0,al.prototype.copy=function(a){return ut.prototype.copy.call(this,a),this.depthPacking=a.depthPacking,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.map=a.map,this.alphaMap=a.alphaMap,this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this};function ol(a){ut.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new D,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(a)}ol.prototype=Object.create(ut.prototype),ol.prototype.constructor=ol,ol.prototype.isMeshDistanceMaterial=!0,ol.prototype.copy=function(a){return ut.prototype.copy.call(this,a),this.referencePosition.copy(a.referencePosition),this.nearDistance=a.nearDistance,this.farDistance=a.farDistance,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.map=a.map,this.alphaMap=a.alphaMap,this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this};var JA=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	float mean = 0.0;
	float squared_mean = 0.0;
	float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );
	for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {
		#ifdef HORIZONAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean * HALF_SAMPLE_RATE;
	squared_mean = squared_mean * HALF_SAMPLE_RATE;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`,ZA=`void main() {
	gl_Position = vec4( position, 1.0 );
}`;function lb(a,t,e){var n=new Iu,r=new xe,i=new xe,o=new Qt,l=[],u=[],c={},f={0:Tn,1:Ur,2:wi},d=new fr({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new xe},radius:{value:4}},vertexShader:ZA,fragmentShader:JA}),v=d.clone();v.defines.HORIZONAL_PASS=1;var m=new dt;m.setAttribute("position",new at(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var g=new St(m,d),w=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=va,this.render=function(A,T,C){if(w.enabled!==!1&&!(w.autoUpdate===!1&&w.needsUpdate===!1)&&A.length!==0){var I=a.getRenderTarget(),j=a.getActiveCubeFace(),U=a.getActiveMipmapLevel(),B=a.state;B.setBlending(Zr),B.buffers.color.setClear(1,1,1,1),B.buffers.depth.setTest(!0),B.setScissorTest(!1);for(var Z=0,Q=A.length;Z<Q;Z++){var J=A[Z],q=J.shadow;if(!(q.autoUpdate===!1&&q.needsUpdate===!1)){if(q===void 0){console.warn("THREE.WebGLShadowMap:",J,"has no shadow.");continue}r.copy(q.mapSize);var Y=q.getFrameExtents();if(r.multiply(Y),i.copy(q.mapSize),(r.x>e||r.y>e)&&(r.x>e&&(i.x=Math.floor(e/Y.x),r.x=i.x*Y.x,q.mapSize.x=i.x),r.y>e&&(i.y=Math.floor(e/Y.y),r.y=i.y*Y.y,q.mapSize.y=i.y)),q.map===null&&!q.isPointLightShadow&&this.type===Va){var ee={minFilter:sn,magFilter:sn,format:Lr};q.map=new ir(r.x,r.y,ee),q.map.texture.name=J.name+".shadowMap",q.mapPass=new ir(r.x,r.y,ee),q.camera.updateProjectionMatrix()}if(q.map===null){var le={minFilter:an,magFilter:an,format:Lr};q.map=new ir(r.x,r.y,le),q.map.texture.name=J.name+".shadowMap",q.camera.updateProjectionMatrix()}a.setRenderTarget(q.map),a.clear();for(var ue=q.getViewportCount(),he=0;he<ue;he++){var pe=q.getViewport(he);o.set(i.x*pe.x,i.y*pe.y,i.x*pe.z,i.y*pe.w),B.viewport(o),q.updateMatrices(J,he),n=q.getFrustum(),R(T,C,q.camera,J,this.type)}!q.isPointLightShadow&&this.type===Va&&_(q,C),q.needsUpdate=!1}}w.needsUpdate=!1,a.setRenderTarget(I,j,U)}};function _(A,T){var C=t.update(g);d.uniforms.shadow_pass.value=A.map.texture,d.uniforms.resolution.value=A.mapSize,d.uniforms.radius.value=A.radius,a.setRenderTarget(A.mapPass),a.clear(),a.renderBufferDirect(T,null,C,d,g,null),v.uniforms.shadow_pass.value=A.mapPass.texture,v.uniforms.resolution.value=A.mapSize,v.uniforms.radius.value=A.radius,a.setRenderTarget(A.map),a.clear(),a.renderBufferDirect(T,null,C,v,g,null)}function x(A,T,C){var I=A<<0|T<<1|C<<2,j=l[I];return j===void 0&&(j=new al({depthPacking:Wi,morphTargets:A,skinning:T}),l[I]=j),j}function y(A,T,C){var I=A<<0|T<<1|C<<2,j=u[I];return j===void 0&&(j=new ol({morphTargets:A,skinning:T}),u[I]=j),j}function E(A,T,C,I,j,U,B){var Z=null,Q=x,J=A.customDepthMaterial;if(I.isPointLight===!0&&(Q=y,J=A.customDistanceMaterial),J===void 0){var q=!1;C.morphTargets===!0&&(q=T.morphAttributes&&T.morphAttributes.position&&T.morphAttributes.position.length>0);var Y=!1;A.isSkinnedMesh===!0&&(C.skinning===!0?Y=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",A));var ee=A.isInstancedMesh===!0;Z=Q(q,Y,ee)}else Z=J;if(a.localClippingEnabled&&C.clipShadows===!0&&C.clippingPlanes.length!==0){var le=Z.uuid,ue=C.uuid,he=c[le];he===void 0&&(he={},c[le]=he);var pe=he[ue];pe===void 0&&(pe=Z.clone(),he[ue]=pe),Z=pe}return Z.visible=C.visible,Z.wireframe=C.wireframe,B===Va?Z.side=C.shadowSide!==null?C.shadowSide:C.side:Z.side=C.shadowSide!==null?C.shadowSide:f[C.side],Z.clipShadows=C.clipShadows,Z.clippingPlanes=C.clippingPlanes,Z.clipIntersection=C.clipIntersection,Z.wireframeLinewidth=C.wireframeLinewidth,Z.linewidth=C.linewidth,I.isPointLight===!0&&Z.isMeshDistanceMaterial===!0&&(Z.referencePosition.setFromMatrixPosition(I.matrixWorld),Z.nearDistance=j,Z.farDistance=U),Z}function R(A,T,C,I,j){if(A.visible!==!1){var U=A.layers.test(T.layers);if(U&&(A.isMesh||A.isLine||A.isPoints)&&(A.castShadow||A.receiveShadow&&j===Va)&&(!A.frustumCulled||n.intersectsObject(A))){A.modelViewMatrix.multiplyMatrices(C.matrixWorldInverse,A.matrixWorld);var B=t.update(A),Z=A.material;if(Array.isArray(Z))for(var Q=B.groups,J=0,q=Q.length;J<q;J++){var Y=Q[J],ee=Z[Y.materialIndex];if(ee&&ee.visible){var le=E(A,B,ee,I,C.near,C.far,j);a.renderBufferDirect(C,null,B,le,A,Y)}}else if(Z.visible){var ue=E(A,B,Z,I,C.near,C.far,j);a.renderBufferDirect(C,null,B,ue,A,null)}}for(var he=A.children,pe=0,de=he.length;pe<de;pe++)R(he[pe],T,C,I,j)}}}function KA(a,t,e){var n,r,i=e.isWebGL2;function o(){var re=!1,Fe=new Qt,Be=null,je=new Qt(0,0,0,0);return{setMask:function(Ae){Be!==Ae&&!re&&(a.colorMask(Ae,Ae,Ae,Ae),Be=Ae)},setLocked:function(Ae){re=Ae},setClear:function(Ae,ct,ft,en,Ft){Ft===!0&&(Ae*=en,ct*=en,ft*=en),Fe.set(Ae,ct,ft,en),je.equals(Fe)===!1&&(a.clearColor(Ae,ct,ft,en),je.copy(Fe))},reset:function(){re=!1,Be=null,je.set(-1,0,0,0)}}}function l(){var re=!1,Fe=null,Be=null,je=null;return{setTest:function(Ae){Ae?de(2929):Oe(2929)},setMask:function(Ae){Fe!==Ae&&!re&&(a.depthMask(Ae),Fe=Ae)},setFunc:function(Ae){if(Be!==Ae){if(Ae)switch(Ae){case Jm:a.depthFunc(512);break;case Zm:a.depthFunc(519);break;case Km:a.depthFunc(513);break;case tu:a.depthFunc(515);break;case Hd:a.depthFunc(514);break;case Qm:a.depthFunc(518);break;case eg:a.depthFunc(516);break;case dh:a.depthFunc(517);break;default:a.depthFunc(515)}else a.depthFunc(515);Be=Ae}},setLocked:function(Ae){re=Ae},setClear:function(Ae){je!==Ae&&(a.clearDepth(Ae),je=Ae)},reset:function(){re=!1,Fe=null,Be=null,je=null}}}function u(){var re=!1,Fe=null,Be=null,je=null,Ue=null,Ae=null,ct=null,ft=null,en=null;return{setTest:function(_t){re||(_t?de(2960):Oe(2960))},setMask:function(_t){Fe!==_t&&!re&&(a.stencilMask(_t),Fe=_t)},setFunc:function(_t,Bt,$t){(Be!==_t||je!==Bt||Ue!==$t)&&(a.stencilFunc(_t,Bt,$t),Be=_t,je=Bt,Ue=$t)},setOp:function(_t,Bt,$t){(Ae!==_t||ct!==Bt||ft!==$t)&&(a.stencilOp(_t,Bt,$t),Ae=_t,ct=Bt,ft=$t)},setLocked:function(_t){re=_t},setClear:function(_t){en!==_t&&(a.clearStencil(_t),en=_t)},reset:function(){re=!1,Fe=null,Be=null,je=null,Ue=null,Ae=null,ct=null,ft=null,en=null}}}var c=new o,f=new l,d=new u,v={},m=null,g=null,w=null,_=null,x=null,y=null,E=null,R=null,A=null,T=!1,C=null,I=null,j=null,U=null,B=null,Z=a.getParameter(35661),Q=!1,J=0,q=a.getParameter(7938);q.indexOf("WebGL")!==-1?(J=parseFloat(/^WebGL\ ([0-9])/.exec(q)[1]),Q=J>=1):q.indexOf("OpenGL ES")!==-1&&(J=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(q)[1]),Q=J>=2);var Y=null,ee={},le=new Qt,ue=new Qt;function he(re,Fe,Be){var je=new Uint8Array(4),Ue=a.createTexture();a.bindTexture(re,Ue),a.texParameteri(re,10241,9728),a.texParameteri(re,10240,9728);for(var Ae=0;Ae<Be;Ae++)a.texImage2D(Fe+Ae,0,6408,1,1,0,6408,5121,je);return Ue}var pe={};pe[3553]=he(3553,3553,1),pe[34067]=he(34067,34069,6),c.setClear(0,0,0,1),f.setClear(1),d.setClear(0),de(2929),f.setFunc(tu),N(!1),W(Zl),de(2884),M(Zr);function de(re){v[re]!==!0&&(a.enable(re),v[re]=!0)}function Oe(re){v[re]!==!1&&(a.disable(re),v[re]=!1)}function H(re){return m!==re?(a.useProgram(re),m=re,!0):!1}var L=(n={},kt(n,ma,32774),kt(n,Ud,32778),kt(n,hr,32779),n);if(i)L[Kl]=32775,L[wn]=32776;else{var G=t.get("EXT_blend_minmax");G!==null&&(L[Kl]=G.MIN_EXT,L[wn]=G.MAX_EXT)}var z=(r={},kt(r,ch,0),kt(r,Gd,1),kt(r,Ro,768),kt(r,Ql,770),kt(r,Ym,776),kt(r,qm,774),kt(r,eu,772),kt(r,Ns,769),kt(r,hh,771),kt(r,Xm,775),kt(r,fh,773),r);function M(re,Fe,Be,je,Ue,Ae,ct,ft){if(re===Zr){g&&(Oe(3042),g=!1);return}if(g||(de(3042),g=!0),re!==Bd){if(re!==w||ft!==T){if((_!==ma||E!==ma)&&(a.blendEquation(32774),_=ma,E=ma),ft)switch(re){case Lo:a.blendFuncSeparate(1,771,1,771);break;case lh:a.blendFunc(1,1);break;case uh:a.blendFuncSeparate(0,0,769,771);break;case Os:a.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",re);break}else switch(re){case Lo:a.blendFuncSeparate(770,771,1,771);break;case lh:a.blendFunc(770,1);break;case uh:a.blendFunc(0,769);break;case Os:a.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",re);break}x=null,y=null,R=null,A=null,w=re,T=ft}return}Ue=Ue||Fe,Ae=Ae||Be,ct=ct||je,(Fe!==_||Ue!==E)&&(a.blendEquationSeparate(L[Fe],L[Ue]),_=Fe,E=Ue),(Be!==x||je!==y||Ae!==R||ct!==A)&&(a.blendFuncSeparate(z[Be],z[je],z[Ae],z[ct]),x=Be,y=je,R=Ae,A=ct),w=re,T=null}function O(re,Fe){re.side===wi?Oe(2884):de(2884);var Be=re.side===Tn;Fe&&(Be=!Be),N(Be),re.blending===Lo&&re.transparent===!1?M(Zr):M(re.blending,re.blendEquation,re.blendSrc,re.blendDst,re.blendEquationAlpha,re.blendSrcAlpha,re.blendDstAlpha,re.premultipliedAlpha),f.setFunc(re.depthFunc),f.setTest(re.depthTest),f.setMask(re.depthWrite),c.setMask(re.colorWrite);var je=re.stencilWrite;d.setTest(je),je&&(d.setMask(re.stencilWriteMask),d.setFunc(re.stencilFunc,re.stencilRef,re.stencilFuncMask),d.setOp(re.stencilFail,re.stencilZFail,re.stencilZPass)),te(re.polygonOffset,re.polygonOffsetFactor,re.polygonOffsetUnits)}function N(re){C!==re&&(re?a.frontFace(2304):a.frontFace(2305),C=re)}function W(re){re!==st?(de(2884),re!==I&&(re===Zl?a.cullFace(1029):re===Fd?a.cullFace(1028):a.cullFace(1032))):Oe(2884),I=re}function ie(re){re!==j&&(Q&&a.lineWidth(re),j=re)}function te(re,Fe,Be){re?(de(32823),(U!==Fe||B!==Be)&&(a.polygonOffset(Fe,Be),U=Fe,B=Be)):Oe(32823)}function se(re){re?de(3089):Oe(3089)}function ce(re){re===void 0&&(re=33984+Z-1),Y!==re&&(a.activeTexture(re),Y=re)}function be(re,Fe){Y===null&&ce();var Be=ee[Y];Be===void 0&&(Be={type:void 0,texture:void 0},ee[Y]=Be),(Be.type!==re||Be.texture!==Fe)&&(a.bindTexture(re,Fe||pe[re]),Be.type=re,Be.texture=Fe)}function Te(){var re=ee[Y];re!==void 0&&re.type!==void 0&&(a.bindTexture(re.type,null),re.type=void 0,re.texture=void 0)}function Ee(){try{a.compressedTexImage2D.apply(a,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function F(){try{a.texImage2D.apply(a,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function V(){try{a.texImage3D.apply(a,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function Me(re){le.equals(re)===!1&&(a.scissor(re.x,re.y,re.z,re.w),le.copy(re))}function ge(re){ue.equals(re)===!1&&(a.viewport(re.x,re.y,re.z,re.w),ue.copy(re))}function De(){v={},Y=null,ee={},m=null,w=null,C=null,I=null,c.reset(),f.reset(),d.reset()}return{buffers:{color:c,depth:f,stencil:d},enable:de,disable:Oe,useProgram:H,setBlending:M,setMaterial:O,setFlipSided:N,setCullFace:W,setLineWidth:ie,setPolygonOffset:te,setScissorTest:se,activeTexture:ce,bindTexture:be,unbindTexture:Te,compressedTexImage2D:Ee,texImage2D:F,texImage3D:V,scissor:Me,viewport:ge,reset:De}}function QA(a,t,e,n,r,i,o){var l,u,c=r.isWebGL2,f=r.maxTextures,d=r.maxCubemapSize,v=r.maxTextureSize,m=r.maxSamples,g=new WeakMap,w,_=!1;try{_=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function x(F,V){return _?new OffscreenCanvas(F,V):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function y(F,V,Me,ge){var De=1;if((F.width>ge||F.height>ge)&&(De=ge/Math.max(F.width,F.height)),De<1||V===!0)if(typeof HTMLImageElement!="undefined"&&Ht(F,HTMLImageElement)||typeof HTMLCanvasElement!="undefined"&&Ht(F,HTMLCanvasElement)||typeof ImageBitmap!="undefined"&&Ht(F,ImageBitmap)){var re=V?lt.floorPowerOfTwo:Math.floor,Fe=re(De*F.width),Be=re(De*F.height);w===void 0&&(w=x(Fe,Be));var je=Me?x(Fe,Be):w;je.width=Fe,je.height=Be;var Ue=je.getContext("2d");return Ue.drawImage(F,0,0,Fe,Be),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+F.width+"x"+F.height+") to ("+Fe+"x"+Be+")."),je}else return"data"in F&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+F.width+"x"+F.height+")."),F;return F}function E(F){return lt.isPowerOfTwo(F.width)&&lt.isPowerOfTwo(F.height)}function R(F){return c?!1:F.wrapS!==Xn||F.wrapT!==Xn||F.minFilter!==an&&F.minFilter!==sn}function A(F,V){return F.generateMipmaps&&V&&F.minFilter!==an&&F.minFilter!==sn}function T(F,V,Me,ge){a.generateMipmap(F);var De=n.get(V);De.__maxMipLevel=Math.log(Math.max(Me,ge))*Math.LOG2E}function C(F,V,Me){if(c===!1)return V;if(F!==null){if(a[F]!==void 0)return a[F];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+F+"'")}var ge=V;return V===6403&&(Me===5126&&(ge=33326),Me===5131&&(ge=33325),Me===5121&&(ge=33321)),V===6407&&(Me===5126&&(ge=34837),Me===5131&&(ge=34843),Me===5121&&(ge=32849)),V===6408&&(Me===5126&&(ge=34836),Me===5131&&(ge=34842),Me===5121&&(ge=32856)),(ge===33325||ge===33326||ge===34842||ge===34836)&&t.get("EXT_color_buffer_float"),ge}function I(F){return F===an||F===Vi||F===Xa?9728:9729}function j(F){var V=F.target;V.removeEventListener("dispose",j),B(V),V.isVideoTexture&&g.delete(V),o.memory.textures--}function U(F){var V=F.target;V.removeEventListener("dispose",U),Z(V),o.memory.textures--}function B(F){var V=n.get(F);V.__webglInit!==void 0&&(a.deleteTexture(V.__webglTexture),n.remove(F))}function Z(F){var V=n.get(F),Me=n.get(F.texture);if(!!F){if(Me.__webglTexture!==void 0&&a.deleteTexture(Me.__webglTexture),F.depthTexture&&F.depthTexture.dispose(),F.isWebGLCubeRenderTarget)for(var ge=0;ge<6;ge++)a.deleteFramebuffer(V.__webglFramebuffer[ge]),V.__webglDepthbuffer&&a.deleteRenderbuffer(V.__webglDepthbuffer[ge]);else a.deleteFramebuffer(V.__webglFramebuffer),V.__webglDepthbuffer&&a.deleteRenderbuffer(V.__webglDepthbuffer),V.__webglMultisampledFramebuffer&&a.deleteFramebuffer(V.__webglMultisampledFramebuffer),V.__webglColorRenderbuffer&&a.deleteRenderbuffer(V.__webglColorRenderbuffer),V.__webglDepthRenderbuffer&&a.deleteRenderbuffer(V.__webglDepthRenderbuffer);n.remove(F.texture),n.remove(F)}}var Q=0;function J(){Q=0}function q(){var F=Q;return F>=f&&console.warn("THREE.WebGLTextures: Trying to use "+F+" texture units while this GPU supports only "+f),Q+=1,F}function Y(F,V){var Me=n.get(F);if(F.isVideoTexture&&se(F),F.version>0&&Me.__version!==F.version){var ge=F.image;if(ge===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(ge.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{L(Me,F,V);return}}e.activeTexture(33984+V),e.bindTexture(3553,Me.__webglTexture)}function ee(F,V){var Me=n.get(F);if(F.version>0&&Me.__version!==F.version){L(Me,F,V);return}e.activeTexture(33984+V),e.bindTexture(35866,Me.__webglTexture)}function le(F,V){var Me=n.get(F);if(F.version>0&&Me.__version!==F.version){L(Me,F,V);return}e.activeTexture(33984+V),e.bindTexture(32879,Me.__webglTexture)}function ue(F,V){if(F.image.length===6){var Me=n.get(F);if(F.version>0&&Me.__version!==F.version){H(Me,F),e.activeTexture(33984+V),e.bindTexture(34067,Me.__webglTexture),a.pixelStorei(37440,F.flipY);for(var ge=F&&(F.isCompressedTexture||F.image[0].isCompressedTexture),De=F.image[0]&&F.image[0].isDataTexture,re=[],Fe=0;Fe<6;Fe++)!ge&&!De?re[Fe]=y(F.image[Fe],!1,!0,d):re[Fe]=De?F.image[Fe].image:F.image[Fe];var Be=re[0],je=E(Be)||c,Ue=i.convert(F.format),Ae=i.convert(F.type),ct=C(F.internalFormat,Ue,Ae);Oe(34067,F,je);var ft;if(ge){for(var en=0;en<6;en++){ft=re[en].mipmaps;for(var Ft=0;Ft<ft.length;Ft++){var _t=ft[Ft];F.format!==Lr&&F.format!==Hr?Ue!==null?e.compressedTexImage2D(34069+en,Ft,ct,_t.width,_t.height,0,_t.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):e.texImage2D(34069+en,Ft,ct,_t.width,_t.height,0,Ue,Ae,_t.data)}}Me.__maxMipLevel=ft.length-1}else{ft=F.mipmaps;for(var Bt=0;Bt<6;Bt++)if(De){e.texImage2D(34069+Bt,0,ct,re[Bt].width,re[Bt].height,0,Ue,Ae,re[Bt].data);for(var $t=0;$t<ft.length;$t++){var pi=ft[$t],Ln=pi.image[Bt].image;e.texImage2D(34069+Bt,$t+1,ct,Ln.width,Ln.height,0,Ue,Ae,Ln.data)}}else{e.texImage2D(34069+Bt,0,ct,Ue,Ae,re[Bt]);for(var er=0;er<ft.length;er++){var kn=ft[er];e.texImage2D(34069+Bt,er+1,ct,Ue,Ae,kn.image[Bt])}}Me.__maxMipLevel=ft.length}A(F,je)&&T(34067,F,Be.width,Be.height),Me.__version=F.version,F.onUpdate&&F.onUpdate(F)}else e.activeTexture(33984+V),e.bindTexture(34067,Me.__webglTexture)}}function he(F,V){e.activeTexture(33984+V),e.bindTexture(34067,n.get(F).__webglTexture)}var pe=(l={},kt(l,bi,10497),kt(l,Xn,33071),kt(l,qa,33648),l),de=(u={},kt(u,an,9728),kt(u,Vi,9984),kt(u,Xa,9986),kt(u,sn,9729),kt(u,Ds,9985),kt(u,ga,9987),u);function Oe(F,V,Me){Me?(a.texParameteri(F,10242,pe[V.wrapS]),a.texParameteri(F,10243,pe[V.wrapT]),(F===32879||F===35866)&&a.texParameteri(F,32882,pe[V.wrapR]),a.texParameteri(F,10240,de[V.magFilter]),a.texParameteri(F,10241,de[V.minFilter])):(a.texParameteri(F,10242,33071),a.texParameteri(F,10243,33071),(F===32879||F===35866)&&a.texParameteri(F,32882,33071),(V.wrapS!==Xn||V.wrapT!==Xn)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),a.texParameteri(F,10240,I(V.magFilter)),a.texParameteri(F,10241,I(V.minFilter)),V.minFilter!==an&&V.minFilter!==sn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));var ge=t.get("EXT_texture_filter_anisotropic");if(ge){if(V.type===Gr&&t.get("OES_texture_float_linear")===null||V.type===ya&&(c||t.get("OES_texture_half_float_linear"))===null)return;(V.anisotropy>1||n.get(V).__currentAnisotropy)&&(a.texParameterf(F,ge.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(V.anisotropy,r.getMaxAnisotropy())),n.get(V).__currentAnisotropy=V.anisotropy)}}function H(F,V){F.__webglInit===void 0&&(F.__webglInit=!0,V.addEventListener("dispose",j),F.__webglTexture=a.createTexture(),o.memory.textures++)}function L(F,V,Me){var ge=3553;V.isDataTexture2DArray&&(ge=35866),V.isDataTexture3D&&(ge=32879),H(F,V),e.activeTexture(33984+Me),e.bindTexture(ge,F.__webglTexture),a.pixelStorei(37440,V.flipY),a.pixelStorei(37441,V.premultiplyAlpha),a.pixelStorei(3317,V.unpackAlignment);var De=R(V)&&E(V.image)===!1,re=y(V.image,De,!1,v),Fe=E(re)||c,Be=i.convert(V.format),je=i.convert(V.type),Ue=C(V.internalFormat,Be,je);Oe(ge,V,Fe);var Ae,ct=V.mipmaps;if(V.isDepthTexture)Ue=6402,c?V.type===Gr?Ue=36012:V.type===ko?Ue=33190:V.type===Io?Ue=35056:Ue=33189:V.type===Gr&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),V.format===Do&&Ue===6402&&V.type!==iu&&V.type!==ko&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),V.type=iu,je=i.convert(V.type)),V.format===Fs&&Ue===6402&&(Ue=34041,V.type!==Io&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),V.type=Io,je=i.convert(V.type))),e.texImage2D(3553,0,Ue,re.width,re.height,0,Be,je,null);else if(V.isDataTexture)if(ct.length>0&&Fe){for(var ft=0,en=ct.length;ft<en;ft++)Ae=ct[ft],e.texImage2D(3553,ft,Ue,Ae.width,Ae.height,0,Be,je,Ae.data);V.generateMipmaps=!1,F.__maxMipLevel=ct.length-1}else e.texImage2D(3553,0,Ue,re.width,re.height,0,Be,je,re.data),F.__maxMipLevel=0;else if(V.isCompressedTexture){for(var Ft=0,_t=ct.length;Ft<_t;Ft++)Ae=ct[Ft],V.format!==Lr&&V.format!==Hr?Be!==null?e.compressedTexImage2D(3553,Ft,Ue,Ae.width,Ae.height,0,Ae.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):e.texImage2D(3553,Ft,Ue,Ae.width,Ae.height,0,Be,je,Ae.data);F.__maxMipLevel=ct.length-1}else if(V.isDataTexture2DArray)e.texImage3D(35866,0,Ue,re.width,re.height,re.depth,0,Be,je,re.data),F.__maxMipLevel=0;else if(V.isDataTexture3D)e.texImage3D(32879,0,Ue,re.width,re.height,re.depth,0,Be,je,re.data),F.__maxMipLevel=0;else if(ct.length>0&&Fe){for(var Bt=0,$t=ct.length;Bt<$t;Bt++)Ae=ct[Bt],e.texImage2D(3553,Bt,Ue,Be,je,Ae);V.generateMipmaps=!1,F.__maxMipLevel=ct.length-1}else e.texImage2D(3553,0,Ue,Be,je,re),F.__maxMipLevel=0;A(V,Fe)&&T(ge,V,re.width,re.height),F.__version=V.version,V.onUpdate&&V.onUpdate(V)}function G(F,V,Me,ge){var De=i.convert(V.texture.format),re=i.convert(V.texture.type),Fe=C(V.texture.internalFormat,De,re);e.texImage2D(ge,0,Fe,V.width,V.height,0,De,re,null),a.bindFramebuffer(36160,F),a.framebufferTexture2D(36160,Me,ge,n.get(V.texture).__webglTexture,0),a.bindFramebuffer(36160,null)}function z(F,V,Me){if(a.bindRenderbuffer(36161,F),V.depthBuffer&&!V.stencilBuffer){var ge=33189;if(Me){var De=V.depthTexture;De&&De.isDepthTexture&&(De.type===Gr?ge=36012:De.type===ko&&(ge=33190));var re=te(V);a.renderbufferStorageMultisample(36161,re,ge,V.width,V.height)}else a.renderbufferStorage(36161,ge,V.width,V.height);a.framebufferRenderbuffer(36160,36096,36161,F)}else if(V.depthBuffer&&V.stencilBuffer){if(Me){var Fe=te(V);a.renderbufferStorageMultisample(36161,Fe,35056,V.width,V.height)}else a.renderbufferStorage(36161,34041,V.width,V.height);a.framebufferRenderbuffer(36160,33306,36161,F)}else{var Be=i.convert(V.texture.format),je=i.convert(V.texture.type),Ue=C(V.texture.internalFormat,Be,je);if(Me){var Ae=te(V);a.renderbufferStorageMultisample(36161,Ae,Ue,V.width,V.height)}else a.renderbufferStorage(36161,Ue,V.width,V.height)}a.bindRenderbuffer(36161,null)}function M(F,V){var Me=V&&V.isWebGLCubeRenderTarget;if(Me)throw new Error("Depth Texture with cube render targets is not supported");if(a.bindFramebuffer(36160,F),!(V.depthTexture&&V.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(V.depthTexture).__webglTexture||V.depthTexture.image.width!==V.width||V.depthTexture.image.height!==V.height)&&(V.depthTexture.image.width=V.width,V.depthTexture.image.height=V.height,V.depthTexture.needsUpdate=!0),Y(V.depthTexture,0);var ge=n.get(V.depthTexture).__webglTexture;if(V.depthTexture.format===Do)a.framebufferTexture2D(36160,36096,3553,ge,0);else if(V.depthTexture.format===Fs)a.framebufferTexture2D(36160,33306,3553,ge,0);else throw new Error("Unknown depthTexture format")}function O(F){var V=n.get(F),Me=F.isWebGLCubeRenderTarget===!0;if(F.depthTexture){if(Me)throw new Error("target.depthTexture not supported in Cube render targets");M(V.__webglFramebuffer,F)}else if(Me){V.__webglDepthbuffer=[];for(var ge=0;ge<6;ge++)a.bindFramebuffer(36160,V.__webglFramebuffer[ge]),V.__webglDepthbuffer[ge]=a.createRenderbuffer(),z(V.__webglDepthbuffer[ge],F,!1)}else a.bindFramebuffer(36160,V.__webglFramebuffer),V.__webglDepthbuffer=a.createRenderbuffer(),z(V.__webglDepthbuffer,F,!1);a.bindFramebuffer(36160,null)}function N(F){var V=n.get(F),Me=n.get(F.texture);F.addEventListener("dispose",U),Me.__webglTexture=a.createTexture(),o.memory.textures++;var ge=F.isWebGLCubeRenderTarget===!0,De=F.isWebGLMultisampleRenderTarget===!0,re=E(F)||c;if(c&&F.texture.format===Hr&&(F.texture.type===Gr||F.texture.type===ya)&&(F.texture.format=Lr,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),ge){V.__webglFramebuffer=[];for(var Fe=0;Fe<6;Fe++)V.__webglFramebuffer[Fe]=a.createFramebuffer()}else if(V.__webglFramebuffer=a.createFramebuffer(),De)if(c){V.__webglMultisampledFramebuffer=a.createFramebuffer(),V.__webglColorRenderbuffer=a.createRenderbuffer(),a.bindRenderbuffer(36161,V.__webglColorRenderbuffer);var Be=i.convert(F.texture.format),je=i.convert(F.texture.type),Ue=C(F.texture.internalFormat,Be,je),Ae=te(F);a.renderbufferStorageMultisample(36161,Ae,Ue,F.width,F.height),a.bindFramebuffer(36160,V.__webglMultisampledFramebuffer),a.framebufferRenderbuffer(36160,36064,36161,V.__webglColorRenderbuffer),a.bindRenderbuffer(36161,null),F.depthBuffer&&(V.__webglDepthRenderbuffer=a.createRenderbuffer(),z(V.__webglDepthRenderbuffer,F,!0)),a.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(ge){e.bindTexture(34067,Me.__webglTexture),Oe(34067,F.texture,re);for(var ct=0;ct<6;ct++)G(V.__webglFramebuffer[ct],F,36064,34069+ct);A(F.texture,re)&&T(34067,F.texture,F.width,F.height),e.bindTexture(34067,null)}else e.bindTexture(3553,Me.__webglTexture),Oe(3553,F.texture,re),G(V.__webglFramebuffer,F,36064,3553),A(F.texture,re)&&T(3553,F.texture,F.width,F.height),e.bindTexture(3553,null);F.depthBuffer&&O(F)}function W(F){var V=F.texture,Me=E(F)||c;if(A(V,Me)){var ge=F.isWebGLCubeRenderTarget?34067:3553,De=n.get(V).__webglTexture;e.bindTexture(ge,De),T(ge,V,F.width,F.height),e.bindTexture(ge,null)}}function ie(F){if(F.isWebGLMultisampleRenderTarget)if(c){var V=n.get(F);a.bindFramebuffer(36008,V.__webglMultisampledFramebuffer),a.bindFramebuffer(36009,V.__webglFramebuffer);var Me=F.width,ge=F.height,De=16384;F.depthBuffer&&(De|=256),F.stencilBuffer&&(De|=1024),a.blitFramebuffer(0,0,Me,ge,0,0,Me,ge,De,9728),a.bindFramebuffer(36160,V.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function te(F){return c&&F.isWebGLMultisampleRenderTarget?Math.min(m,F.samples):0}function se(F){var V=o.render.frame;g.get(F)!==V&&(g.set(F,V),F.update())}var ce=!1,be=!1;function Te(F,V){F&&F.isWebGLRenderTarget&&(ce===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),ce=!0),F=F.texture),Y(F,V)}function Ee(F,V){F&&F.isWebGLCubeRenderTarget&&(be===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),be=!0),F=F.texture),F&&F.isCubeTexture||Array.isArray(F.image)&&F.image.length===6?ue(F,V):he(F,V)}this.allocateTextureUnit=q,this.resetTextureUnits=J,this.setTexture2D=Y,this.setTexture2DArray=ee,this.setTexture3D=le,this.setTextureCube=ue,this.setTextureCubeDynamic=he,this.setupRenderTarget=N,this.updateRenderTargetMipmap=W,this.updateMultisampleRenderTarget=ie,this.safeSetTexture2D=Te,this.safeSetTextureCube=Ee}function eC(a,t,e){var n=e.isWebGL2;function r(i){var o;if(i===xi)return 5121;if(i===Wd)return 32819;if(i===$d)return 32820;if(i===jd)return 33635;if(i===Vd)return 5120;if(i===ru)return 5122;if(i===iu)return 5123;if(i===gh)return 5124;if(i===ko)return 5125;if(i===Gr)return 5126;if(i===ya)return n?5131:(o=t.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(i===yh)return 6406;if(i===Hr)return 6407;if(i===Lr)return 6408;if(i===qd)return 6409;if(i===wh)return 6410;if(i===Do)return 6402;if(i===Fs)return 34041;if(i===tg)return 6403;if(i===Yd)return 36244;if(i===Jd)return 33319;if(i===Zd)return 33320;if(i===Bs)return 36248;if(i===ng)return 36249;if(i===Kd||i===bh||i===au||i===wa)if(o=t.get("WEBGL_compressed_texture_s3tc"),o!==null){if(i===Kd)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===bh)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===au)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===wa)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===xh||i===_h||i===Sh||i===Us)if(o=t.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(i===xh)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===_h)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===Sh)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===Us)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===Mh)return o=t.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if((i===ou||i===su)&&(o=t.get("WEBGL_compressed_texture_etc"),o!==null)){if(i===ou)return o.COMPRESSED_RGB8_ETC2;if(i===su)return o.COMPRESSED_RGBA8_ETC2_EAC}if(i===Qd||i===ep||i===Eh||i===tp||i===np||i===rp||i===lu||i===Gs||i===Th||i===ip||i===uu||i===Fo||i===rg||i===ap||i===sp||i===lp||i===cu||i===up||i===Ah||i===Ch||i===cp||i===hp||i===Lh||i===ig||i===ag||i===og||i===Rh||i===sg)return o=t.get("WEBGL_compressed_texture_astc"),o!==null?i:null;if(i===op)return o=t.get("EXT_texture_compression_bptc"),o!==null?i:null;if(i===Io)return n?34042:(o=t.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:r}}function Og(a){fn.call(this),this.cameras=a||[]}Og.prototype=Object.assign(Object.create(fn.prototype),{constructor:Og,isArrayCamera:!0});function La(){Qe.call(this),this.type="Group"}La.prototype=Object.assign(Object.create(Qe.prototype),{constructor:La,isGroup:!0});function rf(){this._targetRay=null,this._grip=null,this._hand=null}Object.assign(rf.prototype,{constructor:rf,getHandSpace:function(){if(this._hand===null&&(this._hand=new La,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints=[],this._hand.inputState={pinching:!1},window.XRHand))for(var t=0;t<=window.XRHand.LITTLE_PHALANX_TIP;t++){var e=new La;e.matrixAutoUpdate=!1,e.visible=!1,this._hand.joints.push(e),this._hand.add(e)}return this._hand},getTargetRaySpace:function(){return this._targetRay===null&&(this._targetRay=new La,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return this._grip===null&&(this._grip=new La,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this},disconnect:function(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this},update:function(t,e,n){var r=null,i=null,o=null,l=this._targetRay,u=this._grip,c=this._hand;if(t)if(c&&t.hand){o=!0;for(var f=0;f<=window.XRHand.LITTLE_PHALANX_TIP;f++)if(t.hand[f]){var d=e.getJointPose(t.hand[f],n),v=c.joints[f];d!==null&&(v.matrix.fromArray(d.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.jointRadius=d.radius),v.visible=d!==null;var m=c.joints[window.XRHand.INDEX_PHALANX_TIP],g=c.joints[window.XRHand.THUMB_PHALANX_TIP],w=m.position.distanceTo(g.position),_=.02,x=.005;c.inputState.pinching&&w>_+x?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!c.inputState.pinching&&w<=_-x&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}}else l!==null&&(r=e.getPose(t.targetRaySpace,n),r!==null&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale))),u!==null&&t.gripSpace&&(i=e.getPose(t.gripSpace,n),i!==null&&(u.matrix.fromArray(i.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale)));return l!==null&&(l.visible=r!==null),u!==null&&(u.visible=i!==null),c!==null&&(c.visible=o!==null),this}});function ub(a,t){var e=this,n=null,r=1,i=null,o="local-floor",l=null,u=[],c=new Map,f=new fn;f.layers.enable(1),f.viewport=new Qt;var d=new fn;d.layers.enable(2),d.viewport=new Qt;var v=[f,d],m=new Og;m.layers.enable(1),m.layers.enable(2);var g=null,w=null;this.enabled=!1,this.isPresenting=!1,this.getController=function(B){var Z=u[B];return Z===void 0&&(Z=new rf,u[B]=Z),Z.getTargetRaySpace()},this.getControllerGrip=function(B){var Z=u[B];return Z===void 0&&(Z=new rf,u[B]=Z),Z.getGripSpace()},this.getHand=function(B){var Z=u[B];return Z===void 0&&(Z=new rf,u[B]=Z),Z.getHandSpace()};function _(B){var Z=c.get(B.inputSource);Z&&Z.dispatchEvent({type:B.type})}function x(){c.forEach(function(B,Z){B.disconnect(Z)}),c.clear(),a.setFramebuffer(null),a.setRenderTarget(a.getRenderTarget()),U.stop(),e.isPresenting=!1,e.dispatchEvent({type:"sessionend"})}function y(B){i=B,U.setContext(n),U.start(),e.isPresenting=!0,e.dispatchEvent({type:"sessionstart"})}this.setFramebufferScaleFactor=function(B){r=B,e.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(B){o=B,e.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return i},this.getSession=function(){return n},this.setSession=function(B){if(n=B,n!==null){n.addEventListener("select",_),n.addEventListener("selectstart",_),n.addEventListener("selectend",_),n.addEventListener("squeeze",_),n.addEventListener("squeezestart",_),n.addEventListener("squeezeend",_),n.addEventListener("end",x);var Z=t.getContextAttributes();Z.xrCompatible!==!0&&t.makeXRCompatible();var Q={antialias:Z.antialias,alpha:Z.alpha,depth:Z.depth,stencil:Z.stencil,framebufferScaleFactor:r},J=new XRWebGLLayer(n,t,Q);n.updateRenderState({baseLayer:J}),n.requestReferenceSpace(o).then(y),n.addEventListener("inputsourceschange",E)}};function E(B){for(var Z=n.inputSources,Q=0;Q<u.length;Q++)c.set(Z[Q],u[Q]);for(var J=0;J<B.removed.length;J++){var q=B.removed[J],Y=c.get(q);Y&&(Y.dispatchEvent({type:"disconnected",data:q}),c.delete(q))}for(var ee=0;ee<B.added.length;ee++){var le=B.added[ee],ue=c.get(le);ue&&ue.dispatchEvent({type:"connected",data:le})}}var R=new D,A=new D;function T(B,Z,Q){R.setFromMatrixPosition(Z.matrixWorld),A.setFromMatrixPosition(Q.matrixWorld);var J=R.distanceTo(A),q=Z.projectionMatrix.elements,Y=Q.projectionMatrix.elements,ee=q[14]/(q[10]-1),le=q[14]/(q[10]+1),ue=(q[9]+1)/q[5],he=(q[9]-1)/q[5],pe=(q[8]-1)/q[0],de=(Y[8]+1)/Y[0],Oe=ee*pe,H=ee*de,L=J/(-pe+de),G=L*-pe;Z.matrixWorld.decompose(B.position,B.quaternion,B.scale),B.translateX(G),B.translateZ(L),B.matrixWorld.compose(B.position,B.quaternion,B.scale),B.matrixWorldInverse.getInverse(B.matrixWorld);var z=ee+L,M=le+L,O=Oe-G,N=H+(J-G),W=ue*le/M*z,ie=he*le/M*z;B.projectionMatrix.makePerspective(O,N,W,ie,z,M)}function C(B,Z){Z===null?B.matrixWorld.copy(B.matrix):B.matrixWorld.multiplyMatrices(Z.matrixWorld,B.matrix),B.matrixWorldInverse.getInverse(B.matrixWorld)}this.getCamera=function(B){m.near=d.near=f.near=B.near,m.far=d.far=f.far=B.far,(g!==m.near||w!==m.far)&&(n.updateRenderState({depthNear:m.near,depthFar:m.far}),g=m.near,w=m.far);var Z=B.parent,Q=m.cameras;C(m,Z);for(var J=0;J<Q.length;J++)C(Q[J],Z);B.matrixWorld.copy(m.matrixWorld);for(var q=B.children,Y=0,ee=q.length;Y<ee;Y++)q[Y].updateMatrixWorld(!0);return Q.length===2?T(m,f,d):m.projectionMatrix.copy(f.projectionMatrix),m};var I=null;function j(B,Z){if(l=Z.getViewerPose(i),l!==null){var Q=l.views,J=n.renderState.baseLayer;a.setFramebuffer(J.framebuffer);var q=!1;Q.length!==m.cameras.length&&(m.cameras.length=0,q=!0);for(var Y=0;Y<Q.length;Y++){var ee=Q[Y],le=J.getViewport(ee),ue=v[Y];ue.matrix.fromArray(ee.transform.matrix),ue.projectionMatrix.fromArray(ee.projectionMatrix),ue.viewport.set(le.x,le.y,le.width,le.height),Y===0&&m.matrix.copy(ue.matrix),q===!0&&m.cameras.push(ue)}}for(var he=n.inputSources,pe=0;pe<u.length;pe++){var de=u[pe],Oe=he[pe];de.update(Oe,Z,i)}I&&I(B,Z)}var U=new Op;U.setAnimationLoop(j),this.setAnimationLoop=function(B){I=B},this.dispose=function(){}}Object.assign(ub.prototype,rr.prototype);function tC(a){function t(x,y){x.fogColor.value.copy(y.color),y.isFog?(x.fogNear.value=y.near,x.fogFar.value=y.far):y.isFogExp2&&(x.fogDensity.value=y.density)}function e(x,y,E,R){y.isMeshBasicMaterial?n(x,y):y.isMeshLambertMaterial?(n(x,y),u(x,y)):y.isMeshToonMaterial?(n(x,y),f(x,y)):y.isMeshPhongMaterial?(n(x,y),c(x,y)):y.isMeshStandardMaterial?(n(x,y),y.isMeshPhysicalMaterial?v(x,y):d(x,y)):y.isMeshMatcapMaterial?(n(x,y),m(x,y)):y.isMeshDepthMaterial?(n(x,y),g(x,y)):y.isMeshDistanceMaterial?(n(x,y),w(x,y)):y.isMeshNormalMaterial?(n(x,y),_(x,y)):y.isLineBasicMaterial?(r(x,y),y.isLineDashedMaterial&&i(x,y)):y.isPointsMaterial?o(x,y,E,R):y.isSpriteMaterial?l(x,y):y.isShadowMaterial?(x.color.value.copy(y.color),x.opacity.value=y.opacity):y.isShaderMaterial&&(y.uniformsNeedUpdate=!1)}function n(x,y){x.opacity.value=y.opacity,y.color&&x.diffuse.value.copy(y.color),y.emissive&&x.emissive.value.copy(y.emissive).multiplyScalar(y.emissiveIntensity),y.map&&(x.map.value=y.map),y.alphaMap&&(x.alphaMap.value=y.alphaMap),y.specularMap&&(x.specularMap.value=y.specularMap);var E=a.get(y).envMap;if(E){x.envMap.value=E,x.flipEnvMap.value=E.isCubeTexture?-1:1,x.reflectivity.value=y.reflectivity,x.refractionRatio.value=y.refractionRatio;var R=a.get(E).__maxMipLevel;R!==void 0&&(x.maxMipLevel.value=R)}y.lightMap&&(x.lightMap.value=y.lightMap,x.lightMapIntensity.value=y.lightMapIntensity),y.aoMap&&(x.aoMap.value=y.aoMap,x.aoMapIntensity.value=y.aoMapIntensity);var A;y.map?A=y.map:y.specularMap?A=y.specularMap:y.displacementMap?A=y.displacementMap:y.normalMap?A=y.normalMap:y.bumpMap?A=y.bumpMap:y.roughnessMap?A=y.roughnessMap:y.metalnessMap?A=y.metalnessMap:y.alphaMap?A=y.alphaMap:y.emissiveMap?A=y.emissiveMap:y.clearcoatMap?A=y.clearcoatMap:y.clearcoatNormalMap?A=y.clearcoatNormalMap:y.clearcoatRoughnessMap&&(A=y.clearcoatRoughnessMap),A!==void 0&&(A.isWebGLRenderTarget&&(A=A.texture),A.matrixAutoUpdate===!0&&A.updateMatrix(),x.uvTransform.value.copy(A.matrix));var T;y.aoMap?T=y.aoMap:y.lightMap&&(T=y.lightMap),T!==void 0&&(T.isWebGLRenderTarget&&(T=T.texture),T.matrixAutoUpdate===!0&&T.updateMatrix(),x.uv2Transform.value.copy(T.matrix))}function r(x,y){x.diffuse.value.copy(y.color),x.opacity.value=y.opacity}function i(x,y){x.dashSize.value=y.dashSize,x.totalSize.value=y.dashSize+y.gapSize,x.scale.value=y.scale}function o(x,y,E,R){x.diffuse.value.copy(y.color),x.opacity.value=y.opacity,x.size.value=y.size*E,x.scale.value=R*.5,y.map&&(x.map.value=y.map),y.alphaMap&&(x.alphaMap.value=y.alphaMap);var A;y.map?A=y.map:y.alphaMap&&(A=y.alphaMap),A!==void 0&&(A.matrixAutoUpdate===!0&&A.updateMatrix(),x.uvTransform.value.copy(A.matrix))}function l(x,y){x.diffuse.value.copy(y.color),x.opacity.value=y.opacity,x.rotation.value=y.rotation,y.map&&(x.map.value=y.map),y.alphaMap&&(x.alphaMap.value=y.alphaMap);var E;y.map?E=y.map:y.alphaMap&&(E=y.alphaMap),E!==void 0&&(E.matrixAutoUpdate===!0&&E.updateMatrix(),x.uvTransform.value.copy(E.matrix))}function u(x,y){y.emissiveMap&&(x.emissiveMap.value=y.emissiveMap)}function c(x,y){x.specular.value.copy(y.specular),x.shininess.value=Math.max(y.shininess,1e-4),y.emissiveMap&&(x.emissiveMap.value=y.emissiveMap),y.bumpMap&&(x.bumpMap.value=y.bumpMap,x.bumpScale.value=y.bumpScale,y.side===Tn&&(x.bumpScale.value*=-1)),y.normalMap&&(x.normalMap.value=y.normalMap,x.normalScale.value.copy(y.normalScale),y.side===Tn&&x.normalScale.value.negate()),y.displacementMap&&(x.displacementMap.value=y.displacementMap,x.displacementScale.value=y.displacementScale,x.displacementBias.value=y.displacementBias)}function f(x,y){y.gradientMap&&(x.gradientMap.value=y.gradientMap),y.emissiveMap&&(x.emissiveMap.value=y.emissiveMap),y.bumpMap&&(x.bumpMap.value=y.bumpMap,x.bumpScale.value=y.bumpScale,y.side===Tn&&(x.bumpScale.value*=-1)),y.normalMap&&(x.normalMap.value=y.normalMap,x.normalScale.value.copy(y.normalScale),y.side===Tn&&x.normalScale.value.negate()),y.displacementMap&&(x.displacementMap.value=y.displacementMap,x.displacementScale.value=y.displacementScale,x.displacementBias.value=y.displacementBias)}function d(x,y){x.roughness.value=y.roughness,x.metalness.value=y.metalness,y.roughnessMap&&(x.roughnessMap.value=y.roughnessMap),y.metalnessMap&&(x.metalnessMap.value=y.metalnessMap),y.emissiveMap&&(x.emissiveMap.value=y.emissiveMap),y.bumpMap&&(x.bumpMap.value=y.bumpMap,x.bumpScale.value=y.bumpScale,y.side===Tn&&(x.bumpScale.value*=-1)),y.normalMap&&(x.normalMap.value=y.normalMap,x.normalScale.value.copy(y.normalScale),y.side===Tn&&x.normalScale.value.negate()),y.displacementMap&&(x.displacementMap.value=y.displacementMap,x.displacementScale.value=y.displacementScale,x.displacementBias.value=y.displacementBias);var E=a.get(y).envMap;E&&(x.envMapIntensity.value=y.envMapIntensity)}function v(x,y){d(x,y),x.reflectivity.value=y.reflectivity,x.clearcoat.value=y.clearcoat,x.clearcoatRoughness.value=y.clearcoatRoughness,y.sheen&&x.sheen.value.copy(y.sheen),y.clearcoatMap&&(x.clearcoatMap.value=y.clearcoatMap),y.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=y.clearcoatRoughnessMap),y.clearcoatNormalMap&&(x.clearcoatNormalScale.value.copy(y.clearcoatNormalScale),x.clearcoatNormalMap.value=y.clearcoatNormalMap,y.side===Tn&&x.clearcoatNormalScale.value.negate()),x.transmission.value=y.transmission,y.transmissionMap&&(x.transmissionMap.value=y.transmissionMap)}function m(x,y){y.matcap&&(x.matcap.value=y.matcap),y.bumpMap&&(x.bumpMap.value=y.bumpMap,x.bumpScale.value=y.bumpScale,y.side===Tn&&(x.bumpScale.value*=-1)),y.normalMap&&(x.normalMap.value=y.normalMap,x.normalScale.value.copy(y.normalScale),y.side===Tn&&x.normalScale.value.negate()),y.displacementMap&&(x.displacementMap.value=y.displacementMap,x.displacementScale.value=y.displacementScale,x.displacementBias.value=y.displacementBias)}function g(x,y){y.displacementMap&&(x.displacementMap.value=y.displacementMap,x.displacementScale.value=y.displacementScale,x.displacementBias.value=y.displacementBias)}function w(x,y){y.displacementMap&&(x.displacementMap.value=y.displacementMap,x.displacementScale.value=y.displacementScale,x.displacementBias.value=y.displacementBias),x.referencePosition.value.copy(y.referencePosition),x.nearDistance.value=y.nearDistance,x.farDistance.value=y.farDistance}function _(x,y){y.bumpMap&&(x.bumpMap.value=y.bumpMap,x.bumpScale.value=y.bumpScale,y.side===Tn&&(x.bumpScale.value*=-1)),y.normalMap&&(x.normalMap.value=y.normalMap,x.normalScale.value.copy(y.normalScale),y.side===Tn&&x.normalScale.value.negate()),y.displacementMap&&(x.displacementMap.value=y.displacementMap,x.displacementScale.value=y.displacementScale,x.displacementBias.value=y.displacementBias)}return{refreshFogUniforms:t,refreshMaterialUniforms:e}}function Xp(a){a=a||{};var t=a.canvas!==void 0?a.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),e=a.context!==void 0?a.context:null,n=a.alpha!==void 0?a.alpha:!1,r=a.depth!==void 0?a.depth:!0,i=a.stencil!==void 0?a.stencil:!0,o=a.antialias!==void 0?a.antialias:!1,l=a.premultipliedAlpha!==void 0?a.premultipliedAlpha:!0,u=a.preserveDrawingBuffer!==void 0?a.preserveDrawingBuffer:!1,c=a.powerPreference!==void 0?a.powerPreference:"default",f=a.failIfMajorPerformanceCaveat!==void 0?a.failIfMajorPerformanceCaveat:!1,d=null,v=null;this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=On,this.physicallyCorrectLights=!1,this.toneMapping=$a,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var m=this,g=!1,w=null,_=0,x=0,y=null,E=null,R=-1,A=null,T=null,C=new Qt,I=new Qt,j=null,U=t.width,B=t.height,Z=1,Q=null,J=null,q=new Qt(0,0,U,B),Y=new Qt(0,0,U,B),ee=!1,le=new Iu,ue=!1,he=!1,pe=new ht,de=new D,Oe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function H(){return y===null?Z:1}var L=e;function G(X,we){for(var fe=0;fe<X.length;fe++){var Se=X[fe],ze=t.getContext(Se,we);if(ze!==null)return ze}return null}try{var z={alpha:n,depth:r,stencil:i,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:c,failIfMajorPerformanceCaveat:f};if(t.addEventListener("webglcontextlost",Ft,!1),t.addEventListener("webglcontextrestored",_t,!1),L===null){var M=["webgl2","webgl","experimental-webgl"];if(m.isWebGL1Renderer===!0&&M.shift(),L=G(M,z),L===null)throw G(M)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}L.getShaderPrecisionFormat===void 0&&(L.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(X){throw console.error("THREE.WebGLRenderer: "+X.message),X}var O,N,W,ie,te,se,ce,be,Te,Ee,F,V,Me,ge,De,re,Fe,Be,je,Ue,Ae;function ct(){O=new N1(L),N=new R1(L,O,a),N.isWebGL2===!1&&(O.get("WEBGL_depth_texture"),O.get("OES_texture_float"),O.get("OES_texture_half_float"),O.get("OES_texture_half_float_linear"),O.get("OES_standard_derivatives"),O.get("OES_element_index_uint"),O.get("OES_vertex_array_object"),O.get("ANGLE_instanced_arrays")),O.get("OES_texture_float_linear"),Ue=new eC(L,O,N),W=new KA(L,O,N),W.scissor(I.copy(Y).multiplyScalar(Z).floor()),W.viewport(C.copy(q).multiplyScalar(Z).floor()),ie=new D1(L),te=new GA,se=new QA(L,O,W,te,N,Ue,ie),ce=new O1(m),be=new Np(L,N),Ae=new C1(L,O,be,N),Te=new k1(L,be,ie,Ae),Ee=new G1(L,Te,be,ie),Fe=new U1(L),De=new P1(te),F=new UA(m,ce,O,N,Ae,De),V=new tC(te),Me=new VA(te),ge=new YA,re=new A1(m,ce,W,Ee,l),Be=new L1(L,O,ie,N),je=new I1(L,O,ie,N),ie.programs=F.programs,m.capabilities=N,m.extensions=O,m.properties=te,m.renderLists=Me,m.state=W,m.info=ie}ct();var ft=new ub(m,L);this.xr=ft;var en=new lb(m,Ee,N.maxTextureSize);this.shadowMap=en,this.getContext=function(){return L},this.getContextAttributes=function(){return L.getContextAttributes()},this.forceContextLoss=function(){var X=O.get("WEBGL_lose_context");X&&X.loseContext()},this.forceContextRestore=function(){var X=O.get("WEBGL_lose_context");X&&X.restoreContext()},this.getPixelRatio=function(){return Z},this.setPixelRatio=function(X){X!==void 0&&(Z=X,this.setSize(U,B,!1))},this.getSize=function(X){return X===void 0&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),X=new xe),X.set(U,B)},this.setSize=function(X,we,fe){if(ft.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}U=X,B=we,t.width=Math.floor(X*Z),t.height=Math.floor(we*Z),fe!==!1&&(t.style.width=X+"px",t.style.height=we+"px"),this.setViewport(0,0,X,we)},this.getDrawingBufferSize=function(X){return X===void 0&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),X=new xe),X.set(U*Z,B*Z).floor()},this.setDrawingBufferSize=function(X,we,fe){U=X,B=we,Z=fe,t.width=Math.floor(X*fe),t.height=Math.floor(we*fe),this.setViewport(0,0,X,we)},this.getCurrentViewport=function(X){return X===void 0&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),X=new Qt),X.copy(C)},this.getViewport=function(X){return X.copy(q)},this.setViewport=function(X,we,fe,Se){X.isVector4?q.set(X.x,X.y,X.z,X.w):q.set(X,we,fe,Se),W.viewport(C.copy(q).multiplyScalar(Z).floor())},this.getScissor=function(X){return X.copy(Y)},this.setScissor=function(X,we,fe,Se){X.isVector4?Y.set(X.x,X.y,X.z,X.w):Y.set(X,we,fe,Se),W.scissor(I.copy(Y).multiplyScalar(Z).floor())},this.getScissorTest=function(){return ee},this.setScissorTest=function(X){W.setScissorTest(ee=X)},this.setOpaqueSort=function(X){Q=X},this.setTransparentSort=function(X){J=X},this.getClearColor=function(){return re.getClearColor()},this.setClearColor=function(){re.setClearColor.apply(re,arguments)},this.getClearAlpha=function(){return re.getClearAlpha()},this.setClearAlpha=function(){re.setClearAlpha.apply(re,arguments)},this.clear=function(X,we,fe){var Se=0;(X===void 0||X)&&(Se|=16384),(we===void 0||we)&&(Se|=256),(fe===void 0||fe)&&(Se|=1024),L.clear(Se)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Ft,!1),t.removeEventListener("webglcontextrestored",_t,!1),Me.dispose(),ge.dispose(),te.dispose(),ce.dispose(),Ee.dispose(),Ae.dispose(),ft.dispose(),In.stop()};function Ft(X){X.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function _t(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1,ct()}function Bt(X){var we=X.target;we.removeEventListener("dispose",Bt),$t(we)}function $t(X){pi(X),te.remove(X)}function pi(X){var we=te.get(X).program;we!==void 0&&F.releaseProgram(we)}function Ln(X,we){X.render(function(fe){m.renderBufferImmediate(fe,we)})}this.renderBufferImmediate=function(X,we){Ae.initAttributes();var fe=te.get(X);X.hasPositions&&!fe.position&&(fe.position=L.createBuffer()),X.hasNormals&&!fe.normal&&(fe.normal=L.createBuffer()),X.hasUvs&&!fe.uv&&(fe.uv=L.createBuffer()),X.hasColors&&!fe.color&&(fe.color=L.createBuffer());var Se=we.getAttributes();X.hasPositions&&(L.bindBuffer(34962,fe.position),L.bufferData(34962,X.positionArray,35048),Ae.enableAttribute(Se.position),L.vertexAttribPointer(Se.position,3,5126,!1,0,0)),X.hasNormals&&(L.bindBuffer(34962,fe.normal),L.bufferData(34962,X.normalArray,35048),Ae.enableAttribute(Se.normal),L.vertexAttribPointer(Se.normal,3,5126,!1,0,0)),X.hasUvs&&(L.bindBuffer(34962,fe.uv),L.bufferData(34962,X.uvArray,35048),Ae.enableAttribute(Se.uv),L.vertexAttribPointer(Se.uv,2,5126,!1,0,0)),X.hasColors&&(L.bindBuffer(34962,fe.color),L.bufferData(34962,X.colorArray,35048),Ae.enableAttribute(Se.color),L.vertexAttribPointer(Se.color,3,5126,!1,0,0)),Ae.disableUnusedAttributes(),L.drawArrays(4,0,X.count),X.count=0},this.renderBufferDirect=function(X,we,fe,Se,ze,Ut){we===null&&(we=Oe);var At=ze.isMesh&&ze.matrixWorld.determinant()<0,Kt=wd(X,we,Se,ze);W.setMaterial(Se,At);var gt=fe.index,Dn=fe.attributes.position;if(gt===null){if(Dn===void 0||Dn.count===0)return}else if(gt.count===0)return;var yn=1;Se.wireframe===!0&&(gt=Te.getWireframeAttribute(fe),yn=2),(Se.morphTargets||Se.morphNormals)&&Fe.update(ze,fe,Se,Kt),Ae.setup(ze,Se,Kt,fe,gt);var Fn,it=Be;gt!==null&&(Fn=be.get(gt),it=je,it.setIndex(Fn));var lr=gt!==null?gt.count:Dn.count,ur=fe.drawRange.start*yn,qt=fe.drawRange.count*yn,jn=Ut!==null?Ut.start*yn:0,zt=Ut!==null?Ut.count*yn:1/0,xt=Math.max(ur,jn),Xt=Math.min(lr,ur+qt,jn+zt)-1,Lt=Math.max(0,Xt-xt+1);if(Lt!==0){if(ze.isMesh)Se.wireframe===!0?(W.setLineWidth(Se.wireframeLinewidth*H()),it.setMode(1)):it.setMode(4);else if(ze.isLine){var Gt=Se.linewidth;Gt===void 0&&(Gt=1),W.setLineWidth(Gt*H()),ze.isLineSegments?it.setMode(1):ze.isLineLoop?it.setMode(2):it.setMode(3)}else ze.isPoints?it.setMode(0):ze.isSprite&&it.setMode(4);if(ze.isInstancedMesh)it.renderInstances(xt,Lt,ze.count);else if(fe.isInstancedBufferGeometry){var vn=Math.min(fe.instanceCount,fe._maxInstanceCount);it.renderInstances(xt,Lt,vn)}else it.render(xt,Lt)}},this.compile=function(X,we){v=ge.get(X,we),v.init(),X.traverse(function(Se){Se.isLight&&(v.pushLight(Se),Se.castShadow&&v.pushShadow(Se))}),v.setupLights(we);var fe=new WeakMap;X.traverse(function(Se){var ze=Se.material;if(ze)if(Array.isArray(ze))for(var Ut=0;Ut<ze.length;Ut++){var At=ze[Ut];fe.has(At)===!1&&(Rn(At,X,Se),fe.set(At))}else fe.has(ze)===!1&&(Rn(ze,X,Se),fe.set(ze))})};var er=null;function kn(X){ft.isPresenting||er&&er(X)}var In=new Op;In.setAnimationLoop(kn),typeof window!="undefined"&&In.setContext(window),this.setAnimationLoop=function(X){er=X,ft.setAnimationLoop(X),X===null?In.stop():In.start()},this.render=function(X,we){var fe,Se;if(arguments[2]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),fe=arguments[2]),arguments[3]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),Se=arguments[3]),we!==void 0&&we.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(g!==!0){Ae.resetDefaultState(),R=-1,A=null,X.autoUpdate===!0&&X.updateMatrixWorld(),we.parent===null&&we.updateMatrixWorld(),ft.enabled===!0&&ft.isPresenting===!0&&(we=ft.getCamera(we)),X.isScene===!0&&X.onBeforeRender(m,X,we,fe||y),v=ge.get(X,we),v.init(),pe.multiplyMatrices(we.projectionMatrix,we.matrixWorldInverse),le.setFromProjectionMatrix(pe),he=this.localClippingEnabled,ue=De.init(this.clippingPlanes,he,we),d=Me.get(X,we),d.init(),Mn(X,we,0,m.sortObjects),d.finish(),m.sortObjects===!0&&d.sort(Q,J),ue===!0&&De.beginShadows();var ze=v.state.shadowsArray;en.render(ze,X,we),v.setupLights(we),ue===!0&&De.endShadows(),this.info.autoReset===!0&&this.info.reset(),fe!==void 0&&this.setRenderTarget(fe),re.render(d,X,we,Se);var Ut=d.opaque,At=d.transparent;Ut.length>0&&pr(Ut,X,we),At.length>0&&pr(At,X,we),X.isScene===!0&&X.onAfterRender(m,X,we),y!==null&&(se.updateRenderTargetMipmap(y),se.updateMultisampleRenderTarget(y)),W.buffers.depth.setTest(!0),W.buffers.depth.setMask(!0),W.buffers.color.setMask(!0),W.setPolygonOffset(!1),d=null,v=null}};function Mn(X,we,fe,Se){if(X.visible!==!1){var ze=X.layers.test(we.layers);if(ze){if(X.isGroup)fe=X.renderOrder;else if(X.isLOD)X.autoUpdate===!0&&X.update(we);else if(X.isLight)v.pushLight(X),X.castShadow&&v.pushShadow(X);else if(X.isSprite){if(!X.frustumCulled||le.intersectsSprite(X)){Se&&de.setFromMatrixPosition(X.matrixWorld).applyMatrix4(pe);var Ut=Ee.update(X),At=X.material;At.visible&&d.push(X,Ut,At,fe,de.z,null)}}else if(X.isImmediateRenderObject)Se&&de.setFromMatrixPosition(X.matrixWorld).applyMatrix4(pe),d.push(X,null,X.material,fe,de.z,null);else if((X.isMesh||X.isLine||X.isPoints)&&(X.isSkinnedMesh&&X.skeleton.frame!==ie.render.frame&&(X.skeleton.update(),X.skeleton.frame=ie.render.frame),!X.frustumCulled||le.intersectsObject(X))){Se&&de.setFromMatrixPosition(X.matrixWorld).applyMatrix4(pe);var Kt=Ee.update(X),gt=X.material;if(Array.isArray(gt))for(var Dn=Kt.groups,yn=0,Fn=Dn.length;yn<Fn;yn++){var it=Dn[yn],lr=gt[it.materialIndex];lr&&lr.visible&&d.push(X,Kt,lr,fe,de.z,it)}else gt.visible&&d.push(X,Kt,gt,fe,de.z,null)}}for(var ur=X.children,qt=0,jn=ur.length;qt<jn;qt++)Mn(ur[qt],we,fe,Se)}}function pr(X,we,fe){for(var Se=we.isScene===!0?we.overrideMaterial:null,ze=0,Ut=X.length;ze<Ut;ze++){var At=X[ze],Kt=At.object,gt=At.geometry,Dn=Se===null?At.material:Se,yn=At.group;if(fe.isArrayCamera){T=fe;for(var Fn=fe.cameras,it=0,lr=Fn.length;it<lr;it++){var ur=Fn[it];Kt.layers.test(ur.layers)&&(W.viewport(C.copy(ur.viewport)),v.setupLights(ur),Ui(Kt,we,ur,gt,Dn,yn))}}else T=null,Ui(Kt,we,fe,gt,Dn,yn)}}function Ui(X,we,fe,Se,ze,Ut){if(X.onBeforeRender(m,we,fe,Se,ze,Ut),v=ge.get(we,T||fe),X.modelViewMatrix.multiplyMatrices(fe.matrixWorldInverse,X.matrixWorld),X.normalMatrix.getNormalMatrix(X.modelViewMatrix),X.isImmediateRenderObject){var At=wd(fe,we,ze,X);W.setMaterial(ze),Ae.reset(),Ln(X,At)}else m.renderBufferDirect(fe,we,Se,ze,X,Ut);X.onAfterRender(m,we,fe,Se,ze,Ut),v=ge.get(we,T||fe)}function Rn(X,we,fe){we.isScene!==!0&&(we=Oe);var Se=te.get(X),ze=v.state.lights,Ut=v.state.shadowsArray,At=ze.state.version,Kt=F.getParameters(X,ze.state,Ut,we,fe),gt=F.getProgramCacheKey(Kt),Dn=Se.program,yn=!0;if(Dn===void 0)X.addEventListener("dispose",Bt);else if(Dn.cacheKey!==gt)pi(X);else if(Se.lightsStateVersion!==At)yn=!1;else if(Kt.shaderID!==void 0){var Fn=X.isMeshStandardMaterial?we.environment:null;Se.envMap=ce.get(X.envMap||Fn);return}else yn=!1;yn&&(Kt.uniforms=F.getUniforms(X),X.onBeforeCompile(Kt,m),Dn=F.acquireProgram(Kt,gt),Se.program=Dn,Se.uniforms=Kt.uniforms,Se.outputEncoding=Kt.outputEncoding);var it=Se.uniforms;(!X.isShaderMaterial&&!X.isRawShaderMaterial||X.clipping===!0)&&(Se.numClippingPlanes=De.numPlanes,Se.numIntersection=De.numIntersection,it.clippingPlanes=De.uniform),Se.environment=X.isMeshStandardMaterial?we.environment:null,Se.fog=we.fog,Se.envMap=ce.get(X.envMap||Se.environment),Se.needsLights=Ic(X),Se.lightsStateVersion=At,Se.needsLights&&(it.ambientLightColor.value=ze.state.ambient,it.lightProbe.value=ze.state.probe,it.directionalLights.value=ze.state.directional,it.directionalLightShadows.value=ze.state.directionalShadow,it.spotLights.value=ze.state.spot,it.spotLightShadows.value=ze.state.spotShadow,it.rectAreaLights.value=ze.state.rectArea,it.ltc_1.value=ze.state.rectAreaLTC1,it.ltc_2.value=ze.state.rectAreaLTC2,it.pointLights.value=ze.state.point,it.pointLightShadows.value=ze.state.pointShadow,it.hemisphereLights.value=ze.state.hemi,it.directionalShadowMap.value=ze.state.directionalShadowMap,it.directionalShadowMatrix.value=ze.state.directionalShadowMatrix,it.spotShadowMap.value=ze.state.spotShadowMap,it.spotShadowMatrix.value=ze.state.spotShadowMatrix,it.pointShadowMap.value=ze.state.pointShadowMap,it.pointShadowMatrix.value=ze.state.pointShadowMatrix);var lr=Se.program.getUniforms(),ur=is.seqWithValue(lr.seq,it);Se.uniformsList=ur}function wd(X,we,fe,Se){we.isScene!==!0&&(we=Oe),se.resetTextureUnits();var ze=we.fog,Ut=fe.isMeshStandardMaterial?we.environment:null,At=y===null?m.outputEncoding:y.texture.encoding,Kt=ce.get(fe.envMap||Ut),gt=te.get(fe),Dn=v.state.lights;if(ue===!0&&(he===!0||X!==A)){var yn=X===A&&fe.id===R;De.setState(fe,X,yn)}fe.version===gt.__version?(fe.fog&&gt.fog!==ze||gt.environment!==Ut||gt.needsLights&&gt.lightsStateVersion!==Dn.state.version||gt.numClippingPlanes!==void 0&&(gt.numClippingPlanes!==De.numPlanes||gt.numIntersection!==De.numIntersection)||gt.outputEncoding!==At||gt.envMap!==Kt)&&Rn(fe,we,Se):(Rn(fe,we,Se),gt.__version=fe.version);var Fn=!1,it=!1,lr=!1,ur=gt.program,qt=ur.getUniforms(),jn=gt.uniforms;if(W.useProgram(ur.program)&&(Fn=!0,it=!0,lr=!0),fe.id!==R&&(R=fe.id,it=!0),Fn||A!==X){if(qt.setValue(L,"projectionMatrix",X.projectionMatrix),N.logarithmicDepthBuffer&&qt.setValue(L,"logDepthBufFC",2/(Math.log(X.far+1)/Math.LN2)),A!==X&&(A=X,it=!0,lr=!0),fe.isShaderMaterial||fe.isMeshPhongMaterial||fe.isMeshToonMaterial||fe.isMeshStandardMaterial||fe.envMap){var zt=qt.map.cameraPosition;zt!==void 0&&zt.setValue(L,de.setFromMatrixPosition(X.matrixWorld))}(fe.isMeshPhongMaterial||fe.isMeshToonMaterial||fe.isMeshLambertMaterial||fe.isMeshBasicMaterial||fe.isMeshStandardMaterial||fe.isShaderMaterial)&&qt.setValue(L,"isOrthographic",X.isOrthographicCamera===!0),(fe.isMeshPhongMaterial||fe.isMeshToonMaterial||fe.isMeshLambertMaterial||fe.isMeshBasicMaterial||fe.isMeshStandardMaterial||fe.isShaderMaterial||fe.isShadowMaterial||fe.skinning)&&qt.setValue(L,"viewMatrix",X.matrixWorldInverse)}if(fe.skinning){qt.setOptional(L,Se,"bindMatrix"),qt.setOptional(L,Se,"bindMatrixInverse");var xt=Se.skeleton;if(xt){var Xt=xt.bones;if(N.floatVertexTextures){if(xt.boneTexture===void 0){var Lt=Math.sqrt(Xt.length*4);Lt=lt.ceilPowerOfTwo(Lt),Lt=Math.max(Lt,4);var Gt=new Float32Array(Lt*Lt*4);Gt.set(xt.boneMatrices);var vn=new ar(Gt,Lt,Lt,Lr,Gr);xt.boneMatrices=Gt,xt.boneTexture=vn,xt.boneTextureSize=Lt}qt.setValue(L,"boneTexture",xt.boneTexture,se),qt.setValue(L,"boneTextureSize",xt.boneTextureSize)}else qt.setOptional(L,xt,"boneMatrices")}}return(it||gt.receiveShadow!==Se.receiveShadow)&&(gt.receiveShadow=Se.receiveShadow,qt.setValue(L,"receiveShadow",Se.receiveShadow)),it&&(qt.setValue(L,"toneMappingExposure",m.toneMappingExposure),gt.needsLights&&kc(jn,lr),ze&&fe.fog&&V.refreshFogUniforms(jn,ze),V.refreshMaterialUniforms(jn,fe,Z,B),is.upload(L,gt.uniformsList,jn,se)),fe.isShaderMaterial&&fe.uniformsNeedUpdate===!0&&(is.upload(L,gt.uniformsList,jn,se),fe.uniformsNeedUpdate=!1),fe.isSpriteMaterial&&qt.setValue(L,"center",Se.center),qt.setValue(L,"modelViewMatrix",Se.modelViewMatrix),qt.setValue(L,"normalMatrix",Se.normalMatrix),qt.setValue(L,"modelMatrix",Se.matrixWorld),ur}function kc(X,we){X.ambientLightColor.needsUpdate=we,X.lightProbe.needsUpdate=we,X.directionalLights.needsUpdate=we,X.directionalLightShadows.needsUpdate=we,X.pointLights.needsUpdate=we,X.pointLightShadows.needsUpdate=we,X.spotLights.needsUpdate=we,X.spotLightShadows.needsUpdate=we,X.rectAreaLights.needsUpdate=we,X.hemisphereLights.needsUpdate=we}function Ic(X){return X.isMeshLambertMaterial||X.isMeshToonMaterial||X.isMeshPhongMaterial||X.isMeshStandardMaterial||X.isShadowMaterial||X.isShaderMaterial&&X.lights===!0}this.setFramebuffer=function(X){w!==X&&y===null&&L.bindFramebuffer(36160,X),w=X},this.getActiveCubeFace=function(){return _},this.getActiveMipmapLevel=function(){return x},this.getRenderList=function(){return d},this.setRenderList=function(X){d=X},this.getRenderState=function(){return v},this.setRenderState=function(X){v=X},this.getRenderTarget=function(){return y},this.setRenderTarget=function(X){var we=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,fe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;y=X,_=we,x=fe,X&&te.get(X).__webglFramebuffer===void 0&&se.setupRenderTarget(X);var Se=w,ze=!1;if(X){var Ut=te.get(X).__webglFramebuffer;X.isWebGLCubeRenderTarget?(Se=Ut[we],ze=!0):X.isWebGLMultisampleRenderTarget?Se=te.get(X).__webglMultisampledFramebuffer:Se=Ut,C.copy(X.viewport),I.copy(X.scissor),j=X.scissorTest}else C.copy(q).multiplyScalar(Z).floor(),I.copy(Y).multiplyScalar(Z).floor(),j=ee;if(E!==Se&&(L.bindFramebuffer(36160,Se),E=Se),W.viewport(C),W.scissor(I),W.setScissorTest(j),ze){var At=te.get(X.texture);L.framebufferTexture2D(36160,36064,34069+we,At.__webglTexture,fe)}},this.readRenderTargetPixels=function(X,we,fe,Se,ze,Ut,At){if(!(X&&X.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}var Kt=te.get(X).__webglFramebuffer;if(X.isWebGLCubeRenderTarget&&At!==void 0&&(Kt=Kt[At]),Kt){var gt=!1;Kt!==E&&(L.bindFramebuffer(36160,Kt),gt=!0);try{var Dn=X.texture,yn=Dn.format,Fn=Dn.type;if(yn!==Lr&&Ue.convert(yn)!==L.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(Fn!==xi&&Ue.convert(Fn)!==L.getParameter(35738)&&!(Fn===Gr&&(N.isWebGL2||O.get("OES_texture_float")||O.get("WEBGL_color_buffer_float")))&&!(Fn===ya&&(N.isWebGL2?O.get("EXT_color_buffer_float"):O.get("EXT_color_buffer_half_float")))){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}L.checkFramebufferStatus(36160)===36053?we>=0&&we<=X.width-Se&&fe>=0&&fe<=X.height-ze&&L.readPixels(we,fe,Se,ze,Ue.convert(yn),Ue.convert(Fn),Ut):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{gt&&L.bindFramebuffer(36160,E)}}},this.copyFramebufferToTexture=function(X,we,fe){fe===void 0&&(fe=0);var Se=Math.pow(2,-fe),ze=Math.floor(we.image.width*Se),Ut=Math.floor(we.image.height*Se),At=Ue.convert(we.format);se.setTexture2D(we,0),L.copyTexImage2D(3553,fe,At,X.x,X.y,ze,Ut,0),W.unbindTexture()},this.copyTextureToTexture=function(X,we,fe,Se){Se===void 0&&(Se=0);var ze=we.image.width,Ut=we.image.height,At=Ue.convert(fe.format),Kt=Ue.convert(fe.type);se.setTexture2D(fe,0),L.pixelStorei(37440,fe.flipY),L.pixelStorei(37441,fe.premultiplyAlpha),L.pixelStorei(3317,fe.unpackAlignment),we.isDataTexture?L.texSubImage2D(3553,Se,X.x,X.y,ze,Ut,At,Kt,we.image.data):we.isCompressedTexture?L.compressedTexSubImage2D(3553,Se,X.x,X.y,we.mipmaps[0].width,we.mipmaps[0].height,At,we.mipmaps[0].data):L.texSubImage2D(3553,Se,X.x,X.y,At,Kt,we.image),Se===0&&fe.generateMipmaps&&L.generateMipmap(3553),W.unbindTexture()},this.initTexture=function(X){se.setTexture2D(X,0),W.unbindTexture()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function Ng(a){Xp.call(this,a)}Ng.prototype=Object.assign(Object.create(Xp.prototype),{constructor:Ng,isWebGL1Renderer:!0});var nC=function(){function a(t,e){ye(this,a),Object.defineProperty(this,"isFogExp2",{value:!0}),this.name="",this.color=new Ye(t),this.density=e!==void 0?e:25e-5}return Pe(a,[{key:"clone",value:function(){return new a(this.color,this.density)}},{key:"toJSON",value:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}]),a}(),rC=function(){function a(t,e,n){ye(this,a),Object.defineProperty(this,"isFog",{value:!0}),this.name="",this.color=new Ye(t),this.near=e!==void 0?e:1,this.far=n!==void 0?n:1e3}return Pe(a,[{key:"clone",value:function(){return new a(this.color,this.near,this.far)}},{key:"toJSON",value:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}]),a}(),sl=function(a){ke(e,a);var t=Ie(e);function e(){var n;return ye(this,e),n=t.call(this),Object.defineProperty(Tr(n),"isScene",{value:!0}),n.type="Scene",n.background=null,n.environment=null,n.fog=null,n.overrideMaterial=null,n.autoUpdate=!0,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:Tr(n)})),n}return Pe(e,[{key:"copy",value:function(r,i){return et(Ze(e.prototype),"copy",this).call(this,r,i),r.background!==null&&(this.background=r.background.clone()),r.environment!==null&&(this.environment=r.environment.clone()),r.fog!==null&&(this.fog=r.fog.clone()),r.overrideMaterial!==null&&(this.overrideMaterial=r.overrideMaterial.clone()),this.autoUpdate=r.autoUpdate,this.matrixAutoUpdate=r.matrixAutoUpdate,this}},{key:"toJSON",value:function(r){var i=et(Ze(e.prototype),"toJSON",this).call(this,r);return this.background!==null&&(i.object.background=this.background.toJSON(r)),this.environment!==null&&(i.object.environment=this.environment.toJSON(r)),this.fog!==null&&(i.object.fog=this.fog.toJSON()),i}}]),e}(Qe);function li(a,t){this.array=a,this.stride=t,this.count=a!==void 0?a.length/t:0,this.usage=Ws,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=lt.generateUUID()}Object.defineProperty(li.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}}),Object.assign(li.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this},copyAt:function(t,e,n){t*=this.stride,n*=e.stride;for(var r=0,i=this.stride;r<i;r++)this.array[t+r]=e.array[n+r];return this},set:function(t,e){return e===void 0&&(e=0),this.array.set(t,e),this},clone:function(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=lt.generateUUID()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new li(e,this.stride);return n.setUsage(this.usage),n},onUpload:function(t){return this.onUploadCallback=t,this},toJSON:function(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=lt.generateUUID()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});var ll=new D;function as(a,t,e,n){this.name="",this.data=a,this.itemSize=t,this.offset=e,this.normalized=n===!0}Object.defineProperties(as.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(t){this.data.needsUpdate=t}}}),Object.assign(as.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(t){for(var e=0,n=this.data.count;e<n;e++)ll.x=this.getX(e),ll.y=this.getY(e),ll.z=this.getZ(e),ll.applyMatrix4(t),this.setXYZ(e,ll.x,ll.y,ll.z);return this},setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this},setXYZ:function(t,e,n,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this},setXYZW:function(t,e,n,r,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this.data.array[t+3]=i,this},clone:function(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");for(var e=[],n=0;n<this.count;n++)for(var r=n*this.data.stride+this.offset,i=0;i<this.itemSize;i++)e.push(this.data.array[r+i]);return new at(new this.array.constructor(e),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new as(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)},toJSON:function(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");for(var e=[],n=0;n<this.count;n++)for(var r=n*this.data.stride+this.offset,i=0;i<this.itemSize;i++)e.push(this.data.array[r+i]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}});function ul(a){ut.call(this),this.type="SpriteMaterial",this.color=new Ye(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(a)}ul.prototype=Object.create(ut.prototype),ul.prototype.constructor=ul,ul.prototype.isSpriteMaterial=!0,ul.prototype.copy=function(a){return ut.prototype.copy.call(this,a),this.color.copy(a.color),this.map=a.map,this.alphaMap=a.alphaMap,this.rotation=a.rotation,this.sizeAttenuation=a.sizeAttenuation,this};var ju,af=new D,qu=new D,Xu=new D,Yu=new xe,of=new xe,cb=new ht,Yp=new D,sf=new D,Jp=new D,hb=new xe,kg=new xe,fb=new xe;function Ig(a){if(Qe.call(this),this.type="Sprite",ju===void 0){ju=new dt;var t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),e=new li(t,5);ju.setIndex([0,1,2,0,2,3]),ju.setAttribute("position",new as(e,3,0,!1)),ju.setAttribute("uv",new as(e,2,3,!1))}this.geometry=ju,this.material=a!==void 0?a:new ul,this.center=new xe(.5,.5)}Ig.prototype=Object.assign(Object.create(Qe.prototype),{constructor:Ig,isSprite:!0,raycast:function(t,e){t.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),qu.setFromMatrixScale(this.matrixWorld),cb.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Xu.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&qu.multiplyScalar(-Xu.z);var n=this.material.rotation,r,i;n!==0&&(i=Math.cos(n),r=Math.sin(n));var o=this.center;Zp(Yp.set(-.5,-.5,0),Xu,o,qu,r,i),Zp(sf.set(.5,-.5,0),Xu,o,qu,r,i),Zp(Jp.set(.5,.5,0),Xu,o,qu,r,i),hb.set(0,0),kg.set(1,0),fb.set(1,1);var l=t.ray.intersectTriangle(Yp,sf,Jp,!1,af);if(!(l===null&&(Zp(sf.set(-.5,.5,0),Xu,o,qu,r,i),kg.set(0,1),l=t.ray.intersectTriangle(Yp,Jp,sf,!1,af),l===null))){var u=t.ray.origin.distanceTo(af);u<t.near||u>t.far||e.push({distance:u,point:af.clone(),uv:ni.getUV(af,Yp,sf,Jp,hb,kg,fb,new xe),face:null,object:this})}},copy:function(t){return Qe.prototype.copy.call(this,t),t.center!==void 0&&this.center.copy(t.center),this.material=t.material,this}});function Zp(a,t,e,n,r,i){Yu.subVectors(a,e).addScalar(.5).multiply(n),r!==void 0?(of.x=i*Yu.x-r*Yu.y,of.y=r*Yu.x+i*Yu.y):of.copy(Yu),a.copy(t),a.x+=of.x,a.y+=of.y,a.applyMatrix4(cb)}var Kp=new D,db=new D;function Qp(){Qe.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}Qp.prototype=Object.assign(Object.create(Qe.prototype),{constructor:Qp,isLOD:!0,copy:function(t){Qe.prototype.copy.call(this,t,!1);for(var e=t.levels,n=0,r=e.length;n<r;n++){var i=e[n];this.addLevel(i.object.clone(),i.distance)}return this.autoUpdate=t.autoUpdate,this},addLevel:function(t,e){e===void 0&&(e=0),e=Math.abs(e);var n=this.levels,r;for(r=0;r<n.length&&!(e<n[r].distance);r++);return n.splice(r,0,{distance:e,object:t}),this.add(t),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(t){var e=this.levels;if(e.length>0){var n,r;for(n=1,r=e.length;n<r&&!(t<e[n].distance);n++);return e[n-1].object}return null},raycast:function(t,e){var n=this.levels;if(n.length>0){Kp.setFromMatrixPosition(this.matrixWorld);var r=t.ray.origin.distanceTo(Kp);this.getObjectForDistance(r).raycast(t,e)}},update:function(t){var e=this.levels;if(e.length>1){Kp.setFromMatrixPosition(t.matrixWorld),db.setFromMatrixPosition(this.matrixWorld);var n=Kp.distanceTo(db)/t.zoom;e[0].object.visible=!0;var r,i;for(r=1,i=e.length;r<i&&n>=e[r].distance;r++)e[r-1].object.visible=!1,e[r].object.visible=!0;for(this._currentLevel=r-1;r<i;r++)e[r].object.visible=!1}},toJSON:function(t){var e=Qe.prototype.toJSON.call(this,t);this.autoUpdate===!1&&(e.object.autoUpdate=!1),e.object.levels=[];for(var n=this.levels,r=0,i=n.length;r<i;r++){var o=n[r];e.object.levels.push({object:o.object.uuid,distance:o.distance})}return e}});function ev(a,t){a&&a.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),St.call(this,a,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new ht,this.bindMatrixInverse=new ht}ev.prototype=Object.assign(Object.create(St.prototype),{constructor:ev,isSkinnedMesh:!0,copy:function(t){return St.prototype.copy.call(this,t),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this},bind:function(t,e){this.skeleton=t,e===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var t=new Qt,e=this.geometry.attributes.skinWeight,n=0,r=e.count;n<r;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.w=e.getW(n);var i=1/t.manhattanLength();i!==1/0?t.multiplyScalar(i):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(t){St.prototype.updateMatrixWorld.call(this,t),this.bindMode==="attached"?this.bindMatrixInverse.getInverse(this.matrixWorld):this.bindMode==="detached"?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},boneTransform:function(){var a=new D,t=new Qt,e=new Qt,n=new D,r=new ht;return function(i,o){var l=this.skeleton,u=this.geometry;t.fromBufferAttribute(u.attributes.skinIndex,i),e.fromBufferAttribute(u.attributes.skinWeight,i),a.fromBufferAttribute(u.attributes.position,i).applyMatrix4(this.bindMatrix),o.set(0,0,0);for(var c=0;c<4;c++){var f=e.getComponent(c);if(f!==0){var d=t.getComponent(c);r.multiplyMatrices(l.bones[d].matrixWorld,l.boneInverses[d]),o.addScaledVector(n.copy(a).applyMatrix4(r),f)}}return o.applyMatrix4(this.bindMatrixInverse)}}()});var pb=new ht,iC=new ht;function tv(a,t){if(a=a||[],this.bones=a.slice(0),this.boneMatrices=new Float32Array(this.bones.length*16),this.frame=-1,t===void 0)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var e=0,n=this.bones.length;e<n;e++)this.boneInverses.push(new ht)}}Object.assign(tv.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var n=new ht;this.bones[t]&&n.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(n)}},pose:function(){for(var t=0,e=this.bones.length;t<e;t++){var n=this.bones[t];n&&n.matrixWorld.getInverse(this.boneInverses[t])}for(var r=0,i=this.bones.length;r<i;r++){var o=this.bones[r];o&&(o.parent&&o.parent.isBone?(o.matrix.getInverse(o.parent.matrixWorld),o.matrix.multiply(o.matrixWorld)):o.matrix.copy(o.matrixWorld),o.matrix.decompose(o.position,o.quaternion,o.scale))}},update:function(){for(var t=this.bones,e=this.boneInverses,n=this.boneMatrices,r=this.boneTexture,i=0,o=t.length;i<o;i++){var l=t[i]?t[i].matrixWorld:iC;pb.multiplyMatrices(l,e[i]),pb.toArray(n,i*16)}r!==void 0&&(r.needsUpdate=!0)},clone:function(){return new tv(this.bones,this.boneInverses)},getBoneByName:function(t){for(var e=0,n=this.bones.length;e<n;e++){var r=this.bones[e];if(r.name===t)return r}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}});function Dg(){Qe.call(this),this.type="Bone"}Dg.prototype=Object.assign(Object.create(Qe.prototype),{constructor:Dg,isBone:!0});var vb=new ht,mb=new ht,nv=[],lf=new St;function Fg(a,t,e){St.call(this,a,t),this.instanceMatrix=new at(new Float32Array(e*16),16),this.instanceColor=null,this.count=e,this.frustumCulled=!1}Fg.prototype=Object.assign(Object.create(St.prototype),{constructor:Fg,isInstancedMesh:!0,copy:function(t){return St.prototype.copy.call(this,t),this.instanceMatrix.copy(t.instanceMatrix),this.count=t.count,this},setColorAt:function(t,e){this.instanceColor===null&&(this.instanceColor=new at(new Float32Array(this.count*3),3)),e.toArray(this.instanceColor.array,t*3)},getMatrixAt:function(t,e){e.fromArray(this.instanceMatrix.array,t*16)},raycast:function(t,e){var n=this.matrixWorld,r=this.count;if(lf.geometry=this.geometry,lf.material=this.material,lf.material!==void 0)for(var i=0;i<r;i++){this.getMatrixAt(i,vb),mb.multiplyMatrices(n,vb),lf.matrixWorld=mb,lf.raycast(t,nv);for(var o=0,l=nv.length;o<l;o++){var u=nv[o];u.instanceId=i,u.object=this,e.push(u)}nv.length=0}},setMatrixAt:function(t,e){e.toArray(this.instanceMatrix.array,t*16)},updateMorphTargets:function(){}});function Ii(a){ut.call(this),this.type="LineBasicMaterial",this.color=new Ye(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(a)}Ii.prototype=Object.create(ut.prototype),Ii.prototype.constructor=Ii,Ii.prototype.isLineBasicMaterial=!0,Ii.prototype.copy=function(a){return ut.prototype.copy.call(this,a),this.color.copy(a.color),this.linewidth=a.linewidth,this.linecap=a.linecap,this.linejoin=a.linejoin,this.morphTargets=a.morphTargets,this};var gb=new D,yb=new D,wb=new ht,rv=new ro,iv=new Ei;function os(a,t,e){e===1&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),Qe.call(this),this.type="Line",this.geometry=a!==void 0?a:new dt,this.material=t!==void 0?t:new Ii,this.updateMorphTargets()}os.prototype=Object.assign(Object.create(Qe.prototype),{constructor:os,isLine:!0,copy:function(t){return Qe.prototype.copy.call(this,t),this.material=t.material,this.geometry=t.geometry,this},computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry)if(t.index===null){for(var e=t.attributes.position,n=[0],r=1,i=e.count;r<i;r++)gb.fromBufferAttribute(e,r-1),yb.fromBufferAttribute(e,r),n[r]=n[r-1],n[r]+=gb.distanceTo(yb);t.setAttribute("lineDistance",new Ve(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry){var o=t.vertices,l=t.lineDistances;l[0]=0;for(var u=1,c=o.length;u<c;u++)l[u]=l[u-1],l[u]+=o[u-1].distanceTo(o[u])}return this},raycast:function(t,e){var n=this.geometry,r=this.matrixWorld,i=t.params.Line.threshold;if(n.boundingSphere===null&&n.computeBoundingSphere(),iv.copy(n.boundingSphere),iv.applyMatrix4(r),iv.radius+=i,t.ray.intersectsSphere(iv)!==!1){wb.getInverse(r),rv.copy(t.ray).applyMatrix4(wb);var o=i/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,u=new D,c=new D,f=new D,d=new D,v=this&&this.isLineSegments?2:1;if(n.isBufferGeometry){var m=n.index,g=n.attributes,w=g.position.array;if(m!==null)for(var _=m.array,x=0,y=_.length-1;x<y;x+=v){var E=_[x],R=_[x+1];u.fromArray(w,E*3),c.fromArray(w,R*3);var A=rv.distanceSqToSegment(u,c,d,f);if(!(A>l)){d.applyMatrix4(this.matrixWorld);var T=t.ray.origin.distanceTo(d);T<t.near||T>t.far||e.push({distance:T,point:f.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}else for(var C=0,I=w.length/3-1;C<I;C+=v){u.fromArray(w,3*C),c.fromArray(w,3*C+3);var j=rv.distanceSqToSegment(u,c,d,f);if(!(j>l)){d.applyMatrix4(this.matrixWorld);var U=t.ray.origin.distanceTo(d);U<t.near||U>t.far||e.push({distance:U,point:f.clone().applyMatrix4(this.matrixWorld),index:C,face:null,faceIndex:null,object:this})}}}else if(n.isGeometry)for(var B=n.vertices,Z=B.length,Q=0;Q<Z-1;Q+=v){var J=rv.distanceSqToSegment(B[Q],B[Q+1],d,f);if(!(J>l)){d.applyMatrix4(this.matrixWorld);var q=t.ray.origin.distanceTo(d);q<t.near||q>t.far||e.push({distance:q,point:f.clone().applyMatrix4(this.matrixWorld),index:Q,face:null,faceIndex:null,object:this})}}}},updateMorphTargets:function(){var t=this.geometry;if(t.isBufferGeometry){var e=t.morphAttributes,n=Object.keys(e);if(n.length>0){var r=e[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,o=r.length;i<o;i++){var l=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=i}}}}else{var u=t.morphTargets;u!==void 0&&u.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});var av=new D,ov=new D;function uf(a,t){os.call(this,a,t),this.type="LineSegments"}uf.prototype=Object.assign(Object.create(os.prototype),{constructor:uf,isLineSegments:!0,computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry)if(t.index===null){for(var e=t.attributes.position,n=[],r=0,i=e.count;r<i;r+=2)av.fromBufferAttribute(e,r),ov.fromBufferAttribute(e,r+1),n[r]=r===0?0:n[r-1],n[r+1]=n[r]+av.distanceTo(ov);t.setAttribute("lineDistance",new Ve(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry)for(var o=t.vertices,l=t.lineDistances,u=0,c=o.length;u<c;u+=2)av.copy(o[u]),ov.copy(o[u+1]),l[u]=u===0?0:l[u-1],l[u+1]=l[u]+av.distanceTo(ov);return this}});function sv(a,t){os.call(this,a,t),this.type="LineLoop"}sv.prototype=Object.assign(Object.create(os.prototype),{constructor:sv,isLineLoop:!0});function ss(a){ut.call(this),this.type="PointsMaterial",this.color=new Ye(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(a)}ss.prototype=Object.create(ut.prototype),ss.prototype.constructor=ss,ss.prototype.isPointsMaterial=!0,ss.prototype.copy=function(a){return ut.prototype.copy.call(this,a),this.color.copy(a.color),this.map=a.map,this.alphaMap=a.alphaMap,this.size=a.size,this.sizeAttenuation=a.sizeAttenuation,this.morphTargets=a.morphTargets,this};var bb=new ht,Bg=new ro,lv=new Ei,uv=new D;function cv(a,t){Qe.call(this),this.type="Points",this.geometry=a!==void 0?a:new dt,this.material=t!==void 0?t:new ss,this.updateMorphTargets()}cv.prototype=Object.assign(Object.create(Qe.prototype),{constructor:cv,isPoints:!0,copy:function(t){return Qe.prototype.copy.call(this,t),this.material=t.material,this.geometry=t.geometry,this},raycast:function(t,e){var n=this.geometry,r=this.matrixWorld,i=t.params.Points.threshold;if(n.boundingSphere===null&&n.computeBoundingSphere(),lv.copy(n.boundingSphere),lv.applyMatrix4(r),lv.radius+=i,t.ray.intersectsSphere(lv)!==!1){bb.getInverse(r),Bg.copy(t.ray).applyMatrix4(bb);var o=i/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o;if(n.isBufferGeometry){var u=n.index,c=n.attributes,f=c.position.array;if(u!==null)for(var d=u.array,v=0,m=d.length;v<m;v++){var g=d[v];uv.fromArray(f,g*3),Ug(uv,g,l,r,t,e,this)}else for(var w=0,_=f.length/3;w<_;w++)uv.fromArray(f,w*3),Ug(uv,w,l,r,t,e,this)}else for(var x=n.vertices,y=0,E=x.length;y<E;y++)Ug(x[y],y,l,r,t,e,this)}},updateMorphTargets:function(){var t=this.geometry;if(t.isBufferGeometry){var e=t.morphAttributes,n=Object.keys(e);if(n.length>0){var r=e[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,o=r.length;i<o;i++){var l=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=i}}}}else{var u=t.morphTargets;u!==void 0&&u.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});function Ug(a,t,e,n,r,i,o){var l=Bg.distanceSqToPoint(a);if(l<e){var u=new D;Bg.closestPointToPoint(a,u),u.applyMatrix4(n);var c=r.ray.origin.distanceTo(u);if(c<r.near||c>r.far)return;i.push({distance:c,distanceToRay:Math.sqrt(l),point:u,index:t,face:null,object:o})}}function xb(a,t,e,n,r,i,o,l,u){Jt.call(this,a,t,e,n,r,i,o,l,u),this.format=o!==void 0?o:Hr,this.minFilter=i!==void 0?i:sn,this.magFilter=r!==void 0?r:sn,this.generateMipmaps=!1;var c=this;function f(){c.needsUpdate=!0,a.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in a&&a.requestVideoFrameCallback(f)}xb.prototype=Object.assign(Object.create(Jt.prototype),{constructor:xb,isVideoTexture:!0,update:function(){var t=this.image,e="requestVideoFrameCallback"in t;e===!1&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}});function cf(a,t,e,n,r,i,o,l,u,c,f,d){Jt.call(this,null,i,o,l,u,c,n,r,f,d),this.image={width:t,height:e},this.mipmaps=a,this.flipY=!1,this.generateMipmaps=!1}cf.prototype=Object.create(Jt.prototype),cf.prototype.constructor=cf,cf.prototype.isCompressedTexture=!0;function hf(a,t,e,n,r,i,o,l,u){Jt.call(this,a,t,e,n,r,i,o,l,u),this.needsUpdate=!0}hf.prototype=Object.create(Jt.prototype),hf.prototype.constructor=hf,hf.prototype.isCanvasTexture=!0;function hv(a,t,e,n,r,i,o,l,u,c){if(c=c!==void 0?c:Do,c!==Do&&c!==Fs)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");e===void 0&&c===Do&&(e=iu),e===void 0&&c===Fs&&(e=Io),Jt.call(this,null,n,r,i,o,l,c,e,u),this.image={width:a,height:t},this.magFilter=o!==void 0?o:an,this.minFilter=l!==void 0?l:an,this.flipY=!1,this.generateMipmaps=!1}hv.prototype=Object.create(Jt.prototype),hv.prototype.constructor=hv,hv.prototype.isDepthTexture=!0;var aC=function(a){ke(e,a);var t=Ie(e);function e(n){var r;ye(this,e),r=t.call(this),r.type="WireframeGeometry";var i=[],o=[0,0],l={},u=["a","b","c"];if(n&&n.isGeometry){for(var c=n.faces,f=0,d=c.length;f<d;f++)for(var v=c[f],m=0;m<3;m++){var g=v[u[m]],w=v[u[(m+1)%3]];o[0]=Math.min(g,w),o[1]=Math.max(g,w);var _=o[0]+","+o[1];l[_]===void 0&&(l[_]={index1:o[0],index2:o[1]})}for(var x in l){var y=l[x],E=n.vertices[y.index1];i.push(E.x,E.y,E.z),E=n.vertices[y.index2],i.push(E.x,E.y,E.z)}}else if(n&&n.isBufferGeometry){var R=new D;if(n.index!==null){var A=n.attributes.position,T=n.index,C=n.groups;C.length===0&&(C=[{start:0,count:T.count,materialIndex:0}]);for(var I=0,j=C.length;I<j;++I)for(var U=C[I],B=U.start,Z=U.count,Q=B,J=B+Z;Q<J;Q+=3)for(var q=0;q<3;q++){var Y=T.getX(Q+q),ee=T.getX(Q+(q+1)%3);o[0]=Math.min(Y,ee),o[1]=Math.max(Y,ee);var le=o[0]+","+o[1];l[le]===void 0&&(l[le]={index1:o[0],index2:o[1]})}for(var ue in l){var he=l[ue];R.fromBufferAttribute(A,he.index1),i.push(R.x,R.y,R.z),R.fromBufferAttribute(A,he.index2),i.push(R.x,R.y,R.z)}}else for(var pe=n.attributes.position,de=0,Oe=pe.count/3;de<Oe;de++)for(var H=0;H<3;H++){var L=3*de+H;R.fromBufferAttribute(pe,L),i.push(R.x,R.y,R.z);var G=3*de+(H+1)%3;R.fromBufferAttribute(pe,G),i.push(R.x,R.y,R.z)}}return r.setAttribute("position",new Ve(i,3)),r}return e}(dt);function fv(a,t,e){Zt.call(this),this.type="ParametricGeometry",this.parameters={func:a,slices:t,stacks:e},this.fromBufferGeometry(new ff(a,t,e)),this.mergeVertices()}fv.prototype=Object.create(Zt.prototype),fv.prototype.constructor=fv;function ff(a,t,e){dt.call(this),this.type="ParametricBufferGeometry",this.parameters={func:a,slices:t,stacks:e};var n=[],r=[],i=[],o=[],l=1e-5,u=new D,c=new D,f=new D,d=new D,v=new D;a.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");for(var m=t+1,g=0;g<=e;g++)for(var w=g/e,_=0;_<=t;_++){var x=_/t;a(x,w,c),r.push(c.x,c.y,c.z),x-l>=0?(a(x-l,w,f),d.subVectors(c,f)):(a(x+l,w,f),d.subVectors(f,c)),w-l>=0?(a(x,w-l,f),v.subVectors(c,f)):(a(x,w+l,f),v.subVectors(f,c)),u.crossVectors(d,v).normalize(),i.push(u.x,u.y,u.z),o.push(x,w)}for(var y=0;y<e;y++)for(var E=0;E<t;E++){var R=y*m+E,A=y*m+E+1,T=(y+1)*m+E+1,C=(y+1)*m+E;n.push(R,A,C),n.push(A,T,C)}this.setIndex(n),this.setAttribute("position",new Ve(r,3)),this.setAttribute("normal",new Ve(i,3)),this.setAttribute("uv",new Ve(o,2))}ff.prototype=Object.create(dt.prototype),ff.prototype.constructor=ff;var oC=function(a){ke(e,a);var t=Ie(e);function e(n,r,i,o){var l;return ye(this,e),l=t.call(this),l.type="PolyhedronGeometry",l.parameters={vertices:n,indices:r,radius:i,detail:o},l.fromBufferGeometry(new Ju(n,r,i,o)),l.mergeVertices(),l}return e}(Zt),Ju=function(a){ke(e,a);var t=Ie(e);function e(n,r,i,o){var l;ye(this,e),l=t.call(this),l.type="PolyhedronBufferGeometry",l.parameters={vertices:n,indices:r,radius:i,detail:o},i=i||1,o=o||0;var u=[],c=[];f(o),v(i),m(),l.setAttribute("position",new Ve(u,3)),l.setAttribute("normal",new Ve(u.slice(),3)),l.setAttribute("uv",new Ve(c,2)),o===0?l.computeVertexNormals():l.normalizeNormals();function f(A){for(var T=new D,C=new D,I=new D,j=0;j<r.length;j+=3)_(r[j+0],T),_(r[j+1],C),_(r[j+2],I),d(T,C,I,A)}function d(A,T,C,I){for(var j=Math.pow(2,I),U=[],B=0;B<=j;B++){U[B]=[];for(var Z=A.clone().lerp(C,B/j),Q=T.clone().lerp(C,B/j),J=j-B,q=0;q<=J;q++)q===0&&B===j?U[B][q]=Z:U[B][q]=Z.clone().lerp(Q,q/J)}for(var Y=0;Y<j;Y++)for(var ee=0;ee<2*(j-Y)-1;ee++){var le=Math.floor(ee/2);ee%2==0?(w(U[Y][le+1]),w(U[Y+1][le]),w(U[Y][le])):(w(U[Y][le+1]),w(U[Y+1][le+1]),w(U[Y+1][le]))}}function v(A){for(var T=new D,C=0;C<u.length;C+=3)T.x=u[C+0],T.y=u[C+1],T.z=u[C+2],T.normalize().multiplyScalar(A),u[C+0]=T.x,u[C+1]=T.y,u[C+2]=T.z}function m(){for(var A=new D,T=0;T<u.length;T+=3){A.x=u[T+0],A.y=u[T+1],A.z=u[T+2];var C=E(A)/2/Math.PI+.5,I=R(A)/Math.PI+.5;c.push(C,1-I)}x(),g()}function g(){for(var A=0;A<c.length;A+=6){var T=c[A+0],C=c[A+2],I=c[A+4],j=Math.max(T,C,I),U=Math.min(T,C,I);j>.9&&U<.1&&(T<.2&&(c[A+0]+=1),C<.2&&(c[A+2]+=1),I<.2&&(c[A+4]+=1))}}function w(A){u.push(A.x,A.y,A.z)}function _(A,T){var C=A*3;T.x=n[C+0],T.y=n[C+1],T.z=n[C+2]}function x(){for(var A=new D,T=new D,C=new D,I=new D,j=new xe,U=new xe,B=new xe,Z=0,Q=0;Z<u.length;Z+=9,Q+=6){A.set(u[Z+0],u[Z+1],u[Z+2]),T.set(u[Z+3],u[Z+4],u[Z+5]),C.set(u[Z+6],u[Z+7],u[Z+8]),j.set(c[Q+0],c[Q+1]),U.set(c[Q+2],c[Q+3]),B.set(c[Q+4],c[Q+5]),I.copy(A).add(T).add(C).divideScalar(3);var J=E(I);y(j,Q+0,A,J),y(U,Q+2,T,J),y(B,Q+4,C,J)}}function y(A,T,C,I){I<0&&A.x===1&&(c[T]=A.x-1),C.x===0&&C.z===0&&(c[T]=I/2/Math.PI+.5)}function E(A){return Math.atan2(A.z,-A.x)}function R(A){return Math.atan2(-A.y,Math.sqrt(A.x*A.x+A.z*A.z))}return l}return e}(dt),sC=function(a){ke(e,a);var t=Ie(e);function e(n,r){var i;return ye(this,e),i=t.call(this),i.type="TetrahedronGeometry",i.parameters={radius:n,detail:r},i.fromBufferGeometry(new _b(n,r)),i.mergeVertices(),i}return e}(Zt),_b=function(a){ke(e,a);var t=Ie(e);function e(n,r){var i;ye(this,e);var o=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],l=[2,1,0,0,3,2,1,3,0,2,3,1];return i=t.call(this,o,l,n,r),i.type="TetrahedronBufferGeometry",i.parameters={radius:n,detail:r},i}return e}(Ju),lC=function(a){ke(e,a);var t=Ie(e);function e(n,r){var i;return ye(this,e),i=t.call(this),i.type="OctahedronGeometry",i.parameters={radius:n,detail:r},i.fromBufferGeometry(new Sb(n,r)),i.mergeVertices(),i}return e}(Zt),Sb=function(a){ke(e,a);var t=Ie(e);function e(n,r){var i;ye(this,e);var o=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],l=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];return i=t.call(this,o,l,n,r),i.type="OctahedronBufferGeometry",i.parameters={radius:n,detail:r},i}return e}(Ju),uC=function(a){ke(e,a);var t=Ie(e);function e(n,r){var i;return ye(this,e),i=t.call(this),i.type="IcosahedronGeometry",i.parameters={radius:n,detail:r},i.fromBufferGeometry(new Mb(n,r)),i.mergeVertices(),i}return e}(Zt),Mb=function(a){ke(e,a);var t=Ie(e);function e(n,r){var i;ye(this,e);var o=(1+Math.sqrt(5))/2,l=[-1,o,0,1,o,0,-1,-o,0,1,-o,0,0,-1,o,0,1,o,0,-1,-o,0,1,-o,o,0,-1,o,0,1,-o,0,-1,-o,0,1],u=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];return i=t.call(this,l,u,n,r),i.type="IcosahedronBufferGeometry",i.parameters={radius:n,detail:r},i}return e}(Ju),cC=function(a){ke(e,a);var t=Ie(e);function e(n,r){var i;return ye(this,e),i=t.call(this),i.type="DodecahedronGeometry",i.parameters={radius:n,detail:r},i.fromBufferGeometry(new Eb(n,r)),i.mergeVertices(),i}return e}(Zt),Eb=function(a){ke(e,a);var t=Ie(e);function e(n,r){var i;ye(this,e);var o=(1+Math.sqrt(5))/2,l=1/o,u=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-l,-o,0,-l,o,0,l,-o,0,l,o,-l,-o,0,-l,o,0,l,-o,0,l,o,0,-o,0,-l,o,0,-l,-o,0,l,o,0,l],c=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];return i=t.call(this,u,c,n,r),i.type="DodecahedronBufferGeometry",i.parameters={radius:n,detail:r},i}return e}(Ju),hC=function(a){ke(e,a);var t=Ie(e);function e(n,r,i,o,l,u){var c;ye(this,e),c=t.call(this),c.type="TubeGeometry",c.parameters={path:n,tubularSegments:r,radius:i,radialSegments:o,closed:l},u!==void 0&&console.warn("THREE.TubeGeometry: taper has been removed.");var f=new Tb(n,r,i,o,l);return c.tangents=f.tangents,c.normals=f.normals,c.binormals=f.binormals,c.fromBufferGeometry(f),c.mergeVertices(),c}return e}(Zt),Tb=function(a){ke(e,a);var t=Ie(e);function e(n,r,i,o,l){var u;ye(this,e),u=t.call(this),u.type="TubeBufferGeometry",u.parameters={path:n,tubularSegments:r,radius:i,radialSegments:o,closed:l},r=r||64,i=i||1,o=o||8,l=l||!1;var c=n.computeFrenetFrames(r,l);u.tangents=c.tangents,u.normals=c.normals,u.binormals=c.binormals;var f=new D,d=new D,v=new xe,m=new D,g=[],w=[],_=[],x=[];y(),u.setIndex(x),u.setAttribute("position",new Ve(g,3)),u.setAttribute("normal",new Ve(w,3)),u.setAttribute("uv",new Ve(_,2));function y(){for(var T=0;T<r;T++)E(T);E(l===!1?r:0),A(),R()}function E(T){m=n.getPointAt(T/r,m);for(var C=c.normals[T],I=c.binormals[T],j=0;j<=o;j++){var U=j/o*Math.PI*2,B=Math.sin(U),Z=-Math.cos(U);d.x=Z*C.x+B*I.x,d.y=Z*C.y+B*I.y,d.z=Z*C.z+B*I.z,d.normalize(),w.push(d.x,d.y,d.z),f.x=m.x+i*d.x,f.y=m.y+i*d.y,f.z=m.z+i*d.z,g.push(f.x,f.y,f.z)}}function R(){for(var T=1;T<=r;T++)for(var C=1;C<=o;C++){var I=(o+1)*(T-1)+(C-1),j=(o+1)*T+(C-1),U=(o+1)*T+C,B=(o+1)*(T-1)+C;x.push(I,j,B),x.push(j,U,B)}}function A(){for(var T=0;T<=r;T++)for(var C=0;C<=o;C++)v.x=T/r,v.y=C/o,_.push(v.x,v.y)}return u}return Pe(e,[{key:"toJSON",value:function(){var r=dt.prototype.toJSON.call(this);return r.path=this.parameters.path.toJSON(),r}}]),e}(dt),fC=function(a){ke(e,a);var t=Ie(e);function e(n,r,i,o,l,u,c){var f;return ye(this,e),f=t.call(this),f.type="TorusKnotGeometry",f.parameters={radius:n,tube:r,tubularSegments:i,radialSegments:o,p:l,q:u},c!==void 0&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),f.fromBufferGeometry(new Ab(n,r,i,o,l,u)),f.mergeVertices(),f}return e}(Zt),Ab=function(a){ke(e,a);var t=Ie(e);function e(n,r,i,o,l,u){var c;ye(this,e),c=t.call(this),c.type="TorusKnotBufferGeometry",c.parameters={radius:n,tube:r,tubularSegments:i,radialSegments:o,p:l,q:u},n=n||1,r=r||.4,i=Math.floor(i)||64,o=Math.floor(o)||8,l=l||2,u=u||3;for(var f=[],d=[],v=[],m=[],g=new D,w=new D,_=new D,x=new D,y=new D,E=new D,R=new D,A=0;A<=i;++A){var T=A/i*l*Math.PI*2;ee(T,l,u,n,_),ee(T+.01,l,u,n,x),E.subVectors(x,_),R.addVectors(x,_),y.crossVectors(E,R),R.crossVectors(y,E),y.normalize(),R.normalize();for(var C=0;C<=o;++C){var I=C/o*Math.PI*2,j=-r*Math.cos(I),U=r*Math.sin(I);g.x=_.x+(j*R.x+U*y.x),g.y=_.y+(j*R.y+U*y.y),g.z=_.z+(j*R.z+U*y.z),d.push(g.x,g.y,g.z),w.subVectors(g,_).normalize(),v.push(w.x,w.y,w.z),m.push(A/i),m.push(C/o)}}for(var B=1;B<=i;B++)for(var Z=1;Z<=o;Z++){var Q=(o+1)*(B-1)+(Z-1),J=(o+1)*B+(Z-1),q=(o+1)*B+Z,Y=(o+1)*(B-1)+Z;f.push(Q,J,Y),f.push(J,q,Y)}c.setIndex(f),c.setAttribute("position",new Ve(d,3)),c.setAttribute("normal",new Ve(v,3)),c.setAttribute("uv",new Ve(m,2));function ee(le,ue,he,pe,de){var Oe=Math.cos(le),H=Math.sin(le),L=he/ue*le,G=Math.cos(L);de.x=pe*(2+G)*.5*Oe,de.y=pe*(2+G)*H*.5,de.z=pe*Math.sin(L)*.5}return c}return e}(dt),dC=function(a){ke(e,a);var t=Ie(e);function e(n,r,i,o,l){var u;return ye(this,e),u=t.call(this),u.type="TorusGeometry",u.parameters={radius:n,tube:r,radialSegments:i,tubularSegments:o,arc:l},u.fromBufferGeometry(new Cb(n,r,i,o,l)),u.mergeVertices(),u}return e}(Zt),Cb=function(a){ke(e,a);var t=Ie(e);function e(n,r,i,o,l){var u;ye(this,e),u=t.call(this),u.type="TorusBufferGeometry",u.parameters={radius:n,tube:r,radialSegments:i,tubularSegments:o,arc:l},n=n||1,r=r||.4,i=Math.floor(i)||8,o=Math.floor(o)||6,l=l||Math.PI*2;for(var c=[],f=[],d=[],v=[],m=new D,g=new D,w=new D,_=0;_<=i;_++)for(var x=0;x<=o;x++){var y=x/o*l,E=_/i*Math.PI*2;g.x=(n+r*Math.cos(E))*Math.cos(y),g.y=(n+r*Math.cos(E))*Math.sin(y),g.z=r*Math.sin(E),f.push(g.x,g.y,g.z),m.x=n*Math.cos(y),m.y=n*Math.sin(y),w.subVectors(g,m).normalize(),d.push(w.x,w.y,w.z),v.push(x/o),v.push(_/i)}for(var R=1;R<=i;R++)for(var A=1;A<=o;A++){var T=(o+1)*R+A-1,C=(o+1)*(R-1)+A-1,I=(o+1)*(R-1)+A,j=(o+1)*R+A;c.push(T,C,j),c.push(C,I,j)}return u.setIndex(c),u.setAttribute("position",new Ve(f,3)),u.setAttribute("normal",new Ve(d,3)),u.setAttribute("uv",new Ve(v,2)),u}return e}(dt),pC={triangulate:function(t,e,n){n=n||2;var r=e&&e.length,i=r?e[0]*n:t.length,o=Lb(t,0,i,n,!0),l=[];if(!o||o.next===o.prev)return l;var u,c,f,d,v,m,g;if(r&&(o=wC(t,e,o,n)),t.length>80*n){u=f=t[0],c=d=t[1];for(var w=n;w<i;w+=n)v=t[w],m=t[w+1],v<u&&(u=v),m<c&&(c=m),v>f&&(f=v),m>d&&(d=m);g=Math.max(f-u,d-c),g=g!==0?1/g:0}return df(o,l,n,u,c,g),l}};function Lb(a,t,e,n,r){var i,o;if(r===RC(a,t,e,n)>0)for(i=t;i<e;i+=n)o=Ob(i,a[i],a[i+1],o);else for(i=e-n;i>=t;i-=n)o=Ob(i,a[i],a[i+1],o);return o&&dv(o,o.next)&&(vf(o),o=o.next),o}function ls(a,t){if(!a)return a;t||(t=a);var e=a,n;do if(n=!1,!e.steiner&&(dv(e,e.next)||xn(e.prev,e,e.next)===0)){if(vf(e),e=t=e.prev,e===e.next)break;n=!0}else e=e.next;while(n||e!==t);return t}function df(a,t,e,n,r,i,o){if(!!a){!o&&i&&MC(a,n,r,i);for(var l=a,u,c;a.prev!==a.next;){if(u=a.prev,c=a.next,i?mC(a,n,r,i):vC(a)){t.push(u.i/e),t.push(a.i/e),t.push(c.i/e),vf(a),a=c.next,l=c.next;continue}if(a=c,a===l){o?o===1?(a=gC(ls(a),t,e),df(a,t,e,n,r,i,2)):o===2&&yC(a,t,e,n,r,i):df(ls(a),t,e,n,r,i,1);break}}}}function vC(a){var t=a.prev,e=a,n=a.next;if(xn(t,e,n)>=0)return!1;for(var r=a.next.next;r!==a.prev;){if(Zu(t.x,t.y,e.x,e.y,n.x,n.y,r.x,r.y)&&xn(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function mC(a,t,e,n){var r=a.prev,i=a,o=a.next;if(xn(r,i,o)>=0)return!1;for(var l=r.x<i.x?r.x<o.x?r.x:o.x:i.x<o.x?i.x:o.x,u=r.y<i.y?r.y<o.y?r.y:o.y:i.y<o.y?i.y:o.y,c=r.x>i.x?r.x>o.x?r.x:o.x:i.x>o.x?i.x:o.x,f=r.y>i.y?r.y>o.y?r.y:o.y:i.y>o.y?i.y:o.y,d=Gg(l,u,t,e,n),v=Gg(c,f,t,e,n),m=a.prevZ,g=a.nextZ;m&&m.z>=d&&g&&g.z<=v;){if(m!==a.prev&&m!==a.next&&Zu(r.x,r.y,i.x,i.y,o.x,o.y,m.x,m.y)&&xn(m.prev,m,m.next)>=0||(m=m.prevZ,g!==a.prev&&g!==a.next&&Zu(r.x,r.y,i.x,i.y,o.x,o.y,g.x,g.y)&&xn(g.prev,g,g.next)>=0))return!1;g=g.nextZ}for(;m&&m.z>=d;){if(m!==a.prev&&m!==a.next&&Zu(r.x,r.y,i.x,i.y,o.x,o.y,m.x,m.y)&&xn(m.prev,m,m.next)>=0)return!1;m=m.prevZ}for(;g&&g.z<=v;){if(g!==a.prev&&g!==a.next&&Zu(r.x,r.y,i.x,i.y,o.x,o.y,g.x,g.y)&&xn(g.prev,g,g.next)>=0)return!1;g=g.nextZ}return!0}function gC(a,t,e){var n=a;do{var r=n.prev,i=n.next.next;!dv(r,i)&&Rb(r,n,n.next,i)&&pf(r,i)&&pf(i,r)&&(t.push(r.i/e),t.push(n.i/e),t.push(i.i/e),vf(n),vf(n.next),n=a=i),n=n.next}while(n!==a);return ls(n)}function yC(a,t,e,n,r,i){var o=a;do{for(var l=o.next.next;l!==o.prev;){if(o.i!==l.i&&AC(o,l)){var u=Pb(o,l);o=ls(o,o.next),u=ls(u,u.next),df(o,t,e,n,r,i),df(u,t,e,n,r,i);return}l=l.next}o=o.next}while(o!==a)}function wC(a,t,e,n){var r=[],i,o,l,u,c;for(i=0,o=t.length;i<o;i++)l=t[i]*n,u=i<o-1?t[i+1]*n:a.length,c=Lb(a,l,u,n,!1),c===c.next&&(c.steiner=!0),r.push(TC(c));for(r.sort(bC),i=0;i<r.length;i++)xC(r[i],e),e=ls(e,e.next);return e}function bC(a,t){return a.x-t.x}function xC(a,t){if(t=_C(a,t),t){var e=Pb(t,a);ls(t,t.next),ls(e,e.next)}}function _C(a,t){var e=t,n=a.x,r=a.y,i=-1/0,o;do{if(r<=e.y&&r>=e.next.y&&e.next.y!==e.y){var l=e.x+(r-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(l<=n&&l>i){if(i=l,l===n){if(r===e.y)return e;if(r===e.next.y)return e.next}o=e.x<e.next.x?e:e.next}}e=e.next}while(e!==t);if(!o)return null;if(n===i)return o;var u=o,c=o.x,f=o.y,d=1/0,v;e=o;do n>=e.x&&e.x>=c&&n!==e.x&&Zu(r<f?n:i,r,c,f,r<f?i:n,r,e.x,e.y)&&(v=Math.abs(r-e.y)/(n-e.x),pf(e,a)&&(v<d||v===d&&(e.x>o.x||e.x===o.x&&SC(o,e)))&&(o=e,d=v)),e=e.next;while(e!==u);return o}function SC(a,t){return xn(a.prev,a,t.prev)<0&&xn(t.next,a,a.next)<0}function MC(a,t,e,n){var r=a;do r.z===null&&(r.z=Gg(r.x,r.y,t,e,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==a);r.prevZ.nextZ=null,r.prevZ=null,EC(r)}function EC(a){var t,e,n,r,i,o,l,u,c=1;do{for(e=a,a=null,i=null,o=0;e;){for(o++,n=e,l=0,t=0;t<c&&(l++,n=n.nextZ,!!n);t++);for(u=c;l>0||u>0&&n;)l!==0&&(u===0||!n||e.z<=n.z)?(r=e,e=e.nextZ,l--):(r=n,n=n.nextZ,u--),i?i.nextZ=r:a=r,r.prevZ=i,i=r;e=n}i.nextZ=null,c*=2}while(o>1);return a}function Gg(a,t,e,n,r){return a=32767*(a-e)*r,t=32767*(t-n)*r,a=(a|a<<8)&16711935,a=(a|a<<4)&252645135,a=(a|a<<2)&858993459,a=(a|a<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,a|t<<1}function TC(a){var t=a,e=a;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==a);return e}function Zu(a,t,e,n,r,i,o,l){return(r-o)*(t-l)-(a-o)*(i-l)>=0&&(a-o)*(n-l)-(e-o)*(t-l)>=0&&(e-o)*(i-l)-(r-o)*(n-l)>=0}function AC(a,t){return a.next.i!==t.i&&a.prev.i!==t.i&&!CC(a,t)&&(pf(a,t)&&pf(t,a)&&LC(a,t)&&(xn(a.prev,a,t.prev)||xn(a,t.prev,t))||dv(a,t)&&xn(a.prev,a,a.next)>0&&xn(t.prev,t,t.next)>0)}function xn(a,t,e){return(t.y-a.y)*(e.x-t.x)-(t.x-a.x)*(e.y-t.y)}function dv(a,t){return a.x===t.x&&a.y===t.y}function Rb(a,t,e,n){var r=vv(xn(a,t,e)),i=vv(xn(a,t,n)),o=vv(xn(e,n,a)),l=vv(xn(e,n,t));return!!(r!==i&&o!==l||r===0&&pv(a,e,t)||i===0&&pv(a,n,t)||o===0&&pv(e,a,n)||l===0&&pv(e,t,n))}function pv(a,t,e){return t.x<=Math.max(a.x,e.x)&&t.x>=Math.min(a.x,e.x)&&t.y<=Math.max(a.y,e.y)&&t.y>=Math.min(a.y,e.y)}function vv(a){return a>0?1:a<0?-1:0}function CC(a,t){var e=a;do{if(e.i!==a.i&&e.next.i!==a.i&&e.i!==t.i&&e.next.i!==t.i&&Rb(e,e.next,a,t))return!0;e=e.next}while(e!==a);return!1}function pf(a,t){return xn(a.prev,a,a.next)<0?xn(a,t,a.next)>=0&&xn(a,a.prev,t)>=0:xn(a,t,a.prev)<0||xn(a,a.next,t)<0}function LC(a,t){var e=a,n=!1,r=(a.x+t.x)/2,i=(a.y+t.y)/2;do e.y>i!=e.next.y>i&&e.next.y!==e.y&&r<(e.next.x-e.x)*(i-e.y)/(e.next.y-e.y)+e.x&&(n=!n),e=e.next;while(e!==a);return n}function Pb(a,t){var e=new Hg(a.i,a.x,a.y),n=new Hg(t.i,t.x,t.y),r=a.next,i=t.prev;return a.next=t,t.prev=a,e.next=r,r.prev=e,n.next=e,e.prev=n,i.next=n,n.prev=i,n}function Ob(a,t,e,n){var r=new Hg(a,t,e);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function vf(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function Hg(a,t,e){this.i=a,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function RC(a,t,e,n){for(var r=0,i=t,o=e-n;i<e;i+=n)r+=(a[o]-a[i])*(a[i+1]+a[o+1]),o=i;return r}var us={area:function(t){for(var e=t.length,n=0,r=e-1,i=0;i<e;r=i++)n+=t[r].x*t[i].y-t[i].x*t[r].y;return n*.5},isClockWise:function(t){return us.area(t)<0},triangulateShape:function(t,e){var n=[],r=[],i=[];Nb(t),kb(n,t);var o=t.length;e.forEach(Nb);for(var l=0;l<e.length;l++)r.push(o),o+=e[l].length,kb(n,e[l]);for(var u=pC.triangulate(n,r),c=0;c<u.length;c+=3)i.push(u.slice(c,c+3));return i}};function Nb(a){var t=a.length;t>2&&a[t-1].equals(a[0])&&a.pop()}function kb(a,t){for(var e=0;e<t.length;e++)a.push(t[e].x),a.push(t[e].y)}var Ib=function(a){ke(e,a);var t=Ie(e);function e(n,r){var i;return ye(this,e),i=t.call(this),i.type="ExtrudeGeometry",i.parameters={shapes:n,options:r},i.fromBufferGeometry(new mv(n,r)),i.mergeVertices(),i}return Pe(e,[{key:"toJSON",value:function(){var r=et(Ze(e.prototype),"toJSON",this).call(this),i=this.parameters.shapes,o=this.parameters.options;return Db(i,o,r)}}]),e}(Zt),mv=function(a){ke(e,a);var t=Ie(e);function e(n,r){var i;ye(this,e),i=t.call(this),i.type="ExtrudeBufferGeometry",i.parameters={shapes:n,options:r},n=Array.isArray(n)?n:[n];for(var o=Tr(i),l=[],u=[],c=0,f=n.length;c<f;c++){var d=n[c];v(d)}i.setAttribute("position",new Ve(l,3)),i.setAttribute("uv",new Ve(u,2)),i.computeVertexNormals();function v(m){var g=[],w=r.curveSegments!==void 0?r.curveSegments:12,_=r.steps!==void 0?r.steps:1,x=r.depth!==void 0?r.depth:100,y=r.bevelEnabled!==void 0?r.bevelEnabled:!0,E=r.bevelThickness!==void 0?r.bevelThickness:6,R=r.bevelSize!==void 0?r.bevelSize:E-2,A=r.bevelOffset!==void 0?r.bevelOffset:0,T=r.bevelSegments!==void 0?r.bevelSegments:3,C=r.extrudePath,I=r.UVGenerator!==void 0?r.UVGenerator:PC;r.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),x=r.amount);var j,U=!1,B,Z,Q,J;C&&(j=C.getSpacedPoints(_),U=!0,y=!1,B=C.computeFrenetFrames(_,!1),Z=new D,Q=new D,J=new D),y||(T=0,E=0,R=0,A=0);var q=m.extractPoints(w),Y=q.shape,ee=q.holes,le=!us.isClockWise(Y);if(le){Y=Y.reverse();for(var ue=0,he=ee.length;ue<he;ue++){var pe=ee[ue];us.isClockWise(pe)&&(ee[ue]=pe.reverse())}}for(var de=us.triangulateShape(Y,ee),Oe=Y,H=0,L=ee.length;H<L;H++){var G=ee[H];Y=Y.concat(G)}function z(zt,xt,Xt){return xt||console.error("THREE.ExtrudeGeometry: vec does not exist"),xt.clone().multiplyScalar(Xt).add(zt)}var M=Y.length,O=de.length;function N(zt,xt,Xt){var Lt,Gt,vn,Mr=zt.x-xt.x,Er=zt.y-xt.y,Ir=Xt.x-zt.x,vi=Xt.y-zt.y,Mo=Mr*Mr+Er*Er,Ew=Mr*vi-Er*Ir;if(Math.abs(Ew)>Number.EPSILON){var km=Math.sqrt(Mo),mT=Math.sqrt(Ir*Ir+vi*vi),gT=xt.x-Er/km,yT=xt.y+Mr/km,JP=Xt.x-vi/mT,ZP=Xt.y+Ir/mT,wT=((JP-gT)*vi-(ZP-yT)*Ir)/(Mr*vi-Er*Ir);Lt=gT+Mr*wT-zt.x,Gt=yT+Er*wT-zt.y;var bT=Lt*Lt+Gt*Gt;if(bT<=2)return new xe(Lt,Gt);vn=Math.sqrt(bT/2)}else{var Im=!1;Mr>Number.EPSILON?Ir>Number.EPSILON&&(Im=!0):Mr<-Number.EPSILON?Ir<-Number.EPSILON&&(Im=!0):Math.sign(Er)===Math.sign(vi)&&(Im=!0),Im?(Lt=-Er,Gt=Mr,vn=Math.sqrt(Mo)):(Lt=Mr,Gt=Er,vn=Math.sqrt(Mo/2))}return new xe(Lt/vn,Gt/vn)}for(var W=[],ie=0,te=Oe.length,se=te-1,ce=ie+1;ie<te;ie++,se++,ce++)se===te&&(se=0),ce===te&&(ce=0),W[ie]=N(Oe[ie],Oe[se],Oe[ce]);for(var be=[],Te,Ee=W.concat(),F=0,V=ee.length;F<V;F++){var Me=ee[F];Te=[];for(var ge=0,De=Me.length,re=De-1,Fe=ge+1;ge<De;ge++,re++,Fe++)re===De&&(re=0),Fe===De&&(Fe=0),Te[ge]=N(Me[ge],Me[re],Me[Fe]);be.push(Te),Ee=Ee.concat(Te)}for(var Be=0;Be<T;Be++){for(var je=Be/T,Ue=E*Math.cos(je*Math.PI/2),Ae=R*Math.sin(je*Math.PI/2)+A,ct=0,ft=Oe.length;ct<ft;ct++){var en=z(Oe[ct],W[ct],Ae);it(en.x,en.y,-Ue)}for(var Ft=0,_t=ee.length;Ft<_t;Ft++){var Bt=ee[Ft];Te=be[Ft];for(var $t=0,pi=Bt.length;$t<pi;$t++){var Ln=z(Bt[$t],Te[$t],Ae);it(Ln.x,Ln.y,-Ue)}}}for(var er=R+A,kn=0;kn<M;kn++){var In=y?z(Y[kn],Ee[kn],er):Y[kn];U?(Q.copy(B.normals[0]).multiplyScalar(In.x),Z.copy(B.binormals[0]).multiplyScalar(In.y),J.copy(j[0]).add(Q).add(Z),it(J.x,J.y,J.z)):it(In.x,In.y,0)}for(var Mn=1;Mn<=_;Mn++)for(var pr=0;pr<M;pr++){var Ui=y?z(Y[pr],Ee[pr],er):Y[pr];U?(Q.copy(B.normals[Mn]).multiplyScalar(Ui.x),Z.copy(B.binormals[Mn]).multiplyScalar(Ui.y),J.copy(j[Mn]).add(Q).add(Z),it(J.x,J.y,J.z)):it(Ui.x,Ui.y,x/_*Mn)}for(var Rn=T-1;Rn>=0;Rn--){for(var wd=Rn/T,kc=E*Math.cos(wd*Math.PI/2),Ic=R*Math.sin(wd*Math.PI/2)+A,X=0,we=Oe.length;X<we;X++){var fe=z(Oe[X],W[X],Ic);it(fe.x,fe.y,x+kc)}for(var Se=0,ze=ee.length;Se<ze;Se++){var Ut=ee[Se];Te=be[Se];for(var At=0,Kt=Ut.length;At<Kt;At++){var gt=z(Ut[At],Te[At],Ic);U?it(gt.x,gt.y+j[_-1].y,j[_-1].x+kc):it(gt.x,gt.y,x+kc)}}}Dn(),yn();function Dn(){var zt=l.length/3;if(y){for(var xt=0,Xt=M*xt,Lt=0;Lt<O;Lt++){var Gt=de[Lt];lr(Gt[2]+Xt,Gt[1]+Xt,Gt[0]+Xt)}xt=_+T*2,Xt=M*xt;for(var vn=0;vn<O;vn++){var Mr=de[vn];lr(Mr[0]+Xt,Mr[1]+Xt,Mr[2]+Xt)}}else{for(var Er=0;Er<O;Er++){var Ir=de[Er];lr(Ir[2],Ir[1],Ir[0])}for(var vi=0;vi<O;vi++){var Mo=de[vi];lr(Mo[0]+M*_,Mo[1]+M*_,Mo[2]+M*_)}}o.addGroup(zt,l.length/3-zt,0)}function yn(){var zt=l.length/3,xt=0;Fn(Oe,xt),xt+=Oe.length;for(var Xt=0,Lt=ee.length;Xt<Lt;Xt++){var Gt=ee[Xt];Fn(Gt,xt),xt+=Gt.length}o.addGroup(zt,l.length/3-zt,1)}function Fn(zt,xt){for(var Xt=zt.length;--Xt>=0;){var Lt=Xt,Gt=Xt-1;Gt<0&&(Gt=zt.length-1);for(var vn=0,Mr=_+T*2;vn<Mr;vn++){var Er=M*vn,Ir=M*(vn+1),vi=xt+Lt+Er,Mo=xt+Gt+Er,Ew=xt+Gt+Ir,km=xt+Lt+Ir;ur(vi,Mo,Ew,km)}}}function it(zt,xt,Xt){g.push(zt),g.push(xt),g.push(Xt)}function lr(zt,xt,Xt){qt(zt),qt(xt),qt(Xt);var Lt=l.length/3,Gt=I.generateTopUV(o,l,Lt-3,Lt-2,Lt-1);jn(Gt[0]),jn(Gt[1]),jn(Gt[2])}function ur(zt,xt,Xt,Lt){qt(zt),qt(xt),qt(Lt),qt(xt),qt(Xt),qt(Lt);var Gt=l.length/3,vn=I.generateSideWallUV(o,l,Gt-6,Gt-3,Gt-2,Gt-1);jn(vn[0]),jn(vn[1]),jn(vn[3]),jn(vn[1]),jn(vn[2]),jn(vn[3])}function qt(zt){l.push(g[zt*3+0]),l.push(g[zt*3+1]),l.push(g[zt*3+2])}function jn(zt){u.push(zt.x),u.push(zt.y)}}return i}return Pe(e,[{key:"toJSON",value:function(){var r=dt.prototype.toJSON.call(this),i=this.parameters.shapes,o=this.parameters.options;return Db(i,o,r)}}]),e}(dt),PC={generateTopUV:function(t,e,n,r,i){var o=e[n*3],l=e[n*3+1],u=e[r*3],c=e[r*3+1],f=e[i*3],d=e[i*3+1];return[new xe(o,l),new xe(u,c),new xe(f,d)]},generateSideWallUV:function(t,e,n,r,i,o){var l=e[n*3],u=e[n*3+1],c=e[n*3+2],f=e[r*3],d=e[r*3+1],v=e[r*3+2],m=e[i*3],g=e[i*3+1],w=e[i*3+2],_=e[o*3],x=e[o*3+1],y=e[o*3+2];return Math.abs(u-d)<.01?[new xe(l,1-c),new xe(f,1-v),new xe(m,1-w),new xe(_,1-y)]:[new xe(u,1-c),new xe(d,1-v),new xe(g,1-w),new xe(x,1-y)]}};function Db(a,t,e){if(e.shapes=[],Array.isArray(a))for(var n=0,r=a.length;n<r;n++){var i=a[n];e.shapes.push(i.uuid)}else e.shapes.push(a.uuid);return t.extrudePath!==void 0&&(e.options.extrudePath=t.extrudePath.toJSON()),e}var OC=function(a){ke(e,a);var t=Ie(e);function e(n,r){var i;return ye(this,e),i=t.call(this),i.type="TextGeometry",i.parameters={text:n,parameters:r},i.fromBufferGeometry(new Fb(n,r)),i.mergeVertices(),i}return e}(Zt),Fb=function(a){ke(e,a);var t=Ie(e);function e(n,r){var i;ye(this,e),r=r||{};var o=r.font;if(!(o&&o.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),bd(i,new Zt);var l=o.generateShapes(n,r.size);return r.depth=r.height!==void 0?r.height:50,r.bevelThickness===void 0&&(r.bevelThickness=10),r.bevelSize===void 0&&(r.bevelSize=8),r.bevelEnabled===void 0&&(r.bevelEnabled=!1),i=t.call(this,l,r),i.type="TextBufferGeometry",i}return e}(mv),NC=function(a){ke(e,a);var t=Ie(e);function e(n,r,i,o,l,u,c){var f;return ye(this,e),f=t.call(this),f.type="SphereGeometry",f.parameters={radius:n,widthSegments:r,heightSegments:i,phiStart:o,phiLength:l,thetaStart:u,thetaLength:c},f.fromBufferGeometry(new Bb(n,r,i,o,l,u,c)),f.mergeVertices(),f}return e}(Zt),Bb=function(a){ke(e,a);var t=Ie(e);function e(n,r,i,o,l,u,c){var f;ye(this,e),f=t.call(this),f.type="SphereBufferGeometry",f.parameters={radius:n,widthSegments:r,heightSegments:i,phiStart:o,phiLength:l,thetaStart:u,thetaLength:c},n=n||1,r=Math.max(3,Math.floor(r)||8),i=Math.max(2,Math.floor(i)||6),o=o!==void 0?o:0,l=l!==void 0?l:Math.PI*2,u=u!==void 0?u:0,c=c!==void 0?c:Math.PI;for(var d=Math.min(u+c,Math.PI),v=0,m=[],g=new D,w=new D,_=[],x=[],y=[],E=[],R=0;R<=i;R++){var A=[],T=R/i,C=0;R==0&&u==0?C=.5/r:R==i&&d==Math.PI&&(C=-.5/r);for(var I=0;I<=r;I++){var j=I/r;g.x=-n*Math.cos(o+j*l)*Math.sin(u+T*c),g.y=n*Math.cos(u+T*c),g.z=n*Math.sin(o+j*l)*Math.sin(u+T*c),x.push(g.x,g.y,g.z),w.copy(g).normalize(),y.push(w.x,w.y,w.z),E.push(j+C,1-T),A.push(v++)}m.push(A)}for(var U=0;U<i;U++)for(var B=0;B<r;B++){var Z=m[U][B+1],Q=m[U][B],J=m[U+1][B],q=m[U+1][B+1];(U!==0||u>0)&&_.push(Z,Q,q),(U!==i-1||d<Math.PI)&&_.push(Q,J,q)}return f.setIndex(_),f.setAttribute("position",new Ve(x,3)),f.setAttribute("normal",new Ve(y,3)),f.setAttribute("uv",new Ve(E,2)),f}return e}(dt),kC=function(a){ke(e,a);var t=Ie(e);function e(n,r,i,o,l,u){var c;return ye(this,e),c=t.call(this),c.type="RingGeometry",c.parameters={innerRadius:n,outerRadius:r,thetaSegments:i,phiSegments:o,thetaStart:l,thetaLength:u},c.fromBufferGeometry(new Ub(n,r,i,o,l,u)),c.mergeVertices(),c}return e}(Zt),Ub=function(a){ke(e,a);var t=Ie(e);function e(n,r,i,o,l,u){var c;ye(this,e),c=t.call(this),c.type="RingBufferGeometry",c.parameters={innerRadius:n,outerRadius:r,thetaSegments:i,phiSegments:o,thetaStart:l,thetaLength:u},n=n||.5,r=r||1,l=l!==void 0?l:0,u=u!==void 0?u:Math.PI*2,i=i!==void 0?Math.max(3,i):8,o=o!==void 0?Math.max(1,o):1;for(var f=[],d=[],v=[],m=[],g=n,w=(r-n)/o,_=new D,x=new xe,y=0;y<=o;y++){for(var E=0;E<=i;E++){var R=l+E/i*u;_.x=g*Math.cos(R),_.y=g*Math.sin(R),d.push(_.x,_.y,_.z),v.push(0,0,1),x.x=(_.x/r+1)/2,x.y=(_.y/r+1)/2,m.push(x.x,x.y)}g+=w}for(var A=0;A<o;A++)for(var T=A*(i+1),C=0;C<i;C++){var I=C+T,j=I,U=I+i+1,B=I+i+2,Z=I+1;f.push(j,U,Z),f.push(U,B,Z)}return c.setIndex(f),c.setAttribute("position",new Ve(d,3)),c.setAttribute("normal",new Ve(v,3)),c.setAttribute("uv",new Ve(m,2)),c}return e}(dt),IC=function(a){ke(e,a);var t=Ie(e);function e(n,r,i,o){var l;return ye(this,e),l=t.call(this),l.type="LatheGeometry",l.parameters={points:n,segments:r,phiStart:i,phiLength:o},l.fromBufferGeometry(new Gb(n,r,i,o)),l.mergeVertices(),l}return e}(Zt),Gb=function(a){ke(e,a);var t=Ie(e);function e(n,r,i,o){var l;ye(this,e),l=t.call(this),l.type="LatheBufferGeometry",l.parameters={points:n,segments:r,phiStart:i,phiLength:o},r=Math.floor(r)||12,i=i||0,o=o||Math.PI*2,o=lt.clamp(o,0,Math.PI*2);for(var u=[],c=[],f=[],d=1/r,v=new D,m=new xe,g=0;g<=r;g++)for(var w=i+g*d*o,_=Math.sin(w),x=Math.cos(w),y=0;y<=n.length-1;y++)v.x=n[y].x*_,v.y=n[y].y,v.z=n[y].x*x,c.push(v.x,v.y,v.z),m.x=g/r,m.y=y/(n.length-1),f.push(m.x,m.y);for(var E=0;E<r;E++)for(var R=0;R<n.length-1;R++){var A=R+E*n.length,T=A,C=A+n.length,I=A+n.length+1,j=A+1;u.push(T,C,j),u.push(C,I,j)}if(l.setIndex(u),l.setAttribute("position",new Ve(c,3)),l.setAttribute("uv",new Ve(f,2)),l.computeVertexNormals(),o===Math.PI*2)for(var U=l.attributes.normal.array,B=new D,Z=new D,Q=new D,J=r*n.length*3,q=0,Y=0;q<n.length;q++,Y+=3)B.x=U[Y+0],B.y=U[Y+1],B.z=U[Y+2],Z.x=U[J+Y+0],Z.y=U[J+Y+1],Z.z=U[J+Y+2],Q.addVectors(B,Z).normalize(),U[Y+0]=U[J+Y+0]=Q.x,U[Y+1]=U[J+Y+1]=Q.y,U[Y+2]=U[J+Y+2]=Q.z;return l}return e}(dt),Hb=function(a){ke(e,a);var t=Ie(e);function e(n,r){var i;return ye(this,e),i=t.call(this),i.type="ShapeGeometry",cn(r)==="object"&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),r=r.curveSegments),i.parameters={shapes:n,curveSegments:r},i.fromBufferGeometry(new zb(n,r)),i.mergeVertices(),i}return Pe(e,[{key:"toJSON",value:function(){var r=Zt.prototype.toJSON.call(this),i=this.parameters.shapes;return Vb(i,r)}}]),e}(Zt),zb=function(a){ke(e,a);var t=Ie(e);function e(n,r){var i;ye(this,e),i=t.call(this),i.type="ShapeBufferGeometry",i.parameters={shapes:n,curveSegments:r},r=r||12;var o=[],l=[],u=[],c=[],f=0,d=0;if(Array.isArray(n)===!1)m(n);else for(var v=0;v<n.length;v++)m(n[v]),i.addGroup(f,d,v),f+=d,d=0;i.setIndex(o),i.setAttribute("position",new Ve(l,3)),i.setAttribute("normal",new Ve(u,3)),i.setAttribute("uv",new Ve(c,2));function m(g){var w=l.length/3,_=g.extractPoints(r),x=_.shape,y=_.holes;us.isClockWise(x)===!1&&(x=x.reverse());for(var E=0,R=y.length;E<R;E++){var A=y[E];us.isClockWise(A)===!0&&(y[E]=A.reverse())}for(var T=us.triangulateShape(x,y),C=0,I=y.length;C<I;C++){var j=y[C];x=x.concat(j)}for(var U=0,B=x.length;U<B;U++){var Z=x[U];l.push(Z.x,Z.y,0),u.push(0,0,1),c.push(Z.x,Z.y)}for(var Q=0,J=T.length;Q<J;Q++){var q=T[Q],Y=q[0]+w,ee=q[1]+w,le=q[2]+w;o.push(Y,ee,le),d+=3}}return i}return Pe(e,[{key:"toJSON",value:function(){var r=dt.prototype.toJSON.call(this),i=this.parameters.shapes;return Vb(i,r)}}]),e}(dt);function Vb(a,t){if(t.shapes=[],Array.isArray(a))for(var e=0,n=a.length;e<n;e++){var r=a[e];t.shapes.push(r.uuid)}else t.shapes.push(a.uuid);return t}var DC=function(a){ke(e,a);var t=Ie(e);function e(n,r){var i;ye(this,e),i=t.call(this),i.type="EdgesGeometry",i.parameters={thresholdAngle:r},r=r!==void 0?r:1;var o=[],l=Math.cos(lt.DEG2RAD*r),u=[0,0],c={},f,d,v,m=["a","b","c"],g;n.isBufferGeometry?(g=new Zt,g.fromBufferGeometry(n)):g=n.clone(),g.mergeVertices(),g.computeFaceNormals();for(var w=g.vertices,_=g.faces,x=0,y=_.length;x<y;x++)for(var E=_[x],R=0;R<3;R++)f=E[m[R]],d=E[m[(R+1)%3]],u[0]=Math.min(f,d),u[1]=Math.max(f,d),v=u[0]+","+u[1],c[v]===void 0?c[v]={index1:u[0],index2:u[1],face1:x,face2:void 0}:c[v].face2=x;for(v in c){var A=c[v];if(A.face2===void 0||_[A.face1].normal.dot(_[A.face2].normal)<=l){var T=w[A.index1];o.push(T.x,T.y,T.z),T=w[A.index2],o.push(T.x,T.y,T.z)}}return i.setAttribute("position",new Ve(o,3)),i}return e}(dt),Wb=function(a){ke(e,a);var t=Ie(e);function e(n,r,i,o,l,u,c,f){var d;return ye(this,e),d=t.call(this),d.type="CylinderGeometry",d.parameters={radiusTop:n,radiusBottom:r,height:i,radialSegments:o,heightSegments:l,openEnded:u,thetaStart:c,thetaLength:f},d.fromBufferGeometry(new zg(n,r,i,o,l,u,c,f)),d.mergeVertices(),d}return e}(Zt),zg=function(a){ke(e,a);var t=Ie(e);function e(n,r,i,o,l,u,c,f){var d;ye(this,e),d=t.call(this),d.type="CylinderBufferGeometry",d.parameters={radiusTop:n,radiusBottom:r,height:i,radialSegments:o,heightSegments:l,openEnded:u,thetaStart:c,thetaLength:f};var v=Tr(d);n=n!==void 0?n:1,r=r!==void 0?r:1,i=i||1,o=Math.floor(o)||8,l=Math.floor(l)||1,u=u!==void 0?u:!1,c=c!==void 0?c:0,f=f!==void 0?f:Math.PI*2;var m=[],g=[],w=[],_=[],x=0,y=[],E=i/2,R=0;A(),u===!1&&(n>0&&T(!0),r>0&&T(!1)),d.setIndex(m),d.setAttribute("position",new Ve(g,3)),d.setAttribute("normal",new Ve(w,3)),d.setAttribute("uv",new Ve(_,2));function A(){for(var C=new D,I=new D,j=0,U=(r-n)/i,B=0;B<=l;B++){for(var Z=[],Q=B/l,J=Q*(r-n)+n,q=0;q<=o;q++){var Y=q/o,ee=Y*f+c,le=Math.sin(ee),ue=Math.cos(ee);I.x=J*le,I.y=-Q*i+E,I.z=J*ue,g.push(I.x,I.y,I.z),C.set(le,U,ue).normalize(),w.push(C.x,C.y,C.z),_.push(Y,1-Q),Z.push(x++)}y.push(Z)}for(var he=0;he<o;he++)for(var pe=0;pe<l;pe++){var de=y[pe][he],Oe=y[pe+1][he],H=y[pe+1][he+1],L=y[pe][he+1];m.push(de,Oe,L),m.push(Oe,H,L),j+=6}v.addGroup(R,j,0),R+=j}function T(C){for(var I=x,j=new xe,U=new D,B=0,Z=C===!0?n:r,Q=C===!0?1:-1,J=1;J<=o;J++)g.push(0,E*Q,0),w.push(0,Q,0),_.push(.5,.5),x++;for(var q=x,Y=0;Y<=o;Y++){var ee=Y/o,le=ee*f+c,ue=Math.cos(le),he=Math.sin(le);U.x=Z*he,U.y=E*Q,U.z=Z*ue,g.push(U.x,U.y,U.z),w.push(0,Q,0),j.x=ue*.5+.5,j.y=he*.5*Q+.5,_.push(j.x,j.y),x++}for(var pe=0;pe<o;pe++){var de=I+pe,Oe=q+pe;C===!0?m.push(Oe,Oe+1,de):m.push(Oe+1,Oe,de),B+=3}v.addGroup(R,B,C===!0?1:2),R+=B}return d}return e}(dt),FC=function(a){ke(e,a);var t=Ie(e);function e(n,r,i,o,l,u,c){var f;return ye(this,e),f=t.call(this,0,n,r,i,o,l,u,c),f.type="ConeGeometry",f.parameters={radius:n,height:r,radialSegments:i,heightSegments:o,openEnded:l,thetaStart:u,thetaLength:c},f}return e}(Wb),BC=function(a){ke(e,a);var t=Ie(e);function e(n,r,i,o,l,u,c){var f;return ye(this,e),f=t.call(this,0,n,r,i,o,l,u,c),f.type="ConeBufferGeometry",f.parameters={radius:n,height:r,radialSegments:i,heightSegments:o,openEnded:l,thetaStart:u,thetaLength:c},f}return e}(zg),UC=function(a){ke(e,a);var t=Ie(e);function e(n,r,i,o){var l;return ye(this,e),l=t.call(this),l.type="CircleGeometry",l.parameters={radius:n,segments:r,thetaStart:i,thetaLength:o},l.fromBufferGeometry(new $b(n,r,i,o)),l.mergeVertices(),l}return e}(Zt),$b=function(a){ke(e,a);var t=Ie(e);function e(n,r,i,o){var l;ye(this,e),l=t.call(this),l.type="CircleBufferGeometry",l.parameters={radius:n,segments:r,thetaStart:i,thetaLength:o},n=n||1,r=r!==void 0?Math.max(3,r):8,i=i!==void 0?i:0,o=o!==void 0?o:Math.PI*2;var u=[],c=[],f=[],d=[],v=new D,m=new xe;c.push(0,0,0),f.push(0,0,1),d.push(.5,.5);for(var g=0,w=3;g<=r;g++,w+=3){var _=i+g/r*o;v.x=n*Math.cos(_),v.y=n*Math.sin(_),c.push(v.x,v.y,v.z),f.push(0,0,1),m.x=(c[w]/n+1)/2,m.y=(c[w+1]/n+1)/2,d.push(m.x,m.y)}for(var x=1;x<=r;x++)u.push(x,x+1,0);return l.setIndex(u),l.setAttribute("position",new Ve(c,3)),l.setAttribute("normal",new Ve(f,3)),l.setAttribute("uv",new Ve(d,2)),l}return e}(dt),Nr=Object.freeze({__proto__:null,WireframeGeometry:aC,ParametricGeometry:fv,ParametricBufferGeometry:ff,TetrahedronGeometry:sC,TetrahedronBufferGeometry:_b,OctahedronGeometry:lC,OctahedronBufferGeometry:Sb,IcosahedronGeometry:uC,IcosahedronBufferGeometry:Mb,DodecahedronGeometry:cC,DodecahedronBufferGeometry:Eb,PolyhedronGeometry:oC,PolyhedronBufferGeometry:Ju,TubeGeometry:hC,TubeBufferGeometry:Tb,TorusKnotGeometry:fC,TorusKnotBufferGeometry:Ab,TorusGeometry:dC,TorusBufferGeometry:Cb,TextGeometry:OC,TextBufferGeometry:Fb,SphereGeometry:NC,SphereBufferGeometry:Bb,RingGeometry:kC,RingBufferGeometry:Ub,PlaneGeometry:pg,PlaneBufferGeometry:Oi,LatheGeometry:IC,LatheBufferGeometry:Gb,ShapeGeometry:Hb,ShapeBufferGeometry:zb,ExtrudeGeometry:Ib,ExtrudeBufferGeometry:mv,EdgesGeometry:DC,ConeGeometry:FC,ConeBufferGeometry:BC,CylinderGeometry:Wb,CylinderBufferGeometry:zg,CircleGeometry:UC,CircleBufferGeometry:$b,BoxGeometry:fg,BoxBufferGeometry:Qo});function cl(a){ut.call(this),this.type="ShadowMaterial",this.color=new Ye(0),this.transparent=!0,this.setValues(a)}cl.prototype=Object.create(ut.prototype),cl.prototype.constructor=cl,cl.prototype.isShadowMaterial=!0,cl.prototype.copy=function(a){return ut.prototype.copy.call(this,a),this.color.copy(a.color),this};function ho(a){fr.call(this,a),this.type="RawShaderMaterial"}ho.prototype=Object.create(fr.prototype),ho.prototype.constructor=ho,ho.prototype.isRawShaderMaterial=!0;function _r(a){ut.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ye(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ye(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_i,this.normalScale=new xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(a)}_r.prototype=Object.create(ut.prototype),_r.prototype.constructor=_r,_r.prototype.isMeshStandardMaterial=!0,_r.prototype.copy=function(a){return ut.prototype.copy.call(this,a),this.defines={STANDARD:""},this.color.copy(a.color),this.roughness=a.roughness,this.metalness=a.metalness,this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.roughnessMap=a.roughnessMap,this.metalnessMap=a.metalnessMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.envMapIntensity=a.envMapIntensity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this.vertexTangents=a.vertexTangents,this};function fo(a){_r.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new xe(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(a)}fo.prototype=Object.create(_r.prototype),fo.prototype.constructor=fo,fo.prototype.isMeshPhysicalMaterial=!0,fo.prototype.copy=function(a){return _r.prototype.copy.call(this,a),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=a.clearcoat,this.clearcoatMap=a.clearcoatMap,this.clearcoatRoughness=a.clearcoatRoughness,this.clearcoatRoughnessMap=a.clearcoatRoughnessMap,this.clearcoatNormalMap=a.clearcoatNormalMap,this.clearcoatNormalScale.copy(a.clearcoatNormalScale),this.reflectivity=a.reflectivity,a.sheen?this.sheen=(this.sheen||new Ye).copy(a.sheen):this.sheen=null,this.transmission=a.transmission,this.transmissionMap=a.transmissionMap,this};function hl(a){ut.call(this),this.type="MeshPhongMaterial",this.color=new Ye(16777215),this.specular=new Ye(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ye(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_i,this.normalScale=new xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Wa,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(a)}hl.prototype=Object.create(ut.prototype),hl.prototype.constructor=hl,hl.prototype.isMeshPhongMaterial=!0,hl.prototype.copy=function(a){return ut.prototype.copy.call(this,a),this.color.copy(a.color),this.specular.copy(a.specular),this.shininess=a.shininess,this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this};function Ku(a){ut.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ye(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ye(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_i,this.normalScale=new xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(a)}Ku.prototype=Object.create(ut.prototype),Ku.prototype.constructor=Ku,Ku.prototype.isMeshToonMaterial=!0,Ku.prototype.copy=function(a){return ut.prototype.copy.call(this,a),this.color.copy(a.color),this.map=a.map,this.gradientMap=a.gradientMap,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.alphaMap=a.alphaMap,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this};function Qu(a){ut.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_i,this.normalScale=new xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(a)}Qu.prototype=Object.create(ut.prototype),Qu.prototype.constructor=Qu,Qu.prototype.isMeshNormalMaterial=!0,Qu.prototype.copy=function(a){return ut.prototype.copy.call(this,a),this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this};function ec(a){ut.call(this),this.type="MeshLambertMaterial",this.color=new Ye(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ye(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Wa,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(a)}ec.prototype=Object.create(ut.prototype),ec.prototype.constructor=ec,ec.prototype.isMeshLambertMaterial=!0,ec.prototype.copy=function(a){return ut.prototype.copy.call(this,a),this.color.copy(a.color),this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this};function tc(a){ut.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ye(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_i,this.normalScale=new xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(a)}tc.prototype=Object.create(ut.prototype),tc.prototype.constructor=tc,tc.prototype.isMeshMatcapMaterial=!0,tc.prototype.copy=function(a){return ut.prototype.copy.call(this,a),this.defines={MATCAP:""},this.color.copy(a.color),this.matcap=a.matcap,this.map=a.map,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.alphaMap=a.alphaMap,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this};function nc(a){Ii.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(a)}nc.prototype=Object.create(Ii.prototype),nc.prototype.constructor=nc,nc.prototype.isLineDashedMaterial=!0,nc.prototype.copy=function(a){return Ii.prototype.copy.call(this,a),this.scale=a.scale,this.dashSize=a.dashSize,this.gapSize=a.gapSize,this};var GC=Object.freeze({__proto__:null,ShadowMaterial:cl,SpriteMaterial:ul,RawShaderMaterial:ho,ShaderMaterial:fr,PointsMaterial:ss,MeshPhysicalMaterial:fo,MeshStandardMaterial:_r,MeshPhongMaterial:hl,MeshToonMaterial:Ku,MeshNormalMaterial:Qu,MeshLambertMaterial:ec,MeshDepthMaterial:al,MeshDistanceMaterial:ol,MeshBasicMaterial:wr,MeshMatcapMaterial:tc,LineDashedMaterial:nc,LineBasicMaterial:Ii,Material:ut}),gn={arraySlice:function(t,e,n){return gn.isTypedArray(t)?new t.constructor(t.subarray(e,n!==void 0?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!Ht(t,DataView)},getKeyframeOrder:function(t){function e(o,l){return t[o]-t[l]}for(var n=t.length,r=new Array(n),i=0;i!==n;++i)r[i]=i;return r.sort(e),r},sortedArray:function(t,e,n){for(var r=t.length,i=new t.constructor(r),o=0,l=0;l!==r;++o)for(var u=n[o]*e,c=0;c!==e;++c)i[l++]=t[u+c];return i},flattenJSON:function(t,e,n,r){for(var i=1,o=t[0];o!==void 0&&o[r]===void 0;)o=t[i++];if(o!==void 0){var l=o[r];if(l!==void 0)if(Array.isArray(l))do l=o[r],l!==void 0&&(e.push(o.time),n.push.apply(n,l)),o=t[i++];while(o!==void 0);else if(l.toArray!==void 0)do l=o[r],l!==void 0&&(e.push(o.time),l.toArray(n,n.length)),o=t[i++];while(o!==void 0);else do l=o[r],l!==void 0&&(e.push(o.time),n.push(l)),o=t[i++];while(o!==void 0)}},subclip:function(t,e,n,r,i){i=i||30;var o=t.clone();o.name=e;for(var l=[],u=0;u<o.tracks.length;++u){for(var c=o.tracks[u],f=c.getValueSize(),d=[],v=[],m=0;m<c.times.length;++m){var g=c.times[m]*i;if(!(g<n||g>=r)){d.push(c.times[m]);for(var w=0;w<f;++w)v.push(c.values[m*f+w])}}d.length!==0&&(c.times=gn.convertArray(d,c.times.constructor),c.values=gn.convertArray(v,c.values.constructor),l.push(c))}o.tracks=l;for(var _=1/0,x=0;x<o.tracks.length;++x)_>o.tracks[x].times[0]&&(_=o.tracks[x].times[0]);for(var y=0;y<o.tracks.length;++y)o.tracks[y].shift(-1*_);return o.resetDuration(),o},makeClipAdditive:function(t,e,n,r){e===void 0&&(e=0),n===void 0&&(n=t),(r===void 0||r<=0)&&(r=30);for(var i=t.tracks.length,o=e/r,l=function(d){var v=n.tracks[d],m=v.ValueTypeName;if(m==="bool"||m==="string")return"continue";var g=t.tracks.find(function(le){return le.name===v.name&&le.ValueTypeName===m});if(g===void 0)return"continue";var w=0,_=v.getValueSize();v.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(w=_/3);var x=0,y=g.getValueSize();g.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(x=y/3);var E=v.times.length-1,R=void 0;if(o<=v.times[0]){var A=w,T=_-w;R=gn.arraySlice(v.values,A,T)}else if(o>=v.times[E]){var C=E*_+w,I=C+_-w;R=gn.arraySlice(v.values,C,I)}else{var j=v.createInterpolant(),U=w,B=_-w;j.evaluate(o),R=gn.arraySlice(j.resultBuffer,U,B)}if(m==="quaternion"){var Z=new Gn().fromArray(R).normalize().conjugate();Z.toArray(R)}for(var Q=g.times.length,J=0;J<Q;++J){var q=J*y+x;if(m==="quaternion")Gn.multiplyQuaternionsFlat(g.values,q,R,0,g.values,q);else for(var Y=y-x*2,ee=0;ee<Y;++ee)g.values[q+ee]-=R[ee]}},u=0;u<i;++u)var c=l(u);return t.blendMode=Hs,t}};function Xr(a,t,e,n){this.parameterPositions=a,this._cachedIndex=0,this.resultBuffer=n!==void 0?n:new t.constructor(e),this.sampleValues=t,this.valueSize=e}Object.assign(Xr.prototype,{evaluate:function(t){var e=this.parameterPositions,n=this._cachedIndex,r=e[n],i=e[n-1];e:{t:{var o;n:{r:if(!(t<r)){for(var l=n+2;;){if(r===void 0){if(t<i)break r;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,i)}if(n===l)break;if(i=r,r=e[++n],t<r)break t}o=e.length;break n}if(!(t>=i)){var u=e[1];t<u&&(n=2,i=u);for(var c=n-2;;){if(i===void 0)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(n===c)break;if(r=i,i=e[--n-1],t>=i)break t}o=n,n=0;break n}break e}for(;n<o;){var f=n+o>>>1;t<e[f]?o=f:n=f+1}if(r=e[n],i=e[n-1],i===void 0)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(r===void 0)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,i,t)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,t,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){for(var e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=t*r,o=0;o!==r;++o)e[o]=n[i+o];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(Xr.prototype,{beforeStart_:Xr.prototype.copySampleValue_,afterEnd_:Xr.prototype.copySampleValue_});function Vg(a,t,e,n){Xr.call(this,a,t,e,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}Vg.prototype=Object.assign(Object.create(Xr.prototype),{constructor:Vg,DefaultSettings_:{endingStart:Ja,endingEnd:Ja},intervalChanged_:function(t,e,n){var r=this.parameterPositions,i=t-2,o=t+1,l=r[i],u=r[o];if(l===void 0)switch(this.getSettings_().endingStart){case Za:i=t,l=2*e-n;break;case hu:i=r.length-2,l=e+r[i]-r[i+1];break;default:i=t,l=n}if(u===void 0)switch(this.getSettings_().endingEnd){case Za:o=t,u=2*n-e;break;case hu:o=1,u=n+r[1]-r[0];break;default:o=t-1,u=e}var c=(n-e)*.5,f=this.valueSize;this._weightPrev=c/(e-l),this._weightNext=c/(u-n),this._offsetPrev=i*f,this._offsetNext=o*f},interpolate_:function(t,e,n,r){for(var i=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=t*l,c=u-l,f=this._offsetPrev,d=this._offsetNext,v=this._weightPrev,m=this._weightNext,g=(n-e)/(r-e),w=g*g,_=w*g,x=-v*_+2*v*w-v*g,y=(1+v)*_+(-1.5-2*v)*w+(-.5+v)*g+1,E=(-1-m)*_+(1.5+m)*w+.5*g,R=m*_-m*w,A=0;A!==l;++A)i[A]=x*o[f+A]+y*o[c+A]+E*o[u+A]+R*o[d+A];return i}});function gv(a,t,e,n){Xr.call(this,a,t,e,n)}gv.prototype=Object.assign(Object.create(Xr.prototype),{constructor:gv,interpolate_:function(t,e,n,r){for(var i=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=t*l,c=u-l,f=(n-e)/(r-e),d=1-f,v=0;v!==l;++v)i[v]=o[c+v]*d+o[u+v]*f;return i}});function Wg(a,t,e,n){Xr.call(this,a,t,e,n)}Wg.prototype=Object.assign(Object.create(Xr.prototype),{constructor:Wg,interpolate_:function(t){return this.copySampleValue_(t-1)}});function Sr(a,t,e,n){if(a===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+a);this.name=a,this.times=gn.convertArray(t,this.TimeBufferType),this.values=gn.convertArray(e,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}Object.assign(Sr,{toJSON:function(t){var e=t.constructor,n;if(e.toJSON!==void 0)n=e.toJSON(t);else{n={name:t.name,times:gn.convertArray(t.times,Array),values:gn.convertArray(t.values,Array)};var r=t.getInterpolation();r!==t.DefaultInterpolation&&(n.interpolation=r)}return n.type=t.ValueTypeName,n}}),Object.assign(Sr.prototype,{constructor:Sr,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:Ya,InterpolantFactoryMethodDiscrete:function(t){return new Wg(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new gv(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new Vg(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var e;switch(t){case nr:e=this.InterpolantFactoryMethodDiscrete;break;case Ya:e=this.InterpolantFactoryMethodLinear;break;case Kr:e=this.InterpolantFactoryMethodSmooth;break}if(e===void 0){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return nr;case this.InterpolantFactoryMethodLinear:return Ya;case this.InterpolantFactoryMethodSmooth:return Kr}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(t!==0)for(var e=this.times,n=0,r=e.length;n!==r;++n)e[n]+=t;return this},scale:function(t){if(t!==1)for(var e=this.times,n=0,r=e.length;n!==r;++n)e[n]*=t;return this},trim:function(t,e){for(var n=this.times,r=n.length,i=0,o=r-1;i!==r&&n[i]<t;)++i;for(;o!==-1&&n[o]>e;)--o;if(++o,i!==0||o!==r){i>=o&&(o=Math.max(o,1),i=o-1);var l=this.getValueSize();this.times=gn.arraySlice(n,i,o),this.values=gn.arraySlice(this.values,i*l,o*l)}return this},validate:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var n=this.times,r=this.values,i=n.length;i===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var o=null,l=0;l!==i;l++){var u=n[l];if(typeof u=="number"&&isNaN(u)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,u),t=!1;break}if(o!==null&&o>u){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,u,o),t=!1;break}o=u}if(r!==void 0&&gn.isTypedArray(r))for(var c=0,f=r.length;c!==f;++c){var d=r[c];if(isNaN(d)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,c,d),t=!1;break}}return t},optimize:function(){for(var t=gn.arraySlice(this.times),e=gn.arraySlice(this.values),n=this.getValueSize(),r=this.getInterpolation()===Kr,i=t.length-1,o=1,l=1;l<i;++l){var u=!1,c=t[l],f=t[l+1];if(c!==f&&(l!==1||c!==c[0]))if(r)u=!0;else for(var d=l*n,v=d-n,m=d+n,g=0;g!==n;++g){var w=e[d+g];if(w!==e[v+g]||w!==e[m+g]){u=!0;break}}if(u){if(l!==o){t[o]=t[l];for(var _=l*n,x=o*n,y=0;y!==n;++y)e[x+y]=e[_+y]}++o}}if(i>0){t[o]=t[i];for(var E=i*n,R=o*n,A=0;A!==n;++A)e[R+A]=e[E+A];++o}return o!==t.length?(this.times=gn.arraySlice(t,0,o),this.values=gn.arraySlice(e,0,o*n)):(this.times=t,this.values=e),this},clone:function(){var t=gn.arraySlice(this.times,0),e=gn.arraySlice(this.values,0),n=this.constructor,r=new n(this.name,t,e);return r.createInterpolant=this.createInterpolant,r}});function $g(a,t,e){Sr.call(this,a,t,e)}$g.prototype=Object.assign(Object.create(Sr.prototype),{constructor:$g,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:nr,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function jg(a,t,e,n){Sr.call(this,a,t,e,n)}jg.prototype=Object.assign(Object.create(Sr.prototype),{constructor:jg,ValueTypeName:"color"});function rc(a,t,e,n){Sr.call(this,a,t,e,n)}rc.prototype=Object.assign(Object.create(Sr.prototype),{constructor:rc,ValueTypeName:"number"});function qg(a,t,e,n){Xr.call(this,a,t,e,n)}qg.prototype=Object.assign(Object.create(Xr.prototype),{constructor:qg,interpolate_:function(t,e,n,r){for(var i=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=(n-e)/(r-e),c=t*l,f=c+l;c!==f;c+=4)Gn.slerpFlat(i,0,o,c-l,o,c,u);return i}});function ic(a,t,e,n){Sr.call(this,a,t,e,n)}ic.prototype=Object.assign(Object.create(Sr.prototype),{constructor:ic,ValueTypeName:"quaternion",DefaultInterpolation:Ya,InterpolantFactoryMethodLinear:function(t){return new qg(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0});function Xg(a,t,e,n){Sr.call(this,a,t,e,n)}Xg.prototype=Object.assign(Object.create(Sr.prototype),{constructor:Xg,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:nr,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function fl(a,t,e,n){Sr.call(this,a,t,e,n)}fl.prototype=Object.assign(Object.create(Sr.prototype),{constructor:fl,ValueTypeName:"vector"});function ui(a,t,e,n){this.name=a,this.tracks=e,this.duration=t!==void 0?t:-1,this.blendMode=n!==void 0?n:Ph,this.uuid=lt.generateUUID(),this.duration<0&&this.resetDuration()}function HC(a){switch(a.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return rc;case"vector":case"vector2":case"vector3":case"vector4":return fl;case"color":return jg;case"quaternion":return ic;case"bool":case"boolean":return $g;case"string":return Xg}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+a)}function zC(a){if(a.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=HC(a.type);if(a.times===void 0){var e=[],n=[];gn.flattenJSON(a.keys,e,n,"value"),a.times=e,a.values=n}return t.parse!==void 0?t.parse(a):new t(a.name,a.times,a.values,a.interpolation)}Object.assign(ui,{parse:function(t){for(var e=[],n=t.tracks,r=1/(t.fps||1),i=0,o=n.length;i!==o;++i)e.push(zC(n[i]).scale(r));return new ui(t.name,t.duration,e,t.blendMode)},toJSON:function(t){for(var e=[],n=t.tracks,r={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode},i=0,o=n.length;i!==o;++i)e.push(Sr.toJSON(n[i]));return r},CreateFromMorphTargetSequence:function(t,e,n,r){for(var i=e.length,o=[],l=0;l<i;l++){var u=[],c=[];u.push((l+i-1)%i,l,(l+1)%i),c.push(0,1,0);var f=gn.getKeyframeOrder(u);u=gn.sortedArray(u,1,f),c=gn.sortedArray(c,1,f),!r&&u[0]===0&&(u.push(i),c.push(c[0])),o.push(new rc(".morphTargetInfluences["+e[l].name+"]",u,c).scale(1/n))}return new ui(t,-1,o)},findByName:function(t,e){var n=t;if(!Array.isArray(t)){var r=t;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===e)return n[i];return null},CreateClipsFromMorphTargetSequences:function(t,e,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,o=0,l=t.length;o<l;o++){var u=t[o],c=u.name.match(i);if(c&&c.length>1){var f=c[1],d=r[f];d||(r[f]=d=[]),d.push(u)}}var v=[];for(var m in r)v.push(ui.CreateFromMorphTargetSequence(m,r[m],e,n));return v},parseAnimation:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(C,I,j,U,B){if(j.length!==0){var Z=[],Q=[];gn.flattenJSON(j,Z,Q,U),Z.length!==0&&B.push(new C(I,Z,Q))}},r=[],i=t.name||"default",o=t.fps||30,l=t.blendMode,u=t.length||-1,c=t.hierarchy||[],f=0;f<c.length;f++){var d=c[f].keys;if(!(!d||d.length===0))if(d[0].morphTargets){var v={},m=void 0;for(m=0;m<d.length;m++)if(d[m].morphTargets)for(var g=0;g<d[m].morphTargets.length;g++)v[d[m].morphTargets[g]]=-1;for(var w in v){for(var _=[],x=[],y=0;y!==d[m].morphTargets.length;++y){var E=d[m];_.push(E.time),x.push(E.morphTarget===w?1:0)}r.push(new rc(".morphTargetInfluence["+w+"]",_,x))}u=v.length*(o||1)}else{var R=".bones["+e[f].name+"]";n(fl,R+".position",d,"pos",r),n(ic,R+".quaternion",d,"rot",r),n(fl,R+".scale",d,"scl",r)}}if(r.length===0)return null;var A=new ui(i,u,r,l);return A}}),Object.assign(ui.prototype,{resetDuration:function(){for(var t=this.tracks,e=0,n=0,r=t.length;n!==r;++n){var i=this.tracks[n];e=Math.max(e,i.times[i.times.length-1])}return this.duration=e,this},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function(){for(var t=!0,e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this},clone:function(){for(var t=[],e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new ui(this.name,this.duration,t,this.blendMode)}});var dl={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};function jb(a,t,e){var n=this,r=!1,i=0,o=0,l=void 0,u=[];this.onStart=void 0,this.onLoad=a,this.onProgress=t,this.onError=e,this.itemStart=function(c){o++,r===!1&&n.onStart!==void 0&&n.onStart(c,i,o),r=!0},this.itemEnd=function(c){i++,n.onProgress!==void 0&&n.onProgress(c,i,o),i===o&&(r=!1,n.onLoad!==void 0&&n.onLoad())},this.itemError=function(c){n.onError!==void 0&&n.onError(c)},this.resolveURL=function(c){return l?l(c):c},this.setURLModifier=function(c){return l=c,this},this.addHandler=function(c,f){return u.push(c,f),this},this.removeHandler=function(c){var f=u.indexOf(c);return f!==-1&&u.splice(f,2),this},this.getHandler=function(c){for(var f=0,d=u.length;f<d;f+=2){var v=u[f],m=u[f+1];if(v.global&&(v.lastIndex=0),v.test(c))return m}return null}}var VC=new jb;function Wt(a){this.manager=a!==void 0?a:VC,this.crossOrigin="anonymous",this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(Wt.prototype,{load:function(){},loadAsync:function(t,e){var n=this;return new Promise(function(r,i){n.load(t,r,e,i)})},parse:function(){},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}});var aa={};function Yr(a){Wt.call(this,a)}Yr.prototype=Object.assign(Object.create(Wt.prototype),{constructor:Yr,load:function(t,e,n,r){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,o=dl.get(t);if(o!==void 0)return i.manager.itemStart(t),setTimeout(function(){e&&e(o),i.manager.itemEnd(t)},0),o;if(aa[t]!==void 0){aa[t].push({onLoad:e,onProgress:n,onError:r});return}var l=/^data:(.*?)(;base64)?,(.*)$/,u=t.match(l),c;if(u){var f=u[1],d=!!u[2],v=u[3];v=decodeURIComponent(v),d&&(v=atob(v));try{var m,g=(this.responseType||"").toLowerCase();switch(g){case"arraybuffer":case"blob":for(var w=new Uint8Array(v.length),_=0;_<v.length;_++)w[_]=v.charCodeAt(_);g==="blob"?m=new Blob([w.buffer],{type:f}):m=w.buffer;break;case"document":var x=new DOMParser;m=x.parseFromString(v,f);break;case"json":m=JSON.parse(v);break;default:m=v;break}setTimeout(function(){e&&e(m),i.manager.itemEnd(t)},0)}catch(E){setTimeout(function(){r&&r(E),i.manager.itemError(t),i.manager.itemEnd(t)},0)}}else{aa[t]=[],aa[t].push({onLoad:e,onProgress:n,onError:r}),c=new XMLHttpRequest,c.open("GET",t,!0),c.addEventListener("load",function(E){var R=this.response,A=aa[t];if(delete aa[t],this.status===200||this.status===0){this.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),dl.add(t,R);for(var T=0,C=A.length;T<C;T++){var I=A[T];I.onLoad&&I.onLoad(R)}i.manager.itemEnd(t)}else{for(var j=0,U=A.length;j<U;j++){var B=A[j];B.onError&&B.onError(E)}i.manager.itemError(t),i.manager.itemEnd(t)}},!1),c.addEventListener("progress",function(E){for(var R=aa[t],A=0,T=R.length;A<T;A++){var C=R[A];C.onProgress&&C.onProgress(E)}},!1),c.addEventListener("error",function(E){var R=aa[t];delete aa[t];for(var A=0,T=R.length;A<T;A++){var C=R[A];C.onError&&C.onError(E)}i.manager.itemError(t),i.manager.itemEnd(t)},!1),c.addEventListener("abort",function(E){var R=aa[t];delete aa[t];for(var A=0,T=R.length;A<T;A++){var C=R[A];C.onError&&C.onError(E)}i.manager.itemError(t),i.manager.itemEnd(t)},!1),this.responseType!==void 0&&(c.responseType=this.responseType),this.withCredentials!==void 0&&(c.withCredentials=this.withCredentials),c.overrideMimeType&&c.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(var y in this.requestHeader)c.setRequestHeader(y,this.requestHeader[y]);c.send(null)}return i.manager.itemStart(t),c},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this}});function qb(a){Wt.call(this,a)}qb.prototype=Object.assign(Object.create(Wt.prototype),{constructor:qb,load:function(t,e,n,r){var i=this,o=new Yr(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.load(t,function(l){try{e(i.parse(JSON.parse(l)))}catch(u){r?r(u):console.error(u),i.manager.itemError(t)}},n,r)},parse:function(t){for(var e=[],n=0;n<t.length;n++){var r=ui.parse(t[n]);e.push(r)}return e}});function Xb(a){Wt.call(this,a)}Xb.prototype=Object.assign(Object.create(Wt.prototype),{constructor:Xb,load:function(t,e,n,r){var i=this,o=[],l=new cf;l.image=o;var u=new Yr(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader);var c=0;function f(m){u.load(t[m],function(g){var w=i.parse(g,!0);o[m]={width:w.width,height:w.height,format:w.format,mipmaps:w.mipmaps},c+=1,c===6&&(w.mipmapCount===1&&(l.minFilter=sn),l.format=w.format,l.needsUpdate=!0,e&&e(l))},n,r)}if(Array.isArray(t))for(var d=0,v=t.length;d<v;++d)f(d);else u.load(t,function(m){var g=i.parse(m,!0);if(g.isCubemap)for(var w=g.mipmaps.length/g.mipmapCount,_=0;_<w;_++){o[_]={mipmaps:[]};for(var x=0;x<g.mipmapCount;x++)o[_].mipmaps.push(g.mipmaps[_*g.mipmapCount+x]),o[_].format=g.format,o[_].width=g.width,o[_].height=g.height}else l.image.width=g.width,l.image.height=g.height,l.mipmaps=g.mipmaps;g.mipmapCount===1&&(l.minFilter=sn),l.format=g.format,l.needsUpdate=!0,e&&e(l)},n,r);return l}});function ac(a){Wt.call(this,a)}ac.prototype=Object.assign(Object.create(Wt.prototype),{constructor:ac,load:function(t,e,n,r){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,o=dl.get(t);if(o!==void 0)return i.manager.itemStart(t),setTimeout(function(){e&&e(o),i.manager.itemEnd(t)},0),o;var l=document.createElementNS("http://www.w3.org/1999/xhtml","img");function u(){l.removeEventListener("load",u,!1),l.removeEventListener("error",c,!1),dl.add(t,this),e&&e(this),i.manager.itemEnd(t)}function c(f){l.removeEventListener("load",u,!1),l.removeEventListener("error",c,!1),r&&r(f),i.manager.itemError(t),i.manager.itemEnd(t)}return l.addEventListener("load",u,!1),l.addEventListener("error",c,!1),t.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),i.manager.itemStart(t),l.src=t,l}});function Yg(a){Wt.call(this,a)}Yg.prototype=Object.assign(Object.create(Wt.prototype),{constructor:Yg,load:function(t,e,n,r){var i=new rs,o=new ac(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var l=0;function u(f){o.load(t[f],function(d){i.images[f]=d,l++,l===6&&(i.needsUpdate=!0,e&&e(i))},void 0,r)}for(var c=0;c<t.length;++c)u(c);return i}});function mf(a){Wt.call(this,a)}mf.prototype=Object.assign(Object.create(Wt.prototype),{constructor:mf,load:function(t,e,n,r){var i=this,o=new ar,l=new Yr(this.manager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.load(t,function(u){var c=i.parse(u);!c||(c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:Xn,o.wrapT=c.wrapT!==void 0?c.wrapT:Xn,o.magFilter=c.magFilter!==void 0?c.magFilter:sn,o.minFilter=c.minFilter!==void 0?c.minFilter:sn,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=ga),c.mipmapCount===1&&(o.minFilter=sn),o.needsUpdate=!0,e&&e(o,c))},n,r),o}});function gf(a){Wt.call(this,a)}gf.prototype=Object.assign(Object.create(Wt.prototype),{constructor:gf,load:function(t,e,n,r){var i=new Jt,o=new ac(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,function(l){i.image=l;var u=t.search(/\.jpe?g($|\?)/i)>0||t.search(/^data\:image\/jpeg/)===0;i.format=u?Hr:Lr,i.needsUpdate=!0,e!==void 0&&e(i)},n,r),i}});function ot(){this.type="Curve",this.arcLengthDivisions=200}Object.assign(ot.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,e){var n=this.getUtoTmapping(t);return this.getPoint(n,e)},getPoints:function(t){t===void 0&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return e},getSpacedPoints:function(t){t===void 0&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(t===void 0&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e=[],n,r=this.getPoint(0),i=0;e.push(0);for(var o=1;o<=t;o++)n=this.getPoint(o/t),i+=n.distanceTo(r),e.push(i),r=n;return this.cacheArcLengths=e,e},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var n=this.getLengths(),r=0,i=n.length,o;e?o=e:o=t*n[i-1];for(var l=0,u=i-1,c;l<=u;)if(r=Math.floor(l+(u-l)/2),c=n[r]-o,c<0)l=r+1;else if(c>0)u=r-1;else{u=r;break}if(r=u,n[r]===o)return r/(i-1);var f=n[r],d=n[r+1],v=d-f,m=(o-f)/v,g=(r+m)/(i-1);return g},getTangent:function(t,e){var n=1e-4,r=t-n,i=t+n;r<0&&(r=0),i>1&&(i=1);var o=this.getPoint(r),l=this.getPoint(i),u=e||(o.isVector2?new xe:new D);return u.copy(l).sub(o).normalize(),u},getTangentAt:function(t,e){var n=this.getUtoTmapping(t);return this.getTangent(n,e)},computeFrenetFrames:function(t,e){for(var n=new D,r=[],i=[],o=[],l=new D,u=new ht,c=0;c<=t;c++){var f=c/t;r[c]=this.getTangentAt(f,new D),r[c].normalize()}i[0]=new D,o[0]=new D;var d=Number.MAX_VALUE,v=Math.abs(r[0].x),m=Math.abs(r[0].y),g=Math.abs(r[0].z);v<=d&&(d=v,n.set(1,0,0)),m<=d&&(d=m,n.set(0,1,0)),g<=d&&n.set(0,0,1),l.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],l),o[0].crossVectors(r[0],i[0]);for(var w=1;w<=t;w++){if(i[w]=i[w-1].clone(),o[w]=o[w-1].clone(),l.crossVectors(r[w-1],r[w]),l.length()>Number.EPSILON){l.normalize();var _=Math.acos(lt.clamp(r[w-1].dot(r[w]),-1,1));i[w].applyMatrix4(u.makeRotationAxis(l,_))}o[w].crossVectors(r[w],i[w])}if(e===!0){var x=Math.acos(lt.clamp(i[0].dot(i[t]),-1,1));x/=t,r[0].dot(l.crossVectors(i[0],i[t]))>0&&(x=-x);for(var y=1;y<=t;y++)i[y].applyMatrix4(u.makeRotationAxis(r[y],x*y)),o[y].crossVectors(r[y],i[y])}return{tangents:r,normals:i,binormals:o}},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}});function Di(a,t,e,n,r,i,o,l){ot.call(this),this.type="EllipseCurve",this.aX=a||0,this.aY=t||0,this.xRadius=e||1,this.yRadius=n||1,this.aStartAngle=r||0,this.aEndAngle=i||2*Math.PI,this.aClockwise=o||!1,this.aRotation=l||0}Di.prototype=Object.create(ot.prototype),Di.prototype.constructor=Di,Di.prototype.isEllipseCurve=!0,Di.prototype.getPoint=function(a,t){for(var e=t||new xe,n=Math.PI*2,r=this.aEndAngle-this.aStartAngle,i=Math.abs(r)<Number.EPSILON;r<0;)r+=n;for(;r>n;)r-=n;r<Number.EPSILON&&(i?r=0:r=n),this.aClockwise===!0&&!i&&(r===n?r=-n:r=r-n);var o=this.aStartAngle+a*r,l=this.aX+this.xRadius*Math.cos(o),u=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){var c=Math.cos(this.aRotation),f=Math.sin(this.aRotation),d=l-this.aX,v=u-this.aY;l=d*c-v*f+this.aX,u=d*f+v*c+this.aY}return e.set(l,u)},Di.prototype.copy=function(a){return ot.prototype.copy.call(this,a),this.aX=a.aX,this.aY=a.aY,this.xRadius=a.xRadius,this.yRadius=a.yRadius,this.aStartAngle=a.aStartAngle,this.aEndAngle=a.aEndAngle,this.aClockwise=a.aClockwise,this.aRotation=a.aRotation,this},Di.prototype.toJSON=function(){var a=ot.prototype.toJSON.call(this);return a.aX=this.aX,a.aY=this.aY,a.xRadius=this.xRadius,a.yRadius=this.yRadius,a.aStartAngle=this.aStartAngle,a.aEndAngle=this.aEndAngle,a.aClockwise=this.aClockwise,a.aRotation=this.aRotation,a},Di.prototype.fromJSON=function(a){return ot.prototype.fromJSON.call(this,a),this.aX=a.aX,this.aY=a.aY,this.xRadius=a.xRadius,this.yRadius=a.yRadius,this.aStartAngle=a.aStartAngle,this.aEndAngle=a.aEndAngle,this.aClockwise=a.aClockwise,this.aRotation=a.aRotation,this};function yf(a,t,e,n,r,i){Di.call(this,a,t,e,e,n,r,i),this.type="ArcCurve"}yf.prototype=Object.create(Di.prototype),yf.prototype.constructor=yf,yf.prototype.isArcCurve=!0;function Jg(){var a=0,t=0,e=0,n=0;function r(i,o,l,u){a=i,t=l,e=-3*i+3*o-2*l-u,n=2*i-2*o+l+u}return{initCatmullRom:function(o,l,u,c,f){r(l,u,f*(u-o),f*(c-l))},initNonuniformCatmullRom:function(o,l,u,c,f,d,v){var m=(l-o)/f-(u-o)/(f+d)+(u-l)/d,g=(u-l)/d-(c-l)/(d+v)+(c-u)/v;m*=d,g*=d,r(l,u,m,g)},calc:function(o){var l=o*o,u=l*o;return a+t*o+e*l+n*u}}}var yv=new D,Zg=new Jg,Kg=new Jg,Qg=new Jg;function oa(a,t,e,n){ot.call(this),this.type="CatmullRomCurve3",this.points=a||[],this.closed=t||!1,this.curveType=e||"centripetal",this.tension=n!==void 0?n:.5}oa.prototype=Object.create(ot.prototype),oa.prototype.constructor=oa,oa.prototype.isCatmullRomCurve3=!0,oa.prototype.getPoint=function(a,t){var e=t||new D,n=this.points,r=n.length,i=(r-(this.closed?0:1))*a,o=Math.floor(i),l=i-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/r)+1)*r:l===0&&o===r-1&&(o=r-2,l=1);var u,c;this.closed||o>0?u=n[(o-1)%r]:(yv.subVectors(n[0],n[1]).add(n[0]),u=yv);var f=n[o%r],d=n[(o+1)%r];if(this.closed||o+2<r?c=n[(o+2)%r]:(yv.subVectors(n[r-1],n[r-2]).add(n[r-1]),c=yv),this.curveType==="centripetal"||this.curveType==="chordal"){var v=this.curveType==="chordal"?.5:.25,m=Math.pow(u.distanceToSquared(f),v),g=Math.pow(f.distanceToSquared(d),v),w=Math.pow(d.distanceToSquared(c),v);g<1e-4&&(g=1),m<1e-4&&(m=g),w<1e-4&&(w=g),Zg.initNonuniformCatmullRom(u.x,f.x,d.x,c.x,m,g,w),Kg.initNonuniformCatmullRom(u.y,f.y,d.y,c.y,m,g,w),Qg.initNonuniformCatmullRom(u.z,f.z,d.z,c.z,m,g,w)}else this.curveType==="catmullrom"&&(Zg.initCatmullRom(u.x,f.x,d.x,c.x,this.tension),Kg.initCatmullRom(u.y,f.y,d.y,c.y,this.tension),Qg.initCatmullRom(u.z,f.z,d.z,c.z,this.tension));return e.set(Zg.calc(l),Kg.calc(l),Qg.calc(l)),e},oa.prototype.copy=function(a){ot.prototype.copy.call(this,a),this.points=[];for(var t=0,e=a.points.length;t<e;t++){var n=a.points[t];this.points.push(n.clone())}return this.closed=a.closed,this.curveType=a.curveType,this.tension=a.tension,this},oa.prototype.toJSON=function(){var a=ot.prototype.toJSON.call(this);a.points=[];for(var t=0,e=this.points.length;t<e;t++){var n=this.points[t];a.points.push(n.toArray())}return a.closed=this.closed,a.curveType=this.curveType,a.tension=this.tension,a},oa.prototype.fromJSON=function(a){ot.prototype.fromJSON.call(this,a),this.points=[];for(var t=0,e=a.points.length;t<e;t++){var n=a.points[t];this.points.push(new D().fromArray(n))}return this.closed=a.closed,this.curveType=a.curveType,this.tension=a.tension,this};function Yb(a,t,e,n,r){var i=(n-t)*.5,o=(r-e)*.5,l=a*a,u=a*l;return(2*e-2*n+i+o)*u+(-3*e+3*n-2*i-o)*l+i*a+e}function WC(a,t){var e=1-a;return e*e*t}function $C(a,t){return 2*(1-a)*a*t}function jC(a,t){return a*a*t}function wf(a,t,e,n){return WC(a,t)+$C(a,e)+jC(a,n)}function qC(a,t){var e=1-a;return e*e*e*t}function XC(a,t){var e=1-a;return 3*e*e*a*t}function YC(a,t){return 3*(1-a)*a*a*t}function JC(a,t){return a*a*a*t}function bf(a,t,e,n,r){return qC(a,t)+XC(a,e)+YC(a,n)+JC(a,r)}function Ra(a,t,e,n){ot.call(this),this.type="CubicBezierCurve",this.v0=a||new xe,this.v1=t||new xe,this.v2=e||new xe,this.v3=n||new xe}Ra.prototype=Object.create(ot.prototype),Ra.prototype.constructor=Ra,Ra.prototype.isCubicBezierCurve=!0,Ra.prototype.getPoint=function(a,t){var e=t||new xe,n=this.v0,r=this.v1,i=this.v2,o=this.v3;return e.set(bf(a,n.x,r.x,i.x,o.x),bf(a,n.y,r.y,i.y,o.y)),e},Ra.prototype.copy=function(a){return ot.prototype.copy.call(this,a),this.v0.copy(a.v0),this.v1.copy(a.v1),this.v2.copy(a.v2),this.v3.copy(a.v3),this},Ra.prototype.toJSON=function(){var a=ot.prototype.toJSON.call(this);return a.v0=this.v0.toArray(),a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a.v3=this.v3.toArray(),a},Ra.prototype.fromJSON=function(a){return ot.prototype.fromJSON.call(this,a),this.v0.fromArray(a.v0),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this.v3.fromArray(a.v3),this};function po(a,t,e,n){ot.call(this),this.type="CubicBezierCurve3",this.v0=a||new D,this.v1=t||new D,this.v2=e||new D,this.v3=n||new D}po.prototype=Object.create(ot.prototype),po.prototype.constructor=po,po.prototype.isCubicBezierCurve3=!0,po.prototype.getPoint=function(a,t){var e=t||new D,n=this.v0,r=this.v1,i=this.v2,o=this.v3;return e.set(bf(a,n.x,r.x,i.x,o.x),bf(a,n.y,r.y,i.y,o.y),bf(a,n.z,r.z,i.z,o.z)),e},po.prototype.copy=function(a){return ot.prototype.copy.call(this,a),this.v0.copy(a.v0),this.v1.copy(a.v1),this.v2.copy(a.v2),this.v3.copy(a.v3),this},po.prototype.toJSON=function(){var a=ot.prototype.toJSON.call(this);return a.v0=this.v0.toArray(),a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a.v3=this.v3.toArray(),a},po.prototype.fromJSON=function(a){return ot.prototype.fromJSON.call(this,a),this.v0.fromArray(a.v0),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this.v3.fromArray(a.v3),this};function ci(a,t){ot.call(this),this.type="LineCurve",this.v1=a||new xe,this.v2=t||new xe}ci.prototype=Object.create(ot.prototype),ci.prototype.constructor=ci,ci.prototype.isLineCurve=!0,ci.prototype.getPoint=function(a,t){var e=t||new xe;return a===1?e.copy(this.v2):(e.copy(this.v2).sub(this.v1),e.multiplyScalar(a).add(this.v1)),e},ci.prototype.getPointAt=function(a,t){return this.getPoint(a,t)},ci.prototype.getTangent=function(a,t){var e=t||new xe;return e.copy(this.v2).sub(this.v1).normalize(),e},ci.prototype.copy=function(a){return ot.prototype.copy.call(this,a),this.v1.copy(a.v1),this.v2.copy(a.v2),this},ci.prototype.toJSON=function(){var a=ot.prototype.toJSON.call(this);return a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a},ci.prototype.fromJSON=function(a){return ot.prototype.fromJSON.call(this,a),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this};function Pa(a,t){ot.call(this),this.type="LineCurve3",this.v1=a||new D,this.v2=t||new D}Pa.prototype=Object.create(ot.prototype),Pa.prototype.constructor=Pa,Pa.prototype.isLineCurve3=!0,Pa.prototype.getPoint=function(a,t){var e=t||new D;return a===1?e.copy(this.v2):(e.copy(this.v2).sub(this.v1),e.multiplyScalar(a).add(this.v1)),e},Pa.prototype.getPointAt=function(a,t){return this.getPoint(a,t)},Pa.prototype.copy=function(a){return ot.prototype.copy.call(this,a),this.v1.copy(a.v1),this.v2.copy(a.v2),this},Pa.prototype.toJSON=function(){var a=ot.prototype.toJSON.call(this);return a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a},Pa.prototype.fromJSON=function(a){return ot.prototype.fromJSON.call(this,a),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this};function Oa(a,t,e){ot.call(this),this.type="QuadraticBezierCurve",this.v0=a||new xe,this.v1=t||new xe,this.v2=e||new xe}Oa.prototype=Object.create(ot.prototype),Oa.prototype.constructor=Oa,Oa.prototype.isQuadraticBezierCurve=!0,Oa.prototype.getPoint=function(a,t){var e=t||new xe,n=this.v0,r=this.v1,i=this.v2;return e.set(wf(a,n.x,r.x,i.x),wf(a,n.y,r.y,i.y)),e},Oa.prototype.copy=function(a){return ot.prototype.copy.call(this,a),this.v0.copy(a.v0),this.v1.copy(a.v1),this.v2.copy(a.v2),this},Oa.prototype.toJSON=function(){var a=ot.prototype.toJSON.call(this);return a.v0=this.v0.toArray(),a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a},Oa.prototype.fromJSON=function(a){return ot.prototype.fromJSON.call(this,a),this.v0.fromArray(a.v0),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this};function vo(a,t,e){ot.call(this),this.type="QuadraticBezierCurve3",this.v0=a||new D,this.v1=t||new D,this.v2=e||new D}vo.prototype=Object.create(ot.prototype),vo.prototype.constructor=vo,vo.prototype.isQuadraticBezierCurve3=!0,vo.prototype.getPoint=function(a,t){var e=t||new D,n=this.v0,r=this.v1,i=this.v2;return e.set(wf(a,n.x,r.x,i.x),wf(a,n.y,r.y,i.y),wf(a,n.z,r.z,i.z)),e},vo.prototype.copy=function(a){return ot.prototype.copy.call(this,a),this.v0.copy(a.v0),this.v1.copy(a.v1),this.v2.copy(a.v2),this},vo.prototype.toJSON=function(){var a=ot.prototype.toJSON.call(this);return a.v0=this.v0.toArray(),a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a},vo.prototype.fromJSON=function(a){return ot.prototype.fromJSON.call(this,a),this.v0.fromArray(a.v0),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this};function Na(a){ot.call(this),this.type="SplineCurve",this.points=a||[]}Na.prototype=Object.create(ot.prototype),Na.prototype.constructor=Na,Na.prototype.isSplineCurve=!0,Na.prototype.getPoint=function(a,t){var e=t||new xe,n=this.points,r=(n.length-1)*a,i=Math.floor(r),o=r-i,l=n[i===0?i:i-1],u=n[i],c=n[i>n.length-2?n.length-1:i+1],f=n[i>n.length-3?n.length-1:i+2];return e.set(Yb(o,l.x,u.x,c.x,f.x),Yb(o,l.y,u.y,c.y,f.y)),e},Na.prototype.copy=function(a){ot.prototype.copy.call(this,a),this.points=[];for(var t=0,e=a.points.length;t<e;t++){var n=a.points[t];this.points.push(n.clone())}return this},Na.prototype.toJSON=function(){var a=ot.prototype.toJSON.call(this);a.points=[];for(var t=0,e=this.points.length;t<e;t++){var n=this.points[t];a.points.push(n.toArray())}return a},Na.prototype.fromJSON=function(a){ot.prototype.fromJSON.call(this,a),this.points=[];for(var t=0,e=a.points.length;t<e;t++){var n=a.points[t];this.points.push(new xe().fromArray(n))}return this};var ey=Object.freeze({__proto__:null,ArcCurve:yf,CatmullRomCurve3:oa,CubicBezierCurve:Ra,CubicBezierCurve3:po,EllipseCurve:Di,LineCurve:ci,LineCurve3:Pa,QuadraticBezierCurve:Oa,QuadraticBezierCurve3:vo,SplineCurve:Na});function cs(){ot.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}cs.prototype=Object.assign(Object.create(ot.prototype),{constructor:cs,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new ci(e,t))},getPoint:function(t){for(var e=t*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=e){var i=n[r]-e,o=this.curves[r],l=o.getLength(),u=l===0?0:1-i/l;return o.getPointAt(u)}r++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,n=0,r=this.curves.length;n<r;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t},getSpacedPoints:function(t){t===void 0&&(t=40);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e=[],n,r=0,i=this.curves;r<i.length;r++)for(var o=i[r],l=o&&o.isEllipseCurve?t*2:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?t*o.points.length:t,u=o.getPoints(l),c=0;c<u.length;c++){var f=u[c];n&&n.equals(f)||(e.push(f),n=f)}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e},copy:function(t){ot.prototype.copy.call(this,t),this.curves=[];for(var e=0,n=t.curves.length;e<n;e++){var r=t.curves[e];this.curves.push(r.clone())}return this.autoClose=t.autoClose,this},toJSON:function(){var t=ot.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(var e=0,n=this.curves.length;e<n;e++){var r=this.curves[e];t.curves.push(r.toJSON())}return t},fromJSON:function(t){ot.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var e=0,n=t.curves.length;e<n;e++){var r=t.curves[e];this.curves.push(new ey[r.type]().fromJSON(r))}return this}});function ka(a){cs.call(this),this.type="Path",this.currentPoint=new xe,a&&this.setFromPoints(a)}ka.prototype=Object.assign(Object.create(cs.prototype),{constructor:ka,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this},moveTo:function(t,e){return this.currentPoint.set(t,e),this},lineTo:function(t,e){var n=new ci(this.currentPoint.clone(),new xe(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this},quadraticCurveTo:function(t,e,n,r){var i=new Oa(this.currentPoint.clone(),new xe(t,e),new xe(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this},bezierCurveTo:function(t,e,n,r,i,o){var l=new Ra(this.currentPoint.clone(),new xe(t,e),new xe(n,r),new xe(i,o));return this.curves.push(l),this.currentPoint.set(i,o),this},splineThru:function(t){var e=[this.currentPoint.clone()].concat(t),n=new Na(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this},arc:function(t,e,n,r,i,o){var l=this.currentPoint.x,u=this.currentPoint.y;return this.absarc(t+l,e+u,n,r,i,o),this},absarc:function(t,e,n,r,i,o){return this.absellipse(t,e,n,n,r,i,o),this},ellipse:function(t,e,n,r,i,o,l,u){var c=this.currentPoint.x,f=this.currentPoint.y;return this.absellipse(t+c,e+f,n,r,i,o,l,u),this},absellipse:function(t,e,n,r,i,o,l,u){var c=new Di(t,e,n,r,i,o,l,u);if(this.curves.length>0){var f=c.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(c);var d=c.getPoint(1);return this.currentPoint.copy(d),this},copy:function(t){return cs.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){var t=cs.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return cs.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}});function pl(a){ka.call(this,a),this.uuid=lt.generateUUID(),this.type="Shape",this.holes=[]}pl.prototype=Object.assign(Object.create(ka.prototype),{constructor:pl,getPointsHoles:function(t){for(var e=[],n=0,r=this.holes.length;n<r;n++)e[n]=this.holes[n].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){ka.prototype.copy.call(this,t),this.holes=[];for(var e=0,n=t.holes.length;e<n;e++){var r=t.holes[e];this.holes.push(r.clone())}return this},toJSON:function(){var t=ka.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(var e=0,n=this.holes.length;e<n;e++){var r=this.holes[e];t.holes.push(r.toJSON())}return t},fromJSON:function(t){ka.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(var e=0,n=t.holes.length;e<n;e++){var r=t.holes[e];this.holes.push(new ka().fromJSON(r))}return this}});function pn(a,t){Qe.call(this),this.type="Light",this.color=new Ye(a),this.intensity=t!==void 0?t:1,this.receiveShadow=void 0}pn.prototype=Object.assign(Object.create(Qe.prototype),{constructor:pn,isLight:!0,copy:function(t){return Qe.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){var e=Qe.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&&(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(e.object.distance=this.distance),this.angle!==void 0&&(e.object.angle=this.angle),this.decay!==void 0&&(e.object.decay=this.decay),this.penumbra!==void 0&&(e.object.penumbra=this.penumbra),this.shadow!==void 0&&(e.object.shadow=this.shadow.toJSON()),e}});function ty(a,t,e){pn.call(this,a,e),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Qe.DefaultUp),this.updateMatrix(),this.groundColor=new Ye(t)}ty.prototype=Object.assign(Object.create(pn.prototype),{constructor:ty,isHemisphereLight:!0,copy:function(t){return pn.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}});function mo(a){this.camera=a,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new xe(512,512),this.map=null,this.mapPass=null,this.matrix=new ht,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Iu,this._frameExtents=new xe(1,1),this._viewportCount=1,this._viewports=[new Qt(0,0,1,1)]}Object.assign(mo.prototype,{_projScreenMatrix:new ht,_lightPositionWorld:new D,_lookTarget:new D,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(t){var e=this.camera,n=this.matrix,r=this._projScreenMatrix,i=this._lookTarget,o=this._lightPositionWorld;o.setFromMatrixPosition(t.matrixWorld),e.position.copy(o),i.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(i),e.updateMatrixWorld(),r.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(r),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(e.projectionMatrix),n.multiply(e.matrixWorldInverse)},getViewport:function(t){return this._viewports[t]},getFrameExtents:function(){return this._frameExtents},copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var t={};return this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}});function ny(){mo.call(this,new fn(50,1,.5,500))}ny.prototype=Object.assign(Object.create(mo.prototype),{constructor:ny,isSpotLightShadow:!0,updateMatrices:function(t){var e=this.camera,n=lt.RAD2DEG*2*t.angle,r=this.mapSize.width/this.mapSize.height,i=t.distance||e.far;(n!==e.fov||r!==e.aspect||i!==e.far)&&(e.fov=n,e.aspect=r,e.far=i,e.updateProjectionMatrix()),mo.prototype.updateMatrices.call(this,t)}});function wv(a,t,e,n,r,i){pn.call(this,a,t),this.type="SpotLight",this.position.copy(Qe.DefaultUp),this.updateMatrix(),this.target=new Qe,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(l){this.intensity=l/Math.PI}}),this.distance=e!==void 0?e:0,this.angle=n!==void 0?n:Math.PI/3,this.penumbra=r!==void 0?r:0,this.decay=i!==void 0?i:1,this.shadow=new ny}wv.prototype=Object.assign(Object.create(pn.prototype),{constructor:wv,isSpotLight:!0,copy:function(t){return pn.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}});function ry(){mo.call(this,new fn(90,1,.5,500)),this._frameExtents=new xe(4,2),this._viewportCount=6,this._viewports=[new Qt(2,1,1,1),new Qt(0,1,1,1),new Qt(3,1,1,1),new Qt(1,1,1,1),new Qt(3,0,1,1),new Qt(1,0,1,1)],this._cubeDirections=[new D(1,0,0),new D(-1,0,0),new D(0,0,1),new D(0,0,-1),new D(0,1,0),new D(0,-1,0)],this._cubeUps=[new D(0,1,0),new D(0,1,0),new D(0,1,0),new D(0,1,0),new D(0,0,1),new D(0,0,-1)]}ry.prototype=Object.assign(Object.create(mo.prototype),{constructor:ry,isPointLightShadow:!0,updateMatrices:function(t,e){e===void 0&&(e=0);var n=this.camera,r=this.matrix,i=this._lightPositionWorld,o=this._lookTarget,l=this._projScreenMatrix;i.setFromMatrixPosition(t.matrixWorld),n.position.copy(i),o.copy(n.position),o.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(o),n.updateMatrixWorld(),r.makeTranslation(-i.x,-i.y,-i.z),l.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(l)}});function xf(a,t,e,n){pn.call(this,a,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return this.intensity*4*Math.PI},set:function(i){this.intensity=i/(4*Math.PI)}}),this.distance=e!==void 0?e:0,this.decay=n!==void 0?n:1,this.shadow=new ry}xf.prototype=Object.assign(Object.create(pn.prototype),{constructor:xf,isPointLight:!0,copy:function(t){return pn.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}});function hs(a,t,e,n,r,i){Pi.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=a!==void 0?a:-1,this.right=t!==void 0?t:1,this.top=e!==void 0?e:1,this.bottom=n!==void 0?n:-1,this.near=r!==void 0?r:.1,this.far=i!==void 0?i:2e3,this.updateProjectionMatrix()}hs.prototype=Object.assign(Object.create(Pi.prototype),{constructor:hs,isOrthographicCamera:!0,copy:function(t,e){return Pi.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this},setViewOffset:function(t,e,n,r,i,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-t,o=n+t,l=r+e,u=r-e;if(this.view!==null&&this.view.enabled){var c=(this.right-this.left)/this.view.fullWidth/this.zoom,f=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=c*this.view.offsetX,o=i+c*this.view.width,l-=f*this.view.offsetY,u=l-f*this.view.height}this.projectionMatrix.makeOrthographic(i,o,l,u,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=Qe.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}});function iy(){mo.call(this,new hs(-5,5,5,-5,.5,500))}iy.prototype=Object.assign(Object.create(mo.prototype),{constructor:iy,isDirectionalLightShadow:!0,updateMatrices:function(t){mo.prototype.updateMatrices.call(this,t)}});function _f(a,t){pn.call(this,a,t),this.type="DirectionalLight",this.position.copy(Qe.DefaultUp),this.updateMatrix(),this.target=new Qe,this.shadow=new iy}_f.prototype=Object.assign(Object.create(pn.prototype),{constructor:_f,isDirectionalLight:!0,copy:function(t){return pn.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}});function ay(a,t){pn.call(this,a,t),this.type="AmbientLight",this.castShadow=void 0}ay.prototype=Object.assign(Object.create(pn.prototype),{constructor:ay,isAmbientLight:!0});function oy(a,t,e,n){pn.call(this,a,t),this.type="RectAreaLight",this.width=e!==void 0?e:10,this.height=n!==void 0?n:10}oy.prototype=Object.assign(Object.create(pn.prototype),{constructor:oy,isRectAreaLight:!0,copy:function(t){return pn.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){var e=pn.prototype.toJSON.call(this,t);return e.object.width=this.width,e.object.height=this.height,e}});var ZC=function(){function a(){ye(this,a),Object.defineProperty(this,"isSphericalHarmonics3",{value:!0}),this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new D)}return Pe(a,[{key:"set",value:function(e){for(var n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}},{key:"zero",value:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}},{key:"getAt",value:function(e,n){var r=e.x,i=e.y,o=e.z,l=this.coefficients;return n.copy(l[0]).multiplyScalar(.282095),n.addScaledVector(l[1],.488603*i),n.addScaledVector(l[2],.488603*o),n.addScaledVector(l[3],.488603*r),n.addScaledVector(l[4],1.092548*(r*i)),n.addScaledVector(l[5],1.092548*(i*o)),n.addScaledVector(l[6],.315392*(3*o*o-1)),n.addScaledVector(l[7],1.092548*(r*o)),n.addScaledVector(l[8],.546274*(r*r-i*i)),n}},{key:"getIrradianceAt",value:function(e,n){var r=e.x,i=e.y,o=e.z,l=this.coefficients;return n.copy(l[0]).multiplyScalar(.886227),n.addScaledVector(l[1],2*.511664*i),n.addScaledVector(l[2],2*.511664*o),n.addScaledVector(l[3],2*.511664*r),n.addScaledVector(l[4],2*.429043*r*i),n.addScaledVector(l[5],2*.429043*i*o),n.addScaledVector(l[6],.743125*o*o-.247708),n.addScaledVector(l[7],2*.429043*r*o),n.addScaledVector(l[8],.429043*(r*r-i*i)),n}},{key:"add",value:function(e){for(var n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}},{key:"addScaledSH",value:function(e,n){for(var r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],n);return this}},{key:"scale",value:function(e){for(var n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}},{key:"lerp",value:function(e,n){for(var r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],n);return this}},{key:"equals",value:function(e){for(var n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}},{key:"copy",value:function(e){return this.set(e.coefficients)}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"fromArray",value:function(e,n){n===void 0&&(n=0);for(var r=this.coefficients,i=0;i<9;i++)r[i].fromArray(e,n+i*3);return this}},{key:"toArray",value:function(e,n){e===void 0&&(e=[]),n===void 0&&(n=0);for(var r=this.coefficients,i=0;i<9;i++)r[i].toArray(e,n+i*3);return e}}],[{key:"getBasisAt",value:function(e,n){var r=e.x,i=e.y,o=e.z;n[0]=.282095,n[1]=.488603*i,n[2]=.488603*o,n[3]=.488603*r,n[4]=1.092548*r*i,n[5]=1.092548*i*o,n[6]=.315392*(3*o*o-1),n[7]=1.092548*r*o,n[8]=.546274*(r*r-i*i)}}]),a}();function sa(a,t){pn.call(this,void 0,t),this.type="LightProbe",this.sh=a!==void 0?a:new ZC}sa.prototype=Object.assign(Object.create(pn.prototype),{constructor:sa,isLightProbe:!0,copy:function(t){return pn.prototype.copy.call(this,t),this.sh.copy(t.sh),this},fromJSON:function(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this},toJSON:function(t){var e=pn.prototype.toJSON.call(this,t);return e.object.sh=this.sh.toArray(),e}});function sy(a){Wt.call(this,a),this.textures={}}sy.prototype=Object.assign(Object.create(Wt.prototype),{constructor:sy,load:function(t,e,n,r){var i=this,o=new Yr(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.load(t,function(l){try{e(i.parse(JSON.parse(l)))}catch(u){r?r(u):console.error(u),i.manager.itemError(t)}},n,r)},parse:function(t){var e=this.textures;function n(c){return e[c]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",c),e[c]}var r=new GC[t.type];if(t.uuid!==void 0&&(r.uuid=t.uuid),t.name!==void 0&&(r.name=t.name),t.color!==void 0&&r.color.setHex(t.color),t.roughness!==void 0&&(r.roughness=t.roughness),t.metalness!==void 0&&(r.metalness=t.metalness),t.sheen!==void 0&&(r.sheen=new Ye().setHex(t.sheen)),t.emissive!==void 0&&r.emissive.setHex(t.emissive),t.specular!==void 0&&r.specular.setHex(t.specular),t.shininess!==void 0&&(r.shininess=t.shininess),t.clearcoat!==void 0&&(r.clearcoat=t.clearcoat),t.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=t.clearcoatRoughness),t.fog!==void 0&&(r.fog=t.fog),t.flatShading!==void 0&&(r.flatShading=t.flatShading),t.blending!==void 0&&(r.blending=t.blending),t.combine!==void 0&&(r.combine=t.combine),t.side!==void 0&&(r.side=t.side),t.opacity!==void 0&&(r.opacity=t.opacity),t.transparent!==void 0&&(r.transparent=t.transparent),t.alphaTest!==void 0&&(r.alphaTest=t.alphaTest),t.depthTest!==void 0&&(r.depthTest=t.depthTest),t.depthWrite!==void 0&&(r.depthWrite=t.depthWrite),t.colorWrite!==void 0&&(r.colorWrite=t.colorWrite),t.stencilWrite!==void 0&&(r.stencilWrite=t.stencilWrite),t.stencilWriteMask!==void 0&&(r.stencilWriteMask=t.stencilWriteMask),t.stencilFunc!==void 0&&(r.stencilFunc=t.stencilFunc),t.stencilRef!==void 0&&(r.stencilRef=t.stencilRef),t.stencilFuncMask!==void 0&&(r.stencilFuncMask=t.stencilFuncMask),t.stencilFail!==void 0&&(r.stencilFail=t.stencilFail),t.stencilZFail!==void 0&&(r.stencilZFail=t.stencilZFail),t.stencilZPass!==void 0&&(r.stencilZPass=t.stencilZPass),t.wireframe!==void 0&&(r.wireframe=t.wireframe),t.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=t.wireframeLinewidth),t.wireframeLinecap!==void 0&&(r.wireframeLinecap=t.wireframeLinecap),t.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=t.wireframeLinejoin),t.rotation!==void 0&&(r.rotation=t.rotation),t.linewidth!==1&&(r.linewidth=t.linewidth),t.dashSize!==void 0&&(r.dashSize=t.dashSize),t.gapSize!==void 0&&(r.gapSize=t.gapSize),t.scale!==void 0&&(r.scale=t.scale),t.polygonOffset!==void 0&&(r.polygonOffset=t.polygonOffset),t.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=t.polygonOffsetFactor),t.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=t.polygonOffsetUnits),t.skinning!==void 0&&(r.skinning=t.skinning),t.morphTargets!==void 0&&(r.morphTargets=t.morphTargets),t.morphNormals!==void 0&&(r.morphNormals=t.morphNormals),t.dithering!==void 0&&(r.dithering=t.dithering),t.vertexTangents!==void 0&&(r.vertexTangents=t.vertexTangents),t.visible!==void 0&&(r.visible=t.visible),t.toneMapped!==void 0&&(r.toneMapped=t.toneMapped),t.userData!==void 0&&(r.userData=t.userData),t.vertexColors!==void 0&&(typeof t.vertexColors=="number"?r.vertexColors=t.vertexColors>0:r.vertexColors=t.vertexColors),t.uniforms!==void 0)for(var i in t.uniforms){var o=t.uniforms[i];switch(r.uniforms[i]={},o.type){case"t":r.uniforms[i].value=n(o.value);break;case"c":r.uniforms[i].value=new Ye().setHex(o.value);break;case"v2":r.uniforms[i].value=new xe().fromArray(o.value);break;case"v3":r.uniforms[i].value=new D().fromArray(o.value);break;case"v4":r.uniforms[i].value=new Qt().fromArray(o.value);break;case"m3":r.uniforms[i].value=new Jn().fromArray(o.value);break;case"m4":r.uniforms[i].value=new ht().fromArray(o.value);break;default:r.uniforms[i].value=o.value}}if(t.defines!==void 0&&(r.defines=t.defines),t.vertexShader!==void 0&&(r.vertexShader=t.vertexShader),t.fragmentShader!==void 0&&(r.fragmentShader=t.fragmentShader),t.extensions!==void 0)for(var l in t.extensions)r.extensions[l]=t.extensions[l];if(t.shading!==void 0&&(r.flatShading=t.shading===1),t.size!==void 0&&(r.size=t.size),t.sizeAttenuation!==void 0&&(r.sizeAttenuation=t.sizeAttenuation),t.map!==void 0&&(r.map=n(t.map)),t.matcap!==void 0&&(r.matcap=n(t.matcap)),t.alphaMap!==void 0&&(r.alphaMap=n(t.alphaMap)),t.bumpMap!==void 0&&(r.bumpMap=n(t.bumpMap)),t.bumpScale!==void 0&&(r.bumpScale=t.bumpScale),t.normalMap!==void 0&&(r.normalMap=n(t.normalMap)),t.normalMapType!==void 0&&(r.normalMapType=t.normalMapType),t.normalScale!==void 0){var u=t.normalScale;Array.isArray(u)===!1&&(u=[u,u]),r.normalScale=new xe().fromArray(u)}return t.displacementMap!==void 0&&(r.displacementMap=n(t.displacementMap)),t.displacementScale!==void 0&&(r.displacementScale=t.displacementScale),t.displacementBias!==void 0&&(r.displacementBias=t.displacementBias),t.roughnessMap!==void 0&&(r.roughnessMap=n(t.roughnessMap)),t.metalnessMap!==void 0&&(r.metalnessMap=n(t.metalnessMap)),t.emissiveMap!==void 0&&(r.emissiveMap=n(t.emissiveMap)),t.emissiveIntensity!==void 0&&(r.emissiveIntensity=t.emissiveIntensity),t.specularMap!==void 0&&(r.specularMap=n(t.specularMap)),t.envMap!==void 0&&(r.envMap=n(t.envMap)),t.envMapIntensity!==void 0&&(r.envMapIntensity=t.envMapIntensity),t.reflectivity!==void 0&&(r.reflectivity=t.reflectivity),t.refractionRatio!==void 0&&(r.refractionRatio=t.refractionRatio),t.lightMap!==void 0&&(r.lightMap=n(t.lightMap)),t.lightMapIntensity!==void 0&&(r.lightMapIntensity=t.lightMapIntensity),t.aoMap!==void 0&&(r.aoMap=n(t.aoMap)),t.aoMapIntensity!==void 0&&(r.aoMapIntensity=t.aoMapIntensity),t.gradientMap!==void 0&&(r.gradientMap=n(t.gradientMap)),t.clearcoatMap!==void 0&&(r.clearcoatMap=n(t.clearcoatMap)),t.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=n(t.clearcoatRoughnessMap)),t.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=n(t.clearcoatNormalMap)),t.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new xe().fromArray(t.clearcoatNormalScale)),t.transmission!==void 0&&(r.transmission=t.transmission),t.transmissionMap!==void 0&&(r.transmissionMap=n(t.transmissionMap)),r},setTextures:function(t){return this.textures=t,this}});var vl={decodeText:function(t){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(t);for(var e="",n=0,r=t.length;n<r;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch{return e}},extractUrlBase:function(t){var e=t.lastIndexOf("/");return e===-1?"./":t.substr(0,e+1)}};function bv(){dt.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}bv.prototype=Object.assign(Object.create(dt.prototype),{constructor:bv,isInstancedBufferGeometry:!0,copy:function(t){return dt.prototype.copy.call(this,t),this.instanceCount=t.instanceCount,this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var t=dt.prototype.toJSON.call(this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}});function ly(a,t,e,n){typeof e=="number"&&(n=e,e=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),at.call(this,a,t,e),this.meshPerAttribute=n||1}ly.prototype=Object.assign(Object.create(at.prototype),{constructor:ly,isInstancedBufferAttribute:!0,copy:function(t){return at.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},toJSON:function(){var t=at.prototype.toJSON.call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}});function uy(a){Wt.call(this,a)}uy.prototype=Object.assign(Object.create(Wt.prototype),{constructor:uy,load:function(t,e,n,r){var i=this,o=new Yr(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.load(t,function(l){try{e(i.parse(JSON.parse(l)))}catch(u){r?r(u):console.error(u),i.manager.itemError(t)}},n,r)},parse:function(t){var e={},n={};function r(ee,le){if(e[le]!==void 0)return e[le];var ue=ee.interleavedBuffers,he=ue[le],pe=i(ee,he.buffer),de=new xv[he.type](pe),Oe=new li(de,he.stride);return Oe.uuid=he.uuid,e[le]=Oe,Oe}function i(ee,le){if(n[le]!==void 0)return n[le];var ue=ee.arrayBuffers,he=ue[le],pe=new Uint32Array(he).buffer;return n[le]=pe,pe}var o=t.isInstancedBufferGeometry?new bv:new dt,l=t.data.index;if(l!==void 0){var u=new xv[l.type](l.array);o.setIndex(new at(u,1))}var c=t.data.attributes;for(var f in c){var d=c[f],v=void 0;if(d.isInterleavedBufferAttribute){var m=r(t.data,d.data);v=new as(m,d.itemSize,d.offset,d.normalized)}else{var g=new xv[d.type](d.array),w=d.isInstancedBufferAttribute?ly:at;v=new w(g,d.itemSize,d.normalized)}d.name!==void 0&&(v.name=d.name),o.setAttribute(f,v)}var _=t.data.morphAttributes;if(_)for(var x in _){for(var y=_[x],E=[],R=0,A=y.length;R<A;R++){var T=y[R],C=void 0;if(T.isInterleavedBufferAttribute){var I=r(t.data,T.data);C=new as(I,T.itemSize,T.offset,T.normalized)}else{var j=new xv[T.type](T.array);C=new at(j,T.itemSize,T.normalized)}T.name!==void 0&&(C.name=T.name),E.push(C)}o.morphAttributes[x]=E}var U=t.data.morphTargetsRelative;U&&(o.morphTargetsRelative=!0);var B=t.data.groups||t.data.drawcalls||t.data.offsets;if(B!==void 0)for(var Z=0,Q=B.length;Z!==Q;++Z){var J=B[Z];o.addGroup(J.start,J.count,J.materialIndex)}var q=t.data.boundingSphere;if(q!==void 0){var Y=new D;q.center!==void 0&&Y.fromArray(q.center),o.boundingSphere=new Ei(Y,q.radius)}return t.name&&(o.name=t.name),t.userData&&(o.userData=t.userData),o}});var xv={Int8Array,Uint8Array,Uint8ClampedArray:typeof Uint8ClampedArray!="undefined"?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function cy(a){Wt.call(this,a)}cy.prototype=Object.assign(Object.create(Wt.prototype),{constructor:cy,load:function(t,e,n,r){var i=this,o=this.path===""?vl.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||o;var l=new Yr(i.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.load(t,function(u){var c=null;try{c=JSON.parse(u)}catch(d){r!==void 0&&r(d),console.error("THREE:ObjectLoader: Can't parse "+t+".",d.message);return}var f=c.metadata;if(f===void 0||f.type===void 0||f.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+t);return}i.parse(c,e)},n,r)},parse:function(t,e){var n=this.parseShape(t.shapes),r=this.parseGeometries(t.geometries,n),i=this.parseImages(t.images,function(){e!==void 0&&e(u)}),o=this.parseTextures(t.textures,i),l=this.parseMaterials(t.materials,o),u=this.parseObject(t.object,r,l);return t.animations&&(u.animations=this.parseAnimations(t.animations)),(t.images===void 0||t.images.length===0)&&e!==void 0&&e(u),u},parseShape:function(t){var e={};if(t!==void 0)for(var n=0,r=t.length;n<r;n++){var i=new pl().fromJSON(t[n]);e[i.uuid]=i}return e},parseGeometries:function(t,e){var n={},r;if(t!==void 0)for(var i=new uy,o=0,l=t.length;o<l;o++){var u=void 0,c=t[o];switch(c.type){case"PlaneGeometry":case"PlaneBufferGeometry":u=new Nr[c.type](c.width,c.height,c.widthSegments,c.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":u=new Nr[c.type](c.width,c.height,c.depth,c.widthSegments,c.heightSegments,c.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":u=new Nr[c.type](c.radius,c.segments,c.thetaStart,c.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":u=new Nr[c.type](c.radiusTop,c.radiusBottom,c.height,c.radialSegments,c.heightSegments,c.openEnded,c.thetaStart,c.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":u=new Nr[c.type](c.radius,c.height,c.radialSegments,c.heightSegments,c.openEnded,c.thetaStart,c.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":u=new Nr[c.type](c.radius,c.widthSegments,c.heightSegments,c.phiStart,c.phiLength,c.thetaStart,c.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":u=new Nr[c.type](c.radius,c.detail);break;case"RingGeometry":case"RingBufferGeometry":u=new Nr[c.type](c.innerRadius,c.outerRadius,c.thetaSegments,c.phiSegments,c.thetaStart,c.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":u=new Nr[c.type](c.radius,c.tube,c.radialSegments,c.tubularSegments,c.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":u=new Nr[c.type](c.radius,c.tube,c.tubularSegments,c.radialSegments,c.p,c.q);break;case"TubeGeometry":case"TubeBufferGeometry":u=new Nr[c.type](new ey[c.path.type]().fromJSON(c.path),c.tubularSegments,c.radius,c.radialSegments,c.closed);break;case"LatheGeometry":case"LatheBufferGeometry":u=new Nr[c.type](c.points,c.segments,c.phiStart,c.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":u=new Nr[c.type](c.vertices,c.indices,c.radius,c.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":r=[];for(var f=0,d=c.shapes.length;f<d;f++){var v=e[c.shapes[f]];r.push(v)}u=new Nr[c.type](r,c.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":r=[];for(var m=0,g=c.shapes.length;m<g;m++){var w=e[c.shapes[m]];r.push(w)}var _=c.options.extrudePath;_!==void 0&&(c.options.extrudePath=new ey[_.type]().fromJSON(_)),u=new Nr[c.type](r,c.options);break;case"BufferGeometry":case"InstancedBufferGeometry":u=i.parse(c);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+c.type+'"');continue}u.uuid=c.uuid,c.name!==void 0&&(u.name=c.name),u.isBufferGeometry===!0&&c.userData!==void 0&&(u.userData=c.userData),n[c.uuid]=u}return n},parseMaterials:function(t,e){var n={},r={};if(t!==void 0){var i=new sy;i.setTextures(e);for(var o=0,l=t.length;o<l;o++){var u=t[o];if(u.type==="MultiMaterial"){for(var c=[],f=0;f<u.materials.length;f++){var d=u.materials[f];n[d.uuid]===void 0&&(n[d.uuid]=i.parse(d)),c.push(n[d.uuid])}r[u.uuid]=c}else n[u.uuid]===void 0&&(n[u.uuid]=i.parse(u)),r[u.uuid]=n[u.uuid]}}return r},parseAnimations:function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n],i=ui.parse(r);r.uuid!==void 0&&(i.uuid=r.uuid),e.push(i)}return e},parseImages:function(t,e){var n=this,r={},i;function o(x){return n.manager.itemStart(x),i.load(x,function(){n.manager.itemEnd(x)},void 0,function(){n.manager.itemError(x),n.manager.itemEnd(x)})}if(t!==void 0&&t.length>0){var l=new jb(e);i=new ac(l),i.setCrossOrigin(this.crossOrigin);for(var u=0,c=t.length;u<c;u++){var f=t[u],d=f.url;if(Array.isArray(d)){r[f.uuid]=[];for(var v=0,m=d.length;v<m;v++){var g=d[v],w=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(g)?g:n.resourcePath+g;r[f.uuid].push(o(w))}}else{var _=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f.url)?f.url:n.resourcePath+f.url;r[f.uuid]=o(_)}}}return r},parseTextures:function(t,e){function n(c,f){return typeof c=="number"?c:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",c),f[c])}var r={};if(t!==void 0)for(var i=0,o=t.length;i<o;i++){var l=t[i];l.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',l.uuid),e[l.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",l.image);var u=void 0;Array.isArray(e[l.image])?u=new rs(e[l.image]):u=new Jt(e[l.image]),u.needsUpdate=!0,u.uuid=l.uuid,l.name!==void 0&&(u.name=l.name),l.mapping!==void 0&&(u.mapping=n(l.mapping,KC)),l.offset!==void 0&&u.offset.fromArray(l.offset),l.repeat!==void 0&&u.repeat.fromArray(l.repeat),l.center!==void 0&&u.center.fromArray(l.center),l.rotation!==void 0&&(u.rotation=l.rotation),l.wrap!==void 0&&(u.wrapS=n(l.wrap[0],Jb),u.wrapT=n(l.wrap[1],Jb)),l.format!==void 0&&(u.format=l.format),l.type!==void 0&&(u.type=l.type),l.encoding!==void 0&&(u.encoding=l.encoding),l.minFilter!==void 0&&(u.minFilter=n(l.minFilter,Zb)),l.magFilter!==void 0&&(u.magFilter=n(l.magFilter,Zb)),l.anisotropy!==void 0&&(u.anisotropy=l.anisotropy),l.flipY!==void 0&&(u.flipY=l.flipY),l.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=l.premultiplyAlpha),l.unpackAlignment!==void 0&&(u.unpackAlignment=l.unpackAlignment),r[l.uuid]=u}return r},parseObject:function(t,e,n){var r;function i(x){return e[x]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",x),e[x]}function o(x){if(x!==void 0){if(Array.isArray(x)){for(var y=[],E=0,R=x.length;E<R;E++){var A=x[E];n[A]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",A),y.push(n[A])}return y}return n[x]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",x),n[x]}}var l,u;switch(t.type){case"Scene":r=new sl,t.background!==void 0&&Number.isInteger(t.background)&&(r.background=new Ye(t.background)),t.fog!==void 0&&(t.fog.type==="Fog"?r.fog=new rC(t.fog.color,t.fog.near,t.fog.far):t.fog.type==="FogExp2"&&(r.fog=new nC(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":r=new fn(t.fov,t.aspect,t.near,t.far),t.focus!==void 0&&(r.focus=t.focus),t.zoom!==void 0&&(r.zoom=t.zoom),t.filmGauge!==void 0&&(r.filmGauge=t.filmGauge),t.filmOffset!==void 0&&(r.filmOffset=t.filmOffset),t.view!==void 0&&(r.view=Object.assign({},t.view));break;case"OrthographicCamera":r=new hs(t.left,t.right,t.top,t.bottom,t.near,t.far),t.zoom!==void 0&&(r.zoom=t.zoom),t.view!==void 0&&(r.view=Object.assign({},t.view));break;case"AmbientLight":r=new ay(t.color,t.intensity);break;case"DirectionalLight":r=new _f(t.color,t.intensity);break;case"PointLight":r=new xf(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":r=new oy(t.color,t.intensity,t.width,t.height);break;case"SpotLight":r=new wv(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":r=new ty(t.color,t.groundColor,t.intensity);break;case"LightProbe":r=new sa().fromJSON(t);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":l=i(t.geometry),u=o(t.material),r=new St(l,u);break;case"InstancedMesh":l=i(t.geometry),u=o(t.material);var c=t.count,f=t.instanceMatrix;r=new Fg(l,u,c),r.instanceMatrix=new at(new Float32Array(f.array),16);break;case"LOD":r=new Qp;break;case"Line":r=new os(i(t.geometry),o(t.material),t.mode);break;case"LineLoop":r=new sv(i(t.geometry),o(t.material));break;case"LineSegments":r=new uf(i(t.geometry),o(t.material));break;case"PointCloud":case"Points":r=new cv(i(t.geometry),o(t.material));break;case"Sprite":r=new Ig(o(t.material));break;case"Group":r=new La;break;default:r=new Qe}if(r.uuid=t.uuid,t.name!==void 0&&(r.name=t.name),t.matrix!==void 0?(r.matrix.fromArray(t.matrix),t.matrixAutoUpdate!==void 0&&(r.matrixAutoUpdate=t.matrixAutoUpdate),r.matrixAutoUpdate&&r.matrix.decompose(r.position,r.quaternion,r.scale)):(t.position!==void 0&&r.position.fromArray(t.position),t.rotation!==void 0&&r.rotation.fromArray(t.rotation),t.quaternion!==void 0&&r.quaternion.fromArray(t.quaternion),t.scale!==void 0&&r.scale.fromArray(t.scale)),t.castShadow!==void 0&&(r.castShadow=t.castShadow),t.receiveShadow!==void 0&&(r.receiveShadow=t.receiveShadow),t.shadow&&(t.shadow.bias!==void 0&&(r.shadow.bias=t.shadow.bias),t.shadow.normalBias!==void 0&&(r.shadow.normalBias=t.shadow.normalBias),t.shadow.radius!==void 0&&(r.shadow.radius=t.shadow.radius),t.shadow.mapSize!==void 0&&r.shadow.mapSize.fromArray(t.shadow.mapSize),t.shadow.camera!==void 0&&(r.shadow.camera=this.parseObject(t.shadow.camera))),t.visible!==void 0&&(r.visible=t.visible),t.frustumCulled!==void 0&&(r.frustumCulled=t.frustumCulled),t.renderOrder!==void 0&&(r.renderOrder=t.renderOrder),t.userData!==void 0&&(r.userData=t.userData),t.layers!==void 0&&(r.layers.mask=t.layers),t.children!==void 0)for(var d=t.children,v=0;v<d.length;v++)r.add(this.parseObject(d[v],e,n));if(t.type==="LOD"){t.autoUpdate!==void 0&&(r.autoUpdate=t.autoUpdate);for(var m=t.levels,g=0;g<m.length;g++){var w=m[g],_=r.getObjectByProperty("uuid",w.object);_!==void 0&&r.addLevel(_,w.distance)}}return r}});var KC={UVMapping:nu,CubeReflectionMapping:Po,CubeRefractionMapping:Oo,EquirectangularReflectionMapping:mh,EquirectangularRefractionMapping:Is,CubeUVReflectionMapping:ja,CubeUVRefractionMapping:No},Jb={RepeatWrapping:bi,ClampToEdgeWrapping:Xn,MirroredRepeatWrapping:qa},Zb={NearestFilter:an,NearestMipmapNearestFilter:Vi,NearestMipmapLinearFilter:Xa,LinearFilter:sn,LinearMipmapNearestFilter:Ds,LinearMipmapLinearFilter:ga};function hy(a){typeof createImageBitmap=="undefined"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Wt.call(this,a),this.options={premultiplyAlpha:"none"}}hy.prototype=Object.assign(Object.create(Wt.prototype),{constructor:hy,isImageBitmapLoader:!0,setOptions:function(t){return this.options=t,this},load:function(t,e,n,r){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,o=dl.get(t);if(o!==void 0)return i.manager.itemStart(t),setTimeout(function(){e&&e(o),i.manager.itemEnd(t)},0),o;fetch(t).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,i.options)}).then(function(l){dl.add(t,l),e&&e(l),i.manager.itemEnd(t)}).catch(function(l){r&&r(l),i.manager.itemError(t),i.manager.itemEnd(t)}),i.manager.itemStart(t)}});function Kb(){this.type="ShapePath",this.color=new Ye,this.subPaths=[],this.currentPath=null}Object.assign(Kb.prototype,{moveTo:function(t,e){return this.currentPath=new ka,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this},lineTo:function(t,e){return this.currentPath.lineTo(t,e),this},quadraticCurveTo:function(t,e,n,r){return this.currentPath.quadraticCurveTo(t,e,n,r),this},bezierCurveTo:function(t,e,n,r,i,o){return this.currentPath.bezierCurveTo(t,e,n,r,i,o),this},splineThru:function(t){return this.currentPath.splineThru(t),this},toShapes:function(t,e){function n(ue){for(var he=[],pe=0,de=ue.length;pe<de;pe++){var Oe=ue[pe],H=new pl;H.curves=Oe.curves,he.push(H)}return he}function r(ue,he){for(var pe=he.length,de=!1,Oe=pe-1,H=0;H<pe;Oe=H++){var L=he[Oe],G=he[H],z=G.x-L.x,M=G.y-L.y;if(Math.abs(M)>Number.EPSILON){if(M<0&&(L=he[H],z=-z,G=he[Oe],M=-M),ue.y<L.y||ue.y>G.y)continue;if(ue.y===L.y){if(ue.x===L.x)return!0}else{var O=M*(ue.x-L.x)-z*(ue.y-L.y);if(O===0)return!0;if(O<0)continue;de=!de}}else{if(ue.y!==L.y)continue;if(G.x<=ue.x&&ue.x<=L.x||L.x<=ue.x&&ue.x<=G.x)return!0}}return de}var i=us.isClockWise,o=this.subPaths;if(o.length===0)return[];if(e===!0)return n(o);var l,u,c,f=[];if(o.length===1)return u=o[0],c=new pl,c.curves=u.curves,f.push(c),f;var d=!i(o[0].getPoints());d=t?!d:d;var v=[],m=[],g=[],w=0,_;m[w]=void 0,g[w]=[];for(var x=0,y=o.length;x<y;x++)u=o[x],_=u.getPoints(),l=i(_),l=t?!l:l,l?(!d&&m[w]&&w++,m[w]={s:new pl,p:_},m[w].s.curves=u.curves,d&&w++,g[w]=[]):g[w].push({h:u,p:_[0]});if(!m[0])return n(o);if(m.length>1){for(var E=!1,R=[],A=0,T=m.length;A<T;A++)v[A]=[];for(var C=0,I=m.length;C<I;C++)for(var j=g[C],U=0;U<j.length;U++){for(var B=j[U],Z=!0,Q=0;Q<m.length;Q++)r(B.p,m[Q].p)&&(C!==Q&&R.push({froms:C,tos:Q,hole:U}),Z?(Z=!1,v[Q].push(B)):E=!0);Z&&v[C].push(B)}R.length>0&&(E||(g=v))}for(var J,q=0,Y=m.length;q<Y;q++){c=m[q].s,f.push(c),J=g[q];for(var ee=0,le=J.length;ee<le;ee++)c.holes.push(J[ee].h)}return f}});function Qb(a){this.type="Font",this.data=a}Object.assign(Qb.prototype,{isFont:!0,generateShapes:function(t,e){e===void 0&&(e=100);for(var n=[],r=QC(t,e,this.data),i=0,o=r.length;i<o;i++)Array.prototype.push.apply(n,r[i].toShapes());return n}});function QC(a,t,e){for(var n=Array.from?Array.from(a):String(a).split(""),r=t/e.resolution,i=(e.boundingBox.yMax-e.boundingBox.yMin+e.underlineThickness)*r,o=[],l=0,u=0,c=0;c<n.length;c++){var f=n[c];if(f===`
`)l=0,u-=i;else{var d=eL(f,r,l,u,e);l+=d.offsetX,o.push(d.path)}}return o}function eL(a,t,e,n,r){var i=r.glyphs[a]||r.glyphs["?"];if(!i){console.error('THREE.Font: character "'+a+'" does not exists in font family '+r.familyName+".");return}var o=new Kb,l,u,c,f,d,v,m,g;if(i.o)for(var w=i._cachedOutline||(i._cachedOutline=i.o.split(" ")),_=0,x=w.length;_<x;){var y=w[_++];switch(y){case"m":l=w[_++]*t+e,u=w[_++]*t+n,o.moveTo(l,u);break;case"l":l=w[_++]*t+e,u=w[_++]*t+n,o.lineTo(l,u);break;case"q":c=w[_++]*t+e,f=w[_++]*t+n,d=w[_++]*t+e,v=w[_++]*t+n,o.quadraticCurveTo(d,v,c,f);break;case"b":c=w[_++]*t+e,f=w[_++]*t+n,d=w[_++]*t+e,v=w[_++]*t+n,m=w[_++]*t+e,g=w[_++]*t+n,o.bezierCurveTo(d,v,m,g,c,f);break}}return{offsetX:i.ha*t,path:o}}function ex(a){Wt.call(this,a)}ex.prototype=Object.assign(Object.create(Wt.prototype),{constructor:ex,load:function(t,e,n,r){var i=this,o=new Yr(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.load(t,function(l){var u;try{u=JSON.parse(l)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),u=JSON.parse(l.substring(65,l.length-2))}var c=i.parse(u);e&&e(c)},n,r)},parse:function(t){return new Qb(t)}});var _v,tL={getContext:function(){return _v===void 0&&(_v=new(window.AudioContext||window.webkitAudioContext)),_v},setContext:function(t){_v=t}};function fy(a){Wt.call(this,a)}fy.prototype=Object.assign(Object.create(Wt.prototype),{constructor:fy,load:function(t,e,n,r){var i=this,o=new Yr(i.manager);o.setResponseType("arraybuffer"),o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.load(t,function(l){try{var u=l.slice(0),c=tL.getContext();c.decodeAudioData(u,function(f){e(f)})}catch(f){r?r(f):console.error(f),i.manager.itemError(t)}},n,r)}});function tx(a,t,e){sa.call(this,void 0,e);var n=new Ye().set(a),r=new Ye().set(t),i=new D(n.r,n.g,n.b),o=new D(r.r,r.g,r.b),l=Math.sqrt(Math.PI),u=l*Math.sqrt(.75);this.sh.coefficients[0].copy(i).add(o).multiplyScalar(l),this.sh.coefficients[1].copy(i).sub(o).multiplyScalar(u)}tx.prototype=Object.assign(Object.create(sa.prototype),{constructor:tx,isHemisphereLightProbe:!0,copy:function(t){return sa.prototype.copy.call(this,t),this},toJSON:function(t){var e=sa.prototype.toJSON.call(this,t);return e}});function nx(a,t){sa.call(this,void 0,t);var e=new Ye().set(a);this.sh.coefficients[0].set(e.r,e.g,e.b).multiplyScalar(2*Math.sqrt(Math.PI))}nx.prototype=Object.assign(Object.create(sa.prototype),{constructor:nx,isAmbientLightProbe:!0,copy:function(t){return sa.prototype.copy.call(this,t),this},toJSON:function(t){var e=sa.prototype.toJSON.call(this,t);return e}});var rx=new ht,ix=new ht;function nL(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new fn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new fn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}Object.assign(nL.prototype,{update:function(t){var e=this._cache,n=e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep;if(n){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep;var r=t.projectionMatrix.clone(),i=e.eyeSep/2,o=i*e.near/e.focus,l=e.near*Math.tan(lt.DEG2RAD*e.fov*.5)/e.zoom,u,c;ix.elements[12]=-i,rx.elements[12]=i,u=-l*e.aspect+o,c=l*e.aspect+o,r.elements[0]=2*e.near/(c-u),r.elements[8]=(c+u)/(c-u),this.cameraL.projectionMatrix.copy(r),u=-l*e.aspect-o,c=l*e.aspect-o,r.elements[0]=2*e.near/(c-u),r.elements[8]=(c+u)/(c-u),this.cameraR.projectionMatrix.copy(r)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(ix),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(rx)}});var fO=new D,dO=new Gn,pO=new D,vO=new D,rL=function(a){ke(e,a);var t=Ie(e);function e(n){var r;return ye(this,e),r=t.call(this),r.type="Audio",r.listener=n,r.context=n.context,r.gain=r.context.createGain(),r.gain.connect(n.getInput()),r.autoplay=!1,r.buffer=null,r.detune=0,r.loop=!1,r.loopStart=0,r.loopEnd=0,r.offset=0,r.duration=void 0,r.playbackRate=1,r.isPlaying=!1,r.hasPlaybackControl=!0,r.source=null,r.sourceType="empty",r._startedAt=0,r._progress=0,r._connected=!1,r.filters=[],r}return Pe(e,[{key:"getOutput",value:function(){return this.gain}},{key:"setNodeSource",value:function(r){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=r,this.connect(),this}},{key:"setMediaElementSource",value:function(r){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(r),this.connect(),this}},{key:"setMediaStreamSource",value:function(r){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(r),this.connect(),this}},{key:"setBuffer",value:function(r){return this.buffer=r,this.sourceType="buffer",this.autoplay&&this.play(),this}},{key:"play",value:function(r){if(r===void 0&&(r=0),this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+r;var i=this.context.createBufferSource();return i.buffer=this.buffer,i.loop=this.loop,i.loopStart=this.loopStart,i.loopEnd=this.loopEnd,i.onended=this.onEnded.bind(this),i.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=i,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}},{key:"pause",value:function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}},{key:"stop",value:function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}},{key:"connect",value:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var r=1,i=this.filters.length;r<i;r++)this.filters[r-1].connect(this.filters[r]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}},{key:"disconnect",value:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var r=1,i=this.filters.length;r<i;r++)this.filters[r-1].disconnect(this.filters[r]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}},{key:"getFilters",value:function(){return this.filters}},{key:"setFilters",value:function(r){return r||(r=[]),this._connected===!0?(this.disconnect(),this.filters=r,this.connect()):this.filters=r,this}},{key:"setDetune",value:function(r){if(this.detune=r,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}},{key:"getDetune",value:function(){return this.detune}},{key:"getFilter",value:function(){return this.getFilters()[0]}},{key:"setFilter",value:function(r){return this.setFilters(r?[r]:[])}},{key:"setPlaybackRate",value:function(r){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=r,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"onEnded",value:function(){this.isPlaying=!1}},{key:"getLoop",value:function(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}},{key:"setLoop",value:function(r){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=r,this.isPlaying===!0&&(this.source.loop=this.loop),this}},{key:"setLoopStart",value:function(r){return this.loopStart=r,this}},{key:"setLoopEnd",value:function(r){return this.loopEnd=r,this}},{key:"getVolume",value:function(){return this.gain.gain.value}},{key:"setVolume",value:function(r){return this.gain.gain.setTargetAtTime(r,this.context.currentTime,.01),this}}]),e}(Qe),mO=new D,gO=new Gn,yO=new D,wO=new D;function ax(a,t,e){this.binding=a,this.valueSize=e;var n,r,i;switch(t){case"quaternion":n=this._slerp,r=this._slerpAdditive,i=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(e*6),this._workIndex=5;break;case"string":case"bool":n=this._select,r=this._select,i=this._setAdditiveIdentityOther,this.buffer=new Array(e*5);break;default:n=this._lerp,r=this._lerpAdditive,i=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(e*5)}this._mixBufferRegion=n,this._mixBufferRegionAdditive=r,this._setIdentity=i,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Object.assign(ax.prototype,{accumulate:function(t,e){var n=this.buffer,r=this.valueSize,i=t*r+r,o=this.cumulativeWeight;if(o===0){for(var l=0;l!==r;++l)n[i+l]=n[l];o=e}else{o+=e;var u=e/o;this._mixBufferRegion(n,i,0,u,r)}this.cumulativeWeight=o},accumulateAdditive:function(t){var e=this.buffer,n=this.valueSize,r=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(e,r,0,t,n),this.cumulativeWeightAdditive+=t},apply:function(t){var e=this.valueSize,n=this.buffer,r=t*e+e,i=this.cumulativeWeight,o=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){var u=e*this._origIndex;this._mixBufferRegion(n,r,u,1-i,e)}o>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*e,1,e);for(var c=e,f=e+e;c!==f;++c)if(n[c]!==n[c+e]){l.setValue(n,r);break}},saveOriginalState:function(){var t=this.binding,e=this.buffer,n=this.valueSize,r=n*this._origIndex;t.getValue(e,r);for(var i=n,o=r;i!==o;++i)e[i]=e[r+i%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){var t=this.valueSize*3;this.binding.setValue(this.buffer,t)},_setAdditiveIdentityNumeric:function(){for(var t=this._addIndex*this.valueSize,e=t+this.valueSize,n=t;n<e;n++)this.buffer[n]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1},_setAdditiveIdentityOther:function(){for(var t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize,n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]},_select:function(t,e,n,r,i){if(r>=.5)for(var o=0;o!==i;++o)t[e+o]=t[n+o]},_slerp:function(t,e,n,r){Gn.slerpFlat(t,e,t,e,t,n,r)},_slerpAdditive:function(t,e,n,r,i){var o=this._workIndex*i;Gn.multiplyQuaternionsFlat(t,o,t,e,t,n),Gn.slerpFlat(t,e,t,e,t,o,r)},_lerp:function(t,e,n,r,i){for(var o=1-r,l=0;l!==i;++l){var u=e+l;t[u]=t[u]*o+t[n+l]*r}},_lerpAdditive:function(t,e,n,r,i){for(var o=0;o!==i;++o){var l=e+o;t[l]=t[l]+t[n+o]*r}}});var dy="\\[\\]\\.:\\/",iL=new RegExp("["+dy+"]","g"),py="[^"+dy+"]",aL="[^"+dy.replace("\\.","")+"]",oL=/((?:WC+[\/:])*)/.source.replace("WC",py),sL=/(WCOD+)?/.source.replace("WCOD",aL),lL=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",py),uL=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",py),cL=new RegExp("^"+oL+sL+lL+uL+"$"),hL=["material","materials","bones"];function ox(a,t,e){var n=e||Vn.parseTrackName(t);this._targetGroup=a,this._bindings=a.subscribe_(t,n)}Object.assign(ox.prototype,{getValue:function(t,e){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];r!==void 0&&r.getValue(t,e)},setValue:function(t,e){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}});function Vn(a,t,e){this.path=t,this.parsedPath=e||Vn.parseTrackName(t),this.node=Vn.findNode(a,this.parsedPath.nodeName)||a,this.rootNode=a}Object.assign(Vn,{Composite:ox,create:function(t,e,n){return t&&t.isAnimationObjectGroup?new Vn.Composite(t,e,n):new Vn(t,e,n)},sanitizeNodeName:function(t){return t.replace(/\s/g,"_").replace(iL,"")},parseTrackName:function(t){var e=cL.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);var n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){var i=n.nodeName.substring(r+1);hL.indexOf(i)!==-1&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n},findNode:function(t,e){if(!e||e===""||e==="."||e===-1||e===t.name||e===t.uuid)return t;if(t.skeleton){var n=t.skeleton.getBoneByName(e);if(n!==void 0)return n}if(t.children){var r=function o(l){for(var u=0;u<l.length;u++){var c=l[u];if(c.name===e||c.uuid===e)return c;var f=o(c.children);if(f)return f}return null},i=r(t.children);if(i)return i}return null}}),Object.assign(Vn.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)t[e++]=n[r]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++]},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,n=e.objectName,r=e.propertyName,i=e.propertyIndex;if(t||(t=Vn.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(n){var o=e.objectIndex;switch(n){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(var l=0;l<t.length;l++)if(t[l].name===o){o=l;break}break;default:if(t[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[n]}if(o!==void 0){if(t[o]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[o]}}var u=t[r];if(u===void 0){var c=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",t);return}var f=this.Versioning.None;this.targetObject=t,t.needsUpdate!==void 0?f=this.Versioning.NeedsUpdate:t.matrixWorldNeedsUpdate!==void 0&&(f=this.Versioning.MatrixWorldNeedsUpdate);var d=this.BindingType.Direct;if(i!==void 0){if(r==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[i]!==void 0&&(i=t.morphTargetDictionary[i])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}d=this.BindingType.ArrayElement,this.resolvedProperty=u,this.propertyIndex=i}else u.fromArray!==void 0&&u.toArray!==void 0?(d=this.BindingType.HasFromToArray,this.resolvedProperty=u):Array.isArray(u)?(d=this.BindingType.EntireArray,this.resolvedProperty=u):this.propertyName=r;this.getValue=this.GetterByBindingType[d],this.setValue=this.SetterByBindingTypeAndVersioning[d][f]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Vn.prototype,{_getValue_unbound:Vn.prototype.getValue,_setValue_unbound:Vn.prototype.setValue});function fL(){this.uuid=lt.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var a={};this._indicesByUUID=a;for(var t=0,e=arguments.length;t!==e;++t)a[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}Object.assign(fL.prototype,{isAnimationObjectGroup:!0,add:function(){for(var t=this._objects,e=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,o=i.length,l=void 0,u=t.length,c=this.nCachedObjects_,f=0,d=arguments.length;f!==d;++f){var v=arguments[f],m=v.uuid,g=e[m];if(g===void 0){g=u++,e[m]=g,t.push(v);for(var w=0,_=o;w!==_;++w)i[w].push(new Vn(v,n[w],r[w]))}else if(g<c){l=t[g];var x=--c,y=t[x];e[y.uuid]=g,t[g]=y,e[m]=x,t[x]=v;for(var E=0,R=o;E!==R;++E){var A=i[E],T=A[x],C=A[g];A[g]=T,C===void 0&&(C=new Vn(v,n[E],r[E])),A[x]=C}}else t[g]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c},remove:function(){for(var t=this._objects,e=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_,o=0,l=arguments.length;o!==l;++o){var u=arguments[o],c=u.uuid,f=e[c];if(f!==void 0&&f>=i){var d=i++,v=t[d];e[v.uuid]=f,t[f]=v,e[c]=d,t[d]=u;for(var m=0,g=r;m!==g;++m){var w=n[m],_=w[d],x=w[f];w[f]=_,w[d]=x}}}this.nCachedObjects_=i},uncache:function(){for(var t=this._objects,e=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_,o=t.length,l=0,u=arguments.length;l!==u;++l){var c=arguments[l],f=c.uuid,d=e[f];if(d!==void 0)if(delete e[f],d<i){var v=--i,m=t[v],g=--o,w=t[g];e[m.uuid]=d,t[d]=m,e[w.uuid]=v,t[v]=w,t.pop();for(var _=0,x=r;_!==x;++_){var y=n[_],E=y[v],R=y[g];y[d]=E,y[v]=R,y.pop()}}else{var A=--o,T=t[A];e[T.uuid]=d,t[d]=T,t.pop();for(var C=0,I=r;C!==I;++C){var j=n[C];j[d]=j[A],j.pop()}}}this.nCachedObjects_=i},subscribe_:function(t,e){var n=this._bindingsIndicesByPath,r=n[t],i=this._bindings;if(r!==void 0)return i[r];var o=this._paths,l=this._parsedPaths,u=this._objects,c=u.length,f=this.nCachedObjects_,d=new Array(c);r=i.length,n[t]=r,o.push(t),l.push(e),i.push(d);for(var v=f,m=u.length;v!==m;++v){var g=u[v];d[v]=new Vn(g,t,e)}return d},unsubscribe_:function(t){var e=this._bindingsIndicesByPath,n=e[t];if(n!==void 0){var r=this._paths,i=this._parsedPaths,o=this._bindings,l=o.length-1,u=o[l],c=t[l];e[c]=n,o[n]=u,o.pop(),i[n]=i[l],i.pop(),r[n]=r[l],r.pop()}}});var dL=function(){function a(t,e,n,r){ye(this,a),this._mixer=t,this._clip=e,this._localRoot=n||null,this.blendMode=r||e.blendMode;for(var i=e.tracks,o=i.length,l=new Array(o),u={endingStart:Ja,endingEnd:Ja},c=0;c!==o;++c){var f=i[c].createInterpolant(null);l[c]=f,f.settings=u}this._interpolantSettings=u,this._interpolants=l,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=fp,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}return Pe(a,[{key:"play",value:function(){return this._mixer._activateAction(this),this}},{key:"stop",value:function(){return this._mixer._deactivateAction(this),this.reset()}},{key:"reset",value:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}},{key:"isRunning",value:function(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}},{key:"isScheduled",value:function(){return this._mixer._isActiveAction(this)}},{key:"startAt",value:function(e){return this._startTime=e,this}},{key:"setLoop",value:function(e,n){return this.loop=e,this.repetitions=n,this}},{key:"setEffectiveWeight",value:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}},{key:"getEffectiveWeight",value:function(){return this._effectiveWeight}},{key:"fadeIn",value:function(e){return this._scheduleFading(e,0,1)}},{key:"fadeOut",value:function(e){return this._scheduleFading(e,1,0)}},{key:"crossFadeFrom",value:function(e,n,r){if(e.fadeOut(n),this.fadeIn(n),r){var i=this._clip.duration,o=e._clip.duration,l=o/i,u=i/o;e.warp(1,l,n),this.warp(u,1,n)}return this}},{key:"crossFadeTo",value:function(e,n,r){return e.crossFadeFrom(this,n,r)}},{key:"stopFading",value:function(){var e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"setEffectiveTimeScale",value:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}},{key:"getEffectiveTimeScale",value:function(){return this._effectiveTimeScale}},{key:"setDuration",value:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}},{key:"syncWith",value:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}},{key:"halt",value:function(e){return this.warp(this._effectiveTimeScale,0,e)}},{key:"warp",value:function(e,n,r){var i=this._mixer,o=i.time,l=this.timeScale,u=this._timeScaleInterpolant;u===null&&(u=i._lendControlInterpolant(),this._timeScaleInterpolant=u);var c=u.parameterPositions,f=u.sampleValues;return c[0]=o,c[1]=o+r,f[0]=e/l,f[1]=n/l,this}},{key:"stopWarping",value:function(){var e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"getMixer",value:function(){return this._mixer}},{key:"getClip",value:function(){return this._clip}},{key:"getRoot",value:function(){return this._localRoot||this._mixer._root}},{key:"_update",value:function(e,n,r,i){if(!this.enabled){this._updateWeight(e);return}var o=this._startTime;if(o!==null){var l=(e-o)*r;if(l<0||r===0)return;this._startTime=null,n=r*l}n*=this._updateTimeScale(e);var u=this._updateTime(n),c=this._updateWeight(e);if(c>0){var f=this._interpolants,d=this._propertyBindings;switch(this.blendMode){case Hs:for(var v=0,m=f.length;v!==m;++v)f[v].evaluate(u),d[v].accumulateAdditive(c);break;case Ph:default:for(var g=0,w=f.length;g!==w;++g)f[g].evaluate(u),d[g].accumulate(i,c)}}}},{key:"_updateWeight",value:function(e){var n=0;if(this.enabled){n=this.weight;var r=this._weightInterpolant;if(r!==null){var i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}},{key:"_updateTimeScale",value:function(e){var n=0;if(!this.paused){n=this.timeScale;var r=this._timeScaleInterpolant;if(r!==null){var i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}},{key:"_updateTime",value:function(e){var n=this._clip.duration,r=this.loop,i=this.time+e,o=this._loopCount,l=r===Bo;if(e===0)return o===-1?i:l&&(o&1)==1?n-i:i;if(r===lg){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=n)i=n;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(o===-1&&(e>=0?(o=0,this._setEndings(!0,this.repetitions===0,l)):this._setEndings(this.repetitions===0,!0,l)),i>=n||i<0){var u=Math.floor(i/n);i-=n*u,o+=Math.abs(u);var c=this.repetitions-o;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?n:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(c===1){var f=e<0;this._setEndings(f,!f,l)}else this._setEndings(!1,!1,l);this._loopCount=o,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:u})}}else this.time=i;if(l&&(o&1)==1)return n-i}return i}},{key:"_setEndings",value:function(e,n,r){var i=this._interpolantSettings;r?(i.endingStart=Za,i.endingEnd=Za):(e?i.endingStart=this.zeroSlopeAtStart?Za:Ja:i.endingStart=hu,n?i.endingEnd=this.zeroSlopeAtEnd?Za:Ja:i.endingEnd=hu)}},{key:"_scheduleFading",value:function(e,n,r){var i=this._mixer,o=i.time,l=this._weightInterpolant;l===null&&(l=i._lendControlInterpolant(),this._weightInterpolant=l);var u=l.parameterPositions,c=l.sampleValues;return u[0]=o,c[0]=n,u[1]=o+e,c[1]=r,this}}]),a}();function Sv(a){this._root=a,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}Sv.prototype=Object.assign(Object.create(rr.prototype),{constructor:Sv,_bindAction:function(t,e){var n=t._localRoot||this._root,r=t._clip.tracks,i=r.length,o=t._propertyBindings,l=t._interpolants,u=n.uuid,c=this._bindingsByRootAndName,f=c[u];f===void 0&&(f={},c[u]=f);for(var d=0;d!==i;++d){var v=r[d],m=v.name,g=f[m];if(g!==void 0)o[d]=g;else{if(g=o[d],g!==void 0){g._cacheIndex===null&&(++g.referenceCount,this._addInactiveBinding(g,u,m));continue}var w=e&&e._propertyBindings[d].binding.parsedPath;g=new ax(Vn.create(n,m,w),v.ValueTypeName,v.getValueSize()),++g.referenceCount,this._addInactiveBinding(g,u,m),o[d]=g}l[d].resultBuffer=g.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(t._cacheIndex===null){var e=(t._localRoot||this._root).uuid,n=t._clip.uuid,r=this._actionsByClip[n];this._bindAction(t,r&&r.knownActions[0]),this._addInactiveAction(t,n,e)}for(var i=t._propertyBindings,o=0,l=i.length;o!==l;++o){var u=i[o];u.useCount++==0&&(this._lendBinding(u),u.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,n=0,r=e.length;n!==r;++n){var i=e[n];--i.useCount==0&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){var e=t._cacheIndex;return e!==null&&e<this._nActiveActions},_addInactiveAction:function(t,e,n){var r=this._actions,i=this._actionsByClip,o=i[e];if(o===void 0)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,i[e]=o;else{var l=o.knownActions;t._byClipCacheIndex=l.length,l.push(t)}t._cacheIndex=r.length,r.push(t),o.actionByRoot[n]=t},_removeInactiveAction:function(t){var e=this._actions,n=e[e.length-1],r=t._cacheIndex;n._cacheIndex=r,e[r]=n,e.pop(),t._cacheIndex=null;var i=t._clip.uuid,o=this._actionsByClip,l=o[i],u=l.knownActions,c=u[u.length-1],f=t._byClipCacheIndex;c._byClipCacheIndex=f,u[f]=c,u.pop(),t._byClipCacheIndex=null;var d=l.actionByRoot,v=(t._localRoot||this._root).uuid;delete d[v],u.length===0&&delete o[i],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=t._propertyBindings,n=0,r=e.length;n!==r;++n){var i=e[n];--i.referenceCount==0&&this._removeInactiveBinding(i)}},_lendAction:function(t){var e=this._actions,n=t._cacheIndex,r=this._nActiveActions++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_takeBackAction:function(t){var e=this._actions,n=t._cacheIndex,r=--this._nActiveActions,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_addInactiveBinding:function(t,e,n){var r=this._bindingsByRootAndName,i=this._bindings,o=r[e];o===void 0&&(o={},r[e]=o),o[n]=t,t._cacheIndex=i.length,i.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,n=t.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,l=o[r],u=e[e.length-1],c=t._cacheIndex;u._cacheIndex=c,e[c]=u,e.pop(),delete l[i],Object.keys(l).length===0&&delete o[r]},_lendBinding:function(t){var e=this._bindings,n=t._cacheIndex,r=this._nActiveBindings++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_takeBackBinding:function(t){var e=this._bindings,n=t._cacheIndex,r=--this._nActiveBindings,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,n=t[e];return n===void 0&&(n=new gv(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=e,t[e]=n),n},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,n=t.__cacheIndex,r=--this._nActiveControlInterpolants,i=e[r];t.__cacheIndex=r,e[r]=t,i.__cacheIndex=n,e[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e,n){var r=e||this._root,i=r.uuid,o=typeof t=="string"?ui.findByName(r,t):t,l=o!==null?o.uuid:t,u=this._actionsByClip[l],c=null;if(n===void 0&&(o!==null?n=o.blendMode:n=Ph),u!==void 0){var f=u.actionByRoot[i];if(f!==void 0&&f.blendMode===n)return f;c=u.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;var d=new dL(this,o,e,n);return this._bindAction(d,c),this._addInactiveAction(d,l,i),d},existingAction:function(t,e){var n=e||this._root,r=n.uuid,i=typeof t=="string"?ui.findByName(n,t):t,o=i?i.uuid:t,l=this._actionsByClip[o];return l!==void 0&&l.actionByRoot[r]||null},stopAllAction:function(){for(var t=this._actions,e=this._nActiveActions,n=e-1;n>=0;--n)t[n].stop();return this},update:function(t){t*=this.timeScale;for(var e=this._actions,n=this._nActiveActions,r=this.time+=t,i=Math.sign(t),o=this._accuIndex^=1,l=0;l!==n;++l){var u=e[l];u._update(r,t,i,o)}for(var c=this._bindings,f=this._nActiveBindings,d=0;d!==f;++d)c[d].apply(o);return this},setTime:function(t){this.time=0;for(var e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions,n=t.uuid,r=this._actionsByClip,i=r[n];if(i!==void 0){for(var o=i.knownActions,l=0,u=o.length;l!==u;++l){var c=o[l];this._deactivateAction(c);var f=c._cacheIndex,d=e[e.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,d._cacheIndex=f,e[f]=d,e.pop(),this._removeInactiveBindingsForAction(c)}delete r[n]}},uncacheRoot:function(t){var e=t.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot,o=i[e];o!==void 0&&(this._deactivateAction(o),this._removeInactiveAction(o))}var l=this._bindingsByRootAndName,u=l[e];if(u!==void 0)for(var c in u){var f=u[c];f.restoreOriginalState(),this._removeInactiveBinding(f)}},uncacheAction:function(t,e){var n=this.existingAction(t,e);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}});var pL=function(){function a(t){ye(this,a),typeof t=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}return Pe(a,[{key:"clone",value:function(){return new a(this.value.clone===void 0?this.value:this.value.clone())}}]),a}();function sx(a,t,e){li.call(this,a,t),this.meshPerAttribute=e||1}sx.prototype=Object.assign(Object.create(li.prototype),{constructor:sx,isInstancedInterleavedBuffer:!0,copy:function(t){return li.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},clone:function(t){var e=li.prototype.clone.call(this,t);return e.meshPerAttribute=this.meshPerAttribute,e},toJSON:function(t){var e=li.prototype.toJSON.call(this,t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}});function lx(a,t,e,n,r){this.buffer=a,this.type=t,this.itemSize=e,this.elementSize=n,this.count=r,this.version=0}Object.defineProperty(lx.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}}),Object.assign(lx.prototype,{isGLBufferAttribute:!0,setBuffer:function(t){return this.buffer=t,this},setType:function(t,e){return this.type=t,this.elementSize=e,this},setItemSize:function(t){return this.itemSize=t,this},setCount:function(t){return this.count=t,this}});function vy(a,t,e,n){this.ray=new ro(a,t),this.near=e||0,this.far=n||1/0,this.camera=null,this.layers=new Xs,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function ux(a,t){return a.distance-t.distance}function my(a,t,e,n){if(a.layers.test(t.layers)&&a.raycast(t,e),n===!0)for(var r=a.children,i=0,o=r.length;i<o;i++)my(r[i],t,e,!0)}Object.assign(vy.prototype,{set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,e,n){var r=n||[];return my(t,this,r,e),r.sort(ux),r},intersectObjects:function(t,e,n){var r=n||[];if(Array.isArray(t)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(var i=0,o=t.length;i<o;i++)my(t[i],this,r,e);return r.sort(ux),r}});var Mv=function(){function a(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return ye(this,a),this.radius=t,this.phi=e,this.theta=n,this}return Pe(a,[{key:"set",value:function(e,n,r){return this.radius=e,this.phi=n,this.theta=r,this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"copy",value:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}},{key:"makeSafe",value:function(){var e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,n,r){return this.radius=Math.sqrt(e*e+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(lt.clamp(n/this.radius,-1,1))),this}}]),a}(),cx=new xe,vL=function(){function a(t,e){ye(this,a),Object.defineProperty(this,"isBox2",{value:!0}),this.min=t!==void 0?t:new xe(1/0,1/0),this.max=e!==void 0?e:new xe(-1/0,-1/0)}return Pe(a,[{key:"set",value:function(e,n){return this.min.copy(e),this.max.copy(n),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}},{key:"setFromCenterAndSize",value:function(e,n){var r=cx.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y}},{key:"getCenter",value:function(e){return e===void 0&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new xe),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return e===void 0&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new xe),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}},{key:"getParameter",value:function(e,n){return n===void 0&&(console.warn("THREE.Box2: .getParameter() target is now required"),n=new xe),n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}},{key:"clampPoint",value:function(e,n){return n===void 0&&(console.warn("THREE.Box2: .clampPoint() target is now required"),n=new xe),n.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){var n=cx.copy(e).clamp(this.min,this.max);return n.sub(e).length()}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),a}(),bO=new D,xO=new D;function Ev(a){Qe.call(this),this.material=a,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}Ev.prototype=Object.create(Qe.prototype),Ev.prototype.constructor=Ev,Ev.prototype.isImmediateRenderObject=!0;var _O=new D,fs=new D,Tv=new ht,gy=new ht,hx=function(a){ke(e,a);var t=Ie(e);function e(n){var r;ye(this,e);for(var i=fx(n),o=new dt,l=[],u=[],c=new Ye(0,0,1),f=new Ye(0,1,0),d=0;d<i.length;d++){var v=i[d];v.parent&&v.parent.isBone&&(l.push(0,0,0),l.push(0,0,0),u.push(c.r,c.g,c.b),u.push(f.r,f.g,f.b))}o.setAttribute("position",new Ve(l,3)),o.setAttribute("color",new Ve(u,3));var m=new Ii({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});return r=t.call(this,o,m),r.type="SkeletonHelper",r.isSkeletonHelper=!0,r.root=n,r.bones=i,r.matrix=n.matrixWorld,r.matrixAutoUpdate=!1,r}return Pe(e,[{key:"updateMatrixWorld",value:function(r){var i=this.bones,o=this.geometry,l=o.getAttribute("position");gy.getInverse(this.root.matrixWorld);for(var u=0,c=0;u<i.length;u++){var f=i[u];f.parent&&f.parent.isBone&&(Tv.multiplyMatrices(gy,f.matrixWorld),fs.setFromMatrixPosition(Tv),l.setXYZ(c,fs.x,fs.y,fs.z),Tv.multiplyMatrices(gy,f.parent.matrixWorld),fs.setFromMatrixPosition(Tv),l.setXYZ(c+1,fs.x,fs.y,fs.z),c+=2)}o.getAttribute("position").needsUpdate=!0,et(Ze(e.prototype),"updateMatrixWorld",this).call(this,r)}}]),e}(uf);function fx(a){var t=[];a&&a.isBone&&t.push(a);for(var e=0;e<a.children.length;e++)t.push.apply(t,fx(a.children[e]));return t}var SO=new D,MO=new Ye,EO=new Ye,TO=new D,AO=new D,CO=new D,LO=new D,RO=new Pi,PO=new Vr,OO=new D,oc=4,ds=8,Ia=Math.pow(2,ds),dx=[.125,.215,.35,.446,.526,.582],px=ds-oc+1+dx.length,sc=20,Da=(me={},kt(me,On,0),kt(me,Uo,1),kt(me,Ho,2),kt(me,zs,3),kt(me,Oh,4),kt(me,Vs,5),kt(me,Go,6),me),yy=new hs,wy=yL(),Sf=wy._lodPlanes,vx=wy._sizeLods,Av=wy._sigmas,by=null,ml=(1+Math.sqrt(5))/2,lc=1/ml,mx=[new D(1,1,1),new D(-1,1,1),new D(1,1,-1),new D(-1,1,-1),new D(0,ml,lc),new D(0,ml,-lc),new D(lc,0,ml),new D(-lc,0,ml),new D(ml,lc,0),new D(-ml,lc,0)],mL=function(){function a(t){ye(this,a),this._renderer=t,this._pingPongRenderTarget=null,this._blurMaterial=wL(sc),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}return Pe(a,[{key:"fromScene",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:.1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:100;by=this._renderer.getRenderTarget();var o=this._allocateTargets();return this._sceneToCubeUV(e,r,i,o),n>0&&this._blur(o,0,0,n),this._applyPMREM(o),this._cleanup(o),o}},{key:"fromEquirectangular",value:function(e){return this._fromTexture(e)}},{key:"fromCubemap",value:function(e){return this._fromTexture(e)}},{key:"compileCubemapShader",value:function(){this._cubemapShader===null&&(this._cubemapShader=wx(),this._compileMaterial(this._cubemapShader))}},{key:"compileEquirectangularShader",value:function(){this._equirectShader===null&&(this._equirectShader=yx(),this._compileMaterial(this._equirectShader))}},{key:"dispose",value:function(){this._blurMaterial.dispose(),this._cubemapShader!==null&&this._cubemapShader.dispose(),this._equirectShader!==null&&this._equirectShader.dispose();for(var e=0;e<Sf.length;e++)Sf[e].dispose()}},{key:"_cleanup",value:function(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(by),e.scissorTest=!1,Cv(e,0,0,e.width,e.height)}},{key:"_fromTexture",value:function(e){by=this._renderer.getRenderTarget();var n=this._allocateTargets(e);return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}},{key:"_allocateTargets",value:function(e){var n={magFilter:an,minFilter:an,generateMipmaps:!1,type:xi,format:Xd,encoding:gL(e)?e.encoding:Ho,depthBuffer:!1},r=gx(n);return r.depthBuffer=!e,this._pingPongRenderTarget=gx(n),r}},{key:"_compileMaterial",value:function(e){var n=new St(Sf[0],e);this._renderer.compile(n,yy)}},{key:"_sceneToCubeUV",value:function(e,n,r,i){var o=90,l=1,u=new fn(o,l,n,r),c=[1,-1,1,1,1,1],f=[1,1,1,-1,-1,-1],d=this._renderer,v=d.outputEncoding,m=d.toneMapping,g=d.getClearColor(),w=d.getClearAlpha();d.toneMapping=$a,d.outputEncoding=On;var _=e.background;if(_&&_.isColor){_.convertSRGBToLinear();var x=Math.max(_.r,_.g,_.b),y=Math.min(Math.max(Math.ceil(Math.log2(x)),-128),127);_=_.multiplyScalar(Math.pow(2,-y));var E=(y+128)/255;d.setClearColor(_,E),e.background=null}for(var R=0;R<6;R++){var A=R%3;A==0?(u.up.set(0,c[R],0),u.lookAt(f[R],0,0)):A==1?(u.up.set(0,0,c[R]),u.lookAt(0,f[R],0)):(u.up.set(0,c[R],0),u.lookAt(0,0,f[R])),Cv(i,A*Ia,R>2?Ia:0,Ia,Ia),d.setRenderTarget(i),d.render(e,u)}d.toneMapping=m,d.outputEncoding=v,d.setClearColor(g,w)}},{key:"_textureToCubeUV",value:function(e,n){var r=this._renderer;e.isCubeTexture?this._cubemapShader==null&&(this._cubemapShader=wx()):this._equirectShader==null&&(this._equirectShader=yx());var i=e.isCubeTexture?this._cubemapShader:this._equirectShader,o=new St(Sf[0],i),l=i.uniforms;l.envMap.value=e,e.isCubeTexture||l.texelSize.value.set(1/e.image.width,1/e.image.height),l.inputEncoding.value=Da[e.encoding],l.outputEncoding.value=Da[n.texture.encoding],Cv(n,0,0,3*Ia,2*Ia),r.setRenderTarget(n),r.render(o,yy)}},{key:"_applyPMREM",value:function(e){var n=this._renderer,r=n.autoClear;n.autoClear=!1;for(var i=1;i<px;i++){var o=Math.sqrt(Av[i]*Av[i]-Av[i-1]*Av[i-1]),l=mx[(i-1)%mx.length];this._blur(e,i-1,i,o,l)}n.autoClear=r}},{key:"_blur",value:function(e,n,r,i,o){var l=this._pingPongRenderTarget;this._halfBlur(e,l,n,r,i,"latitudinal",o),this._halfBlur(l,e,r,r,i,"longitudinal",o)}},{key:"_halfBlur",value:function(e,n,r,i,o,l,u){var c=this._renderer,f=this._blurMaterial;l!=="latitudinal"&&l!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");var d=3,v=new St(Sf[i],f),m=f.uniforms,g=vx[r]-1,w=isFinite(o)?Math.PI/(2*g):2*Math.PI/(2*sc-1),_=o/w,x=isFinite(o)?1+Math.floor(d*_):sc;x>sc&&console.warn("sigmaRadians, ".concat(o,", is too large and will clip, as it requested ").concat(x," samples when the maximum is set to ").concat(sc));for(var y=[],E=0,R=0;R<sc;++R){var A=R/_,T=Math.exp(-A*A/2);y.push(T),R==0?E+=T:R<x&&(E+=2*T)}for(var C=0;C<y.length;C++)y[C]=y[C]/E;m.envMap.value=e.texture,m.samples.value=x,m.weights.value=y,m.latitudinal.value=l==="latitudinal",u&&(m.poleAxis.value=u),m.dTheta.value=w,m.mipInt.value=ds-r,m.inputEncoding.value=Da[e.texture.encoding],m.outputEncoding.value=Da[e.texture.encoding];var I=vx[i],j=3*Math.max(0,Ia-2*I),U=(i===0?0:2*Ia)+2*I*(i>ds-oc?i-ds+oc:0);Cv(n,j,U,3*I,2*I),c.setRenderTarget(n),c.render(v,yy)}}]),a}();function gL(a){return a===void 0||a.type!==xi?!1:a.encoding===On||a.encoding===Uo||a.encoding===Go}function yL(){for(var a=[],t=[],e=[],n=ds,r=0;r<px;r++){var i=Math.pow(2,n);t.push(i);var o=1/i;r>ds-oc?o=dx[r-ds+oc-1]:r==0&&(o=0),e.push(o);for(var l=1/(i-1),u=-l/2,c=1+l/2,f=[u,u,c,u,c,c,u,u,c,c,u,c],d=6,v=6,m=3,g=2,w=1,_=new Float32Array(m*v*d),x=new Float32Array(g*v*d),y=new Float32Array(w*v*d),E=0;E<d;E++){var R=E%3*2/3-1,A=E>2?0:-1,T=[R,A,0,R+2/3,A,0,R+2/3,A+1,0,R,A,0,R+2/3,A+1,0,R,A+1,0];_.set(T,m*v*E),x.set(f,g*v*E);var C=[E,E,E,E,E,E];y.set(C,w*v*E)}var I=new dt;I.setAttribute("position",new at(_,m)),I.setAttribute("uv",new at(x,g)),I.setAttribute("faceIndex",new at(y,w)),a.push(I),n>oc&&n--}return{_lodPlanes:a,_sizeLods:t,_sigmas:e}}function gx(a){var t=new ir(3*Ia,3*Ia,a);return t.texture.mapping=ja,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function Cv(a,t,e,n,r){a.viewport.set(t,e,n,r),a.scissor.set(t,e,n,r)}function wL(a){var t=new Float32Array(a),e=new D(0,1,0),n=new ho({name:"SphericalGaussianBlur",defines:{n:a},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:e},inputEncoding:{value:Da[On]},outputEncoding:{value:Da[On]}},vertexShader:xy(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			`.concat(_y(),`

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`),blending:Zr,depthTest:!1,depthWrite:!1});return n}function yx(){var a=new xe(1,1),t=new ho({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:a},inputEncoding:{value:Da[On]},outputEncoding:{value:Da[On]}},vertexShader:xy(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform vec2 texelSize;

			`.concat(_y(),`

			#include <common>

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				vec2 f = fract( uv / texelSize - 0.5 );
				uv -= f * texelSize;
				vec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x += texelSize.x;
				vec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.y += texelSize.y;
				vec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x -= texelSize.x;
				vec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;

				vec3 tm = mix( tl, tr, f.x );
				vec3 bm = mix( bl, br, f.x );
				gl_FragColor.rgb = mix( tm, bm, f.y );

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`),blending:Zr,depthTest:!1,depthWrite:!1});return t}function wx(){var a=new ho({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:Da[On]},outputEncoding:{value:Da[On]}},vertexShader:xy(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			`.concat(_y(),`

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;
				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`),blending:Zr,depthTest:!1,depthWrite:!1});return a}function xy(){return`

		precision mediump float;
		precision mediump int;

		attribute vec3 position;
		attribute vec2 uv;
		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function _y(){return`

		uniform int inputEncoding;
		uniform int outputEncoding;

		#include <encodings_pars_fragment>

		vec4 inputTexelToLinear( vec4 value ) {

			if ( inputEncoding == 0 ) {

				return value;

			} else if ( inputEncoding == 1 ) {

				return sRGBToLinear( value );

			} else if ( inputEncoding == 2 ) {

				return RGBEToLinear( value );

			} else if ( inputEncoding == 3 ) {

				return RGBMToLinear( value, 7.0 );

			} else if ( inputEncoding == 4 ) {

				return RGBMToLinear( value, 16.0 );

			} else if ( inputEncoding == 5 ) {

				return RGBDToLinear( value, 256.0 );

			} else {

				return GammaToLinear( value, 2.2 );

			}

		}

		vec4 linearToOutputTexel( vec4 value ) {

			if ( outputEncoding == 0 ) {

				return value;

			} else if ( outputEncoding == 1 ) {

				return LinearTosRGB( value );

			} else if ( outputEncoding == 2 ) {

				return LinearToRGBE( value );

			} else if ( outputEncoding == 3 ) {

				return LinearToRGBM( value, 7.0 );

			} else if ( outputEncoding == 4 ) {

				return LinearToRGBM( value, 16.0 );

			} else if ( outputEncoding == 5 ) {

				return LinearToRGBD( value, 256.0 );

			} else {

				return LinearToGamma( value, 2.2 );

			}

		}

		vec4 envMapTexelToLinear( vec4 color ) {

			return inputTexelToLinear( color );

		}
	`}ot.create=function(a,t){return console.log("THREE.Curve.create() has been deprecated"),a.prototype=Object.create(ot.prototype),a.prototype.constructor=a,a.prototype.getPoint=t,a},Object.assign(cs.prototype,{createPointsGeometry:function(t){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var e=new Zt,n=0,r=t.length;n<r;n++){var i=t[n];e.vertices.push(new D(i.x,i.y,i.z||0))}return e}}),Object.assign(ka.prototype,{fromPoints:function(t){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)}});function bx(a){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),oa.call(this,a),this.type="catmullrom"}bx.prototype=Object.create(oa.prototype),Object.assign(bx.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),hx.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Wt.prototype,{extractUrlBase:function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),vl.extractUrlBase(t)}}),Wt.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Object.assign(cy.prototype,{setTexturePath:function(t){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)}}),Object.assign(vL.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(Vr.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(Ei.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}}),Iu.prototype.setFromMatrix=function(a){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(a)},Object.assign(lt,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(t){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),lt.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),lt.ceilPowerOfTwo(t)}}),Object.assign(Jn.prototype,{flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(t){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(ht.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new D().setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(t){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,e,n,r,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,r,n,i,o)}}),Ai.prototype.isIntersectionLine=function(a){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(a)},Gn.prototype.multiplyVector3=function(a){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),a.applyQuaternion(this)},Object.assign(ro.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(ni.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},midpoint:function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},normal:function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},plane:function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)}}),Object.assign(ni,{barycoordFromPoint:function(t,e,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),ni.getBarycoord(t,e,n,r,i)},normal:function(t,e,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),ni.getNormal(t,e,n,r)}}),Object.assign(pl.prototype,{extractAllPoints:function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Ib(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Hb(this,t)}}),Object.assign(xe.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(D.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,e,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Qt.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Zt.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(t){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),Object.assign(Qe.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(t){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),Object.defineProperties(Qe.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.assign(St.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}),Object.defineProperties(St.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),dp},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Object.defineProperties(Qp.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(tv.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),ev.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(ot.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}}),fn.prototype.setLens=function(a,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),t!==void 0&&(this.filmGauge=t),this.setFocalLength(a)},Object.defineProperties(pn.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(at.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===ba},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(ba)}}}),Object.assign(at.prototype,{setDynamic:function(t){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(t===!0?ba:Ws),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(dt.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addAttribute:function(t,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(e&&e.isBufferAttribute)&&!(e&&e.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(t,new at(arguments[1],arguments[2]))):t==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(t,e)},addDrawCall:function(t,e,n){n!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(t){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(t)},applyMatrix:function(t){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),Object.defineProperties(dt.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(bv.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(t){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=t}}}),Object.defineProperties(vy.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(t){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=t}}}),Object.defineProperties(li.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===ba},set:function(t){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(t)}}}),Object.assign(li.prototype,{setDynamic:function(t){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(t===!0?ba:Ws),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(mv.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.assign(sl.prototype,{dispose:function(){console.error("THREE.Scene: .dispose() has been removed.")}}),Object.defineProperties(pL.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(ut.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Ye}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=t===sh}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(t){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=t}}}),Object.defineProperties(hl.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(fo.prototype,{transparency:{get:function(){return console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission},set:function(t){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission=t}}}),Object.defineProperties(fr.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.assign(Xp.prototype,{clearTarget:function(t,e,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,n,r)},animate:function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Object.defineProperties(Xp.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(t){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=t===!0?Uo:On}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(lb.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(ir.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Object.defineProperties(rL.prototype,{load:{value:function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var e=this,n=new fy;return n.load(t,function(r){e.setBuffer(r)}),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),dr.prototype.updateCubeMap=function(a,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(a,t)},zr.crossOrigin=void 0,zr.loadTexture=function(a,t,e,n){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var r=new gf;r.setCrossOrigin(this.crossOrigin);var i=r.load(a,e,void 0,n);return t&&(i.mapping=t),i},zr.loadTextureCube=function(a,t,e,n){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var r=new Yg;r.setCrossOrigin(this.crossOrigin);var i=r.load(a,e,void 0,n);return t&&(i.mapping=t),i},zr.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},zr.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:bt}}));var hi=function(t){Wt.call(this,t),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}};hi.prototype=Object.assign(Object.create(Wt.prototype),{constructor:hi,setDecoderPath:function(t){return this.decoderPath=t,this},setDecoderConfig:function(t){return this.decoderConfig=t,this},setWorkerLimit:function(t){return this.workerLimit=t,this},setVerbosity:function(){console.warn("THREE.DRACOLoader: The .setVerbosity() method has been removed.")},setDrawMode:function(){console.warn("THREE.DRACOLoader: The .setDrawMode() method has been removed.")},setSkipDequantization:function(){console.warn("THREE.DRACOLoader: The .setSkipDequantization() method has been removed.")},load:function(t,e,n,r){var i=this,o=new Yr(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),this.crossOrigin==="use-credentials"&&o.setWithCredentials(!0),o.load(t,function(l){var u={attributeIDs:i.defaultAttributeIDs,attributeTypes:i.defaultAttributeTypes,useUniqueIDs:!1};i.decodeGeometry(l,u).then(e).catch(r)},n,r)},decodeDracoFile:function(t,e,n,r){var i={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(t,i).then(e)},decodeGeometry:function(t,e){var n=this;for(var r in e.attributeTypes){var i=e.attributeTypes[r];i.BYTES_PER_ELEMENT!==void 0&&(e.attributeTypes[r]=i.name)}var o=JSON.stringify(e);if(hi.taskCache.has(t)){var l=hi.taskCache.get(t);if(l.key===o)return l.promise;if(t.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}var u,c=this.workerNextTaskID++,f=t.byteLength,d=this._getWorker(c,f).then(function(v){return u=v,new Promise(function(m,g){u._callbacks[c]={resolve:m,reject:g},u.postMessage({type:"decode",id:c,taskConfig:e,buffer:t},[t])})}).then(function(v){return n._createGeometry(v.geometry)});return d.catch(function(){return!0}).then(function(){u&&c&&n._releaseTask(u,c)}),hi.taskCache.set(t,{key:o,promise:d}),d},_createGeometry:function(t){var e=new dt;t.index&&e.setIndex(new at(t.index.array,1));for(var n=0;n<t.attributes.length;n++){var r=t.attributes[n],i=r.name,o=r.array,l=r.itemSize;e.setAttribute(i,new at(o,l))}return e},_loadLibrary:function(t,e){var n=new Yr(this.manager);return n.setPath(this.decoderPath),n.setResponseType(e),new Promise(function(r,i){n.load(t,r,void 0,i)})},preload:function(){return this._initDecoder(),this},_initDecoder:function(){var t=this;if(this.decoderPending)return this.decoderPending;var e=(typeof WebAssembly=="undefined"?"undefined":cn(WebAssembly))!=="object"||this.decoderConfig.type==="js",n=[];return e?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then(function(r){var i=r[0];e||(t.decoderConfig.wasmBinary=r[1]);var o=hi.DRACOWorker.toString(),l=["/* draco decoder */",i,"","/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join(`
`);t.workerSourceURL=URL.createObjectURL(new Blob([l]))}),this.decoderPending},_getWorker:function(t,e){var n=this;return this._initDecoder().then(function(){if(n.workerPool.length<n.workerLimit){var r=new Worker(n.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:n.decoderConfig}),r.onmessage=function(o){var l=o.data;switch(l.type){case"decode":r._callbacks[l.id].resolve(l);break;case"error":r._callbacks[l.id].reject(l);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+l.type+'"')}},n.workerPool.push(r)}else n.workerPool.sort(function(i,o){return i._taskLoad>o._taskLoad?-1:1});var r=n.workerPool[n.workerPool.length-1];return r._taskCosts[t]=e,r._taskLoad+=e,r})},_releaseTask:function(t,e){t._taskLoad-=t._taskCosts[e],delete t._callbacks[e],delete t._taskCosts[e]},debug:function(){console.log("Task load: ",this.workerPool.map(function(t){return t._taskLoad}))},dispose:function(){for(var t=0;t<this.workerPool.length;++t)this.workerPool[t].terminate();return this.workerPool.length=0,this}}),hi.DRACOWorker=function(){var a,t;onmessage=function(i){var o=i.data;switch(o.type){case"init":a=o.decoderConfig,t=new Promise(function(c){a.onModuleLoaded=function(f){c({draco:f})},DracoDecoderModule(a)});break;case"decode":var l=o.buffer,u=o.taskConfig;t.then(function(c){var f=c.draco,d=new f.Decoder,v=new f.DecoderBuffer;v.Init(new Int8Array(l),l.byteLength);try{var m=e(f,d,v,u),g=m.attributes.map(function(w){return w.array.buffer});m.index&&g.push(m.index.array.buffer),self.postMessage({type:"decode",id:o.id,geometry:m},g)}catch(w){console.error(w),self.postMessage({type:"error",id:o.id,error:w.message})}finally{f.destroy(v),f.destroy(d)}});break}};function e(r,i,o,l){var u=l.attributeIDs,c=l.attributeTypes,f,d,v=i.GetEncodedGeometryType(o);if(v===r.TRIANGULAR_MESH)f=new r.Mesh,d=i.DecodeBufferToMesh(o,f);else if(v===r.POINT_CLOUD)f=new r.PointCloud,d=i.DecodeBufferToPointCloud(o,f);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!d.ok()||f.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+d.error_msg());var m={index:null,attributes:[]};for(var g in u){var w=self[c[g]],_,x;if(l.useUniqueIDs)x=u[g],_=i.GetAttributeByUniqueId(f,x);else{if(x=i.GetAttributeId(f,r[u[g]]),x===-1)continue;_=i.GetAttribute(f,x)}m.attributes.push(n(r,i,f,g,w,_))}if(v===r.TRIANGULAR_MESH){for(var y=f.num_faces(),E=y*3,R=new Uint32Array(E),A=new r.DracoInt32Array,T=0;T<y;++T){i.GetFaceFromMesh(f,T,A);for(var C=0;C<3;++C)R[T*3+C]=A.GetValue(C)}m.index={array:R,itemSize:1},r.destroy(A)}return r.destroy(f),m}function n(r,i,o,l,u,c){var f=c.num_components(),d=o.num_points(),v=d*f,m,g;switch(u){case Float32Array:m=new r.DracoFloat32Array,i.GetAttributeFloatForAllPoints(o,c,m),g=new Float32Array(v);break;case Int8Array:m=new r.DracoInt8Array,i.GetAttributeInt8ForAllPoints(o,c,m),g=new Int8Array(v);break;case Int16Array:m=new r.DracoInt16Array,i.GetAttributeInt16ForAllPoints(o,c,m),g=new Int16Array(v);break;case Int32Array:m=new r.DracoInt32Array,i.GetAttributeInt32ForAllPoints(o,c,m),g=new Int32Array(v);break;case Uint8Array:m=new r.DracoUInt8Array,i.GetAttributeUInt8ForAllPoints(o,c,m),g=new Uint8Array(v);break;case Uint16Array:m=new r.DracoUInt16Array,i.GetAttributeUInt16ForAllPoints(o,c,m),g=new Uint16Array(v);break;case Uint32Array:m=new r.DracoUInt32Array,i.GetAttributeUInt32ForAllPoints(o,c,m),g=new Uint32Array(v);break;default:throw new Error("THREE.DRACOLoader: Unexpected attribute type.")}for(var w=0;w<v;w++)g[w]=m.GetValue(w);return r.destroy(m),{name:l,array:g,itemSize:f}}},hi.taskCache=new WeakMap,hi.setDecoderPath=function(){console.warn("THREE.DRACOLoader: The .setDecoderPath() method has been removed. Use instance methods.")},hi.setDecoderConfig=function(){console.warn("THREE.DRACOLoader: The .setDecoderConfig() method has been removed. Use instance methods.")},hi.releaseDecoderModule=function(){console.warn("THREE.DRACOLoader: The .releaseDecoderModule() method has been removed. Use instance methods.")},hi.getDecoderModule=function(){console.warn("THREE.DRACOLoader: The .getDecoderModule() method has been removed. Use instance methods.")};var bL=function(){function a(H){Wt.call(this,H),this.dracoLoader=null,this.ddsLoader=null,this.ktx2Loader=null,this.pluginCallbacks=[],this.register(function(L){return new o(L)}),this.register(function(L){return new u(L)}),this.register(function(L){return new l(L)})}a.prototype=Object.assign(Object.create(Wt.prototype),{constructor:a,load:function(L,G,z,M){var O=this,N;this.resourcePath!==""?N=this.resourcePath:this.path!==""?N=this.path:N=vl.extractUrlBase(L),O.manager.itemStart(L);var W=function(se){M?M(se):console.error(se),O.manager.itemError(L),O.manager.itemEnd(L)},ie=new Yr(O.manager);ie.setPath(this.path),ie.setResponseType("arraybuffer"),ie.setRequestHeader(this.requestHeader),O.crossOrigin==="use-credentials"&&ie.setWithCredentials(!0),ie.load(L,function(te){try{O.parse(te,N,function(se){G(se),O.manager.itemEnd(L)},W)}catch(se){W(se)}},z,W)},setDRACOLoader:function(L){return this.dracoLoader=L,this},setDDSLoader:function(L){return this.ddsLoader=L,this},setKTX2Loader:function(L){return this.ktx2Loader=L,this},register:function(L){return this.pluginCallbacks.indexOf(L)===-1&&this.pluginCallbacks.push(L),this},unregister:function(L){return this.pluginCallbacks.indexOf(L)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(L),1),this},parse:function(L,G,z,M){var O,N={},W={};if(typeof L=="string")O=L;else{var ie=vl.decodeText(new Uint8Array(L,0,4));if(ie===c){try{N[e.KHR_BINARY_GLTF]=new v(L)}catch(F){M&&M(F);return}O=N[e.KHR_BINARY_GLTF].content}else O=vl.decodeText(new Uint8Array(L))}var te=JSON.parse(O);if(te.asset===void 0||te.asset.version[0]<2){M&&M(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}var se=new he(te,{path:G||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager,ktx2Loader:this.ktx2Loader});se.fileLoader.setRequestHeader(this.requestHeader);for(var ce=0;ce<this.pluginCallbacks.length;ce++){var be=this.pluginCallbacks[ce](se);W[be.name]=be,N[be.name]=!0}if(te.extensionsUsed)for(var ce=0;ce<te.extensionsUsed.length;++ce){var Te=te.extensionsUsed[ce],Ee=te.extensionsRequired||[];switch(Te){case e.KHR_LIGHTS_PUNCTUAL:N[Te]=new r(te);break;case e.KHR_MATERIALS_UNLIT:N[Te]=new i;break;case e.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:N[Te]=new _;break;case e.KHR_DRACO_MESH_COMPRESSION:N[Te]=new m(te,this.dracoLoader);break;case e.MSFT_TEXTURE_DDS:N[Te]=new n(this.ddsLoader);break;case e.KHR_TEXTURE_TRANSFORM:N[Te]=new g;break;case e.KHR_MESH_QUANTIZATION:N[Te]=new x;break;default:Ee.indexOf(Te)>=0&&W[Te]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+Te+'".')}}se.setExtensions(N),se.setPlugins(W),se.parse(z,M)}});function t(){var H={};return{get:function(G){return H[G]},add:function(G,z){H[G]=z},remove:function(G){delete H[G]},removeAll:function(){H={}}}}var e={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function n(H){if(!H)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader");this.name=e.MSFT_TEXTURE_DDS,this.ddsLoader=H}function r(H){this.name=e.KHR_LIGHTS_PUNCTUAL;var L=H.extensions&&H.extensions[e.KHR_LIGHTS_PUNCTUAL]||{};this.lightDefs=L.lights||[]}r.prototype.loadLight=function(H){var L=this.lightDefs[H],G,z=new Ye(16777215);L.color!==void 0&&z.fromArray(L.color);var M=L.range!==void 0?L.range:0;switch(L.type){case"directional":G=new _f(z),G.target.position.set(0,0,-1),G.add(G.target);break;case"point":G=new xf(z),G.distance=M;break;case"spot":G=new wv(z),G.distance=M,L.spot=L.spot||{},L.spot.innerConeAngle=L.spot.innerConeAngle!==void 0?L.spot.innerConeAngle:0,L.spot.outerConeAngle=L.spot.outerConeAngle!==void 0?L.spot.outerConeAngle:Math.PI/4,G.angle=L.spot.outerConeAngle,G.penumbra=1-L.spot.innerConeAngle/L.spot.outerConeAngle,G.target.position.set(0,0,-1),G.add(G.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+L.type+'".')}return G.position.set(0,0,0),G.decay=2,L.intensity!==void 0&&(G.intensity=L.intensity),G.name=L.name||"light_"+H,Promise.resolve(G)};function i(){this.name=e.KHR_MATERIALS_UNLIT}i.prototype.getMaterialType=function(){return wr},i.prototype.extendParams=function(H,L,G){var z=[];H.color=new Ye(1,1,1),H.opacity=1;var M=L.pbrMetallicRoughness;if(M){if(Array.isArray(M.baseColorFactor)){var O=M.baseColorFactor;H.color.fromArray(O),H.opacity=O[3]}M.baseColorTexture!==void 0&&z.push(G.assignTexture(H,"map",M.baseColorTexture))}return Promise.all(z)};function o(H){this.parser=H,this.name=e.KHR_MATERIALS_CLEARCOAT}o.prototype.getMaterialType=function(H){var L=this.parser,G=L.json.materials[H];return!G.extensions||!G.extensions[this.name]?null:fo},o.prototype.extendMaterialParams=function(H,L){var G=this.parser,z=G.json.materials[H];if(!z.extensions||!z.extensions[this.name])return Promise.resolve();var M=[],O=z.extensions[this.name];if(O.clearcoatFactor!==void 0&&(L.clearcoat=O.clearcoatFactor),O.clearcoatTexture!==void 0&&M.push(G.assignTexture(L,"clearcoatMap",O.clearcoatTexture)),O.clearcoatRoughnessFactor!==void 0&&(L.clearcoatRoughness=O.clearcoatRoughnessFactor),O.clearcoatRoughnessTexture!==void 0&&M.push(G.assignTexture(L,"clearcoatRoughnessMap",O.clearcoatRoughnessTexture)),O.clearcoatNormalTexture!==void 0&&(M.push(G.assignTexture(L,"clearcoatNormalMap",O.clearcoatNormalTexture)),O.clearcoatNormalTexture.scale!==void 0)){var N=O.clearcoatNormalTexture.scale;L.clearcoatNormalScale=new xe(N,N)}return Promise.all(M)};function l(H){this.parser=H,this.name=e.KHR_MATERIALS_TRANSMISSION}l.prototype.getMaterialType=function(H){var L=this.parser,G=L.json.materials[H];return!G.extensions||!G.extensions[this.name]?null:fo},l.prototype.extendMaterialParams=function(H,L){var G=this.parser,z=G.json.materials[H];if(!z.extensions||!z.extensions[this.name])return Promise.resolve();var M=[],O=z.extensions[this.name];return O.transmissionFactor!==void 0&&(L.transmission=O.transmissionFactor),O.transmissionTexture!==void 0&&M.push(G.assignTexture(L,"transmissionMap",O.transmissionTexture)),Promise.all(M)};function u(H){this.parser=H,this.name=e.KHR_TEXTURE_BASISU}u.prototype.loadTexture=function(H){var L=this.parser,G=L.json,z=G.textures[H];if(!z.extensions||!z.extensions[this.name])return null;var M=z.extensions[this.name],O=G.images[M.source],N=L.options.ktx2Loader;if(!N)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return L.loadTextureImage(H,O,N)};var c="glTF",f=12,d={JSON:1313821514,BIN:5130562};function v(H){this.name=e.KHR_BINARY_GLTF,this.content=null,this.body=null;var L=new DataView(H,0,f);if(this.header={magic:vl.decodeText(new Uint8Array(H.slice(0,4))),version:L.getUint32(4,!0),length:L.getUint32(8,!0)},this.header.magic!==c)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var G=new DataView(H,f),z=0;z<G.byteLength;){var M=G.getUint32(z,!0);z+=4;var O=G.getUint32(z,!0);if(z+=4,O===d.JSON){var N=new Uint8Array(H,f+z,M);this.content=vl.decodeText(N)}else if(O===d.BIN){var W=f+z;this.body=H.slice(W,W+M)}z+=M}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}function m(H,L){if(!L)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=e.KHR_DRACO_MESH_COMPRESSION,this.json=H,this.dracoLoader=L,this.dracoLoader.preload()}m.prototype.decodePrimitive=function(H,L){var G=this.json,z=this.dracoLoader,M=H.extensions[this.name].bufferView,O=H.extensions[this.name].attributes,N={},W={},ie={};for(var te in O){var se=I[te]||te.toLowerCase();N[se]=O[te]}for(te in H.attributes){var se=I[te]||te.toLowerCase();if(O[te]!==void 0){var ce=G.accessors[H.attributes[te]],be=R[ce.componentType];ie[se]=be,W[se]=ce.normalized===!0}}return L.getDependency("bufferView",M).then(function(Te){return new Promise(function(Ee){z.decodeDracoFile(Te,function(F){for(var V in F.attributes){var Me=F.attributes[V],ge=W[V];ge!==void 0&&(Me.normalized=ge)}Ee(F)},N,ie)})})};function g(){this.name=e.KHR_TEXTURE_TRANSFORM}g.prototype.extendTexture=function(H,L){return H=H.clone(),L.offset!==void 0&&H.offset.fromArray(L.offset),L.rotation!==void 0&&(H.rotation=L.rotation),L.scale!==void 0&&H.repeat.fromArray(L.scale),L.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),H.needsUpdate=!0,H};function w(H){_r.call(this),this.isGLTFSpecularGlossinessMaterial=!0;var L=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),G=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),z=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	texelSpecular = sRGBToLinear( texelSpecular );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),M=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),O=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor.rgb;"].join(`
`),N={specular:{value:new Ye().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=N,this.onBeforeCompile=function(W){for(var ie in N)W.uniforms[ie]=N[ie];W.fragmentShader=W.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;"),W.fragmentShader=W.fragmentShader.replace("uniform float metalness;","uniform float glossiness;"),W.fragmentShader=W.fragmentShader.replace("#include <roughnessmap_pars_fragment>",L),W.fragmentShader=W.fragmentShader.replace("#include <metalnessmap_pars_fragment>",G),W.fragmentShader=W.fragmentShader.replace("#include <roughnessmap_fragment>",z),W.fragmentShader=W.fragmentShader.replace("#include <metalnessmap_fragment>",M),W.fragmentShader=W.fragmentShader.replace("#include <lights_physical_fragment>",O)},Object.defineProperties(this,{specular:{get:function(){return N.specular.value},set:function(ie){N.specular.value=ie}},specularMap:{get:function(){return N.specularMap.value},set:function(ie){N.specularMap.value=ie}},glossiness:{get:function(){return N.glossiness.value},set:function(ie){N.glossiness.value=ie}},glossinessMap:{get:function(){return N.glossinessMap.value},set:function(ie){N.glossinessMap.value=ie,ie?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_ROUGHNESSMAP=""):(delete this.defines.USE_ROUGHNESSMAP,delete this.defines.USE_GLOSSINESSMAP)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(H)}w.prototype=Object.create(_r.prototype),w.prototype.constructor=w,w.prototype.copy=function(H){return _r.prototype.copy.call(this,H),this.specularMap=H.specularMap,this.specular.copy(H.specular),this.glossinessMap=H.glossinessMap,this.glossiness=H.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this};function _(){return{name:e.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return w},extendParams:function(L,G,z){var M=G.extensions[this.name];L.color=new Ye(1,1,1),L.opacity=1;var O=[];if(Array.isArray(M.diffuseFactor)){var N=M.diffuseFactor;L.color.fromArray(N),L.opacity=N[3]}if(M.diffuseTexture!==void 0&&O.push(z.assignTexture(L,"map",M.diffuseTexture)),L.emissive=new Ye(0,0,0),L.glossiness=M.glossinessFactor!==void 0?M.glossinessFactor:1,L.specular=new Ye(1,1,1),Array.isArray(M.specularFactor)&&L.specular.fromArray(M.specularFactor),M.specularGlossinessTexture!==void 0){var W=M.specularGlossinessTexture;O.push(z.assignTexture(L,"glossinessMap",W)),O.push(z.assignTexture(L,"specularMap",W))}return Promise.all(O)},createMaterial:function(L){var G=new w(L);return G.fog=!0,G.color=L.color,G.map=L.map===void 0?null:L.map,G.lightMap=null,G.lightMapIntensity=1,G.aoMap=L.aoMap===void 0?null:L.aoMap,G.aoMapIntensity=1,G.emissive=L.emissive,G.emissiveIntensity=1,G.emissiveMap=L.emissiveMap===void 0?null:L.emissiveMap,G.bumpMap=L.bumpMap===void 0?null:L.bumpMap,G.bumpScale=1,G.normalMap=L.normalMap===void 0?null:L.normalMap,G.normalMapType=_i,L.normalScale&&(G.normalScale=L.normalScale),G.displacementMap=null,G.displacementScale=1,G.displacementBias=0,G.specularMap=L.specularMap===void 0?null:L.specularMap,G.specular=L.specular,G.glossinessMap=L.glossinessMap===void 0?null:L.glossinessMap,G.glossiness=L.glossiness,G.alphaMap=null,G.envMap=L.envMap===void 0?null:L.envMap,G.envMapIntensity=1,G.refractionRatio=.98,G}}}function x(){this.name=e.KHR_MESH_QUANTIZATION}function y(H,L,G,z){Xr.call(this,H,L,G,z)}y.prototype=Object.create(Xr.prototype),y.prototype.constructor=y,y.prototype.copySampleValue_=function(H){for(var L=this.resultBuffer,G=this.sampleValues,z=this.valueSize,M=H*z*3+z,O=0;O!==z;O++)L[O]=G[M+O];return L},y.prototype.beforeStart_=y.prototype.copySampleValue_,y.prototype.afterEnd_=y.prototype.copySampleValue_,y.prototype.interpolate_=function(H,L,G,z){for(var M=this.resultBuffer,O=this.sampleValues,N=this.valueSize,W=N*2,ie=N*3,te=z-L,se=(G-L)/te,ce=se*se,be=ce*se,Te=H*ie,Ee=Te-ie,F=-2*be+3*ce,V=be-ce,Me=1-F,ge=V-ce+se,De=0;De!==N;De++){var re=O[Ee+De+N],Fe=O[Ee+De+W]*te,Be=O[Te+De+N],je=O[Te+De]*te;M[De]=Me*re+ge*Fe+F*Be+V*je}return M};var E={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},R={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},A={9728:an,9729:sn,9984:Vi,9985:Ds,9986:Xa,9987:ga},T={33071:Xn,33648:qa,10497:bi},C={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},I={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},j={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},U={CUBICSPLINE:void 0,LINEAR:Ya,STEP:nr},B={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Z(H,L){return typeof H!="string"||H===""?"":(/^https?:\/\//i.test(L)&&/^\//.test(H)&&(L=L.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(H)||/^data:.*,.*$/i.test(H)||/^blob:.*$/i.test(H)?H:L+H)}function Q(H){return H.DefaultMaterial===void 0&&(H.DefaultMaterial=new _r({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Ur})),H.DefaultMaterial}function J(H,L,G){for(var z in G.extensions)H[z]===void 0&&(L.userData.gltfExtensions=L.userData.gltfExtensions||{},L.userData.gltfExtensions[z]=G.extensions[z])}function q(H,L){L.extras!==void 0&&(cn(L.extras)==="object"?Object.assign(H.userData,L.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+L.extras))}function Y(H,L,G){for(var z=!1,M=!1,O=0,N=L.length;O<N;O++){var W=L[O];if(W.POSITION!==void 0&&(z=!0),W.NORMAL!==void 0&&(M=!0),z&&M)break}if(!z&&!M)return Promise.resolve(H);for(var ie=[],te=[],O=0,N=L.length;O<N;O++){var W=L[O];if(z){var se=W.POSITION!==void 0?G.getDependency("accessor",W.POSITION):H.attributes.position;ie.push(se)}if(M){var se=W.NORMAL!==void 0?G.getDependency("accessor",W.NORMAL):H.attributes.normal;te.push(se)}}return Promise.all([Promise.all(ie),Promise.all(te)]).then(function(ce){var be=ce[0],Te=ce[1];return z&&(H.morphAttributes.position=be),M&&(H.morphAttributes.normal=Te),H.morphTargetsRelative=!0,H})}function ee(H,L){if(H.updateMorphTargets(),L.weights!==void 0)for(var G=0,z=L.weights.length;G<z;G++)H.morphTargetInfluences[G]=L.weights[G];if(L.extras&&Array.isArray(L.extras.targetNames)){var M=L.extras.targetNames;if(H.morphTargetInfluences.length===M.length){H.morphTargetDictionary={};for(var G=0,z=M.length;G<z;G++)H.morphTargetDictionary[M[G]]=G}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function le(H){var L=H.extensions&&H.extensions[e.KHR_DRACO_MESH_COMPRESSION],G;return L?G="draco:"+L.bufferView+":"+L.indices+":"+ue(L.attributes):G=H.indices+":"+ue(H.attributes)+":"+H.mode,G}function ue(H){for(var L="",G=Object.keys(H).sort(),z=0,M=G.length;z<M;z++)L+=G[z]+":"+H[G[z]]+";";return L}function he(H,L){this.json=H||{},this.extensions={},this.plugins={},this.options=L||{},this.cache=new t,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},typeof createImageBitmap!="undefined"&&/Firefox/.test(navigator.userAgent)===!1?this.textureLoader=new hy(this.options.manager):this.textureLoader=new gf(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new Yr(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}he.prototype.setExtensions=function(H){this.extensions=H},he.prototype.setPlugins=function(H){this.plugins=H},he.prototype.parse=function(H,L){var G=this,z=this.json,M=this.extensions;this.cache.removeAll(),this._markDefs(),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then(function(O){var N={scene:O[0][z.scene||0],scenes:O[0],animations:O[1],cameras:O[2],asset:z.asset,parser:G,userData:{}};J(M,N,z),q(N,z),H(N)}).catch(L)},he.prototype._markDefs=function(){for(var H=this.json.nodes||[],L=this.json.skins||[],G=this.json.meshes||[],z=0,M=L.length;z<M;z++)for(var O=L[z].joints,N=0,W=O.length;N<W;N++)H[O[N]].isBone=!0;for(var ie=0,te=H.length;ie<te;ie++){var se=H[ie];se.mesh!==void 0&&(this._addNodeRef(this.meshCache,se.mesh),se.skin!==void 0&&(G[se.mesh].isSkinnedMesh=!0)),se.camera!==void 0&&this._addNodeRef(this.cameraCache,se.camera),se.extensions&&se.extensions[e.KHR_LIGHTS_PUNCTUAL]&&se.extensions[e.KHR_LIGHTS_PUNCTUAL].light!==void 0&&this._addNodeRef(this.lightCache,se.extensions[e.KHR_LIGHTS_PUNCTUAL].light)}},he.prototype._addNodeRef=function(H,L){L!==void 0&&(H.refs[L]===void 0&&(H.refs[L]=H.uses[L]=0),H.refs[L]++)},he.prototype._getNodeRef=function(H,L,G){if(H.refs[L]<=1)return G;var z=G.clone();return z.name+="_instance_"+H.uses[L]++,z},he.prototype._invokeOne=function(H){var L=Object.values(this.plugins);L.push(this);for(var G=0;G<L.length;G++){var z=H(L[G]);if(z)return z}},he.prototype._invokeAll=function(H){var L=Object.values(this.plugins);L.unshift(this);for(var G=[],z=0;z<L.length;z++)G.push(H(L[z]));return Promise.all(G)},he.prototype.getDependency=function(H,L){var G=H+":"+L,z=this.cache.get(G);if(!z){switch(H){case"scene":z=this.loadScene(L);break;case"node":z=this.loadNode(L);break;case"mesh":z=this._invokeOne(function(M){return M.loadMesh&&M.loadMesh(L)});break;case"accessor":z=this.loadAccessor(L);break;case"bufferView":z=this._invokeOne(function(M){return M.loadBufferView&&M.loadBufferView(L)});break;case"buffer":z=this.loadBuffer(L);break;case"material":z=this._invokeOne(function(M){return M.loadMaterial&&M.loadMaterial(L)});break;case"texture":z=this._invokeOne(function(M){return M.loadTexture&&M.loadTexture(L)});break;case"skin":z=this.loadSkin(L);break;case"animation":z=this.loadAnimation(L);break;case"camera":z=this.loadCamera(L);break;case"light":z=this.extensions[e.KHR_LIGHTS_PUNCTUAL].loadLight(L);break;default:throw new Error("Unknown type: "+H)}this.cache.add(G,z)}return z},he.prototype.getDependencies=function(H){var L=this.cache.get(H);if(!L){var G=this,z=this.json[H+(H==="mesh"?"es":"s")]||[];L=Promise.all(z.map(function(M,O){return G.getDependency(H,O)})),this.cache.add(H,L)}return L},he.prototype.loadBuffer=function(H){var L=this.json.buffers[H],G=this.fileLoader;if(L.type&&L.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+L.type+" buffer type is not supported.");if(L.uri===void 0&&H===0)return Promise.resolve(this.extensions[e.KHR_BINARY_GLTF].body);var z=this.options;return new Promise(function(M,O){G.load(Z(L.uri,z.path),M,void 0,function(){O(new Error('THREE.GLTFLoader: Failed to load buffer "'+L.uri+'".'))})})},he.prototype.loadBufferView=function(H){var L=this.json.bufferViews[H];return this.getDependency("buffer",L.buffer).then(function(G){var z=L.byteLength||0,M=L.byteOffset||0;return G.slice(M,M+z)})},he.prototype.loadAccessor=function(H){var L=this,G=this.json,z=this.json.accessors[H];if(z.bufferView===void 0&&z.sparse===void 0)return Promise.resolve(null);var M=[];return z.bufferView!==void 0?M.push(this.getDependency("bufferView",z.bufferView)):M.push(null),z.sparse!==void 0&&(M.push(this.getDependency("bufferView",z.sparse.indices.bufferView)),M.push(this.getDependency("bufferView",z.sparse.values.bufferView))),Promise.all(M).then(function(O){var N=O[0],W=C[z.type],ie=R[z.componentType],te=ie.BYTES_PER_ELEMENT,se=te*W,ce=z.byteOffset||0,be=z.bufferView!==void 0?G.bufferViews[z.bufferView].byteStride:void 0,Te=z.normalized===!0,Ee,F;if(be&&be!==se){var V=Math.floor(ce/be),Me="InterleavedBuffer:"+z.bufferView+":"+z.componentType+":"+V+":"+z.count,ge=L.cache.get(Me);ge||(Ee=new ie(N,V*be,z.count*be/te),ge=new li(Ee,be/te),L.cache.add(Me,ge)),F=new as(ge,W,ce%be/te,Te)}else N===null?Ee=new ie(z.count*W):Ee=new ie(N,ce,z.count*W),F=new at(Ee,W,Te);if(z.sparse!==void 0){var De=C.SCALAR,re=R[z.sparse.indices.componentType],Fe=z.sparse.indices.byteOffset||0,Be=z.sparse.values.byteOffset||0,je=new re(O[1],Fe,z.sparse.count*De),Ue=new ie(O[2],Be,z.sparse.count*W);N!==null&&(F=new at(F.array.slice(),F.itemSize,F.normalized));for(var Ae=0,ct=je.length;Ae<ct;Ae++){var ft=je[Ae];if(F.setX(ft,Ue[Ae*W]),W>=2&&F.setY(ft,Ue[Ae*W+1]),W>=3&&F.setZ(ft,Ue[Ae*W+2]),W>=4&&F.setW(ft,Ue[Ae*W+3]),W>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return F})},he.prototype.loadTexture=function(H){var L=this,G=this.json,z=this.options,M=G.textures[H],O=M.extensions||{},N;O[e.MSFT_TEXTURE_DDS]?N=G.images[O[e.MSFT_TEXTURE_DDS].source]:N=G.images[M.source];var W;return N.uri&&(W=z.manager.getHandler(N.uri)),W||(W=O[e.MSFT_TEXTURE_DDS]?L.extensions[e.MSFT_TEXTURE_DDS].ddsLoader:this.textureLoader),this.loadTextureImage(H,N,W)},he.prototype.loadTextureImage=function(H,L,G){var z=this,M=this.json,O=this.options,N=M.textures[H],W=self.URL||self.webkitURL,ie=L.uri,te=!1,se=!0;return L.mimeType==="image/jpeg"&&(se=!1),L.bufferView!==void 0&&(ie=z.getDependency("bufferView",L.bufferView).then(function(ce){L.mimeType==="image/png"&&(se=new DataView(ce,25,1).getUint8(0,!1)===6),te=!0;var be=new Blob([ce],{type:L.mimeType});return ie=W.createObjectURL(be),ie})),Promise.resolve(ie).then(function(ce){return new Promise(function(be,Te){var Ee=be;G.isImageBitmapLoader===!0&&(Ee=function(V){be(new hf(V))}),G.load(Z(ce,O.path),Ee,void 0,Te)})}).then(function(ce){te===!0&&W.revokeObjectURL(ie),ce.flipY=!1,N.name&&(ce.name=N.name),se||(ce.format=Hr);var be=M.samplers||{},Te=be[N.sampler]||{};return ce.magFilter=A[Te.magFilter]||sn,ce.minFilter=A[Te.minFilter]||ga,ce.wrapS=T[Te.wrapS]||bi,ce.wrapT=T[Te.wrapT]||bi,z.associations.set(ce,{type:"textures",index:H}),ce})},he.prototype.assignTexture=function(H,L,G){var z=this;return this.getDependency("texture",G.index).then(function(M){if(G.texCoord!==void 0&&G.texCoord!=0&&!(L==="aoMap"&&G.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+G.texCoord+" for texture "+L+" not yet supported."),z.extensions[e.KHR_TEXTURE_TRANSFORM]){var O=G.extensions!==void 0?G.extensions[e.KHR_TEXTURE_TRANSFORM]:void 0;if(O){var N=z.associations.get(M);M=z.extensions[e.KHR_TEXTURE_TRANSFORM].extendTexture(M,O),z.associations.set(M,N)}}H[L]=M})},he.prototype.assignFinalMaterial=function(H){var L=H.geometry,G=H.material,z=L.attributes.tangent!==void 0,M=L.attributes.color!==void 0,O=L.attributes.normal===void 0,N=H.isSkinnedMesh===!0,W=Object.keys(L.morphAttributes).length>0,ie=W&&L.morphAttributes.normal!==void 0;if(H.isPoints){var te="PointsMaterial:"+G.uuid,se=this.cache.get(te);se||(se=new ss,ut.prototype.copy.call(se,G),se.color.copy(G.color),se.map=G.map,se.sizeAttenuation=!1,this.cache.add(te,se)),G=se}else if(H.isLine){var te="LineBasicMaterial:"+G.uuid,ce=this.cache.get(te);ce||(ce=new Ii,ut.prototype.copy.call(ce,G),ce.color.copy(G.color),this.cache.add(te,ce)),G=ce}if(z||M||O||N||W){var te="ClonedMaterial:"+G.uuid+":";G.isGLTFSpecularGlossinessMaterial&&(te+="specular-glossiness:"),N&&(te+="skinning:"),z&&(te+="vertex-tangents:"),M&&(te+="vertex-colors:"),O&&(te+="flat-shading:"),W&&(te+="morph-targets:"),ie&&(te+="morph-normals:");var be=this.cache.get(te);be||(be=G.clone(),N&&(be.skinning=!0),z&&(be.vertexTangents=!0),M&&(be.vertexColors=!0),O&&(be.flatShading=!0),W&&(be.morphTargets=!0),ie&&(be.morphNormals=!0),this.cache.add(te,be),this.associations.set(be,this.associations.get(G))),G=be}G.aoMap&&L.attributes.uv2===void 0&&L.attributes.uv!==void 0&&L.setAttribute("uv2",L.attributes.uv),G.normalScale&&!z&&(G.normalScale.y=-G.normalScale.y),G.clearcoatNormalScale&&!z&&(G.clearcoatNormalScale.y=-G.clearcoatNormalScale.y),H.material=G},he.prototype.getMaterialType=function(){return _r},he.prototype.loadMaterial=function(H){var L=this,G=this.json,z=this.extensions,M=G.materials[H],O,N={},W=M.extensions||{},ie=[];if(W[e.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var te=z[e.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];O=te.getMaterialType(),ie.push(te.extendParams(N,M,L))}else if(W[e.KHR_MATERIALS_UNLIT]){var se=z[e.KHR_MATERIALS_UNLIT];O=se.getMaterialType(),ie.push(se.extendParams(N,M,L))}else{var ce=M.pbrMetallicRoughness||{};if(N.color=new Ye(1,1,1),N.opacity=1,Array.isArray(ce.baseColorFactor)){var be=ce.baseColorFactor;N.color.fromArray(be),N.opacity=be[3]}ce.baseColorTexture!==void 0&&ie.push(L.assignTexture(N,"map",ce.baseColorTexture)),N.metalness=ce.metallicFactor!==void 0?ce.metallicFactor:1,N.roughness=ce.roughnessFactor!==void 0?ce.roughnessFactor:1,ce.metallicRoughnessTexture!==void 0&&(ie.push(L.assignTexture(N,"metalnessMap",ce.metallicRoughnessTexture)),ie.push(L.assignTexture(N,"roughnessMap",ce.metallicRoughnessTexture))),O=this._invokeOne(function(Ee){return Ee.getMaterialType&&Ee.getMaterialType(H)}),ie.push(this._invokeAll(function(Ee){return Ee.extendMaterialParams&&Ee.extendMaterialParams(H,N)}))}M.doubleSided===!0&&(N.side=wi);var Te=M.alphaMode||B.OPAQUE;return Te===B.BLEND?(N.transparent=!0,N.depthWrite=!1):(N.transparent=!1,Te===B.MASK&&(N.alphaTest=M.alphaCutoff!==void 0?M.alphaCutoff:.5)),M.normalTexture!==void 0&&O!==wr&&(ie.push(L.assignTexture(N,"normalMap",M.normalTexture)),N.normalScale=new xe(1,1),M.normalTexture.scale!==void 0&&N.normalScale.set(M.normalTexture.scale,M.normalTexture.scale)),M.occlusionTexture!==void 0&&O!==wr&&(ie.push(L.assignTexture(N,"aoMap",M.occlusionTexture)),M.occlusionTexture.strength!==void 0&&(N.aoMapIntensity=M.occlusionTexture.strength)),M.emissiveFactor!==void 0&&O!==wr&&(N.emissive=new Ye().fromArray(M.emissiveFactor)),M.emissiveTexture!==void 0&&O!==wr&&ie.push(L.assignTexture(N,"emissiveMap",M.emissiveTexture)),Promise.all(ie).then(function(){var Ee;return O===w?Ee=z[e.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(N):Ee=new O(N),M.name&&(Ee.name=M.name),Ee.map&&(Ee.map.encoding=Uo),Ee.emissiveMap&&(Ee.emissiveMap.encoding=Uo),q(Ee,M),L.associations.set(Ee,{type:"materials",index:H}),M.extensions&&J(z,Ee,M),Ee})};function pe(H,L,G){var z=L.attributes,M=new Vr;if(z.POSITION!==void 0){var O=G.json.accessors[z.POSITION],N=O.min,W=O.max;if(N!==void 0&&W!==void 0)M.set(new D(N[0],N[1],N[2]),new D(W[0],W[1],W[2]));else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;var ie=L.targets;if(ie!==void 0){for(var te=new D,se=new D,ce=0,be=ie.length;ce<be;ce++){var Te=ie[ce];if(Te.POSITION!==void 0){var O=G.json.accessors[Te.POSITION],N=O.min,W=O.max;N!==void 0&&W!==void 0?(se.setX(Math.max(Math.abs(N[0]),Math.abs(W[0]))),se.setY(Math.max(Math.abs(N[1]),Math.abs(W[1]))),se.setZ(Math.max(Math.abs(N[2]),Math.abs(W[2]))),te.max(se)):console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}M.expandByVector(te)}H.boundingBox=M;var Ee=new Ei;M.getCenter(Ee.center),Ee.radius=M.min.distanceTo(M.max)/2,H.boundingSphere=Ee}function de(H,L,G){var z=L.attributes,M=[];function O(te,se){return G.getDependency("accessor",te).then(function(ce){H.setAttribute(se,ce)})}for(var N in z){var W=I[N]||N.toLowerCase();W in H.attributes||M.push(O(z[N],W))}if(L.indices!==void 0&&!H.index){var ie=G.getDependency("accessor",L.indices).then(function(te){H.setIndex(te)});M.push(ie)}return q(H,L),pe(H,L,G),Promise.all(M).then(function(){return L.targets!==void 0?Y(H,L.targets,G):H})}function Oe(H,L){var G=H.getIndex();if(G===null){var z=[],M=H.getAttribute("position");if(M!==void 0){for(var O=0;O<M.count;O++)z.push(O);H.setIndex(z),G=H.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),H}var N=G.count-2,W=[];if(L===pp)for(var O=1;O<=N;O++)W.push(G.getX(0)),W.push(G.getX(O)),W.push(G.getX(O+1));else for(var O=0;O<N;O++)O%2==0?(W.push(G.getX(O)),W.push(G.getX(O+1)),W.push(G.getX(O+2))):(W.push(G.getX(O+2)),W.push(G.getX(O+1)),W.push(G.getX(O)));W.length/3!==N&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var ie=H.clone();return ie.setIndex(W),ie}return he.prototype.loadGeometries=function(H){var L=this,G=this.extensions,z=this.primitiveCache;function M(be){return G[e.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(be,L).then(function(Te){return de(Te,be,L)})}for(var O=[],N=0,W=H.length;N<W;N++){var ie=H[N],te=le(ie),se=z[te];if(se)O.push(se.promise);else{var ce;ie.extensions&&ie.extensions[e.KHR_DRACO_MESH_COMPRESSION]?ce=M(ie):ce=de(new dt,ie,L),z[te]={primitive:ie,promise:ce},O.push(ce)}}return Promise.all(O)},he.prototype.loadMesh=function(H){for(var L=this,G=this.json,z=G.meshes[H],M=z.primitives,O=[],N=0,W=M.length;N<W;N++){var ie=M[N].material===void 0?Q(this.cache):this.getDependency("material",M[N].material);O.push(ie)}return O.push(L.loadGeometries(M)),Promise.all(O).then(function(te){for(var se=te.slice(0,te.length-1),ce=te[te.length-1],be=[],Te=0,Ee=ce.length;Te<Ee;Te++){var F=ce[Te],V=M[Te],Me,ge=se[Te];if(V.mode===E.TRIANGLES||V.mode===E.TRIANGLE_STRIP||V.mode===E.TRIANGLE_FAN||V.mode===void 0)Me=z.isSkinnedMesh===!0?new ev(F,ge):new St(F,ge),Me.isSkinnedMesh===!0&&!Me.geometry.attributes.skinWeight.normalized&&Me.normalizeSkinWeights(),V.mode===E.TRIANGLE_STRIP?Me.geometry=Oe(Me.geometry,ug):V.mode===E.TRIANGLE_FAN&&(Me.geometry=Oe(Me.geometry,pp));else if(V.mode===E.LINES)Me=new uf(F,ge);else if(V.mode===E.LINE_STRIP)Me=new os(F,ge);else if(V.mode===E.LINE_LOOP)Me=new sv(F,ge);else if(V.mode===E.POINTS)Me=new cv(F,ge);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+V.mode);Object.keys(Me.geometry.morphAttributes).length>0&&ee(Me,z),Me.name=z.name||"mesh_"+H,ce.length>1&&(Me.name+="_"+Te),q(Me,z),L.assignFinalMaterial(Me),be.push(Me)}if(be.length===1)return be[0];for(var De=new La,Te=0,Ee=be.length;Te<Ee;Te++)De.add(be[Te]);return De})},he.prototype.loadCamera=function(H){var L,G=this.json.cameras[H],z=G[G.type];if(!z){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return G.type==="perspective"?L=new fn(lt.radToDeg(z.yfov),z.aspectRatio||1,z.znear||1,z.zfar||2e6):G.type==="orthographic"&&(L=new hs(-z.xmag,z.xmag,z.ymag,-z.ymag,z.znear,z.zfar)),G.name&&(L.name=G.name),q(L,G),Promise.resolve(L)},he.prototype.loadSkin=function(H){var L=this.json.skins[H],G={joints:L.joints};return L.inverseBindMatrices===void 0?Promise.resolve(G):this.getDependency("accessor",L.inverseBindMatrices).then(function(z){return G.inverseBindMatrices=z,G})},he.prototype.loadAnimation=function(H){for(var L=this.json,G=L.animations[H],z=[],M=[],O=[],N=[],W=[],ie=0,te=G.channels.length;ie<te;ie++){var se=G.channels[ie],ce=G.samplers[se.sampler],be=se.target,Te=be.node!==void 0?be.node:be.id,Ee=G.parameters!==void 0?G.parameters[ce.input]:ce.input,F=G.parameters!==void 0?G.parameters[ce.output]:ce.output;z.push(this.getDependency("node",Te)),M.push(this.getDependency("accessor",Ee)),O.push(this.getDependency("accessor",F)),N.push(ce),W.push(be)}return Promise.all([Promise.all(z),Promise.all(M),Promise.all(O),Promise.all(N),Promise.all(W)]).then(function(V){for(var Me=V[0],ge=V[1],De=V[2],re=V[3],Fe=V[4],Be=[],je=0,Ue=Me.length;je<Ue;je++){var Ae=Me[je],ct=ge[je],ft=De[je],en=re[je],Ft=Fe[je];if(Ae!==void 0){Ae.updateMatrix(),Ae.matrixAutoUpdate=!0;var _t;switch(j[Ft.path]){case j.weights:_t=rc;break;case j.rotation:_t=ic;break;case j.position:case j.scale:default:_t=fl;break}var Bt=Ae.name?Ae.name:Ae.uuid,$t=en.interpolation!==void 0?U[en.interpolation]:Ya,pi=[];j[Ft.path]===j.weights?Ae.traverse(function(Rn){Rn.isMesh===!0&&Rn.morphTargetInfluences&&pi.push(Rn.name?Rn.name:Rn.uuid)}):pi.push(Bt);var Ln=ft.array;if(ft.normalized){var er;if(Ln.constructor===Int8Array)er=1/127;else if(Ln.constructor===Uint8Array)er=1/255;else if(Ln.constructor==Int16Array)er=1/32767;else if(Ln.constructor===Uint16Array)er=1/65535;else throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");for(var kn=new Float32Array(Ln.length),In=0,Mn=Ln.length;In<Mn;In++)kn[In]=Ln[In]*er;Ln=kn}for(var In=0,Mn=pi.length;In<Mn;In++){var pr=new _t(pi[In]+"."+j[Ft.path],ct.array,Ln,$t);en.interpolation==="CUBICSPLINE"&&(pr.createInterpolant=function(Ic){return new y(this.times,this.values,this.getValueSize()/3,Ic)},pr.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),Be.push(pr)}}}var Ui=G.name?G.name:"animation_"+H;return new ui(Ui,void 0,Be)})},he.prototype.loadNode=function(H){var L=this.json,G=this.extensions,z=this,M=L.nodes[H];return function(){var O=[];if(M.mesh!==void 0&&O.push(z.getDependency("mesh",M.mesh).then(function(W){var ie=z._getNodeRef(z.meshCache,M.mesh,W);return M.weights!==void 0&&ie.traverse(function(te){if(!!te.isMesh)for(var se=0,ce=M.weights.length;se<ce;se++)te.morphTargetInfluences[se]=M.weights[se]}),ie})),M.camera!==void 0&&O.push(z.getDependency("camera",M.camera).then(function(W){return z._getNodeRef(z.cameraCache,M.camera,W)})),M.extensions&&M.extensions[e.KHR_LIGHTS_PUNCTUAL]&&M.extensions[e.KHR_LIGHTS_PUNCTUAL].light!==void 0){var N=M.extensions[e.KHR_LIGHTS_PUNCTUAL].light;O.push(z.getDependency("light",N).then(function(W){return z._getNodeRef(z.lightCache,N,W)}))}return Promise.all(O)}().then(function(O){var N;if(M.isBone===!0?N=new Dg:O.length>1?N=new La:O.length===1?N=O[0]:N=new Qe,N!==O[0])for(var W=0,ie=O.length;W<ie;W++)N.add(O[W]);if(M.name&&(N.userData.name=M.name,N.name=Vn.sanitizeNodeName(M.name)),q(N,M),M.extensions&&J(G,N,M),M.matrix!==void 0){var te=new ht;te.fromArray(M.matrix),N.applyMatrix4(te)}else M.translation!==void 0&&N.position.fromArray(M.translation),M.rotation!==void 0&&N.quaternion.fromArray(M.rotation),M.scale!==void 0&&N.scale.fromArray(M.scale);return z.associations.set(N,{type:"nodes",index:H}),N})},he.prototype.loadScene=function(){function H(L,G,z,M){var O=z.nodes[L];return M.getDependency("node",L).then(function(N){if(O.skin===void 0)return N;var W;return M.getDependency("skin",O.skin).then(function(ie){W=ie;for(var te=[],se=0,ce=W.joints.length;se<ce;se++)te.push(M.getDependency("node",W.joints[se]));return Promise.all(te)}).then(function(ie){return N.traverse(function(te){if(!!te.isMesh){for(var se=[],ce=[],be=0,Te=ie.length;be<Te;be++){var Ee=ie[be];if(Ee){se.push(Ee);var F=new ht;W.inverseBindMatrices!==void 0&&F.fromArray(W.inverseBindMatrices.array,be*16),ce.push(F)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',W.joints[be])}te.bind(new tv(se,ce),te.matrixWorld)}}),N})}).then(function(N){G.add(N);var W=[];if(O.children)for(var ie=O.children,te=0,se=ie.length;te<se;te++){var ce=ie[te];W.push(H(ce,N,z,M))}return Promise.all(W)})}return function(G){var z=this.json,M=this.extensions,O=this.json.scenes[G],N=this,W=new La;O.name&&(W.name=O.name),q(W,O),O.extensions&&J(M,W,O);for(var ie=O.nodes||[],te=[],se=0,ce=ie.length;se<ce;se++)te.push(H(ie[se],W,z,N));return Promise.all(te).then(function(){return W})}}(),a}(),xx,_x,la=Symbol("retainerCount"),go=Symbol("recentlyUsed"),Lv=Symbol("evict"),Mf=Symbol("evictionThreshold"),Sy=Symbol("cache"),xL=function(){function a(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5;ye(this,a),this[xx]=new Map,this[_x]=[],this[Sy]=t,this[Mf]=e}return Pe(a,[{key:"retainerCount",value:function(e){return this[la].get(e)||0}},{key:"reset",value:function(){this[la].clear(),this[go]=[]}},{key:"retain",value:function(e){this[la].has(e)||this[la].set(e,0),this[la].set(e,this[la].get(e)+1);var n=this[go].indexOf(e);n!==-1&&this[go].splice(n,1),this[go].unshift(e),this[Lv]()}},{key:"release",value:function(e){this[la].has(e)&&this[la].set(e,Math.max(this[la].get(e)-1,0)),this[Lv]()}},{key:(xx=la,_x=go,Lv),value:function(){if(!(this[go].length<this[Mf]))for(var e=this[go].length-1;e>=this[Mf];--e){var n=this[go][e],r=this[la].get(n);r===0&&(this[Sy].delete(n),this[go].splice(e,1))}}},{key:"evictionThreshold",set:function(e){this[Mf]=e,this[Lv]()},get:function(){return this[Mf]}},{key:"cache",get:function(){return this[Sy]}}]),a}(),Sx,Mx,_L=function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},r=function(o){var l=o.loaded/o.total;n(Math.max(0,Math.min(1,isFinite(l)?l:1)))};return new Promise(function(i,o){e.load(t,i,r,o)})},yo=new Map,My=new Map,Ex,Tx=new hi,Rv=Symbol("loader"),ps=Symbol("evictionPolicy"),Ax=Symbol("GLTFInstance"),vs=function(a){ke(e,a);var t=Ie(e);function e(n){var r;return ye(this,e),r=t.call(this),r[Mx]=new bL,r[Ax]=n,r[Rv].setDRACOLoader(Tx),r}return Pe(e,[{key:"preload",value:function(){var n=pt(regeneratorRuntime.mark(function i(o,l){var u,c,f,d,v=arguments;return regeneratorRuntime.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return u=v.length>2&&v[2]!==void 0?v[2]:function(){},this.dispatchEvent({type:"preload",element:l,src:o}),yo.has(o)||(c=_L(o,this[Rv],function(w){u(w*.8)}),f=this[Ax],d=c.then(function(w){return f.prepare(w)}).then(function(w){return u(.9),new f(w)}),yo.set(o,d)),g.next=5,yo.get(o);case 5:My.set(o,!0),u&&u(1);case 7:case"end":return g.stop()}},i,this)}));function r(i,o){return n.apply(this,arguments)}return r}()},{key:"load",value:function(){var n=pt(regeneratorRuntime.mark(function i(o,l){var u=this,c,f,d,v=arguments;return regeneratorRuntime.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return c=v.length>2&&v[2]!==void 0?v[2]:function(){},g.next=3,this.preload(o,l,c);case 3:return g.next=5,yo.get(o);case 5:return f=g.sent,g.next=8,f.clone();case 8:return d=g.sent,this[ps].retain(o),d.dispose=function(){var w=d.dispose,_=!1;return function(){_||(_=!0,w.apply(d),u[ps].release(o))}}(),g.abrupt("return",d);case 12:case"end":return g.stop()}},i,this)}));function r(i,o){return n.apply(this,arguments)}return r}()},{key:(Sx=ps,Mx=Rv,ps),get:function(){return this.constructor[ps]}}],[{key:"setDRACODecoderLocation",value:function(r){Ex=r,Tx.setDecoderPath(r)}},{key:"getDRACODecoderLocation",value:function(){return Ex}},{key:"clearCache",value:function(){var r=this;yo.forEach(function(i,o){r.delete(o)}),this[ps].reset()}},{key:"has",value:function(r){return yo.has(r)}},{key:"delete",value:function(){var n=pt(regeneratorRuntime.mark(function i(o){var l,u;return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(this.has(o)){f.next=2;break}return f.abrupt("return");case 2:return l=yo.get(o),My.delete(o),yo.delete(o),f.next=7,l;case 7:u=f.sent,u.dispose();case 9:case"end":return f.stop()}},i,this)}));function r(i){return n.apply(this,arguments)}return r}()},{key:"hasFinishedLoading",value:function(r){return!!My.get(r)}},{key:"cache",get:function(){return yo}}]),e}(rr);vs[Sx]=new xL(vs);var Cx,Lx=1e4,SL=50,Ef=1/SL,ML=2e-4*Ef,Tf=Symbol("velocity"),fi=function(){function a(){ye(this,a),this[Cx]=0}return Pe(a,[{key:"update",value:function(e,n,r,i){if(e==null||i===0||e===n&&this[Tf]===0)return n;if(r<0)return e;var o=e-n,l=this[Tf]+Ef*o,u=o+r*l,c=Math.exp(-Ef*r),f=(l-Ef*u)*c,d=-Ef*(f+l*c);return Math.abs(f)<ML*Math.abs(i)&&d*o>=0?(this[Tf]=0,n):(this[Tf]=f,n+u*c)}}]),a}();Cx=Tf;var Af=function(t){Qe.call(this),this.element=t||document.createElement("div"),this.element.style.position="absolute",this.addEventListener("removed",function(){this.traverse(function(e){Ht(e.element,Element)&&e.element.parentNode!==null&&e.element.parentNode.removeChild(e.element)})})};Af.prototype=Object.assign(Object.create(Qe.prototype),{constructor:Af,copy:function(t,e){return Qe.prototype.copy.call(this,t,e),this.element=t.element.cloneNode(!0),this}});var EL=function(){var t=this,e,n,r,i,o=new D,l=new ht,u=new ht,c={objects:new WeakMap},f=document.createElement("div");f.style.overflow="hidden",this.domElement=f,this.getSize=function(){return{width:e,height:n}},this.setSize=function(w,_){e=w,n=_,r=e/2,i=n/2,f.style.width=w+"px",f.style.height=_+"px"};var d=function w(_,x,y){if(Ht(_,Af)){_.onBeforeRender(t,x,y),o.setFromMatrixPosition(_.matrixWorld),o.applyMatrix4(u);var E=_.element,R="translate(-50%,-50%) translate("+(o.x*r+r)+"px,"+(-o.y*i+i)+"px)";E.style.WebkitTransform=R,E.style.MozTransform=R,E.style.oTransform=R,E.style.transform=R,E.style.display=_.visible&&o.z>=-1&&o.z<=1?"":"none";var A={distanceToCameraSquared:v(y,_)};c.objects.set(_,A),E.parentNode!==f&&f.appendChild(E),_.onAfterRender(t,x,y)}for(var T=0,C=_.children.length;T<C;T++)w(_.children[T],x,y)},v=function(){var w=new D,_=new D;return function(x,y){return w.setFromMatrixPosition(x.matrixWorld),_.setFromMatrixPosition(y.matrixWorld),w.distanceToSquared(_)}}(),m=function(_){var x=[];return _.traverse(function(y){Ht(y,Af)&&x.push(y)}),x},g=function(_){for(var x=m(_).sort(function(A,T){var C=c.objects.get(A).distanceToCameraSquared,I=c.objects.get(T).distanceToCameraSquared;return C-I}),y=x.length,E=0,R=x.length;E<R;E++)x[E].element.style.zIndex=y-E};this.render=function(w,_){w.autoUpdate===!0&&w.updateMatrixWorld(),_.parent===null&&_.updateMatrixWorld(),l.copy(_.matrixWorldInverse),u.multiplyMatrices(_.projectionMatrix,l),d(w,w,_),g(w)}},or=function(t,e){return{type:"number",number:t,unit:e}},Cf=function(){var a={},t=1e3;return function(e){var n=e;if(n in a)return a[n];for(var r=[],i=0;e;){if(++i>t){e="";break}var o=Rx(e),l=o.nodes[0];if(l==null||l.terms.length===0)break;r.push(l),e=o.remainingInput}return a[n]=r}}(),Rx=function(){var a=/^(\-\-|[a-z\u0240-\uffff])/i,t=/^([\*\+\/]|[\-]\s)/i,e=/^[\),]/,n="(",r="#";return function(i){for(var o=[];i.length&&(i=i.trim(),!e.test(i));)if(i[0]===n){var l=Px(i),u=l.nodes,c=l.remainingInput;i=c,o.push({type:"function",name:{type:"ident",value:"calc"},arguments:u})}else if(a.test(i)){var f=TL(i),d=f.nodes[0];if(i=f.remainingInput,i[0]===n){var v=Px(i),m=v.nodes,g=v.remainingInput;o.push({type:"function",name:d,arguments:m}),i=g}else o.push(d)}else if(t.test(i))o.push({type:"operator",value:i[0]}),i=i.slice(1);else{var w=i[0]===r?CL(i):AL(i),_=w.nodes,x=w.remainingInput;if(_.length===0)break;o.push(_[0]),i=x}return{nodes:[{type:"expression",terms:o}],remainingInput:i}}}(),TL=function(){var a=/[^a-z^0-9^_^\-^\u0240-\uffff]/i;return function(t){var e=t.match(a),n=e==null?t:t.substr(0,e.index),r=e==null?"":t.substr(e.index);return{nodes:[{type:"ident",value:n}],remainingInput:r}}}(),AL=function(){var a=/[\+\-]?(\d+[\.]\d+|\d+|[\.]\d+)([eE][\+\-]?\d+)?/,t=/^[a-z%]+/i,e=/^(m|mm|cm|rad|deg|[%])$/;return function(n){var r=n.match(a),i=r==null?"0":r[0];n=i==null?n:n.slice(i.length);var o=n.match(t),l=o!=null&&o[0]!==""?o[0]:null,u=o==null?n:n.slice(l.length);return l!=null&&!e.test(l)&&(l=null),{nodes:[{type:"number",number:parseFloat(i)||0,unit:l}],remainingInput:u}}}(),CL=function(){var a=/^[a-f0-9]*/i;return function(t){t=t.slice(1).trim();var e=t.match(a),n=e==null?[]:[{type:"hex",value:e[0]}];return{nodes:n,remainingInput:e==null?t:t.slice(e[0].length)}}}(),Px=function(t){var e=[];for(t=t.slice(1).trim();t.length;){var n=Rx(t);if(e.push(n.nodes[0]),t=n.remainingInput.trim(),t[0]===",")t=t.slice(1).trim();else if(t[0]===")"){t=t.slice(1);break}}return{nodes:e,remainingInput:t}},Ox=Symbol("visitedTypes"),LL=function(){function a(t){ye(this,a),this[Ox]=t}return Pe(a,[{key:"walk",value:function(e,n){for(var r=e.slice();r.length;){var i=r.shift();switch(this[Ox].indexOf(i.type)>-1&&n(i),i.type){case"expression":r.unshift.apply(r,Fm(i.terms));break;case"function":r.unshift.apply(r,[i.name].concat(Fm(i.arguments)));break}}}}]),a}(),ms=Object.freeze({type:"number",number:0,unit:null}),Pv=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=t.number,r=t.unit;if(!isFinite(n))n=e,r="rad";else if(t.unit==="rad"||t.unit==null)return t;var i=r==="deg"&&n!=null,o=i?n:0,l=o*Math.PI/180;return{type:"number",number:l,unit:"rad"}},Nx=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=t.number,r=t.unit;if(!isFinite(n))n=e,r="m";else if(t.unit==="m")return t;var i;switch(r){default:i=1;break;case"cm":i=1/100;break;case"mm":i=1/1e3;break}var o=i*n;return{type:"number",number:o,unit:"m"}},gl=function(){var a=function(n){return n},t={rad:a,deg:Pv,m:a,mm:Nx,cm:Nx};return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ms,r=e.number,i=e.unit;if(isFinite(r)||(r=n.number,i=n.unit),i==null)return e;var o=t[i];return o==null?n:o(e)}}(),kx,Ix,Dx,Fx,Ov=Symbol("slot"),Nv=Symbol("pivot"),Lf=Symbol("referenceCount"),Ey=Symbol("updateVisibility"),gs=Symbol("visible"),Bx=function(a){ke(e,a);var t=Ie(e);function e(n){var r;return ye(this,e),r=t.call(this,document.createElement("div")),r.normal=new D(0,1,0),r[kx]=!1,r[Ix]=1,r[Dx]=document.createElement("div"),r[Fx]=document.createElement("slot"),r.element.classList.add("annotation-wrapper"),r[Ov].name=n.name,r.element.appendChild(r[Nv]),r[Nv].appendChild(r[Ov]),r.updatePosition(n.position),r.updateNormal(n.normal),r}return Pe(e,[{key:"show",value:function(){this[gs]||(this[gs]=!0,this[Ey]())}},{key:"hide",value:function(){this[gs]&&(this[gs]=!1,this[Ey]())}},{key:"increment",value:function(){this[Lf]++}},{key:"decrement",value:function(){return this[Lf]>0&&--this[Lf],this[Lf]===0}},{key:"updatePosition",value:function(r){if(r!=null)for(var i=Cf(r)[0].terms,o=0;o<3;++o)this.position.setComponent(o,gl(i[o]).number)}},{key:"updateNormal",value:function(r){if(r!=null)for(var i=Cf(r)[0].terms,o=0;o<3;++o)this.normal.setComponent(o,gl(i[o]).number)}},{key:"orient",value:function(r){this[Nv].style.transform="rotate(".concat(r,"rad)")}},{key:(kx=gs,Ix=Lf,Dx=Nv,Fx=Ov,Ey),value:function(){var r=this;this[gs]?this.element.classList.remove("hide"):this.element.classList.add("hide"),this[Ov].assignedNodes().forEach(function(i){if(i.nodeType===Node.ELEMENT_NODE){var o=i,l=o.dataset.visibilityAttribute;if(l!=null){var u="data-".concat(l);r[gs]?o.setAttribute(u,""):o.removeAttribute(u)}o.dispatchEvent(new CustomEvent("hotspot-visibility",{detail:{visible:r[gs]}}))}})}}]),e}(Af),Ux=function(t,e){var n=0,r=new D;return t.traverse(function(i){var o,l;i.updateWorldMatrix(!1,!1);var u=i.geometry;if(u!==void 0){if(u.isGeometry){var c=u.vertices;for(o=0,l=c.length;o<l;o++)r.copy(c[o]),r.applyMatrix4(i.matrixWorld),n=e(n,r)}else if(u.isBufferGeometry){var f=u.attributes.position;if(f!==void 0)for(o=0,l=f.count;o<l;o++)r.fromBufferAttribute(f,o).applyMatrix4(i.matrixWorld),n=e(n,r)}}}),n},Gx=.001,Hx=9,RL=6,zx=2,PL=function(a){ke(e,a);var t=Ie(e);function e(n,r){var i;return ye(this,e),i=t.call(this),i.shadowMaterial=new cl,i.boundingBox=new Vr,i.size=new D,i.isAnimated=!1,i.needsUpdate=!1,i.intensity=0,i.castShadow=!0,i.frustumCulled=!1,i.floor=new St(new Oi,i.shadowMaterial),i.floor.rotateX(-Math.PI/2),i.floor.receiveShadow=!0,i.floor.castShadow=!1,i.floor.frustumCulled=!1,i.add(i.floor),i.shadow.camera.up.set(0,0,1),n.add(Tr(i)),i.target=n,i.setModel(n,r),i}return Pe(e,[{key:"setModel",value:function(r,i){this.isAnimated=r.animationNames.length>0,this.boundingBox.copy(r.boundingBox),this.size.copy(r.size);var o=this.boundingBox,l=this.size;if(this.isAnimated){var u=Math.max(l.x,l.y,l.z)*zx;l.y=u,o.expandByVector(l.subScalar(u).multiplyScalar(-.5)),o.max.y=o.min.y+u,l.set(u,u,u)}var c=l.y*Gx;this.position.y=o.max.y+c,o.getCenter(this.floor.position),this.setSoftness(i)}},{key:"setSoftness",value:function(r){var i=Math.pow(2,Hx-r*(Hx-RL));this.setMapSize(i)}},{key:"setMapSize",value:function(r){var i=this.shadow,o=i.camera,l=i.mapSize,u=i.map,c=this.size,f=this.boundingBox;u!=null&&(u.dispose(),this.shadow.map=null),this.isAnimated&&(r*=zx);var d=Math.floor(c.x>c.z?r:r*c.x/c.z),v=Math.floor(c.x>c.z?r*c.z/c.x:r);l.set(d,v);var m=2.5*c.x/d,g=2.5*c.z/v;o.left=-f.max.x-m,o.right=-f.min.x+m,o.bottom=f.min.z-g,o.top=f.max.z+g,this.setScaleAndOffset(o.zoom,0),this.shadow.updateMatrices(this),this.floor.scale.set(c.x+2*m,c.z+2*g,1),this.needsUpdate=!0}},{key:"setIntensity",value:function(r){this.shadowMaterial.opacity=r,r>0?(this.visible=!0,this.floor.visible=!0):(this.visible=!1,this.floor.visible=!1)}},{key:"getIntensity",value:function(){return this.shadowMaterial.opacity}},{key:"setRotation",value:function(r){this.shadow.camera.up.set(Math.sin(r),0,Math.cos(r)),this.shadow.updateMatrices(this)}},{key:"setScaleAndOffset",value:function(r,i){var o=this.size.y,l=1/r,u=o*Gx;this.floor.position.y=2*u-o+i*l;var c=this.shadow.camera;c.zoom=r,c.near=0,c.far=o*r-i,c.projectionMatrix.makeOrthographic(c.left*r,c.right*r,c.top*r,c.bottom*r,c.near,c.far),c.projectionMatrixInverse.getInverse(c.projectionMatrix)}}]),e}(_f),Vx,Wx,Ty=45,$x=Ty/2*Math.PI/180,jx=Math.sin($x),OL=Math.tan($x),ys=Symbol("shadow"),kv=Symbol("cancelPendingSourceChange"),Rf=Symbol("currentGLTF"),Ay=new D,qx=new D,Xx=new D,NL=function(a){ke(e,a);var t=Ie(e);function e(){var n;return ye(this,e),n=t.call(this),n[Vx]=null,n[Wx]=null,n.animationsByName=new Map,n.currentAnimationAction=null,n.animations=[],n.modelContainer=new Qe,n.animationNames=[],n.boundingBox=new Vr,n.size=new D,n.idealCameraDistance=0,n.fieldOfViewAspect=0,n.userData={url:null},n.url=null,n.name="Model",n.modelContainer.name="ModelContainer",n.add(n.modelContainer),n.mixer=new Sv(n.modelContainer),n}return Pe(e,[{key:"hasModel",value:function(){return!!this.modelContainer.children.length}},{key:"setObject",value:function(r){this.clear(),this.modelContainer.add(r),this.updateFraming(),this.dispatchEvent({type:"model-load"})}},{key:"setSource",value:function(){var n=pt(regeneratorRuntime.mark(function i(o,l,u){var c=this,f,d,v,m,g,w,_,x;return regeneratorRuntime.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(!(!l||l===this.url)){E.next=3;break}return u&&u(1),E.abrupt("return");case 3:return this[kv]!=null&&(this[kv](),this[kv]=null),this.url=l,E.prev=5,E.next=8,new Promise(function(){var R=pt(regeneratorRuntime.mark(function A(T,C){var I;return regeneratorRuntime.wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return c[kv]=function(){return C()},U.prev=1,U.next=4,o[_n].loader.load(l,o,u);case 4:I=U.sent,T(I),U.next=11;break;case 8:U.prev=8,U.t0=U.catch(1),C(U.t0);case 11:case"end":return U.stop()}},A,null,[[1,8]])}));return function(A,T){return R.apply(this,arguments)}}());case 8:f=E.sent,E.next=16;break;case 11:if(E.prev=11,E.t0=E.catch(5),E.t0!=null){E.next=15;break}return E.abrupt("return");case 15:throw E.t0;case 16:this.clear(),this[Rf]=f,f!=null&&this.modelContainer.add(f.scene),d=f,v=d.animations,m=new Map,g=[],w=jt(v);try{for(w.s();!(_=w.n()).done;)x=_.value,m.set(x.name,x),g.push(x.name)}catch(R){w.e(R)}finally{w.f()}this.animations=v,this.animationsByName=m,this.animationNames=g,this.userData.url=l,this.updateFraming(),this.dispatchEvent({type:"model-load",url:l});case 30:case"end":return E.stop()}},i,this,[[5,11]])}));function r(i,o,l){return n.apply(this,arguments)}return r}()},{key:"playAnimation",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=this.animations;if(o==null||o.length===0){console.warn("Cannot play animation (model does not have any animations)");return}var l=null;r!=null&&(l=this.animationsByName.get(r)),l==null&&(l=o[0]);try{var u=this.currentAnimationAction;this.currentAnimationAction=this.mixer.clipAction(l,this).play(),this.currentAnimationAction.enabled=!0,u!=null&&this.currentAnimationAction!==u&&this.currentAnimationAction.crossFadeFrom(u,i,!1)}catch(c){console.error(c)}}},{key:"stopAnimation",value:function(){this.currentAnimationAction!=null&&(this.currentAnimationAction.stop(),this.currentAnimationAction.reset(),this.currentAnimationAction=null),this.mixer.stopAllAction()}},{key:"updateAnimation",value:function(r){this.mixer.update(r)}},{key:"clear",value:function(){this.url=null,this.userData={url:null};var r=this[Rf];if(r!=null){var i=jt(this.modelContainer.children),o;try{for(i.s();!(o=i.n()).done;){var l=o.value;this.modelContainer.remove(l)}}catch(u){i.e(u)}finally{i.f()}r.dispose(),this[Rf]=null}this.currentAnimationAction!=null&&(this.currentAnimationAction.stop(),this.currentAnimationAction=null),this.mixer.stopAllAction(),this.mixer.uncacheRoot(this)}},{key:"updateFraming",value:function(){var r=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;this.remove(this.modelContainer),i==null&&(this.boundingBox.setFromObject(this.modelContainer),this.boundingBox.getSize(this.size),i=this.boundingBox.getCenter(new D));var o=function(f,d){return Math.max(f,i.distanceToSquared(d))},l=Math.sqrt(Ux(this.modelContainer,o));this.idealCameraDistance=l/jx;var u=function(f,d){d.sub(i);var v=Math.sqrt(d.x*d.x+d.z*d.z);return Math.max(f,v/(r.idealCameraDistance-Math.abs(d.y)))};this.fieldOfViewAspect=Ux(this.modelContainer,u)/OL,this.add(this.modelContainer)}},{key:"setShadowIntensity",value:function(r,i){var o=this[ys];o!=null?(o.setIntensity(r),o.setModel(this,i)):r>0&&(o=new PL(this,i),o.setIntensity(r),this[ys]=o)}},{key:"setShadowSoftness",value:function(r){var i=this[ys];i!=null&&i.setSoftness(r)}},{key:"setShadowRotation",value:function(r){var i=this[ys];i!=null&&i.setRotation(r)}},{key:"updateShadow",value:function(){var r=this[ys];if(r==null)return!1;var i=r.needsUpdate;return r.needsUpdate=!1,i}},{key:"setShadowScaleAndOffset",value:function(r,i){var o=this[ys];o!=null&&o.setScaleAndOffset(r,i)}},{key:"addHotspot",value:function(r){this.add(r)}},{key:"removeHotspot",value:function(r){this.remove(r)}},{key:"forHotspots",value:function(r){for(var i=this.children,o=0,l=i.length;o<l;o++){var u=i[o];Ht(u,Bx)&&r(u)}}},{key:"updateHotspots",value:function(r){var i=this;this.forHotspots(function(o){Ay.copy(r),qx.setFromMatrixPosition(o.matrixWorld),Ay.sub(qx),Xx.copy(o.normal).transformDirection(i.matrixWorld),Ay.dot(Xx)<0?o.hide():o.show()})}},{key:"orientHotspots",value:function(r){this.forHotspots(function(i){i.orient(r)})}},{key:"setHotspotsVisibility",value:function(r){this.forHotspots(function(i){i.visible=r})}},{key:"currentGLTF",get:function(){return this[Rf]}},{key:"animationTime",set:function(r){this.mixer.setTime(r)},get:function(){return this.currentAnimationAction!=null?this.currentAnimationAction.time:0}},{key:"hasActiveAnimation",get:function(){return this.currentAnimationAction!=null}}]),e}(Qe);Vx=ys,Wx=Rf;var kL=Math.tan(Ty/2*Math.PI/180),Yx=new vy,IL=new D,DL=function(a){ke(e,a);var t=Ie(e);function e(n){var r,i=n.canvas,o=n.element,l=n.width,u=n.height;return ye(this,e),r=t.call(this),r.aspect=1,r.shadowIntensity=0,r.shadowSoftness=1,r.width=1,r.height=1,r.isDirty=!1,r.context=null,r.exposure=1,r.canScale=!0,r.framedFieldOfView=Ty,r.camera=new fn(45,1,.1,100),r.goalTarget=new D,r.targetDamperX=new fi,r.targetDamperY=new fi,r.targetDamperZ=new fi,r.name="ModelScene",r.element=o,r.canvas=i,r.model=new NL,r.camera=new fn(45,1,.1,100),r.camera.name="MainCamera",r.activeCamera=r.camera,r.add(r.model),r.setSize(l,u),r.model.addEventListener("model-load",function(c){return r.onModelLoad(c)}),r}return Pe(e,[{key:"createContext",value:function(){this.context=this.canvas.getContext("2d")}},{key:"setModelSource",value:function(){var n=pt(regeneratorRuntime.mark(function i(o,l){return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,this.model.setSource(this.element,o,l);case 3:c.next=8;break;case 5:throw c.prev=5,c.t0=c.catch(0),new Error("Could not set model source to '".concat(o,"': ").concat(c.t0.message));case 8:case"end":return c.stop()}},i,this,[[0,5]])}));function r(i,o){return n.apply(this,arguments)}return r}()},{key:"setSize",value:function(r,i){this.width===r&&this.height===i||(this.width=Math.max(r,1),this.height=Math.max(i,1),this.aspect=this.width/this.height,this.frameModel(),this.isDirty=!0)}},{key:"frameModel",value:function(){var r=kL*Math.max(1,this.model.fieldOfViewAspect/this.aspect);this.framedFieldOfView=2*Math.atan(r)*180/Math.PI}},{key:"getSize",value:function(){return{width:this.width,height:this.height}}},{key:"getCamera",value:function(){return this.activeCamera}},{key:"setCamera",value:function(r){this.activeCamera=r}},{key:"onModelLoad",value:function(r){this.frameModel(),this.setShadowIntensity(this.shadowIntensity),this.isDirty=!0,this.dispatchEvent({type:"model-load",url:r.url})}},{key:"setTarget",value:function(r,i,o){this.goalTarget.set(-r,-i,-o)}},{key:"getTarget",value:function(){return IL.copy(this.goalTarget).multiplyScalar(-1)}},{key:"jumpToGoal",value:function(){this.updateTarget(Lx)}},{key:"updateTarget",value:function(r){var i=this.goalTarget,o=this.model.position;if(!i.equals(o)){var l=this.model.idealCameraDistance,u=o.x,c=o.y,f=o.z;u=this.targetDamperX.update(u,i.x,r,l),c=this.targetDamperY.update(c,i.y,r,l),f=this.targetDamperZ.update(f,i.z,r,l),this.model.position.set(u,c,f),this.model.updateMatrixWorld(),this.model.setShadowRotation(this.yaw),this.isDirty=!0}}},{key:"pointTowards",value:function(r,i){var o=this.position,l=o.x,u=o.z;this.yaw=Math.atan2(r-l,i-u)}},{key:"setShadowIntensity",value:function(r){r=Math.max(r,0),this.shadowIntensity=r,this.model.hasModel()&&this.model.setShadowIntensity(r,this.shadowSoftness)}},{key:"setShadowSoftness",value:function(r){this.shadowSoftness=r,this.model.setShadowSoftness(r)}},{key:"positionAndNormalFromPoint",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this;Yx.setFromCamera(r,this.getCamera());var o=Yx.intersectObject(i,!0);if(o.length===0)return null;var l=o[0];return l.face==null?null:(l.face.normal.applyNormalMatrix(new Jn().getNormalMatrix(l.object.matrixWorld)),{position:l.point,normal:l.face.normal})}},{key:"yaw",set:function(r){this.rotation.y=r,this.model.setShadowRotation(r),this.isDirty=!0},get:function(){return this.rotation.y}}]),e}(sl),uc=FL(),Cy=new St(new Oi(2,2),uc),Jx=new hs(0,1,0,1,0,1),Fi=null,ua=null;function Ly(a){ua=a,ua.compile(Cy,Jx)}Ly.prototype={constructor:Ly,generateMipmaps:function(t){if("roughnessMap"in t){var e=t.roughnessMap,n=t.normalMap;if(!(e===null||n===null||!e.generateMipmaps||t.userData.roughnessUpdated)){t.userData.roughnessUpdated=!0;var r=Math.max(e.image.width,n.image.width),i=Math.max(e.image.height,n.image.height);if(!(!lt.isPowerOfTwo(r)||!lt.isPowerOfTwo(i))){var o=ua.getRenderTarget(),l=ua.autoClear;if(ua.autoClear=!1,(Fi===null||Fi.width!==r||Fi.height!==i)&&(Fi!==null&&Fi.dispose(),Fi=new ir(r,i,{depthBuffer:!1}),Fi.scissorTest=!0),r!==e.image.width||i!==e.image.height){var u={wrapS:e.wrapS,wrapT:e.wrapT,magFilter:e.magFilter,minFilter:e.minFilter,depthBuffer:!1},c=new ir(r,i,u);c.texture.generateMipmaps=!0,ua.setRenderTarget(c),t.roughnessMap=c.texture,t.metalnessMap==e&&(t.metalnessMap=t.roughnessMap),t.aoMap==e&&(t.aoMap=t.roughnessMap)}uc.uniforms.roughnessMap.value=e,uc.uniforms.normalMap.value=n;for(var f=new xe(0,0),d=uc.uniforms.texelSize.value,v=0;r>=1&&i>=1;++v,r/=2,i/=2)d.set(1/r,1/i),v==0&&d.set(0,0),Fi.viewport.set(f.x,f.y,r,i),Fi.scissor.set(f.x,f.y,r,i),ua.setRenderTarget(Fi),ua.render(Cy,Jx),ua.copyFramebufferToTexture(f,t.roughnessMap,v),uc.uniforms.roughnessMap.value=t.roughnessMap;e!==t.roughnessMap&&e.dispose(),ua.setRenderTarget(o),ua.autoClear=l}}}},dispose:function(){uc.dispose(),Cy.geometry.dispose(),Fi!=null&&Fi.dispose()}};function FL(){var a=new ho({uniforms:{roughnessMap:{value:null},normalMap:{value:null},texelSize:{value:new xe(1,1)}},vertexShader:`
			precision mediump float;
			precision mediump int;

			attribute vec3 position;
			attribute vec2 uv;

			varying vec2 vUv;

			void main() {

				vUv = uv;

				gl_Position = vec4( position, 1.0 );

			}
		`,fragmentShader:`
			precision mediump float;
			precision mediump int;

			varying vec2 vUv;

			uniform sampler2D roughnessMap;
			uniform sampler2D normalMap;
			uniform vec2 texelSize;

			#define ENVMAP_TYPE_CUBE_UV

			vec4 envMapTexelToLinear( vec4 a ) { return a; }

			#include <cube_uv_reflection_fragment>

			float roughnessToVariance( float roughness ) {

				float variance = 0.0;

				if ( roughness >= r1 ) {

					variance = ( r0 - roughness ) * ( v1 - v0 ) / ( r0 - r1 ) + v0;

				} else if ( roughness >= r4 ) {

					variance = ( r1 - roughness ) * ( v4 - v1 ) / ( r1 - r4 ) + v1;

				} else if ( roughness >= r5 ) {

					variance = ( r4 - roughness ) * ( v5 - v4 ) / ( r4 - r5 ) + v4;

				} else {

					float roughness2 = roughness * roughness;

					variance = 1.79 * roughness2 * roughness2;

				}

				return variance;

			}

			float varianceToRoughness( float variance ) {

				float roughness = 0.0;

				if ( variance >= v1 ) {

					roughness = ( v0 - variance ) * ( r1 - r0 ) / ( v0 - v1 ) + r0;

				} else if ( variance >= v4 ) {

					roughness = ( v1 - variance ) * ( r4 - r1 ) / ( v1 - v4 ) + r1;

				} else if ( variance >= v5 ) {

					roughness = ( v4 - variance ) * ( r5 - r4 ) / ( v4 - v5 ) + r4;

				} else {

					roughness = pow( 0.559 * variance, 0.25 ); // 0.559 = 1.0 / 1.79

				}

				return roughness;

			}

			void main() {

				gl_FragColor = texture2D( roughnessMap, vUv, - 1.0 );

				if ( texelSize.x == 0.0 ) return;

				float roughness = gl_FragColor.g;

				float variance = roughnessToVariance( roughness );

				vec3 avgNormal;

				for ( float x = - 1.0; x < 2.0; x += 2.0 ) {

					for ( float y = - 1.0; y < 2.0; y += 2.0 ) {

						vec2 uv = vUv + vec2( x, y ) * 0.25 * texelSize;

						avgNormal += normalize( texture2D( normalMap, uv, - 1.0 ).xyz - 0.5 );

					}

				}

				variance += 1.0 - 0.25 * length( avgNormal );

				gl_FragColor.g = varianceToRoughness( variance );

			}
		`,blending:Zr,depthTest:!1,depthWrite:!1});return a.type="RoughnessMipmapper",a}var Zx=function(t){return!!t&&t!=="null"?BL(t):null},Kx=function(){if(!Ld){var t=[];throw Cd||t.push("WebXR Device API"),ah||t.push("WebXR Hit Test API"),new Error("The following APIs are required for AR, but are missing in this browser: ".concat(t.join(", ")))}},BL=function(t){var e=new URL(t,window.location.toString());return e.toString()},UL=function(t,e){var n=null,r=function(){n==null&&(t.apply(void 0,arguments),n=self.setTimeout(function(){return n=null},e))};return r.flush=function(){n!=null&&(self.clearTimeout(n),n=null)},r},Ry=function(t,e){var n=null;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];n!=null&&self.clearTimeout(n),n=self.setTimeout(function(){n=null,t.apply(void 0,i)},e)}},yl=function(t,e,n){return Math.max(e,Math.min(n,t))},GL=1,Qx=function(){var a=function(){var t=document.head!=null?Array.from(document.head.querySelectorAll("meta")):[],e=jt(t),n;try{for(e.s();!(n=e.n()).done;){var r=n.value;if(r.name==="viewport")return!0}}catch(i){e.e(i)}finally{e.f()}return!1}();return a||console.warn('No <meta name="viewport"> detected; <model-viewer> will cap pixel density at 1.'),function(){return a?window.devicePixelRatio:GL}}(),e_=function(){var a="model-viewer-debug-mode",t=new RegExp("[?&]".concat(a,"(&|$)"));return function(){return self.ModelViewerElement&&self.ModelViewerElement.debugMode||self.location&&self.location.search&&self.location.search.match(t)}}(),HL=function(t){if(t.keys!=null)return t.keys().next().value||null;var e=null;try{t.forEach(function(n,r,i){throw e=r,new Error})}catch{}return e},cc=.2,t_=.03,zL=.75,n_=12,VL=Math.PI/(2*n_),r_=new xe,Iv=function(t,e,n){for(var r=e>0?n>0?0:-Math.PI/2:n>0?Math.PI/2:Math.PI,i=0;i<=n_;++i)t.push(e+(cc-t_)*Math.cos(r),n+(cc-t_)*Math.sin(r),0,e+cc*Math.cos(r),n+cc*Math.sin(r),0),r+=VL},i_=function(a){ke(e,a);var t=Ie(e);function e(n){var r;ye(this,e);var i=new dt,o=[],l=[],u=n.size,c=n.boundingBox,f=u.x/2,d=u.z/2;Iv(l,f,d),Iv(l,-f,d),Iv(l,-f,-d),Iv(l,f,-d);for(var v=l.length/3,m=0;m<v-2;m+=2)o.push(m,m+1,m+3,m,m+3,m+2);var g=v-2;o.push(g,g+1,1,g,1,0),i.setAttribute("position",new Ve(l,3)),i.setIndex(o),r=t.call(this,i);var w=r.material;return w.side=wi,w.transparent=!0,w.opacity=0,r.goalOpacity=0,r.opacityDamper=new fi,r.hitPlane=new St(new Oi(u.x+2*cc,u.z+2*cc)),r.hitPlane.visible=!1,r.add(r.hitPlane),r.rotateX(-Math.PI/2),c.getCenter(r.position),r.shadowHeight=c.min.y,r.position.y=r.shadowHeight,n.add(Tr(r)),r}return Pe(e,[{key:"getHit",value:function(r,i,o){r_.set(i,-o),this.hitPlane.visible=!0;var l=r.positionAndNormalFromPoint(r_,this.hitPlane);return this.hitPlane.visible=!1,l==null?null:l.position}},{key:"updateOpacity",value:function(r){var i=this.material;i.opacity=this.opacityDamper.update(i.opacity,this.goalOpacity,r,1),this.visible=i.opacity>0}},{key:"dispose",value:function(){var r=this.hitPlane,i=r.geometry,o=r.material;i.dispose(),o.dispose(),this.geometry.dispose(),this.material.dispose()}},{key:"offsetHeight",set:function(r){this.position.y=this.shadowHeight+r},get:function(){return this.position.y-this.shadowHeight}},{key:"show",set:function(r){this.goalOpacity=r?zL:0}}]),e}(St),a_,o_,s_,l_,u_,c_,h_,f_,d_,p_,v_,m_,g_,y_,w_,b_,x_,__,S_,M_,E_,T_,A_,C_,L_,R_,P_,O_,N_,k_,I_,D_,F_,B_,U_,G_,H_,WL=.3,$L=1.5,jL=20,qL=.4,z_=1.2,XL=1/z_,hc={NOT_PRESENTING:"not-presenting",SESSION_STARTED:"session-started",OBJECT_PLACED:"object-placed",FAILED:"failed"},Qn=Symbol("presentedScene"),kr=Symbol("placementBox"),Pf=Symbol("lastTick"),Dv=Symbol("turntableRotation"),Fv=Symbol("oldShadowIntensity"),Bv=Symbol("oldBackground"),Uv=Symbol("rafId"),fc=Symbol("currentSession"),Py=Symbol("tick"),Of=Symbol("refSpace"),Gv=Symbol("viewerRefSpace"),Hv=Symbol("frame"),zv=Symbol("initialized"),Oy=Symbol("initialModelToWorld"),Vv=Symbol("placementComplete"),ws=Symbol("hitTestSource"),dc=Symbol("transiertHitTestSource"),wl=Symbol("inputSource"),bl=Symbol("isTranslating"),pc=Symbol("isRotating"),xl=Symbol("isScaling"),Nf=Symbol("lastDragPosition"),_l=Symbol("lastScalar"),vc=Symbol("goalPosition"),kf=Symbol("goalYaw"),If=Symbol("goalScale"),V_=Symbol("xDamper"),W_=Symbol("yDamper"),$_=Symbol("zDamper"),j_=Symbol("yawDamper"),q_=Symbol("scaleDamper"),Wv=Symbol("damperRate"),$v=Symbol("resolveCleanup"),jv=Symbol("exitWebXRButtonContainer"),X_=Symbol("onWebXRFrame"),Ny=Symbol("postSessionCleanup"),Y_=Symbol("updateCamera"),J_=Symbol("placeInitially"),ky=Symbol("getHitPoint"),Iy=Symbol("onSelectStart"),Dy=Symbol("onSelect"),Fy=Symbol("onUpdateScene"),qv=Symbol("fingerSeparation"),Z_=Symbol("processInput"),K_=Symbol("moveScene"),By=Symbol("onExitWebXRButtonContainerClick"),YL=new D,JL=new ht,ZL=new D,KL=function(a){ke(e,a);var t=Ie(e);function e(n){var r;return ye(this,e),r=t.call(this),r.renderer=n,r.camera=new fn,r[a_]=null,r[o_]=null,r[s_]=null,r[l_]=null,r[u_]=null,r[c_]=null,r[h_]=null,r[f_]=null,r[d_]=null,r[p_]=null,r[v_]=null,r[m_]=null,r[g_]=null,r[y_]=null,r[w_]=null,r[b_]=null,r[x_]=!1,r[__]=new ht,r[S_]=!1,r[M_]=!1,r[E_]=!1,r[T_]=!1,r[A_]=new D,r[C_]=0,r[L_]=new D,r[R_]=0,r[P_]=1,r[O_]=new fi,r[N_]=new fi,r[k_]=new fi,r[I_]=new fi,r[D_]=new fi,r[F_]=1,r[B_]=function(){return r.stopPresenting()},r[U_]=function(){r[kr]!=null&&r.isPresenting&&(r[kr].dispose(),r[kr]=new i_(r[Qn].model))},r[G_]=function(i){var o=r[dc];if(o!=null){var l=r[Hv].getHitTestResultsForTransientInput(o),u=r[Qn],c=r[kr];if(l.length===1){r[wl]=i.inputSource;var f=r[wl].gamepad.axes,d=c.getHit(r[Qn],f[0],f[1]);c.show=!0,d!=null?(r[bl]=!0,r[Nf].copy(d)):(r[pc]=!0,r[_l]=f[0])}else l.length===2&&u.canScale&&(c.show=!0,r[xl]=!0,r[_l]=r[qv](l)/u.scale.x)}},r[H_]=function(){r[bl]=!1,r[pc]=!1,r[xl]=!1,r[wl]=null,r[vc].y+=r[kr].offsetHeight*r[Qn].scale.x,r[kr].show=!1},r.threeRenderer=n.threeRenderer,r.camera.matrixAutoUpdate=!1,r}return Pe(e,[{key:"resolveARSession",value:function(){var n=pt(regeneratorRuntime.mark(function i(o){var l,u,c,f,d,v,m,g;return regeneratorRuntime.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return Kx(),_.next=3,navigator.xr.requestSession("immersive-ar",{requiredFeatures:["hit-test"],optionalFeatures:["dom-overlay"],domOverlay:{root:o.element.shadowRoot.querySelector("div.annotation-container")}});case 3:return l=_.sent,u=this.threeRenderer.context,_.next=7,u.makeXRCompatible();case 7:return l.updateRenderState({baseLayer:new XRWebGLLayer(l,u,{alpha:!0})}),c=new Promise(function(x,y){l.requestAnimationFrame(function(){return x()})}),_.next=11,c;case 11:return o.element[xs](window.screen),f=l.renderState.baseLayer,d=f.framebuffer,v=f.framebufferWidth,m=f.framebufferHeight,this.threeRenderer.setFramebuffer(d),this.threeRenderer.setPixelRatio(1),this.threeRenderer.setSize(v,m,!1),g=o.element.shadowRoot.querySelector(".slot.exit-webxr-ar-button"),g.classList.add("enabled"),g.addEventListener("click",this[By]),this[jv]=g,_.abrupt("return",l);case 21:case"end":return _.stop()}},i,this)}));function r(i){return n.apply(this,arguments)}return r}()},{key:"supportsPresentation",value:function(){var n=pt(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,Kx(),l.next=4,navigator.xr.isSessionSupported("immersive-ar");case 4:return l.abrupt("return",l.sent);case 7:return l.prev=7,l.t0=l.catch(0),l.abrupt("return",!1);case 10:case"end":return l.stop()}},i,null,[[0,7]])}));function r(){return n.apply(this,arguments)}return r}()},{key:"present",value:function(){var n=pt(regeneratorRuntime.mark(function i(o){var l=this,u,c,f,d;return regeneratorRuntime.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return this.isPresenting&&console.warn("Cannot present while a model is already presenting"),u=new Promise(function(g,w){requestAnimationFrame(function(){return g()})}),o.model.setHotspotsVisibility(!1),o.isDirty=!0,m.next=6,u;case 6:return this[Qn]=o,m.next=9,this.resolveARSession(o);case 9:return c=m.sent,c.addEventListener("end",function(){l[Ny]()},{once:!0}),m.next=13,c.requestReferenceSpace("local");case 13:return this[Of]=m.sent,m.next=16,c.requestReferenceSpace("viewer");case 16:this[Gv]=m.sent,o.setCamera(this.camera),this[zv]=!1,this[Wv]=qL,this[Dv]=o.yaw,o.yaw=0,this[kf]=0,this[If]=1,this[Bv]=o.background,o.background=null,this[Fv]=o.shadowIntensity,o.setShadowIntensity(0),o.addEventListener("model-load",this[Fy]),f=jL*Math.PI/180,d=new XRRay(new DOMPoint(0,0,0),{x:0,y:-Math.sin(f),z:-Math.cos(f)}),c.requestHitTestSource({space:this[Gv],offsetRay:d}).then(function(g){l[ws]=g}),this[fc]=c,this[kr]=new i_(o.model),this[Vv]=!1,this[Pf]=performance.now(),this[Py]();case 37:case"end":return m.stop()}},i,this)}));function r(i){return n.apply(this,arguments)}return r}()},{key:"stopPresenting",value:function(){var n=pt(regeneratorRuntime.mark(function i(){var o=this,l;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(this.isPresenting){c.next=2;break}return c.abrupt("return");case 2:return l=new Promise(function(f){o[$v]=f}),c.prev=3,c.next=6,this[fc].end();case 6:return c.next=8,l;case 8:c.next=15;break;case 10:c.prev=10,c.t0=c.catch(3),console.warn("Error while trying to end AR session"),console.warn(c.t0),this[Ny]();case 15:case"end":return c.stop()}},i,this,[[3,10]])}));function r(){return n.apply(this,arguments)}return r}()},{key:(a_=kr,o_=Pf,s_=Dv,l_=Fv,u_=Bv,c_=Uv,h_=fc,f_=Of,d_=Gv,p_=Hv,v_=ws,m_=dc,g_=wl,y_=Qn,w_=$v,b_=jv,x_=zv,__=Oy,S_=Vv,M_=bl,E_=pc,T_=xl,A_=Nf,C_=_l,L_=vc,R_=kf,P_=If,O_=V_,N_=W_,k_=$_,I_=j_,D_=q_,F_=Wv,B_=By,Ny),value:function(){this.threeRenderer.setFramebuffer(null);var r=this[fc];r!=null&&(r.removeEventListener("selectstart",this[Iy]),r.removeEventListener("selectend",this[Dy]),r.cancelAnimationFrame(this[Uv]),this[fc]=null);var i=this[Qn];if(i!=null){var o=i.model,l=i.element;i.setCamera(i.camera),o.remove(this[kr]),i.position.set(0,0,0),i.scale.set(1,1,1),o.setShadowScaleAndOffset(1,0);var u=this[Dv];u!=null&&(i.yaw=u);var c=this[Fv];c!=null&&i.setShadowIntensity(c);var f=this[Bv];f!=null&&(i.background=f),i.removeEventListener("model-load",this[Fy]),o.orientHotspots(0),l.requestUpdate("cameraTarget"),l[xs](l.getBoundingClientRect())}this.renderer.height=0;var d=this[jv];d!=null&&(d.classList.remove("enabled"),d.removeEventListener("click",this[By]),this[jv]=null);var v=this[dc];v!=null&&(v.cancel(),this[dc]=null);var m=this[ws];m!=null&&(m.cancel(),this[ws]=null),this[kr]!=null&&(this[kr].dispose(),this[kr]=null),this[Pf]=null,this[Dv]=null,this[Fv]=null,this[Bv]=null,this[Uv]=null,this[Of]=null,this[Qn]=null,this[Gv]=null,this[Hv]=null,this[wl]=null,this[$v]!=null&&this[$v](),this.dispatchEvent({type:"status",status:hc.NOT_PRESENTING})}},{key:"updateTarget",value:function(){var r=this[Qn];if(r!=null){var i=r.getTarget();r.setTarget(i.x,r.model.boundingBox.min.y,i.z)}}},{key:(U_=Fy,Y_),value:function(r){var i=this.camera,o=i.matrix;if(o.fromArray(r.transform.matrix),i.updateMatrixWorld(!0),i.position.setFromMatrixPosition(o),this[ws]!=null){var l=this[Qn],u=l.position,c=l.model,f=c.idealCameraDistance;i.getWorldDirection(u),u.multiplyScalar(f),u.add(i.position)}if(!this[zv]){i.projectionMatrix.fromArray(r.projectionMatrix),i.projectionMatrixInverse.getInverse(i.projectionMatrix);var d=i.position,v=d.x,m=d.z,g=this[Qn];g.pointTowards(v,m),g.model.updateMatrixWorld(!0),this[kf]=g.yaw,this[Oy].copy(g.model.matrixWorld),g.model.setHotspotsVisibility(!0),this[zv]=!0,this.dispatchEvent({type:"status",status:hc.SESSION_STARTED})}this[Qn].model.orientHotspots(Math.atan2(o.elements[1],o.elements[5]))}},{key:J_,value:function(r){var i=this,o=this[ws];if(o!=null){var l=r.getHitTestResults(o);if(l.length!=0){var u=l[0],c=this[ky](u);if(c!=null){this.placeModel(c),o.cancel(),this[ws]=null;var f=r.session;f.addEventListener("selectstart",this[Iy]),f.addEventListener("selectend",this[Dy]),f.requestHitTestSourceForTransientInput({profile:"generic-touchscreen"}).then(function(d){i[dc]=d})}}}}},{key:ky,value:function(r){var i=r.getPose(this[Of]);if(i==null)return null;var o=JL.fromArray(i.transform.matrix);return o.elements[5]>.75?ZL.setFromMatrixPosition(o):null}},{key:"placeModel",value:function(r){var i=this[Qn],o=i.model,l=o.boundingBox,u=l.min,c=l.max;this[kr].show=!0;var f=this[vc];f.copy(r);var d=r.y,v=this.camera.position.clone(),m=r.clone().sub(v).normalize();v.sub(m.multiplyScalar(o.idealCameraDistance));var g=new ro(v,m.normalize()),w=this[Oy],_=new D().setFromMatrixPosition(w).add(r);w.setPosition(_);var x=new ht().getInverse(w);g.applyMatrix4(x),c.y+=10,g.intersectBox(o.boundingBox,_),c.y-=10,_!=null&&(_.applyMatrix4(w),f.add(r).sub(_));var y=i.getTarget();i.setTarget(y.x,u.y,y.z),f.y=d,this.dispatchEvent({type:"status",status:hc.OBJECT_PLACED})}},{key:(G_=Iy,H_=Dy,qv),value:function(r){var i=r[0].inputSource.gamepad.axes,o=r[1].inputSource.gamepad.axes,l=o[0]-i[0],u=o[1]-i[1];return Math.sqrt(l*l+u*u)}},{key:Z_,value:function(r){var i=this,o=this[dc];if(o!=null&&!(!this[bl]&&!this[xl]&&!this[pc])){var l=r.getHitTestResultsForTransientInput(o),u=this[Qn],c=u.scale.x;if(this[xl]){if(l.length<2)this[xl]=!1;else{var f=this[qv](l),d=f/this[_l];this[If]=d<z_&&d>XL?1:d}return}else if(l.length===2&&u.canScale){this[bl]=!1,this[pc]=!1,this[xl]=!0,this[_l]=this[qv](l)/c;return}if(this[pc]){var v=this[wl].gamepad.axes[0];this[kf]+=(v-this[_l])*$L,this[_l]=v}else this[bl]&&l.forEach(function(m){if(!(m.inputSource!==i[wl]||m.results.length<1)){var g=i[ky](m.results[0]);if(g!=null){i[vc].sub(i[Nf]);var w=g.y-i[Nf].y;if(w<0){i[kr].offsetHeight=w/c,i[Qn].model.setShadowScaleAndOffset(c,w);var _=YL.copy(i.camera.position),x=-w/(_.y-g.y);_.multiplyScalar(x),g.multiplyScalar(1-x).add(_)}i[vc].add(g),i[Nf].copy(g)}}})}}},{key:K_,value:function(r){var i=this[Qn],o=i.model,l=i.position,u=i.yaw,c=o.idealCameraDistance,f=this[vc],d=i.scale.x,v=this[kr];if(this[ws]==null&&(!f.equals(l)||this[If]!==d)){var m=l.x,g=l.y,w=l.z;r*=this[Wv],m=this[V_].update(m,f.x,r,c),g=this[W_].update(g,f.y,r,c),w=this[$_].update(w,f.z,r,c),l.set(m,g,w);var _=this[q_].update(d,this[If],r,1);if(i.scale.set(_,_,_),!this[bl]){var x=f.y-g;this[Vv]?(v.offsetHeight=x/_,o.setShadowScaleAndOffset(_,x)):x===0&&(this[Vv]=!0,v.show=!1,i.setShadowIntensity(WL),this[Wv]=1)}}v.updateOpacity(r),i.updateTarget(r),i.updateMatrixWorld(!0),i.yaw=this[j_].update(u,this[kf],r,Math.PI)}},{key:Py,value:function(){var r=this;this[Uv]=this[fc].requestAnimationFrame(function(i,o){return r[X_](i,o)})}},{key:X_,value:function(r,i){this[Hv]=i;var o=i.getViewerPose(this[Of]);this[Py]();var l=this[Qn];if(!(o==null||l==null)){this[Y_](o.views[0]),this[J_](i),this[Z_](i);var u=r-this[Pf];this[K_](u),this.renderer.preRender(l,r,u),this[Pf]=r,this.threeRenderer.render(l,this.camera)}}},{key:"presentedScene",get:function(){return this[Qn]}},{key:"isPresenting",get:function(){return this[Qn]!=null}}]),e}(rr),QL=function(){function a(t){ye(this,a),t.threeRenderer.debug={checkShaderErrors:!0},Promise.resolve().then(function(){self.dispatchEvent(new CustomEvent("model-viewer-renderer-debug",{detail:{renderer:t,THREE:{ShaderMaterial:fr,Texture:Jt,Mesh:St,Scene:sl,PlaneBufferGeometry:Oi,OrthographicCamera:hs,WebGLRenderTarget:ir}}}))})}return Pe(a,[{key:"addScene",value:function(e){self.dispatchEvent(new CustomEvent("model-viewer-scene-added-debug",{detail:{scene:e}}))}},{key:"removeScene",value:function(e){self.dispatchEvent(new CustomEvent("model-viewer-scene-removed-debug",{detail:{scene:e}}))}}]),a}(),Q_=Symbol("threeGLTF"),eS=Symbol("gltf"),tS=Symbol("gltfElementMap"),nS=Symbol("threeObjectMap"),rS=Symbol("parallelTraverseThreeScene"),iS=Symbol("correlateOriginalThreeGLTF"),aS=Symbol("correlateCloneThreeGLTF"),oS=function(){function a(t,e,n,r){ye(this,a),this[Q_]=t,this[eS]=e,this[tS]=r,this[nS]=n}return Pe(a,[{key:"threeGLTF",get:function(){return this[Q_]}},{key:"gltf",get:function(){return this[eS]}},{key:"gltfElementMap",get:function(){return this[tS]}},{key:"threeObjectMap",get:function(){return this[nS]}}],[{key:"from",value:function(e,n){return n!=null?this[aS](e,n):this[iS](e)}},{key:iS,value:function(e){var n=e.parser.json,r=e.parser.associations,i=new Map;return r.forEach(function(o,l){if(o!=null){var u=o.type,c=o.index,f=n[u]||[],d=f[c];if(d!=null){var v=i.get(d);v==null&&(v=new Set,i.set(d,v)),v.add(l)}}}),new a(e,n,r,i)}},{key:aS,value:function(e,n){for(var r=n.threeGLTF,i=n.gltf,o=JSON.parse(JSON.stringify(i)),l=new Map,u=new Map,c=0;c<r.scenes.length;c++)this[rS](r.scenes[c],e.scenes[c],function(f,d){var v=n.threeObjectMap.get(f);if(v!=null){var m=v.type,g=v.index,w=o[m][g];l.set(d,{type:m,index:g});var _=u.get(w)||new Set;_.add(d),u.set(w,_)}});return new a(e,o,l,u)}},{key:rS,value:function(e,n,r){var i=function(u){return u.isMesh},o=function l(u,c){if(r(u,c),u.isObject3D){if(i(u))if(Array.isArray(u.material))for(var f=0;f<u.material.length;++f)l(u.material[f],c.material[f]);else l(u.material,c.material);for(var d=0;d<u.children.length;++d)l(u.children[d],c.children[d])}};o(e,n)}}]),a}(),eR={retarget:function(){var a=new D,t=new Gn,e=new D,n=new ht,r=new ht,i=new ht;return function(o,l,u){u=u||{},u.preserveMatrix=u.preserveMatrix!==void 0?u.preserveMatrix:!0,u.preservePosition=u.preservePosition!==void 0?u.preservePosition:!0,u.preserveHipPosition=u.preserveHipPosition!==void 0?u.preserveHipPosition:!1,u.useTargetMatrix=u.useTargetMatrix!==void 0?u.useTargetMatrix:!1,u.hip=u.hip!==void 0?u.hip:"hip",u.names=u.names||{};var c=l.isObject3D?l.skeleton.bones:this.getBones(l),f=o.isObject3D?o.skeleton.bones:this.getBones(o),d,v,m,g,w,_;if(o.isObject3D?o.skeleton.pose():(u.useTargetMatrix=!0,u.preserveMatrix=!1),u.preservePosition)for(w=[],_=0;_<f.length;_++)w.push(f[_].position.clone());if(u.preserveMatrix)for(o.updateMatrixWorld(),o.matrixWorld.identity(),_=0;_<o.children.length;++_)o.children[_].updateMatrixWorld(!0);if(u.offsets)for(d=[],_=0;_<f.length;++_)v=f[_],m=u.names[v.name]||v.name,u.offsets&&u.offsets[m]&&(v.matrix.multiply(u.offsets[m]),v.matrix.decompose(v.position,v.quaternion,v.scale),v.updateMatrixWorld()),d.push(v.matrixWorld.clone());for(_=0;_<f.length;++_){if(v=f[_],m=u.names[v.name]||v.name,g=this.getBoneByName(m,c),i.copy(v.matrixWorld),g){if(g.updateMatrixWorld(),u.useTargetMatrix?r.copy(g.matrixWorld):(r.getInverse(o.matrixWorld),r.multiply(g.matrixWorld)),e.setFromMatrixScale(r),r.scale(e.set(1/e.x,1/e.y,1/e.z)),i.makeRotationFromQuaternion(t.setFromRotationMatrix(r)),o.isObject3D){var x=f.indexOf(v),y=d?d[x]:n.getInverse(o.skeleton.boneInverses[x]);i.multiply(y)}i.copyPosition(r)}v.parent&&v.parent.isBone?(v.matrix.getInverse(v.parent.matrixWorld),v.matrix.multiply(i)):v.matrix.copy(i),u.preserveHipPosition&&m===u.hip&&v.matrix.setPosition(a.set(0,v.position.y,0)),v.matrix.decompose(v.position,v.quaternion,v.scale),v.updateMatrixWorld()}if(u.preservePosition)for(_=0;_<f.length;++_)v=f[_],m=u.names[v.name]||v.name,m!==u.hip&&v.position.copy(w[_]);u.preserveMatrix&&o.updateMatrixWorld(!0)}}(),retargetClip:function(t,e,n,r){r=r||{},r.useFirstFramePosition=r.useFirstFramePosition!==void 0?r.useFirstFramePosition:!1,r.fps=r.fps!==void 0?r.fps:30,r.names=r.names||[],e.isObject3D||(e=this.getHelperFromSkeleton(e));var i=Math.round(n.duration*(r.fps/1e3)*1e3),o=1/r.fps,l=[],u=new Sv(e),c=this.getBones(t.skeleton),f=[],d,v,m,g,w,_,x;for(u.clipAction(n).play(),u.update(0),e.updateMatrixWorld(),_=0;_<i;++_){var y=_*o;for(this.retarget(t,e,r),x=0;x<c.length;++x)w=r.names[c[x].name]||c[x].name,m=this.getBoneByName(w,e.skeleton),m&&(v=c[x],g=f[x]=f[x]||{bone:v},r.hip===w&&(g.pos||(g.pos={times:new Float32Array(i),values:new Float32Array(i*3)}),r.useFirstFramePosition&&(_===0&&(d=v.position.clone()),v.position.sub(d)),g.pos.times[_]=y,v.position.toArray(g.pos.values,_*3)),g.quat||(g.quat={times:new Float32Array(i),values:new Float32Array(i*4)}),g.quat.times[_]=y,v.quaternion.toArray(g.quat.values,_*4));u.update(o),e.updateMatrixWorld()}for(_=0;_<f.length;++_)g=f[_],g&&(g.pos&&l.push(new fl(".bones["+g.bone.name+"].position",g.pos.times,g.pos.values)),l.push(new ic(".bones["+g.bone.name+"].quaternion",g.quat.times,g.quat.values)));return u.uncacheAction(n),new ui(n.name,-1,l)},getHelperFromSkeleton:function(t){var e=new hx(t.bones[0]);return e.skeleton=t,e},getSkeletonOffsets:function(){var a=new D,t=new D,e=new D,n=new D,r=new xe,i=new xe;return function(o,l,u){u=u||{},u.hip=u.hip!==void 0?u.hip:"hip",u.names=u.names||{},l.isObject3D||(l=this.getHelperFromSkeleton(l));var c=Object.keys(u.names),f=Object.values(u.names),d=l.isObject3D?l.skeleton.bones:this.getBones(l),v=o.isObject3D?o.skeleton.bones:this.getBones(o),m=[],g,w,_,x;for(o.skeleton.pose(),x=0;x<v.length;++x)if(g=v[x],_=u.names[g.name]||g.name,w=this.getBoneByName(_,d),w&&_!==u.hip){var y=this.getNearestBone(g.parent,c),E=this.getNearestBone(w.parent,f);y.updateMatrixWorld(),E.updateMatrixWorld(),a.setFromMatrixPosition(y.matrixWorld),t.setFromMatrixPosition(g.matrixWorld),e.setFromMatrixPosition(E.matrixWorld),n.setFromMatrixPosition(w.matrixWorld),r.subVectors(new xe(t.x,t.y),new xe(a.x,a.y)).normalize(),i.subVectors(new xe(n.x,n.y),new xe(e.x,e.y)).normalize();var R=r.angle()-i.angle(),A=new ht().makeRotationFromEuler(new io(0,0,R));g.matrix.multiply(A),g.matrix.decompose(g.position,g.quaternion,g.scale),g.updateMatrixWorld(),m[_]=A}return m}}(),renameBones:function(t,e){for(var n=this.getBones(t),r=0;r<n.length;++r){var i=n[r];e[i.name]&&(i.name=e[i.name])}return this},getBones:function(t){return Array.isArray(t)?t:t.bones},getBoneByName:function(t,e){for(var n=0,r=this.getBones(e);n<r.length;n++)if(t===r[n].name)return r[n]},getNearestBone:function(t,e){for(;t.isBone;){if(e.indexOf(t.name)!==-1)return t;t=t.parent}},findBoneTrackData:function(t,e){for(var n=/\[(.*)\]\.(.*)/,r={name:t},i=0;i<e.length;++i){var o=n.exec(e[i].name);o&&t===o[1]&&(r[o[2]]=i)}return r},getEqualsBonesNames:function(t,e){var n=this.getBones(t),r=this.getBones(e),i=[];e:for(var o=0;o<n.length;o++)for(var l=n[o].name,u=0;u<r.length;u++)if(l===r[u].name){i.push(l);continue e}return i},clone:function(t){var e=new Map,n=new Map,r=t.clone();return sS(t,r,function(i,o){e.set(o,i),n.set(i,o)}),r.traverse(function(i){if(!!i.isSkinnedMesh){var o=i,l=e.get(i),u=l.skeleton.bones;o.skeleton=l.skeleton.clone(),o.bindMatrix.copy(l.bindMatrix),o.skeleton.bones=u.map(function(c){return n.get(c)}),o.bind(o.skeleton,o.bindMatrix)}}),r}};function sS(a,t,e){e(a,t);for(var n=0;n<a.children.length;n++)sS(a.children[n],t.children[n],e)}var lS=Symbol("prepared"),Xv=Symbol("prepare"),Fa=Symbol("preparedGLTF"),Yv=Symbol("clone"),tR=function(){function a(t){ye(this,a),this[Fa]=t}return Pe(a,[{key:"clone",value:function(){var e=this.constructor,n=this[Yv]();return new e(n)}},{key:"dispose",value:function(){this.scenes.forEach(function(e){e.traverse(function(n){if(!!n.isMesh){var r=n,i=Array.isArray(r.material)?r.material:[r.material];i.forEach(function(o){o.dispose()}),r.geometry.dispose()}})})}},{key:Yv,value:function(){var e=this[Fa],n=eR.clone(this.scene),r=[n],i=e.userData?Object.assign({},e.userData):{};return Object.assign(Object.assign({},e),{scene:n,scenes:r,userData:i})}},{key:"parser",get:function(){return this[Fa].parser}},{key:"animations",get:function(){return this[Fa].animations}},{key:"scene",get:function(){return this[Fa].scene}},{key:"scenes",get:function(){return this[Fa].scenes}},{key:"cameras",get:function(){return this[Fa].cameras}},{key:"asset",get:function(){return this[Fa].asset}},{key:"userData",get:function(){return this[Fa].userData}}],[{key:"prepare",value:function(e){if(e.scene==null)throw new Error("Model does not have a scene");if(e[lS])return e;var n=this[Xv](e);return n[lS]=!0,n}},{key:Xv,value:function(e){var n=e.scene,r=[n];return Object.assign(Object.assign({},e),{scene:n,scenes:r})}}]),a}(),uS=`
#ifdef ALPHATEST

    if ( diffuseColor.a < ALPHATEST ) discard;
    diffuseColor.a = 1.0;

#endif
`,Uy=Symbol("cloneAndPatchMaterial"),Jv=Symbol("correlatedSceneGraph"),nR=function(a){ke(e,a);var t=Ie(e);function e(){return ye(this,e),t.apply(this,arguments)}return Pe(e,[{key:Yv,value:function(){var r=this,i=et(Ze(e.prototype),Yv,this).call(this),o=new Map;return i.scene.traverse(function(l){if(l.isMesh){var u=l;Array.isArray(u.material)?u.material=u.material.map(function(c){return r[Uy](c,o)}):u.material!=null&&(u.material=r[Uy](u.material,o))}}),i[Jv]=oS.from(i,this.correlatedSceneGraph),i}},{key:Uy,value:function(r,i){if(i.has(r.uuid))return i.get(r.uuid);var o=r.clone(),l=r.onBeforeCompile;return o.onBeforeCompile=r.isGLTFSpecularGlossinessMaterial?function(u){l(u,void 0),u.fragmentShader=u.fragmentShader.replace("#include <alphatest_fragment>",uS)}:function(u){u.fragmentShader=u.fragmentShader.replace("#include <alphatest_fragment>",uS),l(u,void 0)},o.shadowSide=Ur,o.transparent&&(o.depthWrite=!1),!o.alphaTest&&!o.transparent&&(o.alphaTest=-.5),i.set(r.uuid,o),o}},{key:"correlatedSceneGraph",get:function(){return this[Fa][Jv]}}],[{key:Xv,value:function(r){var i=et(Ze(e),Xv,this).call(this,r);i[Jv]==null&&(i[Jv]=oS.from(i));var o=i.scene,l=[];o.traverse(function(w){if(w.renderOrder=1e3,w.frustumCulled=!1,w.name||(w.name=w.uuid),!!w.isMesh){w.castShadow=!0;var _=w,x=!1,y=Array.isArray(_.material)?_.material:[_.material];y.forEach(function(E){E.isMeshStandardMaterial&&(E.transparent&&E.side===wi&&(x=!0,E.side=Ur),Ml.singleton.roughnessMipmapper.generateMipmaps(E))}),x&&l.push(_)}});for(var u=0,c=l;u<c.length;u++){var f=c[u],d=Array.isArray(f.material)?f.material:[f.material],v=d.map(function(w){var _=w.clone();return _.side=Tn,_}),m=Array.isArray(f.material)?v:v[0],g=new St(f.geometry,m);g.renderOrder=-1,f.add(g)}return i}}]),e}(tR),Gy=function(t){mf.call(this,t),this.type=xi};Gy.prototype=Object.assign(Object.create(mf.prototype),{constructor:Gy,parse:function(t){var e=-1,n=1,r=2,i=3,o=4,l=function(J,q){switch(J){case n:console.error("RGBELoader Read Error: "+(q||""));break;case r:console.error("RGBELoader Write Error: "+(q||""));break;case i:console.error("RGBELoader Bad File Format: "+(q||""));break;default:case o:console.error("RGBELoader: Error: "+(q||""))}return e},u=1,c=2,f=4,d=`
`,v=function(J,q,Y){q=q||1024;for(var ee=J.pos,le=-1,ue=0,he="",pe=128,de=String.fromCharCode.apply(null,new Uint16Array(J.subarray(ee,ee+pe)));0>(le=de.indexOf(d))&&ue<q&&ee<J.byteLength;)he+=de,ue+=de.length,ee+=pe,de+=String.fromCharCode.apply(null,new Uint16Array(J.subarray(ee,ee+pe)));return-1<le?(Y!==!1&&(J.pos+=ue+le+1),he+de.slice(0,le)):!1},m=function(J){var q,Y,ee=/^#\?(\S+)$/,le=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,ue=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,he=/^\s*FORMAT=(\S+)\s*$/,pe=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,de={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};if(J.pos>=J.byteLength||!(q=v(J)))return l(n,"no header found");if(!(Y=q.match(ee)))return l(i,"bad initial token");for(de.valid|=u,de.programtype=Y[1],de.string+=q+`
`;q=v(J),q!==!1;){if(de.string+=q+`
`,q.charAt(0)==="#"){de.comments+=q+`
`;continue}if((Y=q.match(le))&&(de.gamma=parseFloat(Y[1],10)),(Y=q.match(ue))&&(de.exposure=parseFloat(Y[1],10)),(Y=q.match(he))&&(de.valid|=c,de.format=Y[1]),(Y=q.match(pe))&&(de.valid|=f,de.height=parseInt(Y[1],10),de.width=parseInt(Y[2],10)),de.valid&c&&de.valid&f)break}return de.valid&c?de.valid&f?de:l(i,"missing image size specifier"):l(i,"missing format specifier")},g=function(J,q,Y){var ee,le,ue,he,pe,de,Oe,H,L,G,z,M,O=q,N=Y,W;if(O<8||O>32767||J[0]!==2||J[1]!==2||J[2]&128)return new Uint8Array(J);if(O!==(J[2]<<8|J[3]))return l(i,"wrong scanline width");if(ee=new Uint8Array(4*q*Y),!ee.length)return l(o,"unable to allocate buffer space");for(le=0,ue=0,H=4*O,W=new Uint8Array(4),de=new Uint8Array(H);N>0&&ue<J.byteLength;){if(ue+4>J.byteLength)return l(n);if(W[0]=J[ue++],W[1]=J[ue++],W[2]=J[ue++],W[3]=J[ue++],W[0]!=2||W[1]!=2||(W[2]<<8|W[3])!=O)return l(i,"bad rgbe scanline format");for(Oe=0;Oe<H&&ue<J.byteLength;){if(he=J[ue++],M=he>128,M&&(he-=128),he===0||Oe+he>H)return l(i,"bad scanline data");if(M)for(pe=J[ue++],L=0;L<he;L++)de[Oe++]=pe;else de.set(J.subarray(ue,ue+he),Oe),Oe+=he,ue+=he}for(G=O,L=0;L<G;L++)z=0,ee[le]=de[L+z],z+=O,ee[le+1]=de[L+z],z+=O,ee[le+2]=de[L+z],z+=O,ee[le+3]=de[L+z],le+=4;N--}return ee},w=function(J,q,Y,ee){var le=J[q+3],ue=Math.pow(2,le-128)/255;Y[ee+0]=J[q+0]*ue,Y[ee+1]=J[q+1]*ue,Y[ee+2]=J[q+2]*ue},_=function(){var Q=new Float32Array(1),J=new Int32Array(Q.buffer);function q(Y){Q[0]=Y;var ee=J[0],le=ee>>16&32768,ue=ee>>12&2047,he=ee>>23&255;return he<103?le:he>142?(le|=31744,le|=(he==255?0:1)&&ee&8388607,le):he<113?(ue|=2048,le|=(ue>>114-he)+(ue>>113-he&1),le):(le|=he-112<<10|ue>>1,le+=ue&1,le)}return function(Y,ee,le,ue){var he=Y[ee+3],pe=Math.pow(2,he-128)/255;le[ue+0]=q(Y[ee+0]*pe),le[ue+1]=q(Y[ee+1]*pe),le[ue+2]=q(Y[ee+2]*pe)}}(),x=new Uint8Array(t);x.pos=0;var y=m(x);if(e!==y){var E=y.width,R=y.height,A=g(x.subarray(x.pos),E,R);if(e!==A){switch(this.type){case xi:var T=A,C=Xd,I=xi;break;case Gr:for(var j=A.length/4*3,U=new Float32Array(j),B=0;B<j;B++)w(A,B*4,U,B*3);var T=U,C=Hr,I=Gr;break;case ya:for(var j=A.length/4*3,Z=new Uint16Array(j),B=0;B<j;B++)_(A,B*4,Z,B*3);var T=Z,C=Hr,I=ya;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:E,height:R,data:T,header:y.string,gamma:y.gamma,exposure:y.exposure,format:C,type:I}}}return null},setDataType:function(t){return this.type=t,this},load:function(t,e,n,r){function i(o,l){switch(o.type){case xi:o.encoding=Ho,o.minFilter=an,o.magFilter=an,o.generateMipmaps=!1,o.flipY=!0;break;case Gr:o.encoding=On,o.minFilter=sn,o.magFilter=sn,o.generateMipmaps=!1,o.flipY=!0;break;case ya:o.encoding=On,o.minFilter=sn,o.magFilter=sn,o.generateMipmaps=!1,o.flipY=!0;break}e&&e(o,l)}return mf.prototype.load.call(this,t,i,n,r)}});var rR=function(a){ke(e,a);var t=Ie(e);function e(){var n;ye(this,e),n=t.call(this),n.position.y=-3.5;var r=new Qo;r.deleteAttribute("uv");var i=new _r({metalness:0,side:Tn}),o=new _r({metalness:0}),l=new xf(16777215,500,28,2);l.position.set(.418,16.199,.3),n.add(l);var u=new St(r,i);u.position.set(-.757,13.219,.717),u.scale.set(31.713,28.305,28.591),n.add(u);var c=new St(r,o);c.position.set(-10.906,2.009,1.846),c.rotation.set(0,-.195,0),c.scale.set(2.328,7.905,4.651),n.add(c);var f=new St(r,o);f.position.set(-5.607,-.754,-.758),f.rotation.set(0,.994,0),f.scale.set(1.97,1.534,3.955),n.add(f);var d=new St(r,o);d.position.set(6.167,.857,7.803),d.rotation.set(0,.561,0),d.scale.set(3.927,6.285,3.687),n.add(d);var v=new St(r,o);v.position.set(-2.017,.018,6.124),v.rotation.set(0,.333,0),v.scale.set(2.002,4.566,2.064),n.add(v);var m=new St(r,o);m.position.set(2.291,-.756,-2.621),m.rotation.set(0,-.286,0),m.scale.set(1.546,1.552,1.496),n.add(m);var g=new St(r,o);g.position.set(-2.193,-.369,-5.547),g.rotation.set(0,.516,0),g.scale.set(3.875,3.487,2.986),n.add(g);var w=new St(r,n.createAreaLightMaterial(50));w.position.set(-16.116,14.37,8.208),w.scale.set(.1,2.428,2.739),n.add(w);var _=new St(r,n.createAreaLightMaterial(50));_.position.set(-16.109,18.021,-8.207),_.scale.set(.1,2.425,2.751),n.add(_);var x=new St(r,n.createAreaLightMaterial(17));x.position.set(14.904,12.198,-1.832),x.scale.set(.15,4.265,6.331),n.add(x);var y=new St(r,n.createAreaLightMaterial(43));y.position.set(-.462,8.89,14.52),y.scale.set(4.38,5.441,.088),n.add(y);var E=new St(r,n.createAreaLightMaterial(20));E.position.set(3.235,11.486,-12.541),E.scale.set(2.5,2,.1),n.add(E);var R=new St(r,n.createAreaLightMaterial(100));return R.position.set(0,20,0),R.scale.set(1,.1,1),n.add(R),n}return Pe(e,[{key:"createAreaLightMaterial",value:function(r){var i=new wr;return i.color.setScalar(r),i}}]),e}(sl),cS,hS,iR=.04;dl.enabled=!0;var aR=/\.hdr$/,oR=new gf,sR=new Gy,mc=Symbol("environmentMapCache"),Sl=Symbol("generatedEnvironmentMap"),Df=Symbol("PMREMGenerator"),Ff=Symbol("addMetadata"),Hy=Symbol("loadEnvironmentMapFromUrl"),fS=Symbol("loadGeneratedEnvironmentMap"),lR={url:null,mapping:null},uR=function(a){ke(e,a);var t=Ie(e);function e(n){var r;return ye(this,e),r=t.call(this),r[cS]=null,r[hS]=new Map,r[Df]=new mL(n),r}return Pe(e,[{key:"load",value:function(){var n=pt(regeneratorRuntime.mark(function i(o){var l,u,c,f,d=arguments;return regeneratorRuntime.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return l=d.length>1&&d[1]!==void 0?d[1]:function(){},m.prev=1,this[Df].compileEquirectangularShader(),u=aR.test(o),c=u?sR:oR,m.next=7,new Promise(function(g,w){return c.load(o,g,function(_){l(_.loaded/_.total*.9)},w)});case 7:return f=m.sent,l(1),this[Ff](f,o,"Equirectangular"),u?(f.encoding=Ho,f.minFilter=an,f.magFilter=an,f.flipY=!0):f.encoding=Go,m.abrupt("return",f);case 12:return m.prev=12,l&&l(1),m.finish(12);case 15:case"end":return m.stop()}},i,this,[[1,,12,15]])}));function r(i){return n.apply(this,arguments)}return r}()},{key:"loadEquirectAsCubeUV",value:function(){var n=pt(regeneratorRuntime.mark(function i(o){var l,u,c,f=arguments;return regeneratorRuntime.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return l=f.length>1&&f[1]!==void 0?f[1]:function(){},u=null,v.prev=2,v.next=5,this.load(o,l);case 5:return u=v.sent,c=this[Df].fromEquirectangular(u),this[Ff](c.texture,o,"CubeUV"),v.abrupt("return",c);case 9:return v.prev=9,u!=null&&u.dispose(),v.finish(9);case 12:case"end":return v.stop()}},i,this,[[2,,9,12]])}));function r(i){return n.apply(this,arguments)}return r}()},{key:"generateEnvironmentMapAndSkybox",value:function(){var n=pt(regeneratorRuntime.mark(function i(){var o,l,u,c,f,d,v,m,g,w,_,x=arguments;return regeneratorRuntime.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return o=x.length>0&&x[0]!==void 0?x[0]:null,l=x.length>1&&x[1]!==void 0?x[1]:null,u=x.length>2&&x[2]!==void 0?x[2]:{},c=u.progressTracker,f=c!=null?c.beginActivity():function(){},E.prev=5,d=Promise.resolve(null),o&&(d=this[Hy](o,c)),l?v=this[Hy](l,c):o?v=d:v=this[fS](),E.next=11,Promise.all([v,d]);case 11:if(m=E.sent,g=Pw(m,2),w=g[0],_=g[1],w!=null){E.next=17;break}throw new Error("Failed to load environment map.");case 17:return w=w,this[Ff](w.texture,l,"PMREM"),_!=null&&this[Ff](_.texture,o,"PMREM"),E.abrupt("return",{environmentMap:w,skybox:_});case 21:return E.prev=21,f(1),E.finish(21);case 24:case"end":return E.stop()}},i,this,[[5,,21,24]])}));function r(){return n.apply(this,arguments)}return r}()},{key:(cS=Sl,hS=mc,Ff),value:function(r,i,o){r!=null&&(r.userData=Object.assign(Object.assign({},lR),{url:i,mapping:o}))}},{key:Hy,value:function(r,i){if(!this[mc].has(r)){var o=i?i.beginActivity():function(){},l=this.loadEquirectAsCubeUV(r,o);this[mc].set(r,l)}return this[mc].get(r)}},{key:fS,value:function(){if(this[Sl]==null){var r=new rR;this[Sl]=this[Df].fromScene(r,iR)}return Promise.resolve(this[Sl])}},{key:"dispose",value:function(){var n=pt(regeneratorRuntime.mark(function i(){var o,l,u,c,f;return regeneratorRuntime.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:o=[],this[mc].forEach(function(m){o.push(m)}),this[mc].clear(),l=0,u=o;case 4:if(!(l<u.length)){v.next=18;break}return c=u[l],v.prev=6,v.next=9,c;case 9:f=v.sent,f.dispose(),v.next=15;break;case 13:v.prev=13,v.t0=v.catch(6);case 15:l++,v.next=4;break;case 18:this[Sl]!=null&&(this[Sl].dispose(),this[Sl]=null);case 19:case"end":return v.stop()}},i,this,[[6,13]])}));function r(){return n.apply(this,arguments)}return r}()},{key:"pmremGenerator",get:function(){return this[Df]}}]),e}(rr),dS,pS,cR=.2,zy=18,Vy=26,vS=2,mS=.79,hR=.5,gS=Symbol("onWebGLContextLost"),Wy=Symbol("webGLContextLostHandler"),Zv=Symbol("singleton"),Ml=function(a){ke(e,a);var t=Ie(e);function e(n){var r;ye(this,e),r=t.call(this),r.loader=new vs(nR),r.width=0,r.height=0,r.dpr=1,r.minScale=hR,r.debugger=null,r.scenes=new Set,r.multipleScenesVisible=!1,r.scale=1,r.avgFrameDuration=(Vy+zy)/2,r[pS]=function(i){return r[gS](i)},r.dpr=Qx(),r.canvasElement=document.createElement("canvas"),r.canvasElement.id="webgl-canvas",r.canvas3D=r.canvasElement,r.canvas3D.addEventListener("webglcontextlost",r[Wy]);try{r.threeRenderer=new Ng({canvas:r.canvas3D,alpha:!0,antialias:!0,powerPreference:"high-performance",preserveDrawingBuffer:!0}),r.threeRenderer.autoClear=!0,r.threeRenderer.outputEncoding=Go,r.threeRenderer.gammaFactor=2.2,r.threeRenderer.physicallyCorrectLights=!0,r.threeRenderer.setPixelRatio(1),r.threeRenderer.shadowMap.enabled=!0,r.threeRenderer.shadowMap.type=Pn,r.threeRenderer.shadowMap.autoUpdate=!1,r.debugger=n!=null&&!!n.debug?new QL(Tr(r)):null,r.threeRenderer.debug={checkShaderErrors:!!r.debugger},r.threeRenderer.toneMapping=mr}catch(i){console.warn(i)}return r.arRenderer=new KL(Tr(r)),r.textureUtils=r.canRender?new uR(r.threeRenderer):null,r.roughnessMipmapper=new Ly(r.threeRenderer),r.updateRendererSize(),r.lastTick=performance.now(),r.avgFrameDuration=0,r}return Pe(e,[{key:"updateRendererSize",value:function(){var r=Qx();if(r!==this.dpr){var i=jt(this.scenes),o;try{for(i.s();!(o=i.n()).done;){var l=o.value,u=l.element;u[yc](u.getBoundingClientRect())}}catch(R){i.e(R)}finally{i.f()}}var c=0,f=0,d=jt(this.scenes),v;try{for(d.s();!(v=d.n()).done;){var m=v.value;c=Math.max(c,m.width),f=Math.max(f,m.height)}}catch(R){d.e(R)}finally{d.f()}if(!(c===this.width&&f===this.height&&r===this.dpr)){this.width=c,this.height=f,this.dpr=r,this.canRender&&this.threeRenderer.setSize(c*r,f*r,!1);var g=c/this.scale,w=f/this.scale;this.canvasElement.style.width="".concat(g,"px"),this.canvasElement.style.height="".concat(w,"px");var _=jt(this.scenes),x;try{for(_.s();!(x=_.n()).done;){var y=x.value,E=y.canvas;E.width=c*r,E.height=f*r,E.style.width="".concat(g,"px"),E.style.height="".concat(w,"px"),y.isDirty=!0}}catch(R){_.e(R)}finally{_.f()}}}},{key:"updateRendererScale",value:function(){var r=this.scale;if(this.avgFrameDuration>Vy&&r>this.minScale?r*=mS:this.avgFrameDuration<zy&&r<1&&(r/=mS,r=Math.min(r,1)),r=Math.max(r,this.minScale),r!=this.scale){this.scale=r,this.avgFrameDuration=(Vy+zy)/2;var i=this.width/r,o=this.height/r;this.canvasElement.style.width="".concat(i,"px"),this.canvasElement.style.height="".concat(o,"px");var l=jt(this.scenes),u;try{for(l.s();!(u=l.n()).done;){var c=u.value,f=c.canvas.style;f.width="".concat(i,"px"),f.height="".concat(o,"px"),c.isDirty=!0}}catch(d){l.e(d)}finally{l.f()}}}},{key:"registerScene",value:function(r){var i=this;this.scenes.add(r);var o=r.canvas;o.width=this.width*this.dpr,o.height=this.height*this.dpr,o.style.width="".concat(this.width/this.scale,"px"),o.style.height="".concat(this.height/this.scale,"px"),this.multipleScenesVisible&&o.classList.add("show"),r.isDirty=!0,this.canRender&&this.scenes.size>0&&this.threeRenderer.setAnimationLoop(function(l){return i.render(l)}),this.debugger!=null&&this.debugger.addScene(r)}},{key:"unregisterScene",value:function(r){this.scenes.delete(r),this.canRender&&this.scenes.size===0&&this.threeRenderer.setAnimationLoop(null),this.debugger!=null&&this.debugger.removeScene(r)}},{key:"displayCanvas",value:function(r){return this.multipleScenesVisible?r.element[rm]:this.canvasElement}},{key:"selectCanvas",value:function(){var r=0,i=null,o=jt(this.scenes),l;try{for(o.s();!(l=o.n()).done;){var u=l.value,c=u.element;c.modelIsVisible&&(++r,i=c[ca])}}catch(x){o.e(x)}finally{o.f()}var f=r>1||pa,d=this.canvasElement;if(!(f===this.multipleScenesVisible&&(f||d.parentElement===i))){this.multipleScenesVisible=f,f&&d.classList.remove("show");var v=jt(this.scenes),m;try{for(v.s();!(m=v.n()).done;){var g=m.value,w=g.element[ca],_=g.element[rm];f?(_.classList.add("show"),g.isDirty=!0):w===i&&(w.appendChild(d),d.classList.add("show"),_.classList.remove("show"),g.isDirty=!0)}}catch(x){v.e(x)}finally{v.f()}}}},{key:"orderedScenes",value:function(){for(var r=[],i=0,o=[!1,!0];i<o.length;i++){var l=o[i],u=jt(this.scenes),c;try{for(u.s();!(c=u.n()).done;){var f=c.value;f.element.modelIsVisible===l&&r.push(f)}}catch(d){u.e(d)}finally{u.f()}}return r}},{key:"preRender",value:function(r,i,o){var l=r.element,u=r.exposure,c=r.model;l[Ba](i,o);var f=typeof u=="number"&&!self.isNaN(u);this.threeRenderer.toneMappingExposure=f?u:1,c.updateShadow()&&(this.threeRenderer.shadowMap.needsUpdate=!0)}},{key:"render",value:function(r){var i=r-this.lastTick;if(this.lastTick=r,!(!this.canRender||this.isPresenting)){this.avgFrameDuration+=yl(cR*(i-this.avgFrameDuration),-vS,vS),this.selectCanvas(),this.updateRendererSize(),this.updateRendererScale();var o=this.dpr,l=this.scale,u=jt(this.orderedScenes()),c;try{for(u.s();!(c=u.n()).done;){var f=c.value;if(!!f.element[_s]()&&(this.preRender(f,r,i),!!f.isDirty)){if(f.isDirty=!1,!f.element.modelIsVisible&&!this.multipleScenesVisible){var d=jt(this.scenes),v;try{for(d.s();!(v=d.n()).done;){var m=v.value;m.element.modelIsVisible&&(m.isDirty=!0)}}catch(x){d.e(x)}finally{d.f()}}var g=Math.min(Math.ceil(f.width*l*o),this.canvas3D.width),w=Math.min(Math.ceil(f.height*l*o),this.canvas3D.height);if(this.threeRenderer.setRenderTarget(null),this.threeRenderer.setViewport(0,Math.floor(this.height*o)-w,g,w),this.threeRenderer.render(f,f.getCamera()),this.multipleScenesVisible){f.context==null&&f.createContext();{var _=f.context;_.clearRect(0,0,g,w),_.drawImage(this.canvas3D,0,0,g,w,0,0,g,w)}}}}}catch(x){u.e(x)}finally{u.f()}}}},{key:"dispose",value:function(){this.textureUtils!=null&&this.textureUtils.dispose(),this.threeRenderer!=null&&this.threeRenderer.dispose(),this.textureUtils=null,this.threeRenderer=null,this.scenes.clear(),this.canvas3D.removeEventListener("webglcontextlost",this[Wy])}},{key:(dS=Zv,pS=Wy,gS),value:function(r){this.dispatchEvent({type:"contextlost",sourceEvent:r})}},{key:"canRender",get:function(){return this.threeRenderer!=null}},{key:"scaleFactor",get:function(){return this.scale}},{key:"isPresenting",get:function(){return this.arRenderer.isPresenting}}],[{key:"resetSingleton",value:function(){this[Zv].dispose(),this[Zv]=new e({debug:e_()})}},{key:"singleton",get:function(){return this[Zv]}}]),e}(rr);Ml[dS]=new Ml({debug:e_()});var fR=function(){var a=pt(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise(function(i,o){var l=512,u=e.match(/data:(.*);/);if(!u)return o(new Error("".concat(e," is not a valid data Url")));for(var c=u[1],f=e.replace(/data:image\/\w+;base64,/,""),d=atob(f),v=[],m=0;m<d.length;m+=l){for(var g=d.slice(m,m+l),w=new Array(g.length),_=0;_<g.length;_++)w[_]=g.charCodeAt(_);var x=new Uint8Array(w);v.push(x)}i(new Blob(v,{type:c}))}));case 1:case"end":return r.stop()}},t)}));return function(e){return a.apply(this,arguments)}}(),yS,wS,Bf=Symbol("ongoingActivities"),$y=Symbol("announceTotalProgress"),Kv=Symbol("eventDelegate"),dR=.5,pR=function(){function a(){var t=this;ye(this,a),this[yS]=document.createDocumentFragment(),this.addEventListener=function(){var e;return(e=t[Kv]).addEventListener.apply(e,arguments)},this.removeEventListener=function(){var e;return(e=t[Kv]).removeEventListener.apply(e,arguments)},this.dispatchEvent=function(){var e;return(e=t[Kv]).dispatchEvent.apply(e,arguments)},this[wS]=new Set}return Pe(a,[{key:"beginActivity",value:function(){var e=this,n={progress:0};return this[Bf].add(n),this.ongoingActivityCount===1&&this[$y](),function(r){var i;return i=Math.max(yl(r,0,1),n.progress),i!==n.progress&&(n.progress=i,e[$y]()),n.progress}}},{key:(yS=Kv,wS=Bf,$y),value:function(){var e=0,n=0,r=0,i=jt(this[Bf]),o;try{for(i.s();!(o=i.n()).done;){var l=o.value,u=l.progress,c=dR/Math.pow(2,n++);e+=u*c,u===1&&r++}}catch(f){i.e(f)}finally{i.f()}r===this.ongoingActivityCount&&(e=1,this[Bf].clear()),this.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:e}}))}},{key:"ongoingActivityCount",get:function(){return this[Bf].size}}]),a}(),bS=function(a,t,e,n){var r=arguments.length,i=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n,o;typeof Reflect=="undefined"||cn(Reflect);for(var l=a.length-1;l>=0;l--)(o=a[l])&&(i=(r<3?o(i):r>3?o(t,e,i):o(t,e))||i);return r>3&&i&&Object.defineProperty(t,e,i),i},xS,_S,SS,MS,ES,TS,AS,CS,LS,RS,vR=1e3,mR=50,gR=0,yR=300,wR=150,bs=document.createElement("canvas"),jy=null,qy=Symbol("template"),Xy=Symbol("fallbackResizeHandler"),Yy=Symbol("defaultAriaLabel"),Qv=Symbol("resizeObserver"),em=Symbol("intersectionObserver"),Uf=Symbol("clearModelTimeout"),PS=Symbol("onContextLost"),Jy=Symbol("contextLostHandler"),gc=Symbol("loaded"),yc=Symbol("updateSize"),El=Symbol("isElementInViewport"),tm=Symbol("announceModelVisibility"),Zy=Symbol("ariaLabel"),nm=Symbol("loadedTime"),wo=Symbol("updateSource"),OS=Symbol("markLoaded"),Gf=Symbol("container"),ca=Symbol("input"),rm=Symbol("canvas"),rt=Symbol("scene"),ha=Symbol("needsRender"),Ba=Symbol("tick"),bo=Symbol("onModelLoad"),xs=Symbol("onResize"),_n=Symbol("renderer"),Hf=Symbol("progressTracker"),NS=Symbol("getLoaded"),im=Symbol("getModelIsVisible"),zf=Symbol("shouldAttemptPreload"),_s=Symbol("sceneIsReady"),wc=Symbol("hasTransitioned"),kS=function(t){return{x:t.x,y:t.y,z:t.z,toString:function(){return"".concat(this.x,"m ").concat(this.y,"m ").concat(this.z,"m")}}},Ky=function(a){ke(e,a);var t=Ie(e);function e(){var n;ye(this,e),n=t.call(this),n.alt=null,n.src=null,n[xS]=!1,n[_S]=!1,n[SS]=0,n[MS]=null,n[ES]=Ry(function(){var c=n.getBoundingClientRect();n[yc](c)},mR),n[TS]=Ry(function(c){var f=n.modelIsVisible;f!==c&&n.dispatchEvent(new CustomEvent("model-visibility",{detail:{visible:f}}))},gR),n[AS]=null,n[CS]=null,n[LS]=new pR,n[RS]=function(c){return n[PS](c)};var r=n.constructor.template;window.ShadyCSS&&window.ShadyCSS.styleElement(Tr(n),{}),n.attachShadow({mode:"open"});var i=n.shadowRoot;i.appendChild(r.content.cloneNode(!0)),n[Gf]=i.querySelector(".container"),n[ca]=i.querySelector(".userInput"),n[rm]=i.querySelector("canvas"),n[Yy]=n[ca].getAttribute("aria-label");var o,l;if(n.isConnected){var u=n.getBoundingClientRect();o=u.width,l=u.height}else o=yR,l=wR;return n[rt]=new DL({canvas:n[rm],element:Tr(n),width:o,height:l}),n[rt].addEventListener("model-load",function(c){n[OS](),n[bo](),n.dispatchEvent(new CustomEvent("load",{detail:{url:c.url}}))}),Promise.resolve().then(function(){n[yc](n.getBoundingClientRect())}),Xl&&(n[Qv]=new ResizeObserver(function(c){if(!n[_n].isPresenting){var f=jt(c),d;try{for(f.s();!(d=f.n()).done;){var v=d.value;v.target===Tr(n)&&n[yc](v.contentRect)}}catch(m){f.e(m)}finally{f.f()}}})),Yl?n[em]=new IntersectionObserver(function(c){var f=jt(c),d;try{for(f.s();!(d=f.n()).done;){var v=d.value;if(v.target===Tr(n)){var m=n.modelIsVisible;n[El]=v.isIntersecting,n[tm](m),n[El]&&!n[_s]()&&n[wo]()}}}catch(g){f.e(g)}finally{f.f()}},{root:null,rootMargin:"0px",threshold:0}):n[El]=!0,n}return Pe(e,[{key:"connectedCallback",value:function(){et(Ze(e.prototype),"connectedCallback",this)&&et(Ze(e.prototype),"connectedCallback",this).call(this),Xl?this[Qv].observe(this):self.addEventListener("resize",this[Xy]),Yl&&this[em].observe(this);var r=this[_n];r.addEventListener("contextlost",this[Jy]),r.registerScene(this[rt]),this[Uf]!=null&&(self.clearTimeout(this[Uf]),this[Uf]=null,this.requestUpdate("src",null))}},{key:"disconnectedCallback",value:function(){var r=this;et(Ze(e.prototype),"disconnectedCallback",this)&&et(Ze(e.prototype),"disconnectedCallback",this).call(this),Xl?this[Qv].unobserve(this):self.removeEventListener("resize",this[Xy]),Yl&&this[em].unobserve(this);var i=this[_n];i.removeEventListener("contextlost",this[Jy]),i.unregisterScene(this[rt]),this[Uf]=self.setTimeout(function(){r[rt].model.clear()},vR)}},{key:"updated",value:function(r){if(et(Ze(e.prototype),"updated",this).call(this,r),r.has("src")&&(this.src==null||this.src!==this[rt].model.url)&&(this[gc]=!1,this[nm]=0,this[wo]()),r.has("alt")){var i=this.alt==null?this[Yy]:this.alt;this[ca].setAttribute("aria-label",i)}}},{key:"toDataURL",value:function(r,i){return this[_n].displayCanvas(this[rt]).toDataURL(r,i)}},{key:"toBlob",value:function(){var n=pt(regeneratorRuntime.mark(function i(o){var l=this,u,c,f,d,v,m,g,w,_,x,y,E,R,A,T,C,I;return regeneratorRuntime.wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return u=o?o.mimeType:void 0,c=o?o.qualityArgument:void 0,f=o?o.idealAspect:void 0,d=this[rt],v=d.width,m=d.height,g=d.model,w=d.aspect,_=this[_n],x=_.dpr,y=_.scaleFactor,E=v*y*x,R=m*y*x,A=0,T=0,f===!0&&(g.fieldOfViewAspect>w?(C=R,R=Math.round(E/g.fieldOfViewAspect),T=(C-R)/2):(I=E,E=Math.round(R*g.fieldOfViewAspect),A=(I-E)/2)),bs.width=E,bs.height=R,U.prev=12,U.abrupt("return",new Promise(function(){var B=pt(regeneratorRuntime.mark(function Z(Q,J){return regeneratorRuntime.wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(jy==null&&(jy=bs.getContext("2d")),jy.drawImage(l[_n].displayCanvas(l[rt]),A,T,E,R,0,0,E,R),!bs.msToBlob){Y.next=5;break}if(!(!u||u==="image/png")){Y.next=5;break}return Y.abrupt("return",Q(bs.msToBlob()));case 5:if(bs.toBlob){Y.next=11;break}return Y.t0=Q,Y.next=9,fR(bs.toDataURL(u,c));case 9:return Y.t1=Y.sent,Y.abrupt("return",(0,Y.t0)(Y.t1));case 11:bs.toBlob(function(ee){if(!ee)return J(new Error("Unable to retrieve canvas blob"));Q(ee)},u,c);case 12:case"end":return Y.stop()}},Z)}));return function(Z,Q){return B.apply(this,arguments)}}()));case 14:return U.prev=14,this[yc]({width:v,height:m}),U.finish(14);case 17:case"end":return U.stop()}},i,this,[[12,,14,17]])}));function r(i){return n.apply(this,arguments)}return r}()},{key:NS,value:function(){return this[gc]}},{key:im,value:function(){return this.loaded&&this[El]}},{key:wc,value:function(){return this.modelIsVisible}},{key:zf,value:function(){return!!this.src&&this[El]}},{key:_s,value:function(){return this[gc]}},{key:yc,value:function(r){var i=r.width,o=r.height;this[Gf].style.width="".concat(i,"px"),this[Gf].style.height="".concat(o,"px"),this[xs]({width:parseFloat(i),height:parseFloat(o)})}},{key:Ba,value:function(r,i){}},{key:OS,value:function(){this[gc]||(this[gc]=!0,this[nm]=performance.now())}},{key:ha,value:function(){this[rt].isDirty=!0}},{key:bo,value:function(){}},{key:xs,value:function(r){this[rt].setSize(r.width,r.height)}},{key:PS,value:function(r){this.dispatchEvent(new CustomEvent("error",{detail:{type:"webglcontextlost",sourceError:r.sourceEvent}}))}},{key:wo,value:function(){var n=pt(regeneratorRuntime.mark(function i(){var o,l,u;return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(!(this.loaded||!this[zf]())){f.next=2;break}return f.abrupt("return");case 2:return o=this[Hf].beginActivity(),l=this.src,f.prev=4,f.next=7,this[rt].setModelSource(l,function(d){return o(d*.8)});case 7:u={url:l},this.dispatchEvent(new CustomEvent("preload",{detail:u})),f.next=14;break;case 11:f.prev=11,f.t0=f.catch(4),this.dispatchEvent(new CustomEvent("error",{detail:f.t0}));case 14:return f.prev=14,o(.9),requestAnimationFrame(function(){o(1)}),f.finish(14);case 18:case"end":return f.stop()}},i,this,[[4,11,14,18]])}));function r(){return n.apply(this,arguments)}return r}()},{key:"loaded",get:function(){return this[NS]()}},{key:(xS=El,_S=gc,SS=nm,MS=Uf,ES=Xy,TS=tm,AS=Qv,CS=em,LS=Hf,RS=Jy,_n),get:function(){return Ml.singleton}},{key:"modelIsVisible",get:function(){return this[im]()}},{key:Zy,get:function(){return this.alt==null||this.alt==="null"?this[Yy]:this.alt}}],[{key:"is",get:function(){return"model-viewer"}},{key:"template",get:function(){return this.hasOwnProperty(qy)||(this[qy]=En(this.is)),this[qy]}},{key:"modelCacheSize",set:function(r){vs[ps].evictionThreshold=r},get:function(){return vs[ps].evictionThreshold}},{key:"minimumRenderScale",set:function(r){r>1&&console.warn("<model-viewer> minimumRenderScale has been clamped to a maximum value of 1."),r<=0&&console.warn("<model-viewer> minimumRenderScale has been clamped to a minimum value of 0. This could result in single-pixel renders on some devices; consider increasing."),Ml.singleton.minScale=Math.max(0,Math.min(1,r))},get:function(){return Ml.singleton.minScale}}]),e}(nh);bS([It({type:String})],Ky.prototype,"alt",void 0),bS([It({type:String})],Ky.prototype,"src",void 0);var Qy=function(a,t,e,n){var r=arguments.length,i=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n,o;typeof Reflect=="undefined"||cn(Reflect);for(var l=a.length-1;l>=0;l--)(o=a[l])&&(i=(r<3?o(i):r>3?o(t,e,i):o(t,e))||i);return r>3&&i&&Object.defineProperty(t,e,i),i},IS=1e3,am=Symbol("changeAnimation"),xo=Symbol("paused"),bR=function(t){var e,n=function(r){ke(o,r);var i=Ie(o);function o(){var l;return ye(this,o),l=i.apply(this,arguments),l.autoplay=!1,l.animationName=void 0,l.animationCrossfadeDuration=300,l[e]=!0,l}return Pe(o,[{key:"pause",value:function(){this[xo]||(this[xo]=!0,this[_n].threeRenderer.shadowMap.autoUpdate=!1,this.dispatchEvent(new CustomEvent("pause")))}},{key:"play",value:function(){this[xo]&&this.availableAnimations.length>0&&(this[xo]=!1,this[_n].threeRenderer.shadowMap.autoUpdate=!0,this[rt].model.hasActiveAnimation||this[am](),this.dispatchEvent(new CustomEvent("play")))}},{key:(e=xo,bo),value:function(){this[xo]=!0,this.autoplay&&(this[am](),this.play())}},{key:Ba,value:function(u,c){if(et(Ze(o.prototype),Ba,this).call(this,u,c),!(this[xo]||!this[wc]())){var f=this[rt].model;f.updateAnimation(c/IS),this[ha]()}}},{key:"updated",value:function(u){et(Ze(o.prototype),"updated",this).call(this,u),u.has("autoplay")&&this.autoplay&&this.play(),u.has("animationName")&&this[am]()}},{key:wo,value:function(){var l=pt(regeneratorRuntime.mark(function c(){return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this[rt].model.stopAnimation(),d.abrupt("return",et(Ze(o.prototype),wo,this).call(this));case 2:case"end":return d.stop()}},c,this)}));function u(){return l.apply(this,arguments)}return u}()},{key:am,value:function(){var u=this[rt].model;u.playAnimation(this.animationName,this.animationCrossfadeDuration/IS),this[xo]&&(u.updateAnimation(0),this[ha]())}},{key:"availableAnimations",get:function(){return this.loaded?this[rt].model.animationNames:[]}},{key:"paused",get:function(){return this[xo]}},{key:"currentTime",get:function(){return this[rt].model.animationTime},set:function(u){this[rt].model.animationTime=u,this[_n].threeRenderer.shadowMap.needsUpdate=!0,this[ha]()}}]),o}(t);return Qy([It({type:Boolean})],n.prototype,"autoplay",void 0),Qy([It({type:String,attribute:"animation-name"})],n.prototype,"animationName",void 0),Qy([It({type:Number,attribute:"animation-crossfade-duration"})],n.prototype,"animationCrossfadeDuration",void 0),n},Vf=Symbol("annotationRenderer"),bc=Symbol("hotspotMap"),e0=Symbol("mutationCallback"),Wf=Symbol("observer"),t0=Symbol("addHotspot"),DS=Symbol("removeHotspot"),n0=new xe,r0=new ht,FS=new Jn,xR=function(t){var e,n,r,i,o=function(l){ke(c,l);var u=Ie(c);function c(){var f;ye(this,c);for(var d=arguments.length,v=new Array(d),m=0;m<d;m++)v[m]=arguments[m];f=u.call.apply(u,[this].concat(v)),f[e]=new EL,f[n]=new Map,f[r]=function(_){_.forEach(function(x){(!Ht(x,MutationRecord)||x.type==="childList")&&(x.addedNodes.forEach(function(y){f[t0](y)}),x.removedNodes.forEach(function(y){f[DS](y)}),f[ha]())})},f[i]=new MutationObserver(f[e0]);var g=f.shadowRoot,w=f[Vf].domElement;return w.classList.add("annotation-container"),g.querySelector(".container").appendChild(w),w.appendChild(g.querySelector(".default")),f}return Pe(c,[{key:"connectedCallback",value:function(){et(Ze(c.prototype),"connectedCallback",this).call(this);for(var d=0;d<this.children.length;++d)this[t0](this.children[d]);var v=self,m=v.ShadyDOM;m==null?this[Wf].observe(this,{childList:!0}):this[Wf]=m.observeChildren(this,this[e0])}},{key:"disconnectedCallback",value:function(){et(Ze(c.prototype),"disconnectedCallback",this).call(this);var d=self,v=d.ShadyDOM;v==null?this[Wf].disconnect():v.unobserveChildren(this[Wf])}},{key:"updateHotspot",value:function(d){var v=this[bc].get(d.name);v!=null&&(v.updatePosition(d.position),v.updateNormal(d.normal))}},{key:"positionAndNormalFromPoint",value:function(d,v){var m=this[rt],g=m.width,w=m.height,_=m.model;n0.set(d/g,v/w).multiplyScalar(2).subScalar(1),n0.y*=-1;var x=m.positionAndNormalFromPoint(n0);if(x==null)return null;r0.getInverse(_.matrixWorld);var y=kS(x.position.applyMatrix4(r0));FS.getNormalMatrix(r0);var E=kS(x.normal.applyNormalMatrix(FS));return{position:y,normal:E}}},{key:(e=Vf,n=bc,r=e0,i=Wf,Ba),value:function(d,v){et(Ze(c.prototype),Ba,this).call(this,d,v);var m=this[rt],g=m.getCamera();m.isDirty&&(m.model.updateHotspots(g.position),this[Vf].render(m,g))}},{key:xs,value:function(d){et(Ze(c.prototype),xs,this).call(this,d),this[Vf].setSize(d.width,d.height)}},{key:t0,value:function(d){if(!!(Ht(d,HTMLElement)&&d.slot.indexOf("hotspot")===0)){var v=this[bc].get(d.slot);v!=null?v.increment():(v=new Bx({name:d.slot,position:d.dataset.position,normal:d.dataset.normal}),this[bc].set(d.slot,v),this[rt].model.addHotspot(v),this[Vf].domElement.appendChild(v.element)),this[rt].isDirty=!0}}},{key:DS,value:function(d){if(!!Ht(d,HTMLElement)){var v=this[bc].get(d.slot);!v||(v.decrement()&&(this[rt].model.removeHotspot(v),this[bc].delete(d.slot)),this[rt].isDirty=!0)}}}]),c}(t);return o},BS=function(t){return function(e){try{var n=Cf(e),r=(n.length?n[0].terms:[]).filter(function(c){return c&&c.type==="ident"}).map(function(c){return c.value}).filter(function(c){return t.indexOf(c)>-1}),i=new Set,o=jt(r),l;try{for(o.s();!(l=o.n()).done;){var u=l.value;i.add(u)}}catch(c){o.e(c)}finally{o.f()}return i}catch{}return new Set}},$f=function(a,t,e,n){var r=arguments.length,i=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n,o;typeof Reflect=="undefined"||cn(Reflect);for(var l=a.length-1;l>=0;l--)(o=a[l])&&(i=(r<3?o(i):r>3?o(t,e,i):o(t,e))||i);return r>3&&i&&Object.defineProperty(t,e,i),i},US=!1,GS=!1,HS="#model-viewer-no-ar-fallback",_R=BS(["safari","chrome"]),SR=BS(["quick-look","scene-viewer","webxr","none"]),MR="webxr scene-viewer quick-look",_o={QUICK_LOOK:"quick-look",SCENE_VIEWER:"scene-viewer",WEBXR:"webxr",NONE:"none"},Tl=Symbol("arButtonContainer"),zS=Symbol("enterARWithWebXR"),VS=Symbol("openSceneViewer"),WS=Symbol("openIOSARQuickLook"),ER=Symbol("canActivateAR"),Al=Symbol("arMode"),i0=Symbol("arModes"),$S=Symbol("canLaunchQuickLook"),om=Symbol("quickLookBrowsers"),xc=Symbol("arAnchor"),sm=Symbol("onARButtonContainerClick"),a0=Symbol("onARStatus"),o0=Symbol("onARTap"),jf=Symbol("selectARMode"),TR=function(t){var e,n,r,i,o,l,u,c,f,d=function(v){ke(g,v);var m=Ie(g);function g(){var w;return ye(this,g),w=m.apply(this,arguments),w.ar=!1,w.arScale="auto",w.arModes=MR,w.iosSrc=null,w.quickLookBrowsers="safari",w[e]=!1,w[n]=w.shadowRoot.querySelector(".ar-button"),w[r]=document.createElement("a"),w[i]=new Set,w[o]=_o.NONE,w[l]=new Set,w[u]=function(_){_.preventDefault(),w.activateAR()},w[c]=function(_){var x=_.status;(x===hc.NOT_PRESENTING||w[_n].arRenderer.presentedScene===w[rt])&&(w.setAttribute("ar-status",x),w.dispatchEvent(new CustomEvent("ar-status",{detail:{status:x}})))},w[f]=function(_){_.data=="_apple_ar_quicklook_button_tapped"&&w.dispatchEvent(new CustomEvent("quick-look-button-tapped"))},w}return Pe(g,[{key:"connectedCallback",value:function(){et(Ze(g.prototype),"connectedCallback",this).call(this),this[_n].arRenderer.addEventListener("status",this[a0]),this.setAttribute("ar-status",hc.NOT_PRESENTING),this[xc].addEventListener("message",this[o0])}},{key:"disconnectedCallback",value:function(){et(Ze(g.prototype),"disconnectedCallback",this).call(this),this[_n].arRenderer.removeEventListener("status",this[a0]),this[xc].removeEventListener("message",this[o0])}},{key:"update",value:function(){var w=pt(regeneratorRuntime.mark(function x(y){return regeneratorRuntime.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(et(Ze(g.prototype),"update",this).call(this,y),y.has("quickLookBrowsers")&&(this[om]=_R(this.quickLookBrowsers)),!(!y.has("ar")&&!y.has("arModes")&&!y.has("iosSrc"))){R.next=4;break}return R.abrupt("return");case 4:y.has("arModes")&&(this[i0]=SR(this.arModes)),y.has("arScale")&&(this[rt].canScale=this.arScale!=="fixed"),this[jf]();case 7:case"end":return R.stop()}},x,this)}));function _(x){return w.apply(this,arguments)}return _}()},{key:"activateAR",value:function(){var w=pt(regeneratorRuntime.mark(function x(){return regeneratorRuntime.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:E.t0=this[Al],E.next=E.t0===_o.QUICK_LOOK?3:E.t0===_o.WEBXR?5:E.t0===_o.SCENE_VIEWER?8:10;break;case 3:return this[WS](),E.abrupt("break",12);case 5:return E.next=7,this[zS]();case 7:return E.abrupt("break",12);case 8:return this[VS](),E.abrupt("break",12);case 10:return console.warn("No AR Mode can be activated. This is probably due to missing configuration or device capabilities"),E.abrupt("break",12);case 12:case"end":return E.stop()}},x,this)}));function _(){return w.apply(this,arguments)}return _}()},{key:(e=ER,n=Tl,r=xc,i=i0,o=Al,l=om,u=sm,c=a0,f=o0,jf),value:function(){var w=pt(regeneratorRuntime.mark(function x(){var y,E,R,A,T;return regeneratorRuntime.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(this[Al]=_o.NONE,!this.ar){I.next=28;break}y=[],this[i0].forEach(function(j){y.push(j)}),E=0,R=y;case 5:if(!(E<R.length)){I.next=28;break}if(A=R[E],I.t0=A==="webxr"&&Ld&&!US,!I.t0){I.next=12;break}return I.next=11,this[_n].arRenderer.supportsPresentation();case 11:I.t0=I.sent;case 12:if(!I.t0){I.next=17;break}return this[Al]=_o.WEBXR,I.abrupt("break",28);case 17:if(!(A==="scene-viewer"&&Rd&&!GS)){I.next=22;break}return this[Al]=_o.SCENE_VIEWER,I.abrupt("break",28);case 22:if(!(A==="quick-look"&&!!this.iosSrc&&this[$S]&&Br)){I.next=25;break}return this[Al]=_o.QUICK_LOOK,I.abrupt("break",28);case 25:E++,I.next=5;break;case 28:this.canActivateAR?(this[Tl].classList.add("enabled"),this[Tl].addEventListener("click",this[sm])):this[Tl].classList.contains("enabled")&&(this[Tl].removeEventListener("click",this[sm]),this[Tl].classList.remove("enabled"),T=hc.FAILED,this.setAttribute("ar-status",T),this.dispatchEvent(new CustomEvent("ar-status",{detail:{status:T}})));case 29:case"end":return I.stop()}},x,this)}));function _(){return w.apply(this,arguments)}return _}()},{key:zS,value:function(){var w=pt(regeneratorRuntime.mark(function x(){return regeneratorRuntime.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return console.log("Attempting to present in AR..."),E.prev=1,this[Tl].removeEventListener("click",this[sm]),E.next=5,this[_n].arRenderer.present(this[rt]);case 5:E.next=17;break;case 7:return E.prev=7,E.t0=E.catch(1),console.warn("Error while trying to present to AR"),console.error(E.t0),E.next=13,this[_n].arRenderer.stopPresenting();case 13:return US=!0,E.next=16,this[jf]();case 16:this.activateAR();case 17:return E.prev=17,this[jf](),E.finish(17);case 20:case"end":return E.stop()}},x,this,[[1,7,17,20]])}));function _(){return w.apply(this,arguments)}return _}()},{key:VS,value:function(){var _=this,x=this.src.replace("?","&"),y=self.location.toString(),E=new URL(y),R=new URL(x,y);E.hash=HS;var A="?file=".concat(R.toString(),"&mode=ar_only");x.includes("&link=")||(A+="&link=".concat(y)),x.includes("&title=")||(A+="&title=".concat(encodeURIComponent(this.alt||""))),this.arScale==="fixed"&&(A+="&resizable=false");var T="intent://arvr.google.com/scene-viewer/1.0".concat(A,"#Intent;scheme=https;package=com.google.ar.core;action=android.intent.action.VIEW;S.browser_fallback_url=").concat(encodeURIComponent(E.toString()),";end;"),C=function(){self.location.hash===HS&&(GS=!0,self.history.back(),_[jf]())};self.addEventListener("hashchange",C,{once:!0}),this[xc].setAttribute("href",T),this[xc].click()}},{key:WS,value:function(){var _=new URL(this.iosSrc,self.location.toString());this.arScale==="fixed"&&(_.hash="allowsContentScaling=0");var x=this[xc];x.setAttribute("rel","ar");var y=document.createElement("img");x.appendChild(y),x.setAttribute("href",_.toString()),x.click(),x.removeChild(y)}},{key:"canActivateAR",get:function(){return this[Al]!==_o.NONE}},{key:$S,get:function(){return Jl?this[om].has("chrome"):Nd?this[om].has("safari"):!1}}]),g}(t);return $f([It({type:Boolean,attribute:"ar"})],d.prototype,"ar",void 0),$f([It({type:String,attribute:"ar-scale"})],d.prototype,"arScale",void 0),$f([It({type:String,attribute:"ar-modes"})],d.prototype,"arModes",void 0),$f([It({type:String,attribute:"ios-src"})],d.prototype,"iosSrc",void 0),$f([It({type:String,attribute:"quick-look-browsers"})],d.prototype,"quickLookBrowsers",void 0),d},jS,qS,XS,_c=Symbol("evaluate"),lm=Symbol("lastValue"),Wn=function(){function a(){ye(this,a),this[jS]=null}return Pe(a,[{key:"evaluate",value:function(){return(!this.isConstant||this[lm]==null)&&(this[lm]=this[_c]()),this[lm]}},{key:"isConstant",get:function(){return!1}}],[{key:"evaluatableFor",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ms;if(Ht(e,a))return e;if(e.type==="number")return e.unit==="%"?new AR(e,n):e;switch(e.name.value){case"calc":return new RR(e,n);case"env":return new CR(e)}return ms}},{key:"evaluate",value:function(e){return Ht(e,a)?e.evaluate():e}},{key:"isConstant",value:function(e){return Ht(e,a)?e.isConstant:!0}},{key:"applyIntrinsics",value:function(e,n){var r=n.basis,i=n.keywords,o=i.auto;return r.map(function(l,u){var c=o[u]==null?l:o[u],f=e[u]?e[u]:c;if(f.type==="ident"){var d=f.value;d in i&&(f=i[d][u])}return(f==null||f.type==="ident")&&(f=c),f.unit==="%"?or(f.number/100*l.number,l.unit):(f=gl(f,l),f.unit!==l.unit?l:f)})}}]),a}();jS=lm;var YS=Symbol("percentage"),s0=Symbol("basis"),AR=function(a){ke(e,a);var t=Ie(e);function e(n,r){var i;return ye(this,e),i=t.call(this),i[YS]=n,i[s0]=r,i}return Pe(e,[{key:_c,value:function(){return or(this[YS].number/100*this[s0].number,this[s0].unit)}},{key:"isConstant",get:function(){return!0}}]),e}(Wn),um=Symbol("identNode"),CR=function(a){ke(e,a);var t=Ie(e);function e(n){var r;ye(this,e),r=t.call(this),r[qS]=null;var i=n.arguments.length?n.arguments[0].terms[0]:null;return i!=null&&i.type==="ident"&&(r[um]=i),r}return Pe(e,[{key:(qS=um,_c),value:function(){if(this[um]!=null)switch(this[um].value){case"window-scroll-y":var r=window.pageYOffset,i=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight),o=r/(i-window.innerHeight)||0;return{type:"number",number:o,unit:null}}return ms}},{key:"isConstant",get:function(){return!1}}]),e}(Wn),LR=/[\*\/]/,Sc=Symbol("evalutor"),RR=function(a){ke(e,a);var t=Ie(e);function e(n){var r,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ms;if(ye(this,e),r=t.call(this),r[XS]=null,n.arguments.length!==1)return bd(r);for(var o=n.arguments[0].terms.slice(),l=[];o.length;){var u=o.shift();if(l.length>0){var c=l[l.length-1];if(c.type==="operator"&&LR.test(c.value)){var f=l.pop(),d=l.pop();if(d==null)return bd(r);l.push(new ZS(f,Wn.evaluatableFor(d,i),Wn.evaluatableFor(u,i)));continue}}l.push(u.type==="operator"?u:Wn.evaluatableFor(u,i))}for(;l.length>2;){var v=l.splice(0,3),m=Pw(v,3),g=m[0],w=m[1],_=m[2];if(w.type!=="operator")return bd(r);l.unshift(new ZS(w,Wn.evaluatableFor(g,i),Wn.evaluatableFor(_,i)))}return l.length===1&&(r[Sc]=l[0]),r}return Pe(e,[{key:(XS=Sc,_c),value:function(){return this[Sc]!=null?Wn.evaluate(this[Sc]):ms}},{key:"isConstant",get:function(){return this[Sc]==null||Wn.isConstant(this[Sc])}}]),e}(Wn),JS=Symbol("operator"),l0=Symbol("left"),u0=Symbol("right"),ZS=function(a){ke(e,a);var t=Ie(e);function e(n,r,i){var o;return ye(this,e),o=t.call(this),o[JS]=n,o[l0]=r,o[u0]=i,o}return Pe(e,[{key:_c,value:function(){var r=gl(Wn.evaluate(this[l0])),i=gl(Wn.evaluate(this[u0])),o=r.number,l=r.unit,u=i.number,c=i.unit;if(c!=null&&l!=null&&c!=l)return ms;var f=l||c,d;switch(this[JS].value){case"+":d=o+u;break;case"-":d=o-u;break;case"/":d=o/u;break;case"*":d=o*u;break;default:return ms}return{type:"number",number:d,unit:f}}},{key:"isConstant",get:function(){return Wn.isConstant(this[l0])&&Wn.isConstant(this[u0])}}]),e}(Wn),c0=Symbol("evaluatables"),KS=Symbol("intrinsics"),QS=function(a){ke(e,a);var t=Ie(e);function e(n,r){var i;ye(this,e),i=t.call(this),i[KS]=r;var o=n[0],l=o!=null?o.terms:[];return i[c0]=r.basis.map(function(u,c){var f=l[c];return f==null?{type:"ident",value:"auto"}:f.type==="ident"?f:Wn.evaluatableFor(f,u)}),i}return Pe(e,[{key:_c,value:function(){var r=this[c0].map(function(i){return Wn.evaluate(i)});return Wn.applyIntrinsics(r,this[KS]).map(function(i){return i.number})}},{key:"isConstant",get:function(){var r=jt(this[c0]),i;try{for(r.s();!(i=r.n()).done;){var o=i.value;if(!Wn.isConstant(o))return!1}}catch(l){r.e(l)}finally{r.f()}return!0}}]),e}(Wn),eM,tM,nM,rM,Mc=Symbol("instances"),iM=Symbol("activateListener"),aM=Symbol("deactivateListener"),h0=Symbol("notifyInstances"),oM=Symbol("notify"),sM=Symbol("callback"),lM=function(){function a(t){ye(this,a),this[sM]=t}return Pe(a,[{key:"observe",value:function(){a[Mc].size===0&&a[iM](),a[Mc].add(this)}},{key:"disconnect",value:function(){a[Mc].delete(this),a[Mc].size===0&&a[aM]()}},{key:oM,value:function(){this[sM]()}}],[{key:h0,value:function(){var e=jt(a[Mc]),n;try{for(e.s();!(n=e.n()).done;){var r=n.value;r[oM]()}}catch(i){e.e(i)}finally{e.f()}}},{key:(eM=Mc,iM),value:function(){window.addEventListener("scroll",this[h0],{passive:!0})}},{key:aM,value:function(){window.removeEventListener("scroll",this[h0])}}]),a}();lM[eM]=new Set;var uM=Symbol("computeStyleCallback"),cM=Symbol("astWalker"),qf=Symbol("dependencies"),hM=Symbol("scrollHandler"),fM=Symbol("onScroll"),PR=function(){function a(t){var e=this;ye(this,a),this[tM]={},this[nM]=new LL(["function"]),this[rM]=function(){return e[fM]()},this[uM]=t}return Pe(a,[{key:"observeEffectsFor",value:function(e){var n=this,r={},i=this[qf];this[cM].walk(e,function(u){var c=u.name,f=u.arguments[0],d=f.terms[0];if(!(c.value!=="env"||d==null||d.type!=="ident"))switch(d.value){case"window-scroll-y":if(r["window-scroll"]==null){var v="window-scroll"in i?i["window-scroll"]:new lM(n[hM]);v.observe(),delete i["window-scroll"],r["window-scroll"]=v}break}});for(var o in i){var l=i[o];l.disconnect()}this[qf]=r}},{key:"dispose",value:function(){for(var e in this[qf]){var n=this[qf][e];n.disconnect()}}},{key:(tM=qf,nM=cM,rM=hM,fM),value:function(){this[uM]({relatedState:"window-scroll"})}}]),a}(),Ss=function(t){var e=t.observeEffects||!1,n=Ht(t.intrinsics,Function)?t.intrinsics:function(){return t.intrinsics};return function(r,i){var o,l=r.updated,u=r.connectedCallback,c=r.disconnectedCallback,f=Symbol("".concat(i,"StyleEffector")),d=Symbol("".concat(i,"StyleEvaluator")),v=Symbol("".concat(i,"UpdateEvaluator")),m=Symbol("".concat(i,"EvaluateAndSync"));Object.defineProperties(r,(o={},kt(o,f,{value:null,writable:!0}),kt(o,d,{value:null,writable:!0}),kt(o,v,{value:function(){var w=this,_=Cf(this[i]);this[d]=new QS(_,n(this)),this[f]==null&&e&&(this[f]=new PR(function(){return w[m]()})),this[f]!=null&&this[f].observeEffectsFor(_)}}),kt(o,m,{value:function(){if(this[d]!=null){var w=this[d].evaluate();this[t.updateHandler](w)}}}),kt(o,"updated",{value:function(w){w.has(i)&&(this[v](),this[m]()),l.call(this,w)}}),kt(o,"connectedCallback",{value:function(){u.call(this),this.requestUpdate(i,this[i])}}),kt(o,"disconnectedCallback",{value:function(){c.call(this),this[f]!=null&&(this[f].dispose(),this[f]=null)}}),o))}},dM,pM,vM,mM,gM,yM,wM,bM,xM,_M,SM,OR=Object.freeze({minimumRadius:0,maximumRadius:1/0,minimumPolarAngle:Math.PI/8,maximumPolarAngle:Math.PI-Math.PI/8,minimumAzimuthalAngle:-1/0,maximumAzimuthalAngle:1/0,minimumFieldOfView:10,maximumFieldOfView:45,eventHandlingBehavior:"prevent-all",interactionPolicy:"always-allow"}),$n=Symbol("spherical"),sr=Symbol("goalSpherical"),MM=Symbol("thetaDamper"),EM=Symbol("phiDamper"),TM=Symbol("radiusDamper"),Xf=Symbol("fov"),Cl=Symbol("goalLogFov"),AM=Symbol("fovDamper"),Jr=Symbol("options"),f0=Symbol("touchMode"),d0=Symbol("canInteract"),Ec=Symbol("interactionEnabled"),Ua=Symbol("userAdjustOrbit"),cm=Symbol("isUserChange"),CM=Symbol("isMoving"),LM=Symbol("moveCamera"),Yf=Symbol("isUserPointing"),hm=Symbol("pointerIsDown"),Ms=Symbol("lastPointerPosition"),Jf=Symbol("lastTouches"),p0=Symbol("pixelLengthToSphericalAngle"),v0=Symbol("twoTouchDistance"),RM=Symbol("wrapAngle"),m0=Symbol("onMouseMove"),g0=Symbol("onMouseDown"),y0=Symbol("onMouseUp"),w0=Symbol("onTouchStart"),b0=Symbol("onTouchEnd"),x0=Symbol("onTouchMove"),_0=Symbol("onWheel"),S0=Symbol("onKeyDown"),M0=Symbol("handlePointerMove"),E0=Symbol("handleSinglePointerMove"),T0=Symbol("handlePointerDown"),A0=Symbol("handleSinglePointerDown"),C0=Symbol("handlePointerUp"),PM=Symbol("handleWheel"),OM=Symbol("handleKey"),NM=/^touch(start|end|move)$/,fm=Math.PI/8,dm=.04,Tc={PAGE_UP:33,PAGE_DOWN:34,LEFT:37,UP:38,RIGHT:39,DOWN:40},pm={USER_INTERACTION:"user-interaction",NONE:"none"},NR=function(a){ke(e,a);var t=Ie(e);function e(n,r){var i;return ye(this,e),i=t.call(this),i.camera=n,i.element=r,i[dM]=!1,i[pM]=!1,i[vM]=!1,i[mM]=new Mv,i[gM]=new Mv,i[yM]=new fi,i[wM]=new fi,i[bM]=new fi,i[xM]=new fi,i[_M]=!1,i[SM]={clientX:0,clientY:0},i[m0]=function(o){return i[M0](o)},i[g0]=function(o){return i[T0](o)},i[y0]=function(o){return i[C0](o)},i[_0]=function(o){return i[PM](o)},i[S0]=function(o){return i[OM](o)},i[w0]=function(o){return i[T0](o)},i[b0]=function(o){return i[C0](o)},i[x0]=function(o){return i[M0](o)},i[Jr]=Object.assign({},OR),i.setOrbit(0,Math.PI/2,1),i.setFieldOfView(100),i.jumpToGoal(),i}return Pe(e,[{key:"enableInteraction",value:function(){if(this[Ec]===!1){var r=this.element;r.addEventListener("mousemove",this[m0]),r.addEventListener("mousedown",this[g0]),r.addEventListener("wheel",this[_0]),r.addEventListener("keydown",this[S0]),r.addEventListener("touchstart",this[w0]),r.addEventListener("touchmove",this[x0]),self.addEventListener("mouseup",this[y0]),self.addEventListener("touchend",this[b0]),this.element.style.cursor="grab",this[Ec]=!0}}},{key:"disableInteraction",value:function(){if(this[Ec]===!0){var r=this.element;r.removeEventListener("mousemove",this[m0]),r.removeEventListener("mousedown",this[g0]),r.removeEventListener("wheel",this[_0]),r.removeEventListener("keydown",this[S0]),r.removeEventListener("touchstart",this[w0]),r.removeEventListener("touchmove",this[x0]),self.removeEventListener("mouseup",this[y0]),self.removeEventListener("touchend",this[b0]),r.style.cursor="",this[Ec]=!1}}},{key:"getCameraSpherical",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Mv;return r.copy(this[$n])}},{key:"getFieldOfView",value:function(){return this.camera.fov}},{key:"applyOptions",value:function(r){Object.assign(this[Jr],r),this.setOrbit(),this.setFieldOfView(Math.exp(this[Cl]))}},{key:"updateNearFar",value:function(r,i){this.camera.near=Math.max(r,i/1e3),this.camera.far=i,this.camera.updateProjectionMatrix()}},{key:"updateAspect",value:function(r){this.camera.aspect=r,this.camera.updateProjectionMatrix()}},{key:"setOrbit",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[sr].theta,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[sr].phi,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this[sr].radius,l=this[Jr],u=l.minimumAzimuthalAngle,c=l.maximumAzimuthalAngle,f=l.minimumPolarAngle,d=l.maximumPolarAngle,v=l.minimumRadius,m=l.maximumRadius,g=this[sr],w=g.theta,_=g.phi,x=g.radius,y=yl(r,u,c);!isFinite(u)&&!isFinite(c)&&(this[$n].theta=this[RM](this[$n].theta-y)+y);var E=yl(i,f,d),R=yl(o,v,m);return y===w&&E===_&&R===x?!1:(this[sr].theta=y,this[sr].phi=E,this[sr].radius=R,this[sr].makeSafe(),this[cm]=!1,!0)}},{key:"setRadius",value:function(r){this[sr].radius=r,this.setOrbit()}},{key:"setFieldOfView",value:function(r){var i=this[Jr],o=i.minimumFieldOfView,l=i.maximumFieldOfView;r=yl(r,o,l),this[Cl]=Math.log(r)}},{key:"adjustOrbit",value:function(r,i,o){var l=this[sr],u=l.theta,c=l.phi,f=l.radius,d=this[Jr],v=d.minimumRadius,m=d.maximumRadius,g=d.minimumFieldOfView,w=d.maximumFieldOfView,_=this[$n].theta-u,x=Math.PI-.001,y=u-yl(r,-x-_,x-_),E=c-i,R=o===0?0:o>0?(m-f)/(Math.log(w)-this[Cl]):(f-v)/(this[Cl]-Math.log(g)),A=f+o*Math.min(isFinite(R)?R:1/0,m-v),T=this.setOrbit(y,E,A);if(o!==0){var C=this[Cl]+o;this.setFieldOfView(Math.exp(C)),T=!0}return T}},{key:"jumpToGoal",value:function(){this.update(0,Lx)}},{key:"update",value:function(r,i){if(!this[CM]()){var o=this[Jr],l=o.maximumPolarAngle,u=o.maximumRadius,c=this[$n].theta-this[sr].theta;Math.abs(c)>Math.PI&&!isFinite(this[Jr].minimumAzimuthalAngle)&&!isFinite(this[Jr].maximumAzimuthalAngle)&&(this[$n].theta-=Math.sign(c)*2*Math.PI),this[$n].theta=this[MM].update(this[$n].theta,this[sr].theta,i,Math.PI),this[$n].phi=this[EM].update(this[$n].phi,this[sr].phi,i,l),this[$n].radius=this[TM].update(this[$n].radius,this[sr].radius,i,u),this[Xf]=this[AM].update(this[Xf],this[Cl],i,1),this[LM]()}}},{key:(dM=Ec,pM=cm,vM=Yf,mM=$n,gM=sr,yM=MM,wM=EM,bM=TM,xM=AM,_M=hm,SM=Ms,CM),value:function(){return this[sr].theta===this[$n].theta&&this[sr].phi===this[$n].phi&&this[sr].radius===this[$n].radius&&this[Cl]===this[Xf]}},{key:LM,value:function(){this[$n].makeSafe(),this.camera.position.setFromSpherical(this[$n]),this.camera.setRotationFromEuler(new io(this[$n].phi-Math.PI/2,this[$n].theta,0,"YXZ")),this.camera.fov!==Math.exp(this[Xf])&&(this.camera.fov=Math.exp(this[Xf]),this.camera.updateProjectionMatrix());var r=this[cm]?pm.USER_INTERACTION:pm.NONE;this.dispatchEvent({type:"change",source:r})}},{key:Ua,value:function(r,i,o){var l=this.adjustOrbit(r,i,o);return this[cm]=!0,this.dispatchEvent({type:"change",source:pm.USER_INTERACTION}),l}},{key:RM,value:function(r){var i=(r+Math.PI)/(2*Math.PI),o=i-Math.floor(i);return o*2*Math.PI-Math.PI}},{key:p0,value:function(r){return 2*Math.PI*r/this.element.clientHeight}},{key:v0,value:function(r,i){var o=r.clientX,l=r.clientY,u=i.clientX,c=i.clientY,f=u-o,d=c-l;return Math.sqrt(f*f+d*d)}},{key:M0,value:function(r){if(!(!this[hm]||!this[d0])){var i=!1;if(NM.test(r.type)){var o=r.touches;switch(this[f0]){case"zoom":if(this[Jf].length>1&&o.length>1){var l=this[v0](this[Jf][0],this[Jf][1]),u=this[v0](o[0],o[1]),c=dm*(l-u)/10;i=this[Ua](0,0,c)}break;case"rotate":i=this[E0](o[0]);break}this[Jf]=o}else i=this[E0](r);(i||this[Jr].eventHandlingBehavior==="prevent-all")&&r.cancelable&&r.preventDefault()}}},{key:E0,value:function(r){var i=r.clientX,o=r.clientY,l=this[p0](i-this[Ms].clientX),u=this[p0](o-this[Ms].clientY);return this[Ms].clientX=i,this[Ms].clientY=o,this[Yf]===!1&&(this[Yf]=!0,this.dispatchEvent({type:"pointer-change-start",pointer:Object.assign({},r)})),this[Ua](l,u,0)}},{key:T0,value:function(r){if(this[hm]=!0,this[Yf]=!1,NM.test(r.type)){var i=r.touches;switch(i.length){default:case 1:this[f0]="rotate",this[A0](i[0]);break;case 2:this[f0]="zoom";break}this[Jf]=i}else this[A0](r)}},{key:A0,value:function(r){this[Ms].clientX=r.clientX,this[Ms].clientY=r.clientY,this.element.style.cursor="grabbing"}},{key:C0,value:function(r){this.element.style.cursor="grab",this[hm]=!1,this[Yf]&&this.dispatchEvent({type:"pointer-change-end",pointer:Object.assign({},this[Ms])})}},{key:PM,value:function(r){if(!!this[d0]){var i=r.deltaY*(r.deltaMode==1?18:1)*dm/30;(this[Ua](0,0,i)||this[Jr].eventHandlingBehavior==="prevent-all")&&r.cancelable&&r.preventDefault()}}},{key:OM,value:function(r){var i=!1,o=!1;switch(r.keyCode){case Tc.PAGE_UP:i=!0,o=this[Ua](0,0,dm);break;case Tc.PAGE_DOWN:i=!0,o=this[Ua](0,0,-1*dm);break;case Tc.UP:i=!0,o=this[Ua](0,-fm,0);break;case Tc.DOWN:i=!0,o=this[Ua](0,fm,0);break;case Tc.LEFT:i=!0,o=this[Ua](-fm,0,0);break;case Tc.RIGHT:i=!0,o=this[Ua](fm,0,0);break}i&&(o||this[Jr].eventHandlingBehavior==="prevent-all")&&r.cancelable&&r.preventDefault()}},{key:"interactionEnabled",get:function(){return this[Ec]}},{key:"options",get:function(){return this[Jr]}},{key:d0,get:function(){if(this[Jr].interactionPolicy=="allow-when-focused"){var r=this.element.getRootNode();return r.activeElement===this.element}return this[Jr].interactionPolicy==="always-allow"}}]),e}(rr),kM=function(t){return t<.5?2*t*t:-1+(4-2*t)*t},kR=function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:kM;return function(r){return t+(e-t)*n(r)}},IR=function(t,e){var n=e.reduce(function(i,o){return i+o},0),r=e.map(function(i){return i/n});return function(i){for(var o=0,l=1/0,u=function(){return 0},c=0;c<r.length&&(l=r[c],u=t[c],!(i<=o+l));++c)o+=l;return u((i-o)/l)}},IM=function(t,e){for(var n=[],r=[],i=t,o=0;o<e.length;++o){var l=e[o],u=l.value,c=l.frames,f=l.ease||kM,d=kR(i,u,f);n.push(d),r.push(c),i=u}return IR(n,r)},Bi=function(a,t,e,n){var r=arguments.length,i=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n,o;typeof Reflect=="undefined"||cn(Reflect);for(var l=a.length-1;l>=0;l--)(o=a[l])&&(i=(r<3?o(i):r>3?o(t,e,i):o(t,e))||i);return r>3&&i&&Object.defineProperty(t,e,i),i},DR=5e3,FR=IM(0,[{frames:6,value:0},{frames:5,value:-1},{frames:1,value:-1},{frames:8,value:1},{frames:1,value:1},{frames:5,value:0},{frames:12,value:0}]),BR=IM(0,[{frames:2,value:0},{frames:1,value:1},{frames:5,value:1},{frames:1,value:0},{frames:4,value:0}]),DM="0deg 75deg 105%",UR="auto auto auto",GR="auto",HR=1.1*jx,zR=["front","right","back","left"],VR=["upper-","","lower-"],WR=3e3,$R="Use mouse, touch or arrow keys to control the camera!",Ll={AUTO:"auto",WHEN_FOCUSED:"when-focused",NONE:"none"},L0={BASIC:"basic",WIGGLE:"wiggle"},jR={ALWAYS_ALLOW:"always-allow",WHEN_FOCUSED:"allow-when-focused"},qR=function(t){return{basis:[or(t[mm]*Math.PI/180,"rad")],keywords:{auto:[null]}}},XR={basis:[Pv(or(25,"deg"))],keywords:{auto:[null]}},YR=function(t){var e=t[rt];return{basis:[Pv(or(45,"deg"))],keywords:{auto:[or(e.framedFieldOfView,"deg")]}}},FM=function(){var a=Cf(DM)[0].terms,t=gl(a[0]),e=gl(a[1]);return function(n){var r=n[rt].model.idealCameraDistance;return{basis:[t,e,or(r,"m")],keywords:{auto:[null,null,or(105,"%")]}}}}(),JR=function(t){var e=HR*t[rt].model.idealCameraDistance;return{basis:[or(-1/0,"rad"),or(Math.PI/8,"rad"),or(e,"m")],keywords:{auto:[null,null,null]}}},ZR=function(t){var e=FM(t),n=new QS([],e),r=n.evaluate()[2];return{basis:[or(1/0,"rad"),or(Math.PI-Math.PI/8,"rad"),or(r,"m")],keywords:{auto:[null,null,null]}}},KR=function(t){var e=t[rt].model.boundingBox.getCenter(new D);return{basis:[or(e.x,"m"),or(e.y,"m"),or(e.z,"m")],keywords:{auto:[null,null,null]}}},R0=Math.PI/2,BM=Math.PI/3,UM=R0/2,GM=2*Math.PI,Sn=Symbol("controls"),Zf=Symbol("promptElement"),P0=Symbol("promptAnimatedContainer"),vm=Symbol("deferInteractionPrompt"),HM=Symbol("updateAria"),zM=Symbol("updateCameraForRadius"),O0=Symbol("blurHandler"),N0=Symbol("focusHandler"),k0=Symbol("changeHandler"),Kf=Symbol("pointerChangeHandler"),VM=Symbol("onBlur"),WM=Symbol("onFocus"),$M=Symbol("onChange"),jM=Symbol("onPointerChange"),So=Symbol("waitingToPromptUser"),Qf=Symbol("userHasInteracted"),Rl=Symbol("promptElementVisibleTime"),ed=Symbol("lastPromptOffset"),td=Symbol("focusedTime"),mm=Symbol("zoomAdjustedFieldOfView"),gm=Symbol("lastSpherical"),nd=Symbol("jumpCamera"),I0=Symbol("initialized"),ym=Symbol("maintainThetaPhi"),qM=Symbol("syncCameraOrbit"),XM=Symbol("syncFieldOfView"),YM=Symbol("syncCameraTarget"),JM=Symbol("syncMinCameraOrbit"),ZM=Symbol("syncMaxCameraOrbit"),KM=Symbol("syncMinFieldOfView"),QM=Symbol("syncMaxFieldOfView"),QR=function(t){var e,n,r,i,o,l,u,c,f,d,v,m,g,w,_,x,y,E=function(R){ke(T,R);var A=Ie(T);function T(){var C;return ye(this,T),C=A.apply(this,arguments),C.cameraControls=!1,C.cameraOrbit=DM,C.cameraTarget=UR,C.fieldOfView=GR,C.minCameraOrbit="auto",C.maxCameraOrbit="auto",C.minFieldOfView="auto",C.maxFieldOfView="auto",C.interactionPromptThreshold=WR,C.interactionPromptStyle=L0.WIGGLE,C.interactionPrompt=Ll.AUTO,C.interactionPolicy=jR.ALWAYS_ALLOW,C[e]=C.shadowRoot.querySelector(".interaction-prompt"),C[n]=C.shadowRoot.querySelector(".interaction-prompt > .animated-container"),C[r]=1/0,C[i]=0,C[o]=1/0,C[l]=!1,C[u]=!1,C[c]=new NR(C[rt].camera,C[ca]),C[f]=0,C[d]=new Mv,C[v]=!1,C[m]=!1,C[g]=!1,C[w]=function(I){return C[$M](I)},C[_]=function(I){return C[jM](I)},C[x]=function(){return C[WM]()},C[y]=function(){return C[VM]()},C}return Pe(T,[{key:"getCameraOrbit",value:function(){var I=this[gm],j=I.theta,U=I.phi,B=I.radius;return{theta:j,phi:U,radius:B}}},{key:"getCameraTarget",value:function(){return this[rt].getTarget()}},{key:"getFieldOfView",value:function(){return this[Sn].getFieldOfView()}},{key:"getMinimumFieldOfView",value:function(){return this[Sn].options.minimumFieldOfView}},{key:"getMaximumFieldOfView",value:function(){return this[Sn].options.maximumFieldOfView}},{key:"jumpCameraToGoal",value:function(){this[nd]=!0,this.requestUpdate(nd,!1)}},{key:"resetInteractionPrompt",value:function(){this[ed]=0,this[Rl]=1/0,this[Qf]=!1,this[So]=this.interactionPrompt===Ll.AUTO&&this.cameraControls}},{key:"connectedCallback",value:function(){et(Ze(T.prototype),"connectedCallback",this).call(this),this[Sn].addEventListener("change",this[k0]),this[Sn].addEventListener("pointer-change-start",this[Kf]),this[Sn].addEventListener("pointer-change-end",this[Kf])}},{key:"disconnectedCallback",value:function(){et(Ze(T.prototype),"disconnectedCallback",this).call(this),this[Sn].removeEventListener("change",this[k0]),this[Sn].removeEventListener("pointer-change-start",this[Kf]),this[Sn].removeEventListener("pointer-change-end",this[Kf])}},{key:"updated",value:function(I){var j=this;et(Ze(T.prototype),"updated",this).call(this,I);var U=this[Sn],B=this[ca];if(I.has("cameraControls")&&(this.cameraControls?(U.enableInteraction(),this.interactionPrompt===Ll.AUTO&&(this[So]=!0),B.addEventListener("focus",this[N0]),B.addEventListener("blur",this[O0])):(B.removeEventListener("focus",this[N0]),B.removeEventListener("blur",this[O0]),U.disableInteraction(),this[vm]())),(I.has("interactionPrompt")||I.has("cameraControls")||I.has("src"))&&(this.interactionPrompt===Ll.AUTO&&this.cameraControls&&!this[Qf]?this[So]=!0:this[vm]()),I.has("interactionPromptStyle")&&this[Zf].classList.toggle("wiggle",this.interactionPromptStyle===L0.WIGGLE),I.has("interactionPolicy")){var Z=this.interactionPolicy;U.applyOptions({interactionPolicy:Z})}this[nd]===!0&&Promise.resolve().then(function(){j[Sn].jumpToGoal(),j[rt].jumpToGoal(),j[nd]=!1})}},{key:(e=Zf,n=P0,r=td,i=ed,o=Rl,l=Qf,u=So,c=Sn,f=mm,d=gm,v=nd,m=I0,g=ym,w=k0,_=Kf,x=N0,y=O0,XM),value:function(I){this[Sn].setFieldOfView(I[0]*180/Math.PI)}},{key:qM,value:function(I){if(this[ym]){var j=this.getCameraOrbit(),U=j.theta,B=j.phi;I[0]=U,I[1]=B,this[ym]=!1}this[Sn].setOrbit(I[0],I[1],I[2])}},{key:JM,value:function(I){this[Sn].applyOptions({minimumAzimuthalAngle:I[0],minimumPolarAngle:I[1],minimumRadius:I[2]}),this.jumpCameraToGoal()}},{key:ZM,value:function(I){this[Sn].applyOptions({maximumAzimuthalAngle:I[0],maximumPolarAngle:I[1],maximumRadius:I[2]}),this[zM](I[2]),this.jumpCameraToGoal()}},{key:KM,value:function(I){this[Sn].applyOptions({minimumFieldOfView:I[0]*180/Math.PI}),this.jumpCameraToGoal()}},{key:QM,value:function(I){this[Sn].applyOptions({maximumFieldOfView:I[0]*180/Math.PI}),this.jumpCameraToGoal()}},{key:YM,value:function(I){var j=Pw(I,3),U=j[0],B=j[1],Z=j[2];this[rt].setTarget(U,B,Z),this[_n].arRenderer.updateTarget()}},{key:Ba,value:function(I,j){if(et(Ze(T.prototype),Ba,this).call(this,I,j),!(this[_n].isPresenting||!this[wc]())){var U=performance.now();if(this[So]){var B=this.interactionPrompt===Ll.AUTO?this[nm]:this[td];this.loaded&&U>B+this.interactionPromptThreshold&&(this[ca].setAttribute("aria-label",$R),this[So]=!1,this[Rl]=U,this[Zf].classList.add("visible"))}if(isFinite(this[Rl])&&this.interactionPromptStyle===L0.WIGGLE){var Z=this[rt],Q=(U-this[Rl])/DR%1,J=FR(Q),q=BR(Q);if(this[P0].style.opacity="".concat(q),J!==this[ed]){var Y=J*Z.width*.05,ee=(J-this[ed])*Math.PI/16;this[P0].style.transform="translateX(".concat(Y,"px)"),this[Sn].adjustOrbit(ee,0,0),this[ed]=J}}this[Sn].update(I,j),this[rt].updateTarget(j)}}},{key:vm,value:function(){this[So]=!1,this[Zf].classList.remove("visible"),this[Rl]=1/0}},{key:zM,value:function(I){var j=this[rt].model.idealCameraDistance,U=Math.max(j,I),B=0,Z=2*U;this[Sn].updateNearFar(B,Z)}},{key:HM,value:function(){var I=this[gm],j=I.theta,U=I.phi,B=this[Sn].getCameraSpherical(this[gm]),Z=B.theta,Q=B.phi,J=this.getRootNode();if(J!=null&&J.activeElement===this){var q=(4+Math.floor((j%GM+UM)/R0))%4,Y=(4+Math.floor((Z%GM+UM)/R0))%4,ee=Math.floor(U/BM),le=Math.floor(Q/BM);if(Y!==q||le!==ee){var ue=zR[Y],he=VR[le],pe="View from stage ".concat(he).concat(ue);this[ca].setAttribute("aria-label",pe)}}}},{key:xs,value:function(I){var j=this[Sn],U=this[rt].framedFieldOfView;et(Ze(T.prototype),xs,this).call(this,I);var B=this[rt].framedFieldOfView,Z=j.getFieldOfView()/U;this[mm]=B*Z,j.updateAspect(this[rt].aspect),this.requestUpdate("maxFieldOfView",this.maxFieldOfView),this.requestUpdate("fieldOfView",this.fieldOfView),this.jumpCameraToGoal()}},{key:bo,value:function(){et(Ze(T.prototype),bo,this).call(this);var I=this[rt].framedFieldOfView;this[mm]=I,this[I0]?this[ym]=!0:this[I0]=!0,this.requestUpdate("maxFieldOfView",this.maxFieldOfView),this.requestUpdate("fieldOfView",this.fieldOfView),this.requestUpdate("minCameraOrbit",this.minCameraOrbit),this.requestUpdate("maxCameraOrbit",this.maxCameraOrbit),this.requestUpdate("cameraOrbit",this.cameraOrbit),this.requestUpdate("cameraTarget",this.cameraTarget),this.jumpCameraToGoal()}},{key:WM,value:function(){var I=this[ca];isFinite(this[td])||(this[td]=performance.now());var j=this[Zy];I.getAttribute("aria-label")!==j&&I.setAttribute("aria-label",j),this.interactionPrompt===Ll.WHEN_FOCUSED&&!this[Qf]&&(this[So]=!0)}},{key:VM,value:function(){this.interactionPrompt===Ll.WHEN_FOCUSED&&(this[So]=!1,this[Zf].classList.remove("visible"),this[Rl]=1/0,this[td]=1/0)}},{key:$M,value:function(I){var j=I.source;this[HM](),this[ha](),j===pm.USER_INTERACTION&&(this[Qf]=!0,this[vm]()),this.dispatchEvent(new CustomEvent("camera-change",{detail:{source:j}}))}},{key:jM,value:function(I){I.type==="pointer-change-start"?this[Gf].classList.add("pointer-tumbling"):this[Gf].classList.remove("pointer-tumbling")}}]),T}(t);return Bi([It({type:Boolean,attribute:"camera-controls"})],E.prototype,"cameraControls",void 0),Bi([Ss({intrinsics:FM,observeEffects:!0,updateHandler:qM}),It({type:String,attribute:"camera-orbit",hasChanged:function(){return!0}})],E.prototype,"cameraOrbit",void 0),Bi([Ss({intrinsics:KR,observeEffects:!0,updateHandler:YM}),It({type:String,attribute:"camera-target",hasChanged:function(){return!0}})],E.prototype,"cameraTarget",void 0),Bi([Ss({intrinsics:qR,observeEffects:!0,updateHandler:XM}),It({type:String,attribute:"field-of-view",hasChanged:function(){return!0}})],E.prototype,"fieldOfView",void 0),Bi([Ss({intrinsics:JR,updateHandler:JM}),It({type:String,attribute:"min-camera-orbit",hasChanged:function(){return!0}})],E.prototype,"minCameraOrbit",void 0),Bi([Ss({intrinsics:ZR,updateHandler:ZM}),It({type:String,attribute:"max-camera-orbit",hasChanged:function(){return!0}})],E.prototype,"maxCameraOrbit",void 0),Bi([Ss({intrinsics:XR,updateHandler:KM}),It({type:String,attribute:"min-field-of-view",hasChanged:function(){return!0}})],E.prototype,"minFieldOfView",void 0),Bi([Ss({intrinsics:YR,updateHandler:QM}),It({type:String,attribute:"max-field-of-view",hasChanged:function(){return!0}})],E.prototype,"maxFieldOfView",void 0),Bi([It({type:Number,attribute:"interaction-prompt-threshold"})],E.prototype,"interactionPromptThreshold",void 0),Bi([It({type:String,attribute:"interaction-prompt-style"})],E.prototype,"interactionPromptStyle",void 0),Bi([It({type:String,attribute:"interaction-prompt"})],E.prototype,"interactionPrompt",void 0),Bi([It({type:String,attribute:"interaction-policy"})],E.prototype,"interactionPolicy",void 0),E},rd=function(a,t,e,n){var r=arguments.length,i=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n,o;typeof Reflect=="undefined"||cn(Reflect);for(var l=a.length-1;l>=0;l--)(o=a[l])&&(i=(r<3?o(i):r>3?o(t,e,i):o(t,e))||i);return r>3&&i&&Object.defineProperty(t,e,i),i},eP=.1,tP=0,nP=1,rP=1,id=Symbol("currentEnvironmentMap"),wm=Symbol("applyEnvironmentMap"),D0=Symbol("updateEnvironment"),ad=Symbol("cancelEnvironmentUpdate"),F0=Symbol("onPreload"),iP=function(t){var e,n,r,i=function(o){ke(u,o);var l=Ie(u);function u(){var c;return ye(this,u),c=l.apply(this,arguments),c.environmentImage=null,c.skyboxImage=null,c.shadowIntensity=tP,c.shadowSoftness=nP,c.exposure=rP,c[e]=null,c[n]=null,c[r]=function(f){f.element===Tr(c)&&c[D0]()},c}return Pe(u,[{key:"connectedCallback",value:function(){et(Ze(u.prototype),"connectedCallback",this).call(this),this[_n].loader.addEventListener("preload",this[F0])}},{key:"disconnectedCallback",value:function(){et(Ze(u.prototype),"disconnectedCallback",this).call(this),this[_n].loader.removeEventListener("preload",this[F0])}},{key:"updated",value:function(f){et(Ze(u.prototype),"updated",this).call(this,f),f.has("shadowIntensity")&&(this[rt].setShadowIntensity(this.shadowIntensity*eP),this[ha]()),f.has("shadowSoftness")&&(this[rt].setShadowSoftness(this.shadowSoftness),this[ha]()),f.has("exposure")&&(this[rt].exposure=this.exposure,this[ha]()),(f.has("environmentImage")||f.has("skyboxImage"))&&this[zf]()&&this[D0]()}},{key:(e=id,n=ad,r=F0,bo),value:function(){et(Ze(u.prototype),bo,this).call(this),this[id]!=null&&this[wm](this[id])}},{key:D0,value:function(){var c=pt(regeneratorRuntime.mark(function d(){var v=this,m,g,w,_,x,y;return regeneratorRuntime.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(m=this.skyboxImage,g=this.environmentImage,this[ad]!=null&&(this[ad](),this[ad]=null),w=this[_n].textureUtils,w!=null){R.next=5;break}return R.abrupt("return");case 5:return R.prev=5,R.next=8,new Promise(function(){var A=pt(regeneratorRuntime.mark(function T(C,I){var j;return regeneratorRuntime.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return j=w.generateEnvironmentMapAndSkybox(Zx(m),Zx(g),{progressTracker:v[Hf]}),v[ad]=function(){return I(j)},B.t0=C,B.next=5,j;case 5:B.t1=B.sent,(0,B.t0)(B.t1);case 7:case"end":return B.stop()}},T)}));return function(T,C){return A.apply(this,arguments)}}());case 8:_=R.sent,x=_.environmentMap,y=_.skybox,y!=null?this[rt].background=y.texture:this[rt].background=null,this[wm](x.texture),this[rt].model.dispatchEvent({type:"envmap-update"}),R.next=21;break;case 16:if(R.prev=16,R.t0=R.catch(5),!Ht(R.t0,Error)){R.next=21;break}throw this[wm](null),R.t0;case 21:case"end":return R.stop()}},d,this,[[5,16]])}));function f(){return c.apply(this,arguments)}return f}()},{key:wm,value:function(f){this[id]=f,this[rt].environment=this[id],this.dispatchEvent(new CustomEvent("environment-change")),this[ha]()}}]),u}(t);return rd([It({type:String,attribute:"environment-image"})],i.prototype,"environmentImage",void 0),rd([It({type:String,attribute:"skybox-image"})],i.prototype,"skyboxImage",void 0),rd([It({type:Number,attribute:"shadow-intensity"})],i.prototype,"shadowIntensity",void 0),rd([It({type:Number,attribute:"shadow-softness"})],i.prototype,"shadowSoftness",void 0),rd([It({type:Number})],i.prototype,"exposure",void 0),i},eE,tE,aP="This page includes one or more 3D models that are loading",oP="All 3D models in the page have loaded",sP=100,bm=Symbol("modelViewerStatusInstance"),nE=Symbol("updateStatus"),lP=function(a){ke(e,a);var t=Ie(e);function e(){var n;ye(this,e),n=t.call(this),n[eE]=null,n.registeredInstanceStatuses=new Map,n.loadingPromises=[],n.statusElement=document.createElement("p"),n.statusUpdateInProgress=!1,n[tE]=Ry(function(){return n.updateStatus()},sP);var r=Tr(n),i=r.statusElement,o=i.style;return i.setAttribute("role","status"),i.classList.add("screen-reader-only"),o.top=o.left="0",o.pointerEvents="none",n}return Pe(e,[{key:"registerInstance",value:function(r){if(!this.registeredInstanceStatuses.has(r)){var i=function(){},o=r.loaded===!1&&!!r.src,l=new Promise(function(u){if(!o){u();return}var c=function f(){u(),r.removeEventListener("load",f),r.removeEventListener("error",f)};r.addEventListener("load",c),r.addEventListener("error",c),i=c});this.registeredInstanceStatuses.set(r,{onUnregistered:i}),this.loadingPromises.push(l),this.modelViewerStatusInstance==null&&(this.modelViewerStatusInstance=r)}}},{key:"unregisterInstance",value:function(r){if(!!this.registeredInstanceStatuses.has(r)){var i=this.registeredInstanceStatuses,o=i.get(r);i.delete(r),o.onUnregistered(),this.modelViewerStatusInstance===r&&(this.modelViewerStatusInstance=i.size>0?HL(i):null)}}},{key:"updateStatus",value:function(){var n=pt(regeneratorRuntime.mark(function i(){var o;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!(this.statusUpdateInProgress||this.loadingPromises.length===0)){u.next=2;break}return u.abrupt("return");case 2:this.statusElement.textContent=aP,this.statusUpdateInProgress=!0,this.dispatchEvent({type:"initial-status-announced"});case 5:if(!this.loadingPromises.length){u.next=12;break}return o=this.loadingPromises,this.loadingPromises=[],u.next=10,Promise.all(o);case 10:u.next=5;break;case 12:this.statusElement.textContent=oP,this.statusUpdateInProgress=!1,this.dispatchEvent({type:"finished-loading-announced"});case 15:case"end":return u.stop()}},i,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"modelViewerStatusInstance",get:function(){return this[bm]},set:function(r){var i=this[bm];if(i!==r){var o=this.statusElement;r!=null&&r.shadowRoot!=null?r.shadowRoot.appendChild(o):o.parentNode!=null&&o.parentNode.removeChild(o),this[bm]=r,this[nE]()}}}]),e}(rr);eE=bm,tE=nE;var B0=function(a,t,e,n){var r=arguments.length,i=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n,o;typeof Reflect=="undefined"||cn(Reflect);for(var l=a.length-1;l>=0;l--)(o=a[l])&&(i=(r<3?o(i):r>3?o(t,e,i):o(t,e))||i);return r>3&&i&&Object.defineProperty(t,e,i),i},uP=100,cP=.2,hP="https://www.gstatic.com/draco/versioned/decoders/1.3.5/",fP=32,dP=13,od={AUTO:"auto",INTERACTION:"interaction",MANUAL:"manual"},rE={AUTO:"auto",LAZY:"lazy",EAGER:"eager"},pP={INTERACTION:"interaction"},iE=new lP,Pl=Symbol("defaultProgressBarElement"),aE=Symbol("defaultProgressMaskElement"),Ol=Symbol("posterContainerElement"),Ac=Symbol("defaultPosterElement"),sd=Symbol("posterDismissalSource"),oE=Symbol("showPoster"),U0=Symbol("hidePoster"),xm=Symbol("modelIsRevealed"),G0=Symbol("updateProgressBar"),ld=Symbol("lastReportedProgress"),_m=Symbol("transitioned"),sE=Symbol("ariaLabelCallToAction"),H0=Symbol("clickHandler"),z0=Symbol("keydownHandler"),V0=Symbol("processHandler"),lE=Symbol("onClick"),uE=Symbol("onKeydown"),cE=Symbol("onProgress"),vP=function(t){var e,n,r,i,o,l,u,c,f,d,v,m,g,w=function(_){ke(y,_);var x=Ie(y);function y(){var E;ye(this,y);for(var R=arguments.length,A=new Array(R),T=0;T<R;T++)A[T]=arguments[T];E=x.call.apply(x,[this].concat(A)),E.poster=null,E.reveal=od.AUTO,E.loading=rE.AUTO,E[e]=!1,E[n]=!1,E[r]=0,E[i]=null,E[o]=E.shadowRoot.querySelector(".slot.poster"),E[l]=E.shadowRoot.querySelector("#default-poster"),E[u]=E.shadowRoot.querySelector("#default-progress-bar > .bar"),E[c]=E.shadowRoot.querySelector("#default-progress-bar > .mask"),E[f]=E[Ac].getAttribute("aria-label"),E[d]=function(){return E[lE]()},E[v]=function(j){return E[uE](j)},E[m]=function(j){return E[cE](j)},E[g]=UL(function(j){var U=E[Pl].parentNode;requestAnimationFrame(function(){E[aE].style.opacity="".concat((1-j)*cP),E[Pl].style.transform="scaleX(".concat(j,")"),j===0&&(U.removeChild(E[Pl]),U.appendChild(E[Pl])),j===1?E[Pl].classList.add("hide"):E[Pl].classList.remove("hide")})},uP);var C=self.ModelViewerElement||{},I=C.dracoDecoderLocation||hP;return vs.setDRACODecoderLocation(I),E}return Pe(y,[{key:"dismissPoster",value:function(){this[_s]()?this[U0]():(this[sd]=pP.INTERACTION,this[wo]())}},{key:"connectedCallback",value:function(){et(Ze(y.prototype),"connectedCallback",this).call(this),this[Ol].addEventListener("click",this[H0]),this[Ol].addEventListener("keydown",this[z0]),this[Hf].addEventListener("progress",this[V0]),iE.registerInstance(this)}},{key:"disconnectedCallback",value:function(){et(Ze(y.prototype),"disconnectedCallback",this).call(this),this[Ol].removeEventListener("click",this[H0]),this[Ol].removeEventListener("keydown",this[z0]),this[Hf].removeEventListener("progress",this[V0]),iE.unregisterInstance(this)}},{key:"updated",value:function(){var E=pt(regeneratorRuntime.mark(function A(T){return regeneratorRuntime.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:et(Ze(y.prototype),"updated",this).call(this,T),T.has("poster")&&this.poster!=null&&(this[Ac].style.backgroundImage="url(".concat(this.poster,")")),T.has("alt")&&this[Ac].setAttribute("aria-label","".concat(this[Zy],". ").concat(this[sE])),(T.has("reveal")||T.has("loaded"))&&(this[_s]()||this[wo]());case 4:case"end":return I.stop()}},A,this)}));function R(A){return E.apply(this,arguments)}return R}()},{key:(e=xm,n=_m,r=ld,i=sd,o=Ol,l=Ac,u=Pl,c=aE,f=sE,d=H0,v=z0,m=V0,g=G0,lE),value:function(){this.reveal!==od.MANUAL&&this.dismissPoster()}},{key:uE,value:function(R){if(this.reveal!==od.MANUAL)switch(R.keyCode){case fP:case dP:this.dismissPoster();break}}},{key:cE,value:function(R){var A=R.detail.totalProgress;this[ld]=Math.max(A,this[ld]),A===1&&(this[G0].flush(),this[_s]()&&(this[sd]!=null||this.reveal===od.AUTO)&&this[U0]()),this[G0](A),this.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:A}}))}},{key:zf,value:function(){return!!this.src&&(this[sd]!=null||this.loading===rE.EAGER||this.reveal===od.AUTO&&this[El])}},{key:_s,value:function(){var R=this.src;return!!R&&et(Ze(y.prototype),_s,this).call(this)&&this[ld]===1}},{key:oE,value:function(){var R=this[Ol],A=this[Ac];A.removeAttribute("tabindex"),A.removeAttribute("aria-hidden"),R.classList.add("show");var T=this.modelIsVisible;this[xm]=!1,this[tm](T),this[_m]=!1}},{key:U0,value:function(){var R=this;this[sd]=null;var A=this[Ol],T=this[Ac];if(A.classList.contains("show")){A.classList.remove("show");var C=this.modelIsVisible;this[xm]=!0,this[tm](C),A.addEventListener("transitionend",function(){requestAnimationFrame(function(){R[_m]=!0;var I=R.getRootNode();I&&I.activeElement===R&&R[ca].focus(),T.setAttribute("aria-hidden","true"),T.tabIndex=-1,R.dispatchEvent(new CustomEvent("poster-dismissed"))})},{once:!0})}}},{key:im,value:function(){return et(Ze(y.prototype),im,this).call(this)&&this[xm]}},{key:wc,value:function(){return et(Ze(y.prototype),wc,this).call(this)&&this[_m]}},{key:wo,value:function(){var E=pt(regeneratorRuntime.mark(function A(){return regeneratorRuntime.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return this[ld]=0,(this[rt].model.currentGLTF==null||this.src==null||!this[zf]())&&this[oE](),C.next=4,et(Ze(y.prototype),wo,this).call(this);case 4:case"end":return C.stop()}},A,this)}));function R(){return E.apply(this,arguments)}return R}()}],[{key:"mapURLs",value:function(R){Ml.singleton.loader[Rv].manager.setURLModifier(R)}},{key:"dracoDecoderLocation",set:function(R){vs.setDRACODecoderLocation(R)},get:function(){return vs.getDRACODecoderLocation()}}]),y}(t);return B0([It({type:String})],w.prototype,"poster",void 0),B0([It({type:String})],w.prototype,"reveal",void 0),B0([It({type:String})],w.prototype,"loading",void 0),w};var Nl={HANDSHAKE:1,IMPORT_SCRIPT:2,MODEL_CHANGE:3,MUTATION_RESULT:4,CONTEXT_INITIALIZED:5,MUTATE:6};var hE=Symbol("ownerModel"),Es=function(){function a(t){if(ye(this,a),t==null)throw new Error("Illegal constructor");this[hE]=t.model}return Pe(a,[{key:"ownerModel",get:function(){return this[hE]}}]),a}();var fE=Symbol("kernel"),W0=Symbol("uri"),dE=Symbol("name"),mP=function(a){ke(e,a);var t=Ie(e);function e(n,r){var i;return ye(this,e),i=t.call(this,n),i[fE]=n,i[W0]=r.uri||null,i[dE]=r.name,i}return Pe(e,[{key:"setURI",value:function(){var n=pt(regeneratorRuntime.mark(function i(o){return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this[fE].mutate(this,"uri",o);case 2:this[W0]=o;case 3:case"end":return u.stop()}},i,this)}));function r(i){return n.apply(this,arguments)}return r}()},{key:"name",get:function(){return this[dE]}},{key:"type",get:function(){return this.uri!=null?"external":"embedded"}},{key:"uri",get:function(){return this[W0]}}]),e}(Es);var pE,vE,mE,gE=Symbol("pbrMetallicRoughness"),$0=Symbol("normalTexture"),j0=Symbol("occlusionTexture"),q0=Symbol("emissiveTexture"),gP=Symbol("kernel"),yE=Symbol("name"),yP=function(a){ke(e,a);var t=Ie(e);function e(n,r){var i;ye(this,e),i=t.call(this,n),i[pE]=null,i[vE]=null,i[mE]=null,i[gP]=n,r.name!=null&&(i[yE]=r.name);var o=r.pbrMetallicRoughness,l=r.normalTexture,u=r.occlusionTexture,c=r.emissiveTexture;return i[gE]=n.deserialize("pbr-metallic-roughness",o),l!=null&&(i[$0]=n.deserialize("texture-info",l)),u!=null&&(i[j0]=n.deserialize("texture-info",u)),c!=null&&(i[q0]=n.deserialize("texture-info",c)),i}return Pe(e,[{key:"pbrMetallicRoughness",get:function(){return this[gE]}},{key:"normalTexture",get:function(){return this[$0]}},{key:"occlusionTexture",get:function(){return this[j0]}},{key:"emissiveTexture",get:function(){return this[q0]}},{key:"name",get:function(){return this[yE]}}]),e}(Es);pE=$0,vE=j0,mE=q0;var wE,wP=Symbol("material"),X0=Symbol("kernel"),bP=function(a){ke(e,a);var t=Ie(e);function e(n,r){var i;ye(this,e),i=t.call(this,n),i[wE]=Object.freeze([]),i[X0]=n;var o=jt(r.materials),l;try{for(o.s();!(l=o.n()).done;){var u=l.value;i[X0].deserialize("material",u)}}catch(c){o.e(c)}finally{o.f()}return i}return Pe(e,[{key:"materials",get:function(){return this[X0].getElementsByType("material")}},{key:"ownerModel",get:function(){return this}}]),e}(Es);wE=wP;var bE,xE,Sm=Symbol("kernel"),Y0=Symbol("baseColorFactor"),J0=Symbol("baseColorTexture"),Z0=Symbol("metallicRoughnessTexture"),K0=Symbol("metallicFactor"),Q0=Symbol("roughnessFactor"),xP=function(a){ke(e,a);var t=Ie(e);function e(n,r){var i;ye(this,e),i=t.call(this,n),i[bE]=null,i[xE]=null,i[Sm]=n,i[Y0]=Object.freeze(r.baseColorFactor),i[K0]=r.metallicFactor,i[Q0]=r.roughnessFactor;var o=r.baseColorTexture,l=r.metallicRoughnessTexture;return o!=null&&(i[J0]=n.deserialize("texture-info",o)),l!=null&&(i[Z0]=n.deserialize("texture-info",l)),i}return Pe(e,[{key:"setBaseColorFactor",value:function(){var n=pt(regeneratorRuntime.mark(function i(o){return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this[Sm].mutate(this,"baseColorFactor",o);case 2:this[Y0]=Object.freeze(o);case 3:case"end":return u.stop()}},i,this)}));function r(i){return n.apply(this,arguments)}return r}()},{key:"setMetallicFactor",value:function(){var n=pt(regeneratorRuntime.mark(function i(o){return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this[Sm].mutate(this,"metallicFactor",o);case 2:this[K0]=o;case 3:case"end":return u.stop()}},i,this)}));function r(i){return n.apply(this,arguments)}return r}()},{key:"setRoughnessFactor",value:function(){var n=pt(regeneratorRuntime.mark(function i(o){return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this[Sm].mutate(this,"roughnessFactor",o);case 2:this[Q0]=o;case 3:case"end":return u.stop()}},i,this)}));function r(i){return n.apply(this,arguments)}return r}()},{key:"baseColorFactor",get:function(){return this[Y0]}},{key:"metallicFactor",get:function(){return this[K0]}},{key:"roughnessFactor",get:function(){return this[Q0]}},{key:"baseColorTexture",get:function(){return this[J0]}},{key:"metallicRoughnessTexture",get:function(){return this[Z0]}}]),e}(Es);bE=J0,xE=Z0;var _E,SE,ud=Symbol("kernel"),Mm=Symbol("minFilter"),Em=Symbol("magFilter"),ew=Symbol("wrapS"),tw=Symbol("wrapT"),ME=Symbol("name"),_P=function(a){ke(e,a);var t=Ie(e);function e(n,r){var i;return ye(this,e),i=t.call(this,n),i[_E]=null,i[SE]=null,i[ud]=n,i[ME]=r.name,i[Mm]=r.minFilter||null,i[Em]=r.magFilter||null,i[ew]=r.wrapS||10497,i[tw]=r.wrapT||10497,i}return Pe(e,[{key:"setMinFilter",value:function(){var n=pt(regeneratorRuntime.mark(function i(o){return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this[ud].mutate(this,"minFilter",o);case 2:this[Mm]=o;case 3:case"end":return u.stop()}},i,this)}));function r(i){return n.apply(this,arguments)}return r}()},{key:"setMagFilter",value:function(){var n=pt(regeneratorRuntime.mark(function i(o){return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this[ud].mutate(this,"magFilter",o);case 2:this[Em]=o;case 3:case"end":return u.stop()}},i,this)}));function r(i){return n.apply(this,arguments)}return r}()},{key:"setWrapS",value:function(){var n=pt(regeneratorRuntime.mark(function i(o){return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this[ud].mutate(this,"wrapS",o);case 2:this[ew]=o;case 3:case"end":return u.stop()}},i,this)}));function r(i){return n.apply(this,arguments)}return r}()},{key:"setWrapT",value:function(){var n=pt(regeneratorRuntime.mark(function i(o){return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this[ud].mutate(this,"wrapT",o);case 2:this[tw]=o;case 3:case"end":return u.stop()}},i,this)}));function r(i){return n.apply(this,arguments)}return r}()},{key:"name",get:function(){return this[ME]}},{key:"minFilter",get:function(){return this[Mm]}},{key:"magFilter",get:function(){return this[Em]}},{key:"wrapS",get:function(){return this[ew]}},{key:"wrapT",get:function(){return this[tw]}}]),e}(Es);_E=Mm,SE=Em;var EE,TE=Symbol("kernel"),Tm=Symbol("texture"),SP=function(a){ke(e,a);var t=Ie(e);function e(n,r){var i;ye(this,e),i=t.call(this,n),i[EE]=null,i[TE]=n;var o=r.texture;return o!=null&&(i[Tm]=n.deserialize("texture",o)),i}return Pe(e,[{key:"setTexture",value:function(){var n=pt(regeneratorRuntime.mark(function i(o){return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this[TE].mutate(this,"texture",o);case 2:this[Tm]=o;case 3:case"end":return u.stop()}},i,this)}));function r(i){return n.apply(this,arguments)}return r}()},{key:"texture",get:function(){return this[Tm]}}]),e}(Es);EE=Tm;var AE,CE,nw=Symbol("kernel"),Am=Symbol("source"),Cm=Symbol("sampler"),LE=Symbol("name"),MP=function(a){ke(e,a);var t=Ie(e);function e(n,r){var i;ye(this,e),i=t.call(this,n),i[AE]=null,i[CE]=null,i[nw]=n;var o=r.sampler,l=r.source,u=r.name;return i[LE]=u,o!=null&&(i[Cm]=n.deserialize("sampler",o)),l!=null&&(i[Am]=n.deserialize("image",l)),i}return Pe(e,[{key:"setSampler",value:function(){var n=pt(regeneratorRuntime.mark(function i(o){return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this[nw].mutate(this,"sampler",o);case 2:this[Cm]=o;case 3:case"end":return u.stop()}},i,this)}));function r(i){return n.apply(this,arguments)}return r}()},{key:"setSource",value:function(){var n=pt(regeneratorRuntime.mark(function i(o){return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this[nw].mutate(this,"source",o);case 2:this[Am]=o;case 3:case"end":return u.stop()}},i,this)}));function r(i){return n.apply(this,arguments)}return r}()},{key:"name",get:function(){return this[LE]}},{key:"sampler",get:function(){return this[Cm]}},{key:"source",get:function(){return this[Am]}}]),e}(Es);AE=Am,CE=Cm;var RE,PE,OE,NE,kE,IE,EP={model:bP,material:yP,"pbr-metallic-roughness":xP,image:mP,sampler:_P,texture:MP,"texture-info":SP},DE=Symbol("onMessageEvent"),rw=Symbol("messageEventHandler"),Cc=Symbol("port"),FE=Symbol("model"),Lm=Symbol("elementsByLocalId"),cd=Symbol("localIdsByElement"),hd=Symbol("elementsByType"),Rm=Symbol("pendingMutations"),BE=Symbol("nextMutationId"),TP=function(){function a(t,e){var n=this;ye(this,a),this[RE]=new Map,this[PE]=new Map,this[OE]=new Map,this[NE]=function(u){return n[DE](u)},this[kE]=new Map,this[IE]=0;for(var r=new Array("model","material","pbr-metallic-roughness","sampler","image","texture","texture-info"),i=0,o=r;i<o.length;i++){var l=o[i];this[hd].set(l,new Set)}this[Cc]=t,this[Cc].addEventListener("message",this[rw]),this[Cc].start(),this[FE]=this.deserialize("model",e)}return Pe(a,[{key:"mutate",value:function(){var t=pt(regeneratorRuntime.mark(function n(r,i,o){var l=this,u;return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(this[cd].has(r)){f.next=2;break}throw new Error("Cannot mutate unknown element");case 2:return u=this[cd].get(r),Ht(o,Es)&&(o=this[cd].get(o)),f.abrupt("return",new Promise(function(d,v){var m=l[BE]++;l[Cc].postMessage({type:Nl.MUTATE,id:u,property:i,value:o,mutationId:m}),l[Rm].set(m,{resolve:d,reject:v})}));case 5:case"end":return f.stop()}},n,this)}));function e(n,r,i){return t.apply(this,arguments)}return e}()},{key:"deserialize",value:function(e,n){var r=n.id;if(this[Lm].has(r))return this[Lm].get(r);var i=EP[e];if(i==null)throw new Error("Cannot deserialize unknown type: ".concat(e));var o=new i(this,n);return this[Lm].set(r,o),this[cd].set(o,r),this[hd].get(e).add(o),o}},{key:"getElementsByType",value:function(e){return this[hd].has(e)?Array.from(this[hd].get(e)):[]}},{key:"deactivate",value:function(){this[Cc].close(),this[Cc].removeEventListener("message",this[rw])}},{key:(RE=Lm,PE=cd,OE=hd,NE=rw,kE=Rm,IE=BE,DE),value:function(e){var n=e.data;switch(n&&n.type){case Nl.MUTATION_RESULT:{var r=n,i=r.applied,o=r.mutationId,l=this[Rm].get(o);this[Rm].delete(o),l!=null&&(i?l.resolve():l.reject());break}}}},{key:"model",get:function(){return this[FE]}}]),a}();var UE,GE=Symbol("modelGraft"),Lc=Symbol("port"),iw=Symbol("messageEventHandler"),HE=Symbol("onMessageEvent"),AP=function(){function a(t,e){var n=this;ye(this,a),this[UE]=function(r){return n[HE](r)},this[GE]=t,this[Lc]=e,this[Lc].addEventListener("message",this[iw]),this[Lc].start()}return Pe(a,[{key:"dispose",value:function(){this[Lc].removeEventListener("message",this[iw]),this[Lc].close()}},{key:(UE=iw,HE),value:function(){var t=pt(regeneratorRuntime.mark(function n(r){var i,o,l;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(i=r.data,!(i&&i.type)){c.next=12;break}if(i.type!==Nl.MUTATE){c.next=12;break}return o=!1,l=i.mutationId,c.prev=5,c.next=8,this[GE].mutate(i.id,i.property,i.value);case 8:o=!0;case 9:return c.prev=9,this[Lc].postMessage({type:Nl.MUTATION_RESULT,applied:o,mutationId:l}),c.finish(9);case 12:case"end":return c.stop()}},n,this,[[5,,9,12]])}));function e(n){return t.apply(this,arguments)}return e}()}]),a}();var CP=function(){var a=0;return function(){return a++}}(),fd=Symbol("callbacks"),zE=Symbol("visitMesh"),dd=Symbol("visitElement"),aw=Symbol("visitNode"),VE=Symbol("visitScene"),WE=Symbol("visitMaterial"),LP=function(){function a(t){ye(this,a),this[fd]=t}return Pe(a,[{key:"visit",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=!!n.allScenes,i=!!n.sparse,o=r?e.scenes||[]:e.scenes&&e.scene!=null?[e.scenes[e.scene]]:[],l={hierarchy:[],visited:new Set,sparse:i,gltf:e},u=jt(o),c;try{for(u.s();!(c=u.n()).done;){var f=c.value;this[VE](e.scenes.indexOf(f),l)}}catch(d){u.e(d)}finally{u.f()}}},{key:dd,value:function(e,n,r,i,o){if(n!=null){var l=n[e],u=r.sparse,c=r.hierarchy,f=r.visited;l!=null&&(u&&f.has(l)||(f.add(l),c.push(l),i!=null&&i(l,e,c),o!=null&&o(l),c.pop()))}}},{key:VE,value:function(e,n){var r=this,i=n.gltf,o=this[fd].scene;this[dd](e,i.scenes,n,o,function(l){if(l.nodes!=null){var u=jt(l.nodes),c;try{for(u.s();!(c=u.n()).done;){var f=c.value;r[aw](f,n)}}catch(d){u.e(d)}finally{u.f()}}})}},{key:aw,value:function(e,n){var r=this,i=n.gltf,o=this[fd].node;this[dd](e,i.nodes,n,o,function(l){if(l.mesh!=null&&r[zE](l.mesh,n),l.children!=null){var u=jt(l.children),c;try{for(u.s();!(c=u.n()).done;){var f=c.value;r[aw](f,n)}}catch(d){u.e(d)}finally{u.f()}}})}},{key:zE,value:function(e,n){var r=this,i=n.gltf,o=this[fd].mesh;this[dd](e,i.meshes,n,o,function(l){var u=jt(l.primitives),c;try{for(u.s();!(c=u.n()).done;){var f=c.value;f.material!=null&&r[WE](f.material,n)}}catch(d){u.e(d)}finally{u.f()}})}},{key:WE,value:function(e,n){var r=n.gltf,i=this[fd].material;this[dd](e,r.materials,n,i)}}]),a}();var $E,pd=Symbol("correlatedObjects"),Rc=Symbol("sourceObject"),jE=Symbol("graft"),ow=Symbol("id"),kl=function(){function a(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;ye(this,a),this[$E]=CP(),this[jE]=t,this[Rc]=e,this[pd]=n,t.adopt(this)}return Pe(a,[{key:"mutate",value:function(e,n){throw new Error("Mutation not implemented for this element")}},{key:"toJSON",value:function(){var e={id:this[ow]},n=this.name;return n!=null&&(e.name=n),e}},{key:"ownerModel",get:function(){return this[jE].model}},{key:"internalID",get:function(){return this[ow]}},{key:"name",get:function(){return this[Rc].name||null}},{key:"correlatedObjects",get:function(){return this[pd]}},{key:"sourceObject",get:function(){return this[Rc]}}]),a}();$E=ow;var qE,RP=new ac,XE=Symbol("threeTextures"),sw=Symbol("bufferViewImages"),PP=function(a){ke(e,a);var t=Ie(e);function e(n,r,i){var o;if(ye(this,e),o=t.call(this,n,r,i),o[qE]=new WeakMap,r.bufferView!=null){var l=jt(i),u;try{for(l.s();!(u=l.n()).done;){var c=u.value;o[sw].set(c,c.image)}}catch(f){l.e(f)}finally{l.f()}}return o}return Pe(e,[{key:"mutate",value:function(){var n=pt(regeneratorRuntime.mark(function i(o,l){var u,c,f,d;return regeneratorRuntime.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(u=null,o==="uri"){m.next=3;break}throw new Error('Cannot configure property "'.concat(o,'" on Image'));case 3:if(l==null){m.next=7;break}return m.next=6,new Promise(function(g,w){RP.load(l,g,void 0,w)});case 6:u=m.sent;case 7:c=jt(this[XE]);try{for(c.s();!(f=c.n()).done;)d=f.value,u==null&&this.sourceObject.bufferView!=null?d.image=this[sw].get(d):d.image=u,d.needsUpdate=!0}catch(g){c.e(g)}finally{c.f()}case 9:case"end":return m.stop()}},i,this)}));function r(i,o){return n.apply(this,arguments)}return r}()},{key:"toJSON",value:function(){var r=et(Ze(e.prototype),"toJSON",this).call(this),i=this.sourceObject.uri;return i!=null&&(r.uri=i),r}},{key:XE,get:function(){return this[pd]}}]),e}(kl);qE=sw;var OP=function(){var a=[9728,9729,9984,9985,9986,9987];return function(t){return a.indexOf(t)>-1}}(),NP=function(){var a=[9728,9729];return function(t){return a.indexOf(t)>-1}}(),kP=function(){var a=[33071,33648,10497];return function(t){return a.indexOf(t)>-1}}(),IP=function(t,e){switch(t){case"minFilter":return OP(e);case"magFilter":return NP(e);case"wrapS":case"wrapT":return kP(e);default:throw new Error('Cannot configure property "'.concat(t,'" on Sampler'))}},DP={minFilter:9987,magFilter:9729,wrapS:10497,wrapT:10497},lw=Symbol("threeTextures"),FP=function(a){ke(e,a);var t=Ie(e);Pe(e,[{key:lw,get:function(){return this[pd]}}]);function e(n,r,i){return ye(this,e),t.call(this,n,r,i)}return Pe(e,[{key:"mutate",value:function(){var n=pt(regeneratorRuntime.mark(function i(o,l){var u,c,f,d,v,m,g;return regeneratorRuntime.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(u=this.sourceObject,l!=null){if(IP(o,l)){u[o]=l,c=jt(this[lw]);try{for(c.s();!(f=c.n()).done;)d=f.value,d[o]=l,d.needsUpdate=!0}catch(x){c.e(x)}finally{c.f()}}}else if(o in u){delete u[o],v=jt(this[lw]);try{for(v.s();!(m=v.n()).done;)g=m.value,g[o]=DP[o],g.needsUpdate=!0}catch(x){v.e(x)}finally{v.f()}}case 2:case"end":return _.stop()}},i,this)}));function r(i,o){return n.apply(this,arguments)}return r}()},{key:"toJSON",value:function(){var r=et(Ze(e.prototype),"toJSON",this).call(this),i=this.sourceObject,o=i.minFilter,l=i.magFilter,u=i.wrapS,c=i.wrapT;return o!=null&&(r.minFilter=o),l!=null&&(r.magFilter=l),u!==10497&&(r.wrapS=u),c!==10497&&(r.wrapT=c),r}}]),e}(kl);var YE,JE,uw=Symbol("source"),cw=Symbol("sampler"),BP=function(a){ke(e,a);var t=Ie(e);function e(n,r,i){var o;ye(this,e),o=t.call(this,n,r,i),o[YE]=null,o[JE]=null;var l=n.correlatedSceneGraph.gltf,u=r.sampler,c=r.source;if(u!=null){var f=l.samplers&&l.samplers[u];f!=null&&(o[cw]=new FP(n,f,i))}if(c!=null){var d=l.images&&l.images[c];d!=null&&(o[uw]=new PP(n,d,i))}return o}return Pe(e,[{key:"toJSON",value:function(){var r=et(Ze(e.prototype),"toJSON",this).call(this),i=this.sampler,o=this.source;return i!=null&&(r.sampler=i.toJSON()),o!=null&&(r.source=o.toJSON()),r}},{key:"sampler",get:function(){return this[cw]}},{key:"source",get:function(){return this[uw]}}]),e}(kl);YE=uw,JE=cw;var ZE,hw=Symbol("texture"),vd=function(a){ke(e,a);var t=Ie(e);function e(n,r,i){var o;ye(this,e),o=t.call(this,n,r,i),o[ZE]=null;var l=n.correlatedSceneGraph.gltf,u=r.index,c=u!=null&&l.textures!=null?l.textures[u]:null;return c!=null&&(o[hw]=new BP(n,c,i)),o}return Pe(e,[{key:"toJSON",value:function(){var r=et(Ze(e.prototype),"toJSON",this).call(this),i=this.texture;return i!=null&&(r.texture=i.toJSON()),r}},{key:"texture",get:function(){return this[hw]}}]),e}(kl);ZE=hw;var KE,QE,Pm=Symbol("threeMaterials"),fw=Symbol("baseColorTexture"),dw=Symbol("metallicRoughnessTexture"),UP=function(a){ke(e,a);var t=Ie(e);function e(n,r,i){var o;ye(this,e),o=t.call(this,n,r,i),o[KE]=null,o[QE]=null;var l=r.baseColorTexture,u=r.metallicRoughnessTexture,c=new Set,f=new Set,d=jt(i),v;try{for(d.s();!(v=d.n()).done;){var m=v.value;l!=null&&m.map!=null&&c.add(m.map),u!=null&&m.metalnessMap!=null&&f.add(m.metalnessMap)}}catch(g){d.e(g)}finally{d.f()}return c.size>0&&(o[fw]=new vd(n,l,c)),f.size>0&&(o[dw]=new vd(n,u,f)),o}return Pe(e,[{key:"mutate",value:function(){var n=pt(regeneratorRuntime.mark(function i(o,l){var u,c,f,d,v,m,g,w,_,x,y,E;return regeneratorRuntime.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(["baseColorFactor","metallicFactor","roughnessFactor"].includes(o)){A.next=2;break}throw new Error("Cannot mutate ".concat(o," on PBRMetallicRoughness"));case 2:A.t0=o,A.next=A.t0==="baseColorFactor"?5:A.t0==="metallicFactor"?8:A.t0==="roughnessFactor"?11:14;break;case 5:u=jt(this[Pm]);try{for(u.s();!(c=u.n()).done;)f=c.value,f.color.fromArray(l),f.opacity=l[3],d=this[Rc],l===1&&l===1&&l===1&&l===1?delete d.baseColorFactor:d.baseColorFactor=l}catch(T){u.e(T)}finally{u.f()}return A.abrupt("break",14);case 8:v=jt(this[Pm]);try{for(v.s();!(m=v.n()).done;)g=m.value,g.metalness=l,w=this[Rc],w.metallicFactor=l}catch(T){v.e(T)}finally{v.f()}return A.abrupt("break",14);case 11:_=jt(this[Pm]);try{for(_.s();!(x=_.n()).done;)y=x.value,y.roughness=l,E=this[Rc],E.roughnessFactor=l}catch(T){_.e(T)}finally{_.f()}return A.abrupt("break",14);case 14:case"end":return A.stop()}},i,this)}));function r(i,o){return n.apply(this,arguments)}return r}()},{key:"toJSON",value:function(){var r=et(Ze(e.prototype),"toJSON",this).call(this),i=this.baseColorTexture,o=this.metallicRoughnessTexture,l=this.baseColorFactor,u=this.roughnessFactor,c=this.metallicFactor;return i!=null&&(r.baseColorTexture=i.toJSON()),l!=null&&(r.baseColorFactor=l),c!=null&&(r.metallicFactor=c),u!=null&&(r.roughnessFactor=u),o!=null&&(r.metallicRoughnessTexture=o.toJSON()),r}},{key:(KE=fw,QE=dw,Pm),get:function(){return this[pd]}},{key:"baseColorFactor",get:function(){return this.sourceObject.baseColorFactor||[1,1,1,1]}},{key:"metallicFactor",get:function(){return this.sourceObject.metallicFactor||0}},{key:"roughnessFactor",get:function(){return this.sourceObject.roughnessFactor||0}},{key:"baseColorTexture",get:function(){return this[fw]}},{key:"metallicRoughnessTexture",get:function(){return this[dw]}}]),e}(kl);var eT,tT,nT,rT,pw=Symbol("pbrMetallicRoughness"),vw=Symbol("normalTexture"),mw=Symbol("occlusionTexture"),gw=Symbol("emissiveTexture"),GP=function(a){ke(e,a);var t=Ie(e);function e(n,r,i){var o;ye(this,e),o=t.call(this,n,r,i),o[eT]=null,o[tT]=null,o[nT]=null,o[rT]=null;var l=r.pbrMetallicRoughness,u=r.normalTexture,c=r.occlusionTexture,f=r.emissiveTexture;l!=null&&(o[pw]=new UP(n,l,i));var d=new Set,v=new Set,m=new Set,g=jt(i),w;try{for(g.s();!(w=g.n()).done;){var _=w.value,x=_.normalMap,y=_.aoMap,E=_.emissiveMap;u!=null&&x!=null&&d.add(x),c!=null&&y!=null&&v.add(y),f!=null&&E!=null&&m.add(E)}}catch(R){g.e(R)}finally{g.f()}return d.size>0&&(o[vw]=new vd(n,u,d)),v.size>0&&(o[mw]=new vd(n,c,v)),m.size>0&&(o[gw]=new vd(n,f,m)),o}return Pe(e,[{key:"toJSON",value:function(){var r=et(Ze(e.prototype),"toJSON",this).call(this),i=this.pbrMetallicRoughness,o=this.normalTexture,l=this.occlusionTexture,u=this.emissiveTexture;return i!=null&&(r.pbrMetallicRoughness=i.toJSON()),o!=null&&(r.normalTexture=o.toJSON()),l!=null&&(r.occlusionTexture=l.toJSON()),u!=null&&(r.emissiveTexture=u.toJSON()),r}},{key:"pbrMetallicRoughness",get:function(){return this[pw]}},{key:"normalTexture",get:function(){return this[vw]}},{key:"occlusionTexture",get:function(){return this[mw]}},{key:"emissiveTexture",get:function(){return this[gw]}}]),e}(kl);eT=pw,tT=vw,nT=mw,rT=gw;var iT,aT,yw=Symbol("modelUri"),Om=Symbol("materials"),HP=function(a){ke(e,a);var t=Ie(e);function e(n,r,i){var o;ye(this,e),o=t.call(this,n,i.gltf),o[iT]="",o[aT]=[],o[yw]=r;var l=new LP({material:function(c){o[Om].push(new GP(n,c,i.gltfElementMap.get(c)))}});return l.visit(i.gltf,{sparse:!0}),o}return Pe(e,[{key:"toJSON",value:function(){var r=et(Ze(e.prototype),"toJSON",this).call(this);return r.modelUri=this[yw],r.materials=this[Om].map(function(i){return i.toJSON()}),r}},{key:"materials",get:function(){return this[Om]}}]),e}(kl);iT=yw,aT=Om;var oT,sT,lT=Symbol("model"),uT=Symbol("correlatedSceneGraph"),ww=Symbol("elementsByInternalId"),Nm=Symbol("eventDelegate"),zP=function(){function a(t,e){var n=this;ye(this,a),this[oT]=document.createDocumentFragment(),this.addEventListener=function(){var r;return(r=n[Nm]).addEventListener.apply(r,arguments)},this.removeEventListener=function(){var r;return(r=n[Nm]).removeEventListener.apply(r,arguments)},this.dispatchEvent=function(){var r;return(r=n[Nm]).dispatchEvent.apply(r,arguments)},this[sT]=new Map,this[uT]=e,this[lT]=new HP(this,t,e)}return Pe(a,[{key:"getElementByInternalId",value:function(e){var n=this[ww].get(e);return n??null}},{key:"adopt",value:function(e){this[ww].set(e.internalID,e)}},{key:"mutate",value:function(){var t=pt(regeneratorRuntime.mark(function n(r,i,o){var l;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return l=this.getElementByInternalId(r),c.next=3,l.mutate(i,o);case 3:this.dispatchEvent(new CustomEvent("mutation",{detail:{element:l}}));case 4:case"end":return c.stop()}},n,this)}));function e(n,r,i){return t.apply(this,arguments)}return e}()},{key:"correlatedSceneGraph",get:function(){return this[uT]}},{key:"model",get:function(){return this[lT]}}]),a}();oT=Nm,sT=ww;var rn={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,FLOAT:5126,UNSIGNED_INT:5125,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},di={};di[an]=rn.NEAREST,di[Vi]=rn.NEAREST_MIPMAP_NEAREST,di[Xa]=rn.NEAREST_MIPMAP_LINEAR,di[sn]=rn.LINEAR,di[Ds]=rn.LINEAR_MIPMAP_NEAREST,di[ga]=rn.LINEAR_MIPMAP_LINEAR,di[Xn]=rn.CLAMP_TO_EDGE,di[bi]=rn.REPEAT,di[qa]=rn.MIRRORED_REPEAT;var cT={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},md=function(){};md.prototype={constructor:md,parse:function(t,e,n){var r={binary:!1,trs:!1,onlyVisible:!0,truncateDrawRange:!0,embedImages:!0,maxTextureSize:1/0,animations:[],forcePowerOfTwoTextures:!1,includeCustomExtensions:!1};n=Object.assign({},r,n),n.animations.length>0&&(n.trs=!0);var i={asset:{version:"2.0",generator:"GLTFExporter"}},o=0,l=[],u=[],c=new Map,f=[],d={},v={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map},m,g=new Map,w=0;function _(M){return g.has(M)||g.set(M,w++),g.get(M)}function x(M,O){return M.length===O.length&&M.every(function(N,W){return N===O[W]})}function y(M){if(window.TextEncoder!==void 0)return new TextEncoder().encode(M).buffer;for(var O=new Uint8Array(new ArrayBuffer(M.length)),N=0,W=M.length;N<W;N++){var ie=M.charCodeAt(N);O[N]=ie>255?32:ie}return O.buffer}function E(M,O,N){for(var W={min:new Array(M.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(M.itemSize).fill(Number.NEGATIVE_INFINITY)},ie=O;ie<O+N;ie++)for(var te=0;te<M.itemSize;te++){var se=M.array[ie*M.itemSize+te];W.min[te]=Math.min(W.min[te],se),W.max[te]=Math.max(W.max[te],se)}return W}function R(M){return lt.isPowerOfTwo(M.width)&&lt.isPowerOfTwo(M.height)}function A(M){if(v.attributesNormalized.has(M))return!1;for(var O=new D,N=0,W=M.count;N<W;N++)if(Math.abs(O.fromArray(M.array,N*3).length()-1)>5e-4)return!1;return!0}function T(M){if(v.attributesNormalized.has(M))return v.attributesNormalized.get(M);for(var O=M.clone(),N=new D,W=0,ie=O.count;W<ie;W++)N.fromArray(O.array,W*3),N.x===0&&N.y===0&&N.z===0?N.setX(1):N.normalize(),N.toArray(O.array,W*3);return v.attributesNormalized.set(M,O),O}function C(M){return Math.ceil(M/4)*4}function I(M,O){O=O||0;var N=C(M.byteLength);if(N!==M.byteLength){var W=new Uint8Array(N);if(W.set(new Uint8Array(M)),O!==0)for(var ie=M.byteLength;ie<N;ie++)W[ie]=O;return W.buffer}return M}function j(M,O){if(Object.keys(M.userData).length!==0)try{var N=JSON.parse(JSON.stringify(M.userData));if(n.includeCustomExtensions&&N.gltfExtensions){O.extensions===void 0&&(O.extensions={});for(var W in N.gltfExtensions)O.extensions[W]=N.gltfExtensions[W],d[W]=!0;delete N.gltfExtensions}Object.keys(N).length>0&&(O.extras=N)}catch(ie){console.warn("THREE.GLTFExporter: userData of '"+M.name+"' won't be serialized because of JSON.stringify error - "+ie.message)}}function U(M,O){var N=!1,W={};(O.offset.x!==0||O.offset.y!==0)&&(W.offset=O.offset.toArray(),N=!0),O.rotation!==0&&(W.rotation=O.rotation,N=!0),(O.repeat.x!==1||O.repeat.y!==1)&&(W.scale=O.repeat.toArray(),N=!0),N&&(M.extensions=M.extensions||{},M.extensions.KHR_texture_transform=W,d.KHR_texture_transform=!0)}function B(M){return i.buffers||(i.buffers=[{byteLength:0}]),l.push(M),0}function Z(M,O,N,W,ie){i.bufferViews||(i.bufferViews=[]);var te;O===rn.UNSIGNED_BYTE?te=1:O===rn.UNSIGNED_SHORT?te=2:te=4;for(var se=C(W*M.itemSize*te),ce=new DataView(new ArrayBuffer(se)),be=0,Te=N;Te<N+W;Te++)for(var Ee=0;Ee<M.itemSize;Ee++){var F;M.itemSize>4?F=M.array[Te*M.itemSize+Ee]:Ee===0?F=M.getX(Te):Ee===1?F=M.getY(Te):Ee===2?F=M.getZ(Te):Ee===3&&(F=M.getW(Te)),O===rn.FLOAT?ce.setFloat32(be,F,!0):O===rn.UNSIGNED_INT?ce.setUint32(be,F,!0):O===rn.UNSIGNED_SHORT?ce.setUint16(be,F,!0):O===rn.UNSIGNED_BYTE&&ce.setUint8(be,F),be+=te}var V={buffer:B(ce.buffer),byteOffset:o,byteLength:se};ie!==void 0&&(V.target=ie),ie===rn.ARRAY_BUFFER&&(V.byteStride=M.itemSize*te),o+=se,i.bufferViews.push(V);var Me={id:i.bufferViews.length-1,byteLength:0};return Me}function Q(M){return i.bufferViews||(i.bufferViews=[]),new Promise(function(O){var N=new window.FileReader;N.readAsArrayBuffer(M),N.onloadend=function(){var W=I(N.result),ie={buffer:B(W),byteOffset:o,byteLength:W.byteLength};o+=W.byteLength,i.bufferViews.push(ie),O(i.bufferViews.length-1)}})}function J(M,O,N,W){var ie={1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",16:"MAT4"},te;if(M.array.constructor===Float32Array)te=rn.FLOAT;else if(M.array.constructor===Uint32Array)te=rn.UNSIGNED_INT;else if(M.array.constructor===Uint16Array)te=rn.UNSIGNED_SHORT;else if(M.array.constructor===Uint8Array)te=rn.UNSIGNED_BYTE;else throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type.");if(N===void 0&&(N=0),W===void 0&&(W=M.count),n.truncateDrawRange&&O!==void 0&&O.index===null){var se=N+W,ce=O.drawRange.count===1/0?M.count:O.drawRange.start+O.drawRange.count;N=Math.max(N,O.drawRange.start),W=Math.min(se,ce)-N,W<0&&(W=0)}if(W===0)return null;var be=E(M,N,W),Te;O!==void 0&&(Te=M===O.index?rn.ELEMENT_ARRAY_BUFFER:rn.ARRAY_BUFFER);var Ee=Z(M,te,N,W,Te),F={bufferView:Ee.id,byteOffset:Ee.byteOffset,componentType:te,count:W,max:be.max,min:be.min,type:ie[M.itemSize]};return M.normalized===!0&&(F.normalized=!0),i.accessors||(i.accessors=[]),i.accessors.push(F),i.accessors.length-1}function q(M,O,N){v.images.has(M)||v.images.set(M,{});var W=v.images.get(M),ie=O===Lr?"image/png":"image/jpeg",te=ie+":flipY/"+N.toString();if(W[te]!==void 0)return W[te];i.images||(i.images=[]);var se={mimeType:ie};if(n.embedImages){var ce=m=m||document.createElement("canvas");ce.width=Math.min(M.width,n.maxTextureSize),ce.height=Math.min(M.height,n.maxTextureSize),n.forcePowerOfTwoTextures&&!R(ce)&&(console.warn("GLTFExporter: Resized non-power-of-two image.",M),ce.width=lt.floorPowerOfTwo(ce.width),ce.height=lt.floorPowerOfTwo(ce.height));var be=ce.getContext("2d");N===!0&&(be.translate(0,ce.height),be.scale(1,-1)),be.drawImage(M,0,0,ce.width,ce.height),n.binary===!0?u.push(new Promise(function(Ee){ce.toBlob(function(F){Q(F).then(function(V){se.bufferView=V,Ee()})},ie)})):se.uri=ce.toDataURL(ie)}else se.uri=M.src;i.images.push(se);var Te=i.images.length-1;return W[te]=Te,Te}function Y(M){i.samplers||(i.samplers=[]);var O={magFilter:di[M.magFilter],minFilter:di[M.minFilter],wrapS:di[M.wrapS],wrapT:di[M.wrapT]};return i.samplers.push(O),i.samplers.length-1}function ee(M){if(v.textures.has(M))return v.textures.get(M);i.textures||(i.textures=[]);var O={sampler:Y(M),source:q(M.image,M.format,M.flipY)};M.name&&(O.name=M.name),i.textures.push(O);var N=i.textures.length-1;return v.textures.set(M,N),N}function le(M){if(v.materials.has(M))return v.materials.get(M);if(M.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;i.materials||(i.materials=[]);var O={pbrMetallicRoughness:{}};M.isMeshBasicMaterial?(O.extensions={KHR_materials_unlit:{}},d.KHR_materials_unlit=!0):M.isGLTFSpecularGlossinessMaterial?(O.extensions={KHR_materials_pbrSpecularGlossiness:{}},d.KHR_materials_pbrSpecularGlossiness=!0):M.isMeshStandardMaterial||console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");var N=M.color.toArray().concat([M.opacity]);if(x(N,[1,1,1,1])||(O.pbrMetallicRoughness.baseColorFactor=N),M.isMeshStandardMaterial?(O.pbrMetallicRoughness.metallicFactor=M.metalness,O.pbrMetallicRoughness.roughnessFactor=M.roughness):M.isMeshBasicMaterial?(O.pbrMetallicRoughness.metallicFactor=0,O.pbrMetallicRoughness.roughnessFactor=.9):(O.pbrMetallicRoughness.metallicFactor=.5,O.pbrMetallicRoughness.roughnessFactor=.5),M.isGLTFSpecularGlossinessMaterial){O.pbrMetallicRoughness.baseColorFactor&&(O.extensions.KHR_materials_pbrSpecularGlossiness.diffuseFactor=O.pbrMetallicRoughness.baseColorFactor);var W=[1,1,1];M.specular.toArray(W,0),O.extensions.KHR_materials_pbrSpecularGlossiness.specularFactor=W,O.extensions.KHR_materials_pbrSpecularGlossiness.glossinessFactor=M.glossiness}if(M.metalnessMap||M.roughnessMap)if(M.metalnessMap===M.roughnessMap){var ie={index:ee(M.metalnessMap)};U(ie,M.metalnessMap),O.pbrMetallicRoughness.metallicRoughnessTexture=ie}else console.warn("THREE.GLTFExporter: Ignoring metalnessMap and roughnessMap because they are not the same Texture.");if(M.map){var te={index:ee(M.map)};U(te,M.map),M.isGLTFSpecularGlossinessMaterial&&(O.extensions.KHR_materials_pbrSpecularGlossiness.diffuseTexture=te),O.pbrMetallicRoughness.baseColorTexture=te}if(M.isGLTFSpecularGlossinessMaterial&&M.specularMap){var se={index:ee(M.specularMap)};U(se,M.specularMap),O.extensions.KHR_materials_pbrSpecularGlossiness.specularGlossinessTexture=se}if(M.emissive){var ce=M.emissive.clone().multiplyScalar(M.emissiveIntensity).toArray();if(x(ce,[0,0,0])||(O.emissiveFactor=ce),M.emissiveMap){var be={index:ee(M.emissiveMap)};U(be,M.emissiveMap),O.emissiveTexture=be}}if(M.normalMap){var Te={index:ee(M.normalMap)};M.normalScale&&M.normalScale.x!==-1&&(M.normalScale.x!==M.normalScale.y&&console.warn("THREE.GLTFExporter: Normal scale components are different, ignoring Y and exporting X."),Te.scale=M.normalScale.x),U(Te,M.normalMap),O.normalTexture=Te}if(M.aoMap){var Ee={index:ee(M.aoMap),texCoord:1};M.aoMapIntensity!==1&&(Ee.strength=M.aoMapIntensity),U(Ee,M.aoMap),O.occlusionTexture=Ee}M.transparent?O.alphaMode="BLEND":M.alphaTest>0&&(O.alphaMode="MASK",O.alphaCutoff=M.alphaTest),M.side===wi&&(O.doubleSided=!0),M.name!==""&&(O.name=M.name),j(M,O),i.materials.push(O);var F=i.materials.length-1;return v.materials.set(M,F),F}function ue(M){var O=[M.geometry.uuid];if(Array.isArray(M.material))for(var N=0,W=M.material.length;N<W;N++)O.push(M.material[N].uuid);else O.push(M.material.uuid);var ie=O.join(":");if(v.meshes.has(ie))return v.meshes.get(ie);var te=M.geometry,se;M.isLineSegments?se=rn.LINES:M.isLineLoop?se=rn.LINE_LOOP:M.isLine?se=rn.LINE_STRIP:M.isPoints?se=rn.POINTS:se=M.material.wireframe?rn.LINES:rn.TRIANGLES,te.isBufferGeometry||(console.warn("GLTFExporter: Exporting THREE.Geometry will increase file size. Use BufferGeometry instead."),te=new dt().setFromObject(M));var ce={},be={},Te=[],Ee=[],F={uv:"TEXCOORD_0",uv2:"TEXCOORD_1",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},V=te.getAttribute("normal");V!==void 0&&!A(V)&&(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),te.setAttribute("normal",T(V)));var Me=null;for(var ge in te.attributes)if(ge.substr(0,5)!=="morph"){var De=te.attributes[ge];ge=F[ge]||ge.toUpperCase();var re=/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/;if(re.test(ge)||(ge="_"+ge),v.attributes.has(_(De))){be[ge]=v.attributes.get(_(De));continue}Me=null;var Fe=De.array;ge==="JOINTS_0"&&!Ht(Fe,Uint16Array)&&!Ht(Fe,Uint8Array)&&(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),Me=new at(new Uint16Array(Fe),De.itemSize,De.normalized));var Be=J(Me||De,te);Be!==null&&(be[ge]=Be,v.attributes.set(_(De),Be))}if(V!==void 0&&te.setAttribute("normal",V),Object.keys(be).length===0)return null;if(M.morphTargetInfluences!==void 0&&M.morphTargetInfluences.length>0){var je=[],Ue=[],Ae={};if(M.morphTargetDictionary!==void 0)for(var ct in M.morphTargetDictionary)Ae[M.morphTargetDictionary[ct]]=ct;for(var N=0;N<M.morphTargetInfluences.length;++N){var ft={},en=!1;for(var ge in te.morphAttributes){if(ge!=="position"&&ge!=="normal"){en||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),en=!0);continue}var De=te.morphAttributes[ge][N],Ft=ge.toUpperCase(),_t=te.attributes[ge];if(v.attributes.has(_(De))){ft[Ft]=v.attributes.get(_(De));continue}var Bt=De.clone();if(!te.morphTargetsRelative)for(var $t=0,pi=De.count;$t<pi;$t++)Bt.setXYZ($t,De.getX($t)-_t.getX($t),De.getY($t)-_t.getY($t),De.getZ($t)-_t.getZ($t));ft[Ft]=J(Bt,te),v.attributes.set(_(_t),ft[Ft])}Ee.push(ft),je.push(M.morphTargetInfluences[N]),M.morphTargetDictionary!==void 0&&Ue.push(Ae[N])}ce.weights=je,Ue.length>0&&(ce.extras={},ce.extras.targetNames=Ue)}var Ln=Array.isArray(M.material);if(Ln&&te.groups.length===0)return null;for(var er=Ln?M.material:[M.material],kn=Ln?te.groups:[{materialIndex:0,start:void 0,count:void 0}],N=0,In=kn.length;N<In;N++){var Mn={mode:se,attributes:be};if(j(te,Mn),Ee.length>0&&(Mn.targets=Ee),te.index!==null){var pr=_(te.index);(kn[N].start!==void 0||kn[N].count!==void 0)&&(pr+=":"+kn[N].start+":"+kn[N].count),v.attributes.has(pr)?Mn.indices=v.attributes.get(pr):(Mn.indices=J(te.index,te,kn[N].start,kn[N].count),v.attributes.set(pr,Mn.indices)),Mn.indices===null&&delete Mn.indices}var Ui=le(er[kn[N].materialIndex]);Ui!==null&&(Mn.material=Ui),Te.push(Mn)}ce.primitives=Te,i.meshes||(i.meshes=[]),i.meshes.push(ce);var Rn=i.meshes.length-1;return v.meshes.set(ie,Rn),Rn}function he(M){i.cameras||(i.cameras=[]);var O=M.isOrthographicCamera,N={type:O?"orthographic":"perspective"};return O?N.orthographic={xmag:M.right*2,ymag:M.top*2,zfar:M.far<=0?.001:M.far,znear:M.near<0?0:M.near}:N.perspective={aspectRatio:M.aspect,yfov:lt.degToRad(M.fov),zfar:M.far<=0?.001:M.far,znear:M.near<0?0:M.near},M.name!==""&&(N.name=M.type),i.cameras.push(N),i.cameras.length-1}function pe(M,O){i.animations||(i.animations=[]),M=md.Utils.mergeMorphTargetTracks(M.clone(),O);for(var N=M.tracks,W=[],ie=[],te=0;te<N.length;++te){var se=N[te],ce=Vn.parseTrackName(se.name),be=Vn.findNode(O,ce.nodeName),Te=cT[ce.propertyName];if(ce.objectName==="bones"&&(be.isSkinnedMesh===!0?be=be.skeleton.getBoneByName(ce.objectIndex):be=void 0),!be||!Te)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',se.name),null;var Ee=1,F=se.values.length/se.times.length;Te===cT.morphTargetInfluences&&(F/=be.morphTargetInfluences.length);var V;se.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline===!0?(V="CUBICSPLINE",F/=3):se.getInterpolation()===nr?V="STEP":V="LINEAR",ie.push({input:J(new at(se.times,Ee)),output:J(new at(se.values,F)),interpolation:V}),W.push({sampler:ie.length-1,target:{node:c.get(be),path:Te}})}return i.animations.push({name:M.name||"clip_"+i.animations.length,samplers:ie,channels:W}),i.animations.length-1}function de(M){var O=i.nodes[c.get(M)],N=M.skeleton;if(N===void 0)return null;var W=M.skeleton.bones[0];if(W===void 0)return null;for(var ie=[],te=new Float32Array(N.bones.length*16),se=0;se<N.bones.length;++se)ie.push(c.get(N.bones[se])),N.boneInverses[se].toArray(te,se*16);i.skins===void 0&&(i.skins=[]),i.skins.push({inverseBindMatrices:J(new at(te,16)),joints:ie,skeleton:c.get(W)});var ce=O.skin=i.skins.length-1;return ce}function Oe(M){var O={};M.name&&(O.name=M.name),O.color=M.color.toArray(),O.intensity=M.intensity,M.isDirectionalLight?O.type="directional":M.isPointLight?(O.type="point",M.distance>0&&(O.range=M.distance)):M.isSpotLight&&(O.type="spot",M.distance>0&&(O.range=M.distance),O.spot={},O.spot.innerConeAngle=(M.penumbra-1)*M.angle*-1,O.spot.outerConeAngle=M.angle),M.decay!==void 0&&M.decay!==2&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),M.target&&(M.target.parent!==M||M.target.position.x!==0||M.target.position.y!==0||M.target.position.z!==-1)&&console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1.");var N=i.extensions.KHR_lights_punctual.lights;return N.push(O),N.length-1}function H(M){i.nodes||(i.nodes=[]);var O={};if(n.trs){var N=M.quaternion.toArray(),W=M.position.toArray(),ie=M.scale.toArray();x(N,[0,0,0,1])||(O.rotation=N),x(W,[0,0,0])||(O.translation=W),x(ie,[1,1,1])||(O.scale=ie)}else M.matrixAutoUpdate&&M.updateMatrix(),x(M.matrix.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])||(O.matrix=M.matrix.elements);if(M.name!==""&&(O.name=String(M.name)),j(M,O),M.isMesh||M.isLine||M.isPoints){var te=ue(M);te!==null&&(O.mesh=te)}else if(M.isCamera)O.camera=he(M);else if(M.isDirectionalLight||M.isPointLight||M.isSpotLight)d.KHR_lights_punctual||(i.extensions=i.extensions||{},i.extensions.KHR_lights_punctual={lights:[]},d.KHR_lights_punctual=!0),O.extensions=O.extensions||{},O.extensions.KHR_lights_punctual={light:Oe(M)};else if(M.isLight)return console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",M),null;if(M.isSkinnedMesh&&f.push(M),M.children.length>0){for(var se=[],ce=0,be=M.children.length;ce<be;ce++){var Te=M.children[ce];if(Te.visible||n.onlyVisible===!1){var Ee=H(Te);Ee!==null&&se.push(Ee)}}se.length>0&&(O.children=se)}i.nodes.push(O);var F=i.nodes.length-1;return c.set(M,F),F}function L(M){i.scenes||(i.scenes=[],i.scene=0);var O={};M.name!==""&&(O.name=M.name),i.scenes.push(O);for(var N=[],W=0,ie=M.children.length;W<ie;W++){var te=M.children[W];if(te.visible||n.onlyVisible===!1){var se=H(te);se!==null&&N.push(se)}}N.length>0&&(O.nodes=N),j(M,O)}function G(M){var O=new sl;O.name="AuxScene";for(var N=0;N<M.length;N++)O.children.push(M[N]);L(O)}function z(M){M=Ht(M,Array)?M:[M];for(var O=[],N=0;N<M.length;N++)Ht(M[N],sl)?L(M[N]):O.push(M[N]);O.length>0&&G(O);for(var N=0;N<f.length;++N)de(f[N]);for(var N=0;N<n.animations.length;++N)pe(n.animations[N],M[0])}z(t),Promise.all(u).then(function(){var M=new Blob(l,{type:"application/octet-stream"}),O=Object.keys(d);if(O.length>0&&(i.extensionsUsed=O),i.buffers&&i.buffers.length>0&&(i.buffers[0].byteLength=M.size),n.binary===!0){var N=12,W=1179937895,ie=2,te=8,se=1313821514,ce=5130562,be=new window.FileReader;be.readAsArrayBuffer(M),be.onloadend=function(){var Te=I(be.result),Ee=new DataView(new ArrayBuffer(te));Ee.setUint32(0,Te.byteLength,!0),Ee.setUint32(4,ce,!0);var F=I(y(JSON.stringify(i)),32),V=new DataView(new ArrayBuffer(te));V.setUint32(0,F.byteLength,!0),V.setUint32(4,se,!0);var Me=new ArrayBuffer(N),ge=new DataView(Me);ge.setUint32(0,W,!0),ge.setUint32(4,ie,!0);var De=N+V.byteLength+F.byteLength+Ee.byteLength+Te.byteLength;ge.setUint32(8,De,!0);var re=new Blob([Me,V,F,Ee,Te],{type:"application/octet-stream"}),Fe=new window.FileReader;Fe.readAsArrayBuffer(re),Fe.onloadend=function(){e(Fe.result)}}}else if(i.buffers&&i.buffers.length>0){var be=new window.FileReader;be.readAsDataURL(M),be.onloadend=function(){var Ee=be.result;i.buffers[0].uri=Ee,e(i)}}else e(i)})}},md.Utils={insertKeyframe:function(t,e){var n=.001,r=t.getValueSize(),i=new t.TimeBufferType(t.times.length+1),o=new t.ValueBufferType(t.values.length+r),l=t.createInterpolant(new t.ValueBufferType(r)),u;if(t.times.length===0){i[0]=e;for(var c=0;c<r;c++)o[c]=0;u=0}else if(e<t.times[0]){if(Math.abs(t.times[0]-e)<n)return 0;i[0]=e,i.set(t.times,1),o.set(l.evaluate(e),0),o.set(t.values,r),u=0}else if(e>t.times[t.times.length-1]){if(Math.abs(t.times[t.times.length-1]-e)<n)return t.times.length-1;i[i.length-1]=e,i.set(t.times,0),o.set(t.values,0),o.set(l.evaluate(e),t.values.length),u=i.length-1}else for(var c=0;c<t.times.length;c++){if(Math.abs(t.times[c]-e)<n)return c;if(t.times[c]<e&&t.times[c+1]>e){i.set(t.times.slice(0,c+1),0),i[c+1]=e,i.set(t.times.slice(c+1),c+2),o.set(t.values.slice(0,(c+1)*r),0),o.set(l.evaluate(e),(c+1)*r),o.set(t.values.slice((c+1)*r),(c+2)*r),u=c+1;break}}return t.times=i,t.values=o,u},mergeMorphTargetTracks:function(t,e){for(var n=[],r={},i=t.tracks,o=0;o<i.length;++o){var l=i[o],u=Vn.parseTrackName(l.name),c=Vn.findNode(e,u.nodeName);if(u.propertyName!=="morphTargetInfluences"||u.propertyIndex===void 0){n.push(l);continue}if(l.createInterpolant!==l.InterpolantFactoryMethodDiscrete&&l.createInterpolant!==l.InterpolantFactoryMethodLinear){if(l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),l=l.clone(),l.setInterpolation(Ya)}var f=c.morphTargetInfluences.length,d=c.morphTargetDictionary[u.propertyIndex];if(d===void 0)throw new Error("THREE.GLTFExporter: Morph target name not found: "+u.propertyIndex);var v;if(r[c.uuid]===void 0){v=l.clone();for(var m=new v.ValueBufferType(f*v.times.length),g=0;g<v.times.length;g++)m[g*f+d]=v.values[g];v.name=u.nodeName+".morphTargetInfluences",v.values=m,r[c.uuid]=v,n.push(v);continue}var w=l.createInterpolant(new l.ValueBufferType(1));v=r[c.uuid];for(var g=0;g<v.times.length;g++)v.values[g*f+d]=w.evaluate(v.times[g]);for(var g=0;g<l.times.length;g++){var _=this.insertKeyframe(v,l.times[g]);v.values[_*f+d]=l.values[g]}}return t.tracks=n,t}};var VP=function(a,t,e,n){var r=arguments.length,i=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n,o;typeof Reflect=="undefined"||cn(Reflect);for(var l=a.length-1;l>=0;l--)(o=a[l])&&(i=(r<3?o(i):r>3?o(t,e,i):o(t,e))||i);return r>3&&i&&Object.defineProperty(t,e,i),i},hT=Symbol("updateThreeSide"),bw=Symbol("currentGLTF"),Pc=Symbol("modelGraft"),gd=Symbol("mainPort"),Oc=Symbol("threePort"),yd=Symbol("manipulator"),Il=Symbol("modelKernel"),fT=Symbol("onModelChange"),xw=Symbol("onModelGraftMutation"),WP=function(t){var e,n,r,i,o,l,u,c,f=function(d){ke(m,d);var v=Ie(m);function m(){var g;return ye(this,m),g=v.apply(this,arguments),g[c]=null,g[e]=null,g[n]=null,g[r]=null,g[i]=null,g[o]=null,g[l]=function(w){var _=w.data;if(_&&_.type===Nl.MODEL_CHANGE){var x=_.model,y=g[Il];if(y!=null)y.deactivate();else if(x==null)return;x!=null?g[Il]=new TP(_.port,x):g[Il]=null,g.dispatchEvent(new CustomEvent("scene-graph-ready",{detail:{url:x?x.modelUri:null}}))}},g[u]=function(w){g[ha]()},g}return Pe(m,[{key:"connectedCallback",value:function(){et(Ze(m.prototype),"connectedCallback",this).call(this);var w=new MessageChannel,_=w.port1,x=w.port2;_.start(),x.start(),this[gd]=_,this[Oc]=x,this[gd].onmessage=this[fT]}},{key:"disconnectedCallback",value:function(){et(Ze(m.prototype),"disconnectedCallback",this).call(this),this[gd].close(),this[Oc].close(),this[gd]=null,this[Oc]=null,this[yd]!=null&&this[yd].dispose(),this[Il]!=null&&this[Il].deactivate()}},{key:"updated",value:function(w){if(et(Ze(m.prototype),"updated",this).call(this,w),w.has(Pc)){var _=w.get(Pc);_!=null&&_.removeEventListener("mutation",this[xw]);var x=this[Pc];x!=null&&x.addEventListener("mutation",this[xw])}}},{key:(c=Pc,e=bw,n=gd,r=Oc,i=yd,o=Il,bo),value:function(){et(Ze(m.prototype),bo,this).call(this),this[hT]()}},{key:hT,value:function(){var w=this[rt],_=w.model,x=_.currentGLTF,y=null,E=null;if(x!=null){var R=x.correlatedSceneGraph,A=this[Pc],T=this[yd];if(R!=null){if(T!=null&&T.dispose(),A!=null&&x===this[bw])return;y=new zP(_.url||"",R);var C=null;y!=null&&y.model!=null?(C=new MessageChannel,E=new AP(y,C.port1),this[Oc].postMessage({type:Nl.MODEL_CHANGE,model:y.model.toJSON(),port:C.port2},[C.port2])):this[Oc].postMessage({type:Nl.MODEL_CHANGE,model:null,port:null})}}this[Pc]=y,this[yd]=E,this[bw]=x}},{key:"exportScene",value:function(){var g=pt(regeneratorRuntime.mark(function _(x){var y;return regeneratorRuntime.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return y=this[rt].model,R.abrupt("return",new Promise(function(){var A=pt(regeneratorRuntime.mark(function T(C,I){var j,U,B,Z;return regeneratorRuntime.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(y!=null){J.next=2;break}return J.abrupt("return",I("Model missing or not yet loaded"));case 2:j={binary:!0,onlyVisible:!0,maxTextureSize:1/0,forcePowerOfTwoTextures:!1,includeCustomExtensions:!1,embedImages:!0},Object.assign(j,x),j.animations=y.animations,j.truncateDrawRange=!0,U=y[ys],B=!1,U!=null&&(B=U.visible,U.visible=!1),Z=new md,Z.parse(y.modelContainer,function(q){return C(new Blob([j.binary?q:JSON.stringify(q)],{type:j.binary?"application/octet-stream":"application/json"}))},j),U!=null&&(U.visible=B);case 12:case"end":return J.stop()}},T)}));return function(T,C){return A.apply(this,arguments)}}()));case 2:case"end":return R.stop()}},_,this)}));function w(_){return g.apply(this,arguments)}return w}()},{key:"model",get:function(){var w=this[Il];return w?w.model:void 0}}]),m}(t);return l=fT,u=xw,VP([It({type:Object})],f.prototype,c,void 0),f},_w=function(a,t,e,n){var r=arguments.length,i=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n,o;typeof Reflect=="undefined"||cn(Reflect);for(var l=a.length-1;l>=0;l--)(o=a[l])&&(i=(r<3?o(i):r>3?o(t,e,i):o(t,e))||i);return r>3&&i&&Object.defineProperty(t,e,i),i},$P=Math.PI/32,jP=3e3,qP={basis:[Pv(or($P,"rad"))],keywords:{auto:[null]}},Nc=Symbol("autoRotateStartTime"),Sw=Symbol("radiansPerSecond"),dT=Symbol("syncRotationRate"),Mw=Symbol("cameraChangeHandler"),pT=Symbol("onCameraChange"),XP=function(t){var e,n,r,i=function(o){ke(u,o);var l=Ie(u);function u(){var c;return ye(this,u),c=l.apply(this,arguments),c.autoRotate=!1,c.autoRotateDelay=jP,c.rotationPerSecond="auto",c[e]=performance.now(),c[n]=0,c[r]=function(f){return c[pT](f)},c}return Pe(u,[{key:"connectedCallback",value:function(){et(Ze(u.prototype),"connectedCallback",this).call(this),this.addEventListener("camera-change",this[Mw]),this[Nc]=performance.now()}},{key:"disconnectedCallback",value:function(){et(Ze(u.prototype),"disconnectedCallback",this).call(this),this.removeEventListener("camera-change",this[Mw]),this[Nc]=performance.now()}},{key:"updated",value:function(f){et(Ze(u.prototype),"updated",this).call(this,f),f.has("autoRotate")&&(this[Nc]=performance.now())}},{key:(e=Nc,n=Sw,r=Mw,dT),value:function(f){this[Sw]=f[0]}},{key:Ba,value:function(f,d){if(et(Ze(u.prototype),Ba,this).call(this,f,d),!(!this.autoRotate||!this[wc]()||this[_n].isPresenting)){var v=Math.min(d,f-this[Nc]-this.autoRotateDelay);v>0&&(this[rt].yaw=this.turntableRotation+this[Sw]*v*.001)}}},{key:pT,value:function(f){!this.autoRotate||f.detail.source==="user-interaction"&&(this[Nc]=performance.now())}},{key:"resetTurntableRotation",value:function(){this[rt].yaw=0}},{key:"turntableRotation",get:function(){return this[rt].yaw}}]),u}(t);return _w([It({type:Boolean,attribute:"auto-rotate"})],i.prototype,"autoRotate",void 0),_w([It({type:Number,attribute:"auto-rotate-delay"})],i.prototype,"autoRotateDelay",void 0),_w([Ss({intrinsics:qP,updateHandler:dT}),It({type:String,attribute:"rotation-per-second"})],i.prototype,"rotationPerSecond",void 0),i},YP=function(t){var e,n=function(l){if(l.shadowRoot==null||l.hasAttribute("data-js-focus-visible"))return function(){};if(self.applyFocusVisiblePolyfill)self.applyFocusVisiblePolyfill(l.shadowRoot);else{var u=function(){self.applyFocusVisiblePolyfill(l.shadowRoot)};return self.addEventListener("focus-visible-polyfill-ready",u,{once:!0}),function(){self.removeEventListener("focus-visible-polyfill-ready",u)}}return function(){}},r=Symbol("endPolyfillCoordination"),i=function(o){ke(u,o);var l=Ie(u);function u(){var c;return ye(this,u),c=l.apply(this,arguments),c[e]=null,c}return Pe(u,[{key:"connectedCallback",value:function(){et(Ze(u.prototype),"connectedCallback",this)&&et(Ze(u.prototype),"connectedCallback",this).call(this),this[r]==null&&(this[r]=n(this))}},{key:"disconnectedCallback",value:function(){et(Ze(u.prototype),"disconnectedCallback",this)&&et(Ze(u.prototype),"disconnectedCallback",this).call(this),this[r]!=null&&(this[r](),this[r]=null)}}]),u}(t);return e=r,i},vT=xR(WP(XP(iP(QR(TR(vP(bR(YP(Ky)))))))));customElements.define("model-viewer",vT),oe.ModelViewerElement=vT,Object.defineProperty(oe,"__esModule",{value:!0})})});var Aw=class extends RT{constructor(me){super(me)}create(){this.setConfig("downloadDialogue"),super.create()}open(me){super.open(me),this.addEntireFileDownloadOptions(),this.updateNoneAvailable(),this.resize()}isDownloadOptionAvailable(me){return super.isDownloadOptionAvailable(me)}};var Cw=class extends Dm{constructor(me){super(me)}create(){this.setConfig("mobileFooterPanel"),super.create()}resize(){super.resize(),setTimeout(()=>{this.$options.css("left",Math.floor(this.$element.width()/2-this.$options.width()/2))},100)}};var Lw=class extends NT{constructor(me){super(me)}create(){this.setConfig("settingsDialogue"),super.create()}};var Rw=class extends kT{constructor(me){super(me)}create(){this.setConfig("shareDialogue"),super.create()}update(){super.update(),this.code=this.extension.getEmbedScript(this.options.embedTemplate,this.currentWidth,this.currentHeight),this.$code.val(this.code)}resize(){super.resize()}};var WO=Tw(BT()),$O=Tw(zT());var Iw=class{},Ts=Iw;Ts.namespace="modelViewerExtension.",Ts.CAMERA_CHANGE=Iw.namespace+"cameraChange";var Dl=class{constructor(me,Re,Ke){this.t=me,this.p=Re,this.r=Ke}toString(){return`${this.t},${this.p},${this.r}`}toAttributeString(){return`${this.t}rad ${this.p}rad ${this.r}m`}static fromString(me){me=me.replace("orbit=","");let Re=me.split(",");return new Dl(Re[0],Re[1],Re[2])}};var VT=KP(),Dw=class extends AT{constructor(me){super(me);this.isLoaded=!1}create(){this.setConfig("modelViewerCenterPanel"),super.create();let me=this;this.component.subscribe(mi.OPEN_EXTERNAL_RESOURCE,Re=>{me.openMedia(Re)}),this.component.subscribe(mi.SET_TARGET,Re=>{this.whenLoaded(()=>{me.$modelViewer[0].cameraOrbit=Re.toAttributeString()})}),this.title=this.extension.helper.getLabel(),this.$spinner=VT('<div class="spinner"></div>'),this.$content.prepend(this.$spinner),this.$modelViewer=VT(`<model-viewer 
        ${this.config.options.autoRotateEnabled?"auto-rotate":""} 
        ${this.config.options.interactionPromptEnabled?'interaction-prompt="auto"':'interaction-prompt="none"'}
        camera-controls 
        style="background-color: unset;"></model-viewer>`),this.$content.prepend(this.$modelViewer),this.$modelViewer[0].addEventListener("model-visibility",()=>{this.isLoaded=!0,this.$content.removeClass("loading"),this.$spinner.hide(),this.component.publish(mi.LOAD),this.component.publish(Ts.CAMERA_CHANGE,this.getCameraOrbit())}),this.$modelViewer[0].addEventListener("camera-change",TT(Re=>{this.isLoaded&&this.component.publish(Ts.CAMERA_CHANGE,this.getCameraOrbit())},this.config.options.cameraChangeDelay))}whenLoaded(me){_T.waitFor(()=>this.isLoaded,me)}getCameraOrbit(){if(this.$modelViewer){let me=this.$modelViewer[0].getCameraOrbit();return new Dl(me.theta,me.phi,me.radius)}return null}async openMedia(me){this.$spinner.show(),await this.extension.getExternalResources(me);let Re=null,Ke=this.extension.helper.getCurrentCanvas(),yt=this.extension.getMediaFormats(Ke);yt&&yt.length?Re=yt[0].id:Re=Ke.id,this.$modelViewer.attr("src",Re),this.component.publish(mi.EXTERNAL_RESOURCE_OPENED)}resize(){super.resize(),this.$spinner.css("top",this.$content.height()/2-this.$spinner.height()/2),this.$spinner.css("left",this.$content.width()/2-this.$spinner.width()/2),this.title&&this.$title.text(ET(this.title)),this.$modelViewer&&(this.$modelViewer.width(this.$content.width()),this.$modelViewer.height(this.$content.height()))}};var WT=Tw(QP());var lO={authAPIVersion:1,bookmarkThumbHeight:150,bookmarkThumbWidth:90,dropEnabled:!0,footerPanelEnabled:!0,headerPanelEnabled:!0,leftPanelEnabled:!1,limitLocales:!1,metrics:[{type:"sm",minWidth:0},{type:"md",minWidth:768},{type:"lg",minWidth:1024},{type:"xl",minWidth:1280}],openTemplate:"http://universalviewer.io?manifest={0}",rightPanelEnabled:!0,theme:"uv-en-GB-theme"},uO={shareDialogue:{options:{embedTemplate:'<iframe src="{0}" width="{1}" height="{2}" allowfullscreen frameborder="0"></iframe>',shareManifestsEnabled:!0},content:{customSize:"custom",embed:"Embed",embedInstructions:"To embed this item in your own website, copy and paste the code below.",height:"Height",iiif:"IIIF Manifest",share:"Share",shareInstructions:"To share this item, copy the URL below.",size:"Size:",width:"Width"}},footerPanel:{options:{downloadEnabled:!0,embedEnabled:!1,feedbackEnabled:!1,minimiseButtons:!0,moreInfoEnabled:!0,openEnabled:!1,shareEnabled:!0},content:{bookmark:"Add to bookmarks",download:"Download",embed:"Embed",exitFullScreen:"Exit Full Screen",fullScreen:"Full Screen",moreInfo:"More Information",open:"Open",share:"Share"}},genericDialogue:{content:{ok:"OK"}},headerPanel:{content:{close:"Close",help:"Help",settings:"Settings"}},helpDialogue:{content:{text:"placeholder text",title:"Help"}},moreInfoRightPanel:{options:{canvasDisplayOrder:"",canvasExclude:"",copyToClipboardEnabled:!1,manifestDisplayOrder:"",manifestExclude:"",panelAnimationDuration:250,panelCollapsedWidth:30,panelExpandedWidth:255,panelOpen:!1,rtlLanguageCodes:"ar, ara, dv, div, he, heb, ur, urd",showAllLanguages:!1,textLimit:4,textLimitType:"lines"},content:{attribution:"Attribution",collapse:"Collapse Information",collapseFull:"Collapse Gallery",description:"Description",expand:"Expand Information",expandFull:"Expand Gallery",holdingText:"Your module goes here!",less:"less",license:"License",logo:"Logo",more:"more",noData:"No data to display",page:"Page",title:"More Information",manifestHeader:"About the item",canvasHeader:"About the image",copyToClipboard:"Copy to clipboard",copiedToClipboard:"Copied to clipboard"}},contentLeftPanel:{options:{elideCount:40,galleryThumbHeight:320,galleryThumbWidth:200,oneColThumbHeight:320,oneColThumbWidth:200,pageModeEnabled:!0,panelAnimationDuration:250,panelCollapsedWidth:30,panelExpandedWidth:255,panelOpen:!0,thumbsEnabled:!0,thumbsExtraHeight:8,thumbsImageFadeInDuration:300,thumbsLoadRange:15,treeEnabled:!0,twoColThumbHeight:150,twoColThumbWidth:90}},modelViewerCenterPanel:{options:{autoRotateEnabled:!1,cameraChangeDelay:500,interactionPromptEnabled:!1},content:{attribution:"Attribution",zoomIn:"Zoom In",zoomOut:"Zoom Out",vr:"VR"}},dialogue:{content:{close:"Close"}},downloadDialogue:{content:{download:"Download",entireFileAsOriginal:"Entire file",noneAvailable:"No download options are available.",preview:"Preview",title:"Download"}},loginDialogue:{content:{login:"Login",cancel:"Cancel"}},mediaelementCenterPanel:{content:{}},settingsDialogue:{content:{locale:"Locale",pagingEnabled:"Two Page View",reducedMotion:"Reduce motion (disables animations)",preserveViewport:"Preserve Zoom",title:"Settings",website:"<a href='https://github.com/universalviewer/universalviewer'>more info</a>"}}},cO={label:"English (GB)",locales:[{name:"cy-GB",label:"Cymraeg"},{name:"en-GB",label:"English (GB)"},{name:"fr-FR",label:"Fran\xE7ais (FR)"},{name:"pl-PL",label:"Polski"},{name:"sv-SE",label:"Svenska"}]},hO={authCORSError:"Your browser does not support CORS, please upgrade to view this content.",authorisationFailedMessage:"Your log-in attempt did not appear to be successful. Please try again.",degradedResourceMessage:"Please log in to view at full quality.",degradedResourceLogin:"log in",forbiddenResourceMessage:"Your current access rights are insufficient to view this image",mediaViewer:"Media Viewer",skipToDownload:"Skip to downloads and alternative formats"},Fw={options:lO,modules:uO,localisation:cO,content:hO};var $T=class extends CT{constructor(){super(...arguments);this.defaultConfig=Fw;this.locales={"en-GB":Fw,"cy-GB":()=>import("./cy-GB-5IK3DVYS.js"),"fr-FR":()=>import("./fr-FR-Z4FZBX52.js"),"pl-PL":()=>import("./pl-PL-FWP3JBXF.js"),"sv-SE":()=>import("./sv-SE-5XVAY7DE.js")}}create(){super.create(),this.component.subscribe(mi.CANVAS_INDEX_CHANGE,me=>{this.viewCanvas(me)}),this.component.subscribe(mi.THUMB_SELECTED,me=>{this.component.publish(mi.CANVAS_INDEX_CHANGE,me)}),this.component.subscribe(Ts.CAMERA_CHANGE,me=>{let Re=this.helper.getCurrentCanvas();Re&&(this.data.target=Re.id+`#orbit=${me.toString()}`,this.fire(mi.TARGET_CHANGE,this.data.target))})}createModules(){super.createModules(),this.isHeaderPanelEnabled()?this.headerPanel=new PT(this.shell.$headerPanel):this.shell.$headerPanel.hide(),this.isLeftPanelEnabled()&&(this.leftPanel=new LT(this.shell.$leftPanel)),this.centerPanel=new Dw(this.shell.$centerPanel),this.isRightPanelEnabled()&&(this.rightPanel=new OT(this.shell.$rightPanel)),this.isFooterPanelEnabled()?(this.footerPanel=new Dm(this.shell.$footerPanel),this.mobileFooterPanel=new Cw(this.shell.$mobileFooterPanel)):this.shell.$footerPanel.hide(),this.$moreInfoDialogue=$('<div class="overlay moreInfo" aria-hidden="true"></div>'),this.shell.$overlays.append(this.$moreInfoDialogue),this.moreInfoDialogue=new IT(this.$moreInfoDialogue),this.$downloadDialogue=$('<div class="overlay download" aria-hidden="true"></div>'),this.shell.$overlays.append(this.$downloadDialogue),this.downloadDialogue=new Aw(this.$downloadDialogue),this.$shareDialogue=$('<div class="overlay share" aria-hidden="true"></div>'),this.shell.$overlays.append(this.$shareDialogue),this.shareDialogue=new Rw(this.$shareDialogue),this.$settingsDialogue=$('<div class="overlay settings" aria-hidden="true"></div>'),this.shell.$overlays.append(this.$settingsDialogue),this.settingsDialogue=new Lw(this.$settingsDialogue),this.isLeftPanelEnabled()?this.leftPanel.init():this.shell.$leftPanel.hide(),this.isRightPanelEnabled()?this.rightPanel.init():this.shell.$rightPanel.hide()}render(){super.render(),this.checkForTarget()}checkForTarget(){if(this.data.target){let me=this.data.target.split("#"),Re=me[0],Ke=this.helper.getCanvasIndexById(Re);Ke!==null&&this.helper.canvasIndex!==Ke&&this.component.publish(mi.CANVAS_INDEX_CHANGE,Ke);let yt=me[1];this.component.publish(mi.SET_TARGET,Dl.fromString(yt))}}isLeftPanelEnabled(){return!1}bookmark(){super.bookmark();let me=this.helper.getCurrentCanvas(),Re=new DT;Re.index=this.helper.canvasIndex,Re.label=MT.getValue(me.getLabel()),Re.thumb=me.getProperty("thumbnail"),Re.title=this.helper.getLabel(),Re.trackingLabel=window.trackingLabel,Re.type=WT.ExternalResourceType.PHYSICAL_OBJECT,this.fire(mi.BOOKMARK,Re)}getEmbedScript(me,Re,Ke){let Yt=`${this.getAppUri()}#?manifest=${this.helper.manifestUri}&c=${this.helper.collectionIndex}&m=${this.helper.manifestIndex}&cv=${this.helper.canvasIndex}`;return ST.format(me,Yt,Re.toString(),Ke.toString())}};export{$T as default};
/* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
/**
* @license
* Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
* This code may only be used under the BSD style license found at
* http://polymer.github.io/LICENSE.txt
* The complete set of authors may be found at
* http://polymer.github.io/AUTHORS.txt
* The complete set of contributors may be found at
* http://polymer.github.io/CONTRIBUTORS.txt
* Code distributed by Google as part of the polymer project is also
* subject to an additional IP rights grant found at
* http://polymer.github.io/PATENTS.txt
*/
/**
@license
Copyright (c) 2019 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
/**
@license @nocompile
Copyright (c) 2018 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
