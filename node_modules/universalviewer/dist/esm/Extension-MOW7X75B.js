import{e as p,f as g,h,l as f}from"./chunk-VUSGURX2.js";import{a as v,o as c,q as a}from"./chunk-J7R3MGAK.js";import"./chunk-YAXTLTJC.js";var S=v(),u=class extends h{constructor(e){super(e)}async create(){this.setConfig("slideAtlasCenterPanel"),super.create(),this.$title.hide();let e=this;this.extensionHost.subscribe(a.OPEN_EXTERNAL_RESOURCE,o=>{e.openMedia(o)})}async loadTilesource(e){await g(["https://unpkg.com/slideatlas-viewer@4.4.1/dist/sa.css"]),await p(["https://unpkg.com/slideatlas-viewer@4.4.1/dist/sa-lib.js","https://unpkg.com/slideatlas-viewer@4.4.1/dist/sa.max.js"]);let o=e;o.endsWith("/")||(o+="/"),o+="tiles",e.endsWith("/")&&(e=e.substr(0,e.length-1)),fetch(o).then(t=>t.json()).then(t=>{let i={height:t.sizeY,width:t.sizeX,tileWidth:t.tileWidth,tileHeight:t.tileHeight,minLevel:0,maxLevel:t.levels-1,units:"mm",spacing:[t.mm_x,t.mm_y],getTileUrl:function(n,l,s,d){var m=o+"/zxy/"+n+"/"+l+"/"+s;return d&&(m+="?"+S.param(d)),m}};t.mm_x||(i.units="pixels",i.spacing=[1,1]),SA.SAViewer(this.$content,{zoomWidget:!0,drawWidget:!0,navigationWidget:!0,prefixUrl:"https://unpkg.com/slideatlas-viewer@4.4.1/dist/img/",tileSource:i}),SA.SAFullScreenButton(this.$content).css({position:"absolute",left:"2px",top:"2px"})})}async openMedia(e){this.extension.getExternalResources(e).then(()=>{let t=this.extension.helper.getCurrentCanvas().getContent();if(t.length){let n=t[0].getBody();if(n.length){let l=n[0].getServices();for(let s=0;s<l.length;s++){let d=l[s];this.loadTilesource(d.id);break}}}this.extensionHost.publish(a.EXTERNAL_RESOURCE_OPENED),this.extensionHost.publish(a.LOAD)})}resize(){super.resize()}};var x={allowStealFocus:!1,authAPIVersion:1,bookmarkThumbHeight:150,bookmarkThumbWidth:90,dropEnabled:!0,footerPanelEnabled:!0,headerPanelEnabled:!0,leftPanelEnabled:!0,limitLocales:!1,metrics:[{type:"sm",minWidth:0},{type:"md",minWidth:768},{type:"lg",minWidth:1024},{type:"xl",minWidth:1280}],multiSelectionMimeType:"application/zip",navigatorEnabled:!0,openTemplate:"http://universalviewer.io?manifest={0}",overrideFullScreen:!1,pagingEnabled:!0,pagingOptionEnabled:!0,pessimisticAccessControl:!1,preserveViewport:!1,rightPanelEnabled:!0,saveUserSettings:!1,clickToZoomEnabled:!0,searchWithinEnabled:!0,termsOfUseEnabled:!1,theme:"uv-en-GB-theme",tokenStorage:"session",useArrowKeysToNavigate:!1,zoomToSearchResultEnabled:!0},D={ebookLeftPanel:{options:{expandFullEnabled:!1,panelAnimationDuration:250,panelCollapsedWidth:30,panelExpandedWidth:255},content:{title:"Contents"}},dialogue:{topCloseButtonEnabled:!1,content:{close:"Close"}},footerPanel:{options:{bookmarkEnabled:!1,downloadEnabled:!0,embedEnabled:!1,feedbackEnabled:!1,fullscreenEnabled:!0,minimiseButtons:!0,moreInfoEnabled:!0,openEnabled:!1,printEnabled:!1,shareEnabled:!0},content:{bookmark:"Add to bookmarks",download:"Download",embed:"Embed",exitFullScreen:"Exit Full Screen",feedback:"Feedback",fullScreen:"Full Screen",moreInfo:"More Information",open:"Open",share:"Share"}},genericDialogue:{content:{emptyValue:"please enter a value.",invalidNumber:"Please enter a valid number.",noMatches:"No matches were found.",ok:"OK",pageNotFound:"This item does not contain a page with the number you entered. Try switching the numbering mode to 'image'.",refresh:"Refresh"}},headerPanel:{options:{localeToggleEnabled:!1,settingsButtonEnabled:!0},content:{settings:"Settings"}},helpDialogue:{content:{text:"placeholder text",title:"Help"}},moreInfoRightPanel:{options:{canvasDisplayOrder:"",canvasExclude:"",copyToClipboardEnabled:!1,manifestDisplayOrder:"",manifestExclude:"",panelAnimationDuration:250,panelCollapsedWidth:30,panelExpandedWidth:255,panelOpen:!1,rtlLanguageCodes:"ar, ara, dv, div, he, heb, ur, urd",showAllLanguages:!1,textLimit:4,textLimitType:"lines",limitToRange:!1},content:{attribution:"Attribution",collapse:"Collapse Information",collapseFull:"Collapse Gallery",description:"Description",expand:"Expand Information",expandFull:"Expand Gallery",holdingText:"Your module goes here!",less:"less",license:"License",logo:"Logo",more:"more",noData:"No data to display",page:"Page",title:"More Information",manifestHeader:"About the item",canvasHeader:"About the image",copyToClipboard:"Copy to clipboard",copiedToClipboard:"Copied to clipboard"}},ebookCenterPanel:{options:{}},settingsDialogue:{content:{locale:"Locale",navigatorEnabled:"Navigator Enabled",clickToZoomEnabled:"Mouse Click To Zoom",pagingEnabled:"Two Page View",reducedMotion:"Reduce motion (disables animations)",preserveViewport:"Preserve Zoom",title:"Settings",website:"<a href='https://github.com/universalviewer/universalviewer#contributors'>more info</a>"}},shareDialogue:{options:{embedTemplate:'<iframe src="{0}" width="{1}" height="{2}" allowfullscreen frameborder="0"></iframe>',instructionsEnabled:!1,shareFrameEnabled:!0},content:{customSize:"custom",embed:"Embed",embedInstructions:"To embed this item in your own website, copy and paste the code below.",height:"Height",iiif:"IIIF Manifest",share:"Share",shareInstructions:"To share this item, copy the URL below.",size:"Size:",width:"Width"}},authDialogue:{content:{cancel:"Cancel",confirm:"Confirm"}},clickThroughDialogue:{content:{viewTerms:"Read Full Terms and Conditions"}},downloadDialogue:{content:{currentViewAsJpg:"Current view {0} x {1}px (jpg)",currentViewAsJpgExplanation:"Opens in a new window",download:"Download",downloadSelection:"Download Selection",downloadSelectionExplanation:"Opens a dialogue to select which pages to download.",editSettings:"Edit Settings",entireDocument:"Entire document ({0})",entireFileAsOriginal:"Entire file",entireFileAsOriginalWithFormat:"Entire file ({0})",noneAvailable:"No download options are available.",pagingNote:"Please turn off Two Page View for additional options.",preview:"Preview",title:"Download",wholeImageHighRes:"Whole image {0} x {1}px ({2})",wholeImageHighResExplanation:"Opens in a new window.",wholeImagesHighRes:"Whole images ({0})",wholeImagesHighResExplanation:"Opens in two new windows.",wholeImageLowResAsJpg:"Whole image {0} x {1}px (jpg)",wholeImageLowResAsJpgExplanation:"Opens in a new window."}},loginDialogue:{content:{login:"Login",logout:"Logout",cancel:"Cancel"}},avCenterPanel:{content:{attribution:"Attribution"}},restrictedDialogue:{content:{cancel:"Cancel"}}},C={label:"English (GB)",locales:[{name:"cy-GB",label:"Cymraeg"},{name:"en-GB",label:"English (GB)"},{name:"fr-FR",label:"Fran\xE7ais (FR)"},{name:"sv-SE",label:"Svenska"}]},P={authCORSError:"Your browser does not support CORS, please upgrade to view this content.",authorisationFailedMessage:"Your log-in attempt did not appear to be successful. Please try again.",canvasIndexOutOfRange:"Canvas index out of range.",fallbackDegradedLabel:"Login",fallbackDegradedMessage:"Please log in to view this content at full resolution.",forbiddenResourceMessage:"Your current access rights are insufficient to view this image",termsOfUse:"Terms of Use",mediaViewer:"Media Viewer",skipToDownload:"Skip to downloads and alternative formats"},b={options:x,modules:D,localisation:C,content:P};var w=class extends f{constructor(){super(...arguments);this.locales={"en-GB":b,"cy-GB":()=>import("./cy-GB-KMHTYSVQ.js"),"fr-FR":()=>import("./fr-FR-N5XHGZR3.js"),"sv-SE":()=>import("./sv-SE-JMUWNWIY.js")}}create(){super.create(),this.extensionHost.subscribe(a.CANVAS_INDEX_CHANGE,e=>{this.viewCanvas(e)})}createModules(){super.createModules(),this.shell.$headerPanel.hide(),this.shell.$leftPanel.hide(),this.centerPanel=new u(this.shell.$centerPanel),this.shell.$rightPanel.hide(),this.shell.$footerPanel.hide()}render(){super.render()}getEmbedScript(e,o,t){let n=`${this.getAppUri()}#?manifest=${this.helper.manifestUri}`;return c.format(e,n,o.toString(),t.toString())}};export{w as default};
