import{a as T}from"./chunk-KLUMHUEI.js";import{a as B}from"./chunk-PMZ3OGI5.js";import"./chunk-GRBPDKZ2.js";import{c as S,f as L,h as R,i as A,k as F,l as k,m as H}from"./chunk-J75QZD36.js";import{c as C}from"./chunk-26XKPDNT.js";import{b as y,n as I,p as o}from"./chunk-OEMHC5TT.js";import{a as O,b as r}from"./chunk-2OYNMPAF.js";import{a as h}from"./chunk-RPOSMM7Q.js";import"./chunk-YAXTLTJC.js";var p=O(),c=class extends S{constructor(e){super(e)}create(){this.setConfig("fileLinkCenterPanel"),super.create(),this.extensionHost.subscribe(o.OPEN_EXTERNAL_RESOURCE,e=>{this.openMedia(e)}),this.$scroll=p('<div class="scroll"></div>'),this.$content.append(this.$scroll),this.$downloadItems=p("<ol></ol>"),this.$scroll.append(this.$downloadItems),this.$downloadItemTemplate=p('<li><img/><div class="col2"><a class="filename" target="_blank" download=""></a><span class="label"></span><a class="description" target="_blank" download=""></a></div></li>'),this.title=this.extension.helper.getLabel()}async openMedia(e){await this.extension.getExternalResources(e);let s=this.extension.helper.getCurrentCanvas().getContent(),t;for(let n=0;n<s.length;n++){let l=s[n];if(!l.getBody().length)continue;t=this.$downloadItemTemplate.clone();let v=t.find(".filename"),J=t.find(".label"),E=t.find("img"),P=t.find(".description"),u=l.getBody()[0],i=u.getProperty("id");i&&(v.prop("href",i),v.text(i.substr(i.lastIndexOf("/")+1)));let D=C.getValue(u.getLabel());D&&J.text(r(D));let x=l.getProperty("thumbnail");x?E.prop("src",x):E.hide();let w=u.getProperty("description");w&&(P.text(r(w)),i&&P.prop("href",i)),this.$downloadItems.append(t)}this.extensionHost.publish(h.EXTERNAL_RESOURCE_OPENED),this.extensionHost.publish(h.LOAD)}resize(){super.resize(),this.title&&this.$title.text(r(this.title)),this.$scroll.height(this.$content.height()-this.$scroll.verticalMargins())}};var m=class extends k{constructor(e){super(e)}create(){this.setConfig("settingsDialogue"),super.create()}};var g=class extends H{constructor(e){super(e)}create(){this.setConfig("shareDialogue"),super.create()}update(){super.update(),this.code=this.extension.getEmbedScript(this.options.embedTemplate,this.currentWidth,this.currentHeight),this.$code.val(this.code)}resize(){super.resize()}};var Q={authAPIVersion:1,bookmarkThumbHeight:150,bookmarkThumbWidth:90,dropEnabled:!0,footerPanelEnabled:!0,headerPanelEnabled:!0,leftPanelEnabled:!0,limitLocales:!1,openTemplate:"http://universalviewer.io?manifest={0}",pessimisticAccessControl:!1,rightPanelEnabled:!0,theme:"uv-en-GB-theme"},G={shareDialogue:{options:{embedTemplate:'<iframe src="{0}" width="{1}" height="{2}" allowfullscreen frameborder="0"></iframe>'},content:{customSize:"custom",embed:"Embed",embedInstructions:"To embed this item in your own website, copy and paste the code below.",height:"Height",iiif:"IIIF Manifest",share:"Share",shareInstructions:"To share this item, copy the URL below.",size:"Size:",width:"Width"}},fileLinkCenterPanel:{content:{}},footerPanel:{options:{bookmarkEnabled:!1,downloadEnabled:!1,embedEnabled:!1,feedbackEnabled:!1,minimiseButtons:!0,openEnabled:!1,shareEnabled:!0},content:{bookmark:"Add to bookmarks",download:"Download",embed:"Share",exitFullScreen:"Exit Full Screen",fullScreen:"Full Screen",moreInfo:"More Information",open:"Open"}},genericDialogue:{content:{ok:"OK"}},headerPanel:{content:{close:"Close",help:"Help"}},helpDialogue:{content:{text:"placeholder text",title:"Help"}},moreInfoRightPanel:{options:{canvasDisplayOrder:"",canvasExclude:"",copyToClipboardEnabled:!1,manifestDisplayOrder:"",manifestExclude:"",panelAnimationDuration:250,panelCollapsedWidth:30,panelExpandedWidth:255,panelOpen:!1,rtlLanguageCodes:"ar, ara, dv, div, he, heb, ur, urd",showAllLanguages:!1,textLimit:4,textLimitType:"lines"},content:{attribution:"Attribution",collapse:"Collapse Information",collapseFull:"Collapse Gallery",description:"Description",expand:"Expand Information",expandFull:"Expand Gallery",holdingText:"Your module goes here!",less:"less",license:"License",logo:"Logo",more:"more",noData:"No data to display",page:"Page",title:"More Information",manifestHeader:"About the item",canvasHeader:"About the image",copyToClipboard:"Copy to clipboard",copiedToClipboard:"Copied to clipboard"}},resourcesLeftPanel:{options:{expandFullEnabled:!1,panelAnimationDuration:250,panelCollapsedWidth:30,panelExpandedWidth:255,panelOpen:!0},content:{title:"Contents"}},dialogue:{content:{close:"Close"}},downloadDialogue:{content:{download:"Download",entireFileAsOriginal:"Entire file",noneAvailable:"No download options are available.",preview:"Preview",title:"Download"}},loginDialogue:{content:{login:"Login",cancel:"Cancel"}},settingsDialogue:{content:{locale:"Locale",pagingEnabled:"Two Page View",preserveViewport:"Preserve Zoom",reducedMotion:"Reduce motion (disables animations)",title:"Settings",website:"<a href='https://github.com/universalviewer/universalviewer'>more info</a>"}}},N={label:"English (GB)",locales:[{name:"cy-GB",label:"Cymraeg"},{name:"en-GB",label:"English (GB)"},{name:"fr-FR",label:"Fran\xE7ais (FR)"},{name:"pl-PL",label:"Polski"},{name:"sv-SE",label:"Svenska"}]},_={authCORSError:"Your browser does not support CORS, please upgrade to view this content.",authorisationFailedMessage:"Your log-in attempt did not appear to be successful. Please try again.",degradedResourceMessage:"Please log in to view at full quality.",degradedResourceLogin:"log in",forbiddenResourceMessage:"Your current access rights are insufficient to view this image",mediaViewer:"Media Viewer",skipToDownload:"Skip to downloads and alternative formats"},f={options:Q,modules:G,localisation:N,content:_};var M=class extends L{constructor(){super(...arguments);this.defaultConfig=f;this.locales={"en-GB":f,"cy-GB":()=>import("./cy-GB-IHBTWEE4.js"),"fr-FR":()=>import("./fr-FR-SX32APTS.js"),"pl-PL":()=>import("./pl-PL-6Q4OWJUB.js"),"sv-SE":()=>import("./sv-SE-5KIJEH7C.js")}}create(){super.create(),this.extensionHost.subscribe(o.CANVAS_INDEX_CHANGE,e=>{this.viewCanvas(e)}),this.extensionHost.subscribe(o.THUMB_SELECTED,e=>{this.extensionHost.publish(o.CANVAS_INDEX_CHANGE,e)})}createModules(){super.createModules(),this.isHeaderPanelEnabled()?this.headerPanel=new A(this.shell.$headerPanel):this.shell.$headerPanel.hide(),this.isLeftPanelEnabled()&&(this.leftPanel=new T(this.shell.$leftPanel)),this.centerPanel=new c(this.shell.$centerPanel),this.isRightPanelEnabled()&&(this.rightPanel=new F(this.shell.$rightPanel)),this.isFooterPanelEnabled()?this.footerPanel=new R(this.shell.$footerPanel):this.shell.$footerPanel.hide(),this.$helpDialogue=$('<div class="overlay help" aria-hidden="true"></div>'),this.shell.$overlays.append(this.$helpDialogue),this.helpDialogue=new B(this.$helpDialogue),this.$shareDialogue=$('<div class="overlay share" aria-hidden="true"></div>'),this.shell.$overlays.append(this.$shareDialogue),this.shareDialogue=new g(this.$shareDialogue),this.$settingsDialogue=$('<div class="overlay settings" aria-hidden="true"></div>'),this.shell.$overlays.append(this.$settingsDialogue),this.settingsDialogue=new m(this.$settingsDialogue),this.isLeftPanelEnabled()&&this.leftPanel.init(),this.isRightPanelEnabled()&&this.rightPanel.init()}render(){super.render()}isLeftPanelEnabled(){return y.getBool(this.data.config.options.leftPanelEnabled,!0)&&(this.helper.isMultiCanvas()||this.helper.isMultiSequence()||this.helper.hasResources())}getEmbedScript(e,b,s){let n=`${this.getAppUri()}#?manifest=${this.helper.manifestUri}&c=${this.helper.collectionIndex}&m=${this.helper.manifestIndex}&cv=${this.helper.canvasIndex}`;return I.format(e,n,b.toString(),s.toString())}};export{M as default};
