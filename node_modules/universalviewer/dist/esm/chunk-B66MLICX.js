import{d as o,j as c}from"./chunk-2L4OXGGL.js";import{b as s,p as e}from"./chunk-OEMHC5TT.js";import{a as l,b as n}from"./chunk-2OYNMPAF.js";import{c as r}from"./chunk-YAXTLTJC.js";var i=r(c()),a=l(),m=class extends o{constructor(t){super(t)}create(){this.setConfig("moreInfoDialogue"),super.create(),this.openCommand=e.SHOW_MOREINFO_DIALOGUE,this.closeCommand=e.HIDE_MOREINFO_DIALOGUE,this.extensionHost.subscribe(this.openCommand,t=>{this.open(t)}),this.extensionHost.subscribe(this.closeCommand,()=>{this.close()}),this.extensionHost.subscribe(e.CANVAS_INDEX_CHANGE,()=>{this.metadataComponent.set(this._getData())}),this.config.content=this.extension.data.config.modules.moreInfoRightPanel.content,this.config.options=this.extension.data.config.modules.moreInfoRightPanel.options,this.$title=a(`<div role="heading" class="heading">${this.config.content.title}</div>`),this.$content.append(this.$title),this.$metadata=a('<div class="iiif-metadata-component"></div>'),this.$content.append(this.$metadata),this.metadataComponent=new i.MetadataComponent({target:this.$metadata[0]}),this.$element.hide()}open(t){super.open(t),this.metadataComponent.set(this._getData())}_getData(){return{canvasDisplayOrder:this.config.options.canvasDisplayOrder,canvases:this.extension.getCurrentCanvases(),canvasExclude:this.config.options.canvasExclude,canvasLabels:this.extension.getCanvasLabels(this.content.page),content:this.config.content,copiedMessageDuration:2e3,copyToClipboardEnabled:s.getBool(this.config.options.copyToClipboardEnabled,!1),helper:this.extension.helper,licenseFormatter:null,limit:this.config.options.textLimit||4,limitType:i.LimitType.LINES,manifestDisplayOrder:this.config.options.manifestDisplayOrder,manifestExclude:this.config.options.manifestExclude,range:this.extension.getCurrentCanvasRange(),rtlLanguageCodes:this.config.options.rtlLanguageCodes,sanitizer:t=>n(t),showAllLanguages:this.config.options.showAllLanguages}}close(){super.close()}resize(){this.setDockedPosition()}};export{m as a};
