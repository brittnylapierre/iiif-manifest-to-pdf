/*! For license information please see 4864.6574c08570a4aae232bd.js.LICENSE.txt */
(self.webpackChunkUV=self.webpackChunkUV||[]).push([[4864],{8253:(t,e)=>{"use strict";e.OK=200,e.Jy=302,e.WY=401},2084:t=>{window,t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CONTINUE=100,e.SWITCHING_PROTOCOLS=101,e.PROCESSING=102,e.OK=200,e.CREATED=201,e.ACCEPTED=202,e.NON_AUTHORITATIVE_INFORMATION=203,e.NO_CONTENT=204,e.RESET_CONTENT=205,e.PARTIAL_CONTENT=206,e.MULTI_STATUS=207,e.MULTIPLE_CHOICES=300,e.MOVED_PERMANENTLY=301,e.MOVED_TEMPORARILY=302,e.SEE_OTHER=303,e.NOT_MODIFIED=304,e.USE_PROXY=305,e.TEMPORARY_REDIRECT=307,e.BAD_REQUEST=400,e.UNAUTHORIZED=401,e.PAYMENT_REQUIRED=402,e.FORBIDDEN=403,e.NOT_FOUND=404,e.METHOD_NOT_ALLOWED=405,e.NOT_ACCEPTABLE=406,e.PROXY_AUTHENTICATION_REQUIRED=407,e.REQUEST_TIME_OUT=408,e.CONFLICT=409,e.GONE=410,e.LENGTH_REQUIRED=411,e.PRECONDITION_FAILED=412,e.REQUEST_ENTITY_TOO_LARGE=413,e.REQUEST_URI_TOO_LARGE=414,e.UNSUPPORTED_MEDIA_TYPE=415,e.REQUESTED_RANGE_NOT_SATISFIABLE=416,e.EXPECTATION_FAILED=417,e.IM_A_TEAPOT=418,e.UNPROCESSABLE_ENTITY=422,e.LOCKED=423,e.FAILED_DEPENDENCY=424,e.UNORDERED_COLLECTION=425,e.UPGRADE_REQUIRED=426,e.PRECONDITION_REQUIRED=428,e.TOO_MANY_REQUESTS=429,e.REQUEST_HEADER_FIELDS_TOO_LARGE=431,e.INTERNAL_SERVER_ERROR=500,e.NOT_IMPLEMENTED=501,e.BAD_GATEWAY=502,e.SERVICE_UNAVAILABLE=503,e.GATEWAY_TIME_OUT=504,e.HTTP_VERSION_NOT_SUPPORTED=505,e.VARIANT_ALSO_NEGOTIATES=506,e.INSUFFICIENT_STORAGE=507,e.BANDWIDTH_LIMIT_EXCEEDED=509,e.NOT_EXTENDED=510,e.NETWORK_AUTHENTICATION_REQUIRED=511}])},8939:(t,e,n)=>{"use strict";n.d(e,{ll:()=>a,LH:()=>g,pF:()=>r,x0:()=>v,UG:()=>_});var r,i=function(t){this.isVisible=!0;var e=t.target.match(/.*[^n]xyz=(-?\d+(?:\.\d+)?),(-?\d+(?:\.\d+)?),(-?\d+(?:\.\d+)?)/),n=t.target.match(/.*nxyz=(-?\d+(?:\.\d+)?),(-?\d+(?:\.\d+)?),(-?\d+(?:\.\d+)?)/);this.bodyValue=t.bodyValue,this.x=Number(e[1]),this.y=Number(e[2]),this.z=Number(e[3]),this.nx=Number(n[1]),this.ny=Number(n[2]),this.nz=Number(n[3])},o=function(t){var e;this.isVisible=!0,t.on?(e=t.on.match(/.*xywh=(\d*),(\d*),(\d*),(\d*)/),this.chars=t.resource.chars):(e=t.target.match(/.*xywh=(\d*),(\d*),(\d*),(\d*)/),this.chars=t.bodyValue),this.x=Number(e[1]),this.y=Number(e[2]),this.width=Number(e[3]),this.height=Number(e[4])},a=function(){function t(t){this.rects=[],this.points3D=[],this.canvasId=t}return t.prototype.addRect=function(t){var e=new o(t);e.canvasId=this.canvasId,e.canvasIndex=this.canvasIndex,e.index=this.rects.length,this.rects.push(e),this.rects.sort((function(t,e){return t.index-e.index}))},t.prototype.addPoint3D=function(t){var e=new i(t);e.canvasId=this.canvasId,e.canvasIndex=this.canvasIndex,e.index=this.points3D.length,this.points3D.push(e),this.points3D.sort((function(t,e){return t.index-e.index}))},t}(),s=n(2716),l=function(){function t(){this.isEnabled=!1,this.ranges=[],this.canvases=[]}return t.prototype.allCanvasesSelected=function(){return this.canvases.length>0&&this.getAllSelectedCanvases().length===this.canvases.length},t.prototype.allRangesSelected=function(){return this.ranges.length>0&&this.getAllSelectedRanges().length===this.ranges.length},t.prototype.allSelected=function(){return this.allRangesSelected()&&this.allCanvasesSelected()},t.prototype.getAll=function(){return this.canvases.concat(this.ranges)},t.prototype.getAllSelectedCanvases=function(){return this.canvases.filter((function(t){return t.multiSelected}))},t.prototype.getAllSelectedRanges=function(){return this.ranges.filter((function(t){return t.multiSelected}))},t.prototype.getCanvasById=function(t){return this.canvases.filter((function(e){return s.cQ.normaliseUrl(e.id)===s.cQ.normaliseUrl(t)}))[0]},t.prototype.getCanvasesByIds=function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];e.push(this.getCanvasById(r))}return e},t.prototype.getRangeCanvases=function(t){var e=t.getCanvasIds();return this.getCanvasesByIds(e)},t.prototype.selectAll=function(t){this.selectRanges(this.ranges,t),this.selectCanvases(this.canvases,t)},t.prototype.selectCanvas=function(t,e){this.canvases.filter((function(e){return e.id===t.id}))[0].multiSelected=e},t.prototype.selectAllCanvases=function(t){this.selectCanvases(this.canvases,t)},t.prototype.selectCanvases=function(t,e){for(var n=0;n<t.length;n++)t[n].multiSelected=e},t.prototype.selectRange=function(t,e){var n=this.ranges.filter((function(e){return e.id===t.id}))[0];n.multiSelected=e;var r=this.getRangeCanvases(n);this.selectCanvases(r,e)},t.prototype.selectAllRanges=function(t){this.selectRanges(this.ranges,t)},t.prototype.selectRanges=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];r.multiSelected=e;var i=this.getCanvasesByIds(r.getCanvasIds());this.selectCanvases(i,e)}},t.prototype.setEnabled=function(t){this.isEnabled=t;for(var e=this.getAll(),n=0;n<e.length;n++){var r=e[n];r.multiSelectEnabled=this.isEnabled,t||(r.multiSelected=!1)}},t}(),u=function(){function t(t,e){this.items=[],this.resource=t,this.label=e}return t.prototype.addItem=function(t){this.items.push(t)},t.prototype.addMetadata=function(t,e){void 0===e&&(e=!1);for(var n=0;n<t.length;n++){var r=t[n];r.isRootLevel=e,this.addItem(r)}},t}();!function(t){t.DATE="date",t.NONE="none"}(r||(r={}));var c=n(3911),p=function(){function t(){}return t.manifestNotLoaded="Manifest has not loaded yet",t}(),f=function(){function t(t){this.options=t,this.iiifResource=this.options.iiifResource,this.manifestUri=this.options.manifestUri,this.manifest=this.options.manifest,this.collectionIndex=this.options.collectionIndex||0,this.manifestIndex=this.options.manifestIndex||0,this.sequenceIndex=this.options.sequenceIndex||0,this.canvasIndex=this.options.canvasIndex||0}return t.prototype.getAutoCompleteService=function(){var t=this.getSearchService(),e=null;return t&&((e=t.getService(c.vl.SEARCH_0_AUTO_COMPLETE))||(e=t.getService(c.vl.SEARCH_1_AUTO_COMPLETE))),e},t.prototype.getAttribution=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);var t=this.manifest.getAttribution();return t?t.getValue(this.options.locale):null},t.prototype.getCanvases=function(){return this.getCurrentSequence().getCanvases()},t.prototype.getCanvasById=function(t){return this.getCurrentSequence().getCanvasById(t)},t.prototype.getCanvasesById=function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n],i=this.getCanvasById(r);i&&e.push(i)}return e},t.prototype.getCanvasByIndex=function(t){return this.getCurrentSequence().getCanvasByIndex(t)},t.prototype.getCanvasIndexById=function(t){return this.getCurrentSequence().getCanvasIndexById(t)},t.prototype.getCanvasIndexByLabel=function(t){var e=this.getManifestType()===s.Tc.MANUSCRIPT;return this.getCurrentSequence().getCanvasIndexByLabel(t,e)},t.prototype.getCanvasRange=function(t,e){var n=this.getCanvasRanges(t);if(e){for(var r=0;r<n.length;r++){var i=n[r];if(i.path===e)return i}return null}return n[0]},t.prototype.getCanvasRanges=function(t){if(!this.manifest)throw new Error(p.manifestNotLoaded);return t.ranges||(t.ranges=this.manifest.getAllRanges().filter((function(e){return e.getCanvasIds().some((function(e){return s.cQ.normaliseUrl(e)===s.cQ.normaliseUrl(t.id)}))}))),t.ranges},t.prototype.getCollectionIndex=function(t){if(!t.parentCollection||t.parentCollection.parentCollection)return t.parentCollection?t.parentCollection.index:void 0},t.prototype.getCurrentCanvas=function(){return this.getCurrentSequence().getCanvasByIndex(this.canvasIndex)},t.prototype.getCurrentSequence=function(){return this.getSequenceByIndex(this.sequenceIndex)},t.prototype.getDescription=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);var t=this.manifest.getDescription();return t?t.getValue(this.options.locale):null},t.prototype.getLabel=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);var t=this.manifest.getLabel();return t?t.getValue(this.options.locale):null},t.prototype.getLastCanvasLabel=function(t){return this.getCurrentSequence().getLastCanvasLabel(t)},t.prototype.getFirstPageIndex=function(){return 0},t.prototype.getLastPageIndex=function(){return this.getTotalCanvases()-1},t.prototype.getLicense=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);return this.manifest.getLicense()},t.prototype.getLogo=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);return this.manifest.getLogo()},t.prototype.getManifestType=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);var t=this.manifest.getManifestType();return t===s.Tc.EMPTY&&(t=s.Tc.MONOGRAPH),t},t.prototype.getMetadata=function(t){if(!this.manifest)throw new Error(p.manifestNotLoaded);var e=[],n=this.manifest.getMetadata(),r=new u(this.manifest),i=this.options.locale;n&&n.length&&r.addMetadata(n,!0),this.manifest.getDescription().length&&((o=new s.nm(i)).label=new s.OI([new s.xT("description",i)]),o.value=this.manifest.getDescription(),o.isRootLevel=!0,r.addItem(o)),this.manifest.getAttribution().length&&((o=new s.nm(i)).label=new s.OI([new s.xT("attribution",i)]),o.value=this.manifest.getAttribution(),o.isRootLevel=!0,r.addItem(o));var o,a=this.manifest.getLicense();if(a){var l={label:"license",value:t&&t.licenseFormatter?t.licenseFormatter.format(a):a};(o=new s.nm(i)).parse(l),o.isRootLevel=!0,r.addItem(o)}this.manifest.getLogo()&&(l={label:"logo",value:'<img alt="logo" src="'+this.manifest.getLogo()+'"/>'},(o=new s.nm(i)).parse(l),o.isRootLevel=!0,r.addItem(o));return e.push(r),t?this._parseMetadataOptions(t,e):e},t.prototype.getRequiredStatement=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);var t=this.manifest.getRequiredStatement();return t?{label:t.label?t.getLabel():"",value:t.value&&t.value.length?t.getValue():""}:null},t.prototype._parseMetadataOptions=function(t,e){var n=this.getCurrentSequence(),r=n.getMetadata();if(r&&r.length){var i=new u(n);i.addMetadata(r),e.push(i)}if(t.range){var o=this._getRangeMetadata([],t.range);o=o.reverse(),e=e.concat(o)}if(t.canvases&&t.canvases.length)for(var a=0;a<t.canvases.length;a++){var s=t.canvases[a],l=s.getMetadata();if(l&&l.length){var c=new u(s);c.addMetadata(s.getMetadata()),e.push(c)}for(var p=s.getImages(),f=0;f<p.length;f++){var h=p[f],d=h.getMetadata();if(d&&d.length){var g=new u(h);g.addMetadata(d),e.push(g)}}}return e},t.prototype._getRangeMetadata=function(t,e){var n=e.getMetadata();if(n&&n.length){var r=new u(e);r.addMetadata(n),t.push(r)}else if(e.parentRange)return this._getRangeMetadata(t,e.parentRange);return t},t.prototype.getMultiSelectState=function(){return this._multiSelectState||(this._multiSelectState=new l,this._multiSelectState.ranges=this.getRanges().slice(0),this._multiSelectState.canvases=this.getCurrentSequence().getCanvases().slice(0)),this._multiSelectState},t.prototype.getCurrentRange=function(){return this.rangeId?this.getRangeById(this.rangeId):null},t.prototype.getPosterCanvas=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);return this.manifest.getPosterCanvas()},t.prototype.getAccompanyingCanvas=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);return this.manifest.getAccompanyingCanvas()},t.prototype.getPosterImage=function(){var t=this.getPosterCanvas();if(t){var e=t.getContent();if(e&&e.length)return e[0].getBody()[0].id}return null},t.prototype.getAccompanyingCanvasImage=function(){var t=this.getAccompanyingCanvas();if(t){var e=t.getContent();if(e&&e.length)return e[0].getBody()[0].id}return null},t.prototype.getPreviousRange=function(t){var e;if(e=t||this.getCurrentRange()){var n=this.getFlattenedTree();if(n)for(var r=0;r<n.length;r++){var i=n[r];if(i&&i.data.id===e.id){for(;r>0;)return n[--r].data;break}}}return null},t.prototype.getNextRange=function(t){var e;if(e=t||this.getCurrentRange()){var n=this.getFlattenedTree();if(n)for(var r=0;r<n.length;r++){var i=n[r];if(i&&i.data.id===e.id){for(;r<n.length-1;){var o=n[++r];if(o.data.canvases&&o.data.canvases.length)return o.data}break}}}return null},t.prototype.getFlattenedTree=function(t){var e;return(e=t||this.getTree())?this._flattenTree(e,"nodes"):null},t.prototype._flattenTree=function(t,e){var n=this,r=[t];return t[e]&&t[e].length>0?r.concat(t[e].map((function(t){return n._flattenTree(t,e)})).reduce((function(t,e){return t.concat(e)}),[])):r},t.prototype.getRanges=function(){return this.manifest.getAllRanges()},t.prototype.getRangeByPath=function(t){if(!this.manifest)throw new Error(p.manifestNotLoaded);return this.manifest.getRangeByPath(t)},t.prototype.getRangeById=function(t){if(!this.manifest)throw new Error(p.manifestNotLoaded);return this.manifest.getRangeById(t)},t.prototype.getRangeCanvases=function(t){var e=t.getCanvasIds();return this.getCanvasesById(e)},t.prototype.getRelated=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);return this.manifest.getRelated()},t.prototype.getSearchService=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);var t=this.manifest.getService(c.vl.SEARCH_0);return t||(t=this.manifest.getService(c.vl.SEARCH_1)),t},t.prototype.getSeeAlso=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);return this.manifest.getSeeAlso()},t.prototype.getSequenceByIndex=function(t){if(!this.manifest)throw new Error(p.manifestNotLoaded);return this.manifest.getSequenceByIndex(t)},t.prototype.getShareServiceUrl=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);var t=null,e=this.manifest.getService(c.vl.SHARE_EXTENSIONS);return e&&(e.length&&(e=e[0]),t=e.__jsonld.shareUrl),t},t.prototype._getSortedTreeNodesByDate=function(t,e){var n=this.getFlattenedTree(e);if(n){var r=n.filter((function(t){return t.data.type===s.e1.MANIFEST}));this.createDecadeNodes(t,n),this.sortDecadeNodes(t),this.createYearNodes(t,n),this.sortYearNodes(t),this.createMonthNodes(t,r),this.sortMonthNodes(t),this.createDateNodes(t,r),this.pruneDecadeNodes(t)}},t.prototype.getStartCanvasIndex=function(){return this.getCurrentSequence().getStartCanvasIndex()},t.prototype.getThumbs=function(t,e){return this.getCurrentSequence().getThumbs(t,e)},t.prototype.getTopRanges=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);return this.manifest.getTopRanges()},t.prototype.getTotalCanvases=function(){return this.getCurrentSequence().getTotalCanvases()},t.prototype.getTrackingLabel=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);return this.manifest.getTrackingLabel()},t.prototype._getTopRanges=function(){return this.iiifResource.getTopRanges()},t.prototype.getTree=function(t,e){if(void 0===t&&(t=0),void 0===e&&(e=r.NONE),!this.iiifResource)return null;var n;if(this.iiifResource.isCollection())n=this.iiifResource.getDefaultTree();else{var i=this._getTopRanges(),o=new s.OF;if(o.label="root",o.data=this.iiifResource,!i.length)return o;n=i[t].getTree(o)}var a=new s.OF;return e.toString()===r.DATE.toString()&&this.treeHasNavDates(n)?(this._getSortedTreeNodesByDate(a,n),a):n},t.prototype.treeHasNavDates=function(t){var e=this.getFlattenedTree(t);return!!e&&e.some((function(t){return!isNaN(t.navDate)}))},t.prototype.getViewingDirection=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);var t=this.getCurrentSequence().getViewingDirection();return t||(t=this.manifest.getViewingDirection()),t},t.prototype.getViewingHint=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);var t=this.getCurrentSequence().getViewingHint();return t||(t=this.manifest.getViewingHint()),t},t.prototype.hasParentCollection=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);return!!this.manifest.parentCollection},t.prototype.hasRelatedPage=function(){var t=this.getRelated();return!!t&&(t.length&&(t=t[0]),"text/html"===t.format)},t.prototype.hasResources=function(){return this.getCurrentCanvas().getResources().length>0},t.prototype.isBottomToTop=function(){var t=this.getViewingDirection();return!!t&&t===c.Pr.BOTTOM_TO_TOP},t.prototype.isCanvasIndexOutOfRange=function(t){return this.getCurrentSequence().isCanvasIndexOutOfRange(t)},t.prototype.isContinuous=function(){var t=this.getViewingHint();return!!t&&t===c.qQ.CONTINUOUS},t.prototype.isFirstCanvas=function(t){return void 0!==t?this.getCurrentSequence().isFirstCanvas(t):this.getCurrentSequence().isFirstCanvas(this.canvasIndex)},t.prototype.isHorizontallyAligned=function(){return this.isLeftToRight()||this.isRightToLeft()},t.prototype.isLastCanvas=function(t){return void 0!==t?this.getCurrentSequence().isLastCanvas(t):this.getCurrentSequence().isLastCanvas(this.canvasIndex)},t.prototype.isLeftToRight=function(){var t=this.getViewingDirection();return!!t&&t===c.Pr.LEFT_TO_RIGHT},t.prototype.isMultiCanvas=function(){return this.getCurrentSequence().isMultiCanvas()},t.prototype.isMultiSequence=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);return this.manifest.isMultiSequence()},t.prototype.isPaged=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);var t=this.getViewingHint();return t?t===c.qQ.PAGED:this.manifest.isPagingEnabled()},t.prototype.isPagingAvailable=function(){return this.isPagingEnabled()&&this.getTotalCanvases()>2},t.prototype.isPagingEnabled=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);return this.manifest.isPagingEnabled()||this.getCurrentSequence().isPagingEnabled()},t.prototype.isRightToLeft=function(){var t=this.getViewingDirection();return!!t&&t===c.Pr.RIGHT_TO_LEFT},t.prototype.isTopToBottom=function(){var t=this.getViewingDirection();return!!t&&t===c.Pr.TOP_TO_BOTTOM},t.prototype.isTotalCanvasesEven=function(){return this.getCurrentSequence().isTotalCanvasesEven()},t.prototype.isUIEnabled=function(t){if(!this.manifest)throw new Error(p.manifestNotLoaded);var e=this.manifest.getService(c.vl.UI_EXTENSIONS);if(e){var n=e.getProperty("disableUI");if(n&&(-1!==n.indexOf(t)||-1!==n.indexOf(t.toLowerCase())))return!1}return!0},t.prototype.isVerticallyAligned=function(){return this.isTopToBottom()||this.isBottomToTop()},t.prototype.createDateNodes=function(t,e){for(var n=0;n<e.length;n++){var r=e[n],i=this.getNodeYear(r),o=this.getNodeMonth(r),a=new s.OF;a.id=r.id,a.label=this.getNodeDisplayDate(r),a.data=r.data,a.data.type=s.e1.MANIFEST,a.data.year=i,a.data.month=o;var l=this.getDecadeNode(t,i);if(l){var u=this.getYearNode(l,i);if(u){var c=this.getMonthNode(u,o);c&&c.addNode(a)}}}},t.prototype.createDecadeNodes=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(r.navDate){var i=this.getNodeYear(r),o=Number(i.toString().substr(0,3)+"9");if(!this.getDecadeNode(t,i)){var a=new s.OF;a.label=i+" - "+o,a.navDate=r.navDate,a.data.startYear=i,a.data.endYear=o,t.addNode(a)}}}},t.prototype.createMonthNodes=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(r.navDate){var i=this.getNodeYear(r),o=this.getNodeMonth(r),a=this.getDecadeNode(t,i),l=null;if(a&&(l=this.getYearNode(a,i)),a&&l&&!this.getMonthNode(l,o)){var u=new s.OF;u.label=this.getNodeDisplayMonth(r),u.navDate=r.navDate,u.data.year=i,u.data.month=o,l.addNode(u)}}}},t.prototype.createYearNodes=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(r.navDate){var i=this.getNodeYear(r),o=this.getDecadeNode(t,i);if(o&&!this.getYearNode(o,i)){var a=new s.OF;a.label=i.toString(),a.navDate=r.navDate,a.data.year=i,o.addNode(a)}}}},t.prototype.getDecadeNode=function(t,e){for(var n=0;n<t.nodes.length;n++){var r=t.nodes[n];if(e>=r.data.startYear&&e<=r.data.endYear)return r}return null},t.prototype.getMonthNode=function(t,e){for(var n=0;n<t.nodes.length;n++){var r=t.nodes[n];if(e===this.getNodeMonth(r))return r}return null},t.prototype.getNodeDisplayDate=function(t){return t.navDate.toDateString()},t.prototype.getNodeDisplayMonth=function(t){return["January","February","March","April","May","June","July","August","September","October","November","December"][t.navDate.getMonth()]},t.prototype.getNodeMonth=function(t){return t.navDate.getMonth()},t.prototype.getNodeYear=function(t){return t.navDate.getFullYear()},t.prototype.getYearNode=function(t,e){for(var n=0;n<t.nodes.length;n++){var r=t.nodes[n];if(e===this.getNodeYear(r))return r}return null},t.prototype.pruneDecadeNodes=function(t){for(var e=[],n=0;n<t.nodes.length;n++){var r=t.nodes[n];r.nodes.length||e.push(r)}for(var i=0;i<e.length;i++){var o=e[i],a=t.nodes.indexOf(o);a>-1&&t.nodes.splice(a,1)}},t.prototype.sortDecadeNodes=function(t){t.nodes=t.nodes.sort((function(t,e){return t.data.startYear-e.data.startYear}))},t.prototype.sortMonthNodes=function(t){for(var e=this,n=0;n<t.nodes.length;n++)for(var r=t.nodes[n],i=0;i<r.nodes.length;i++){var o=r.nodes[i];o.nodes=o.nodes.sort((function(t,n){return e.getNodeMonth(t)-e.getNodeMonth(n)}))}},t.prototype.sortYearNodes=function(t){for(var e=this,n=0;n<t.nodes.length;n++){var r=t.nodes[n];r.nodes=r.nodes.sort((function(t,n){return e.getNodeYear(t)-e.getNodeYear(n)}))}},t}(),h=function(){function t(t){this._options=t,this._options.locale=this._options.locale||"en-GB"}return t.prototype.bootstrap=function(t,e){var n=this;return new Promise((function(r,i){t&&e&&(r=t,i=e),s.cQ.loadManifest(n._options.manifestUri).then((function(t){n._loaded(n,t,r,i)}))}))},t.prototype._loaded=function(t,e,n,r){var i=s.cQ.parseManifest(e,{locale:t._options.locale});if(i){t._options.iiifResource||(t._options.iiifResource=i);var o=t._options.collectionIndex,a=t._options.manifestIndex;if(i.getIIIFResourceType()===c.mU.COLLECTION){var l=i.getManifests(),u=i.getCollections();l.length||void 0!==o||(o=0),void 0!==o&&u&&u.length?i.getCollectionByIndex(o).then((function(e){e||r("Collection index not found"),0===e.getTotalManifests()&&0===a&&e.getTotalCollections()>0?(t._options.collectionIndex=0,t._options.manifestUri=e.id,t.bootstrap(n,r)):void 0!==a&&e.getManifestByIndex(a).then((function(e){t._options.manifest=e;var r=new f(t._options);n(r)}))})):i.getManifestByIndex(t._options.manifestIndex).then((function(e){t._options.manifest=e;var r=new f(t._options);n(r)}))}else{t._options.manifest=i;var p=new f(t._options);n(p)}}else console.error("Unable to load IIIF resource")},t}(),d=n(2084),g=function(){function t(t,e){this.authHoldingPage=null,this.clickThroughService=null,this.externalService=null,this.isProbed=!1,this.isResponseHandled=!1,this.kioskService=null,this.loginService=null,this.logoutService=null,this.probeService=null,this.restrictedService=null,this.tokenService=null,t.externalResource=this,this.dataUri=this._getDataUri(t),this.index=t.index,this.authAPIVersion=e.authApiVersion,this._parseAuthServices(t),this._parseCanvasDimensions(t)}return t.prototype._getImageServiceDescriptor=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.id;i.endsWith("/")||(i+="/"),s.cQ.isImageProfile(r.getProfile())&&(e=i+"info.json")}return e},t.prototype._getDataUri=function(t){var e=t.getContent(),n=t.getImages(),r=null;if(e&&e.length){var i=e[0].getBody();return i.length?(o=i[0].getServices()).length&&(r=this._getImageServiceDescriptor(o))?r:i[0].id:null}if(n&&n.length){var o,a=n[0].getResource();return(o=a.getServices()).length&&(r=this._getImageServiceDescriptor(o))?r:a.id}var s=t.getService(c.vl.IXIF);return s?s.getInfoUri():t.id},t.prototype._parseAuthServices=function(t){if(.9===this.authAPIVersion)this.clickThroughService=s.cQ.getService(t,c.vl.AUTH_0_CLICK_THROUGH),this.loginService=s.cQ.getService(t,c.vl.AUTH_0_LOGIN),this.restrictedService=s.cQ.getService(t,c.vl.AUTH_0_RESTRICTED),this.clickThroughService?(this.logoutService=this.clickThroughService.getService(c.vl.AUTH_0_LOGOUT),this.tokenService=this.clickThroughService.getService(c.vl.AUTH_0_TOKEN)):this.loginService?(this.logoutService=this.loginService.getService(c.vl.AUTH_0_LOGOUT),this.tokenService=this.loginService.getService(c.vl.AUTH_0_TOKEN)):this.restrictedService&&(this.logoutService=this.restrictedService.getService(c.vl.AUTH_0_LOGOUT),this.tokenService=this.restrictedService.getService(c.vl.AUTH_0_TOKEN));else{if(void 0!==t.isCanvas&&t.isCanvas()){var e=t.getContent();if(e&&e.length){var n=e[0].getBody();n&&n.length&&(t=n[0])}}this.clickThroughService=s.cQ.getService(t,c.vl.AUTH_1_CLICK_THROUGH),this.loginService=s.cQ.getService(t,c.vl.AUTH_1_LOGIN),this.externalService=s.cQ.getService(t,c.vl.AUTH_1_EXTERNAL),this.kioskService=s.cQ.getService(t,c.vl.AUTH_1_KIOSK),this.clickThroughService?(this.logoutService=this.clickThroughService.getService(c.vl.AUTH_1_LOGOUT),this.tokenService=this.clickThroughService.getService(c.vl.AUTH_1_TOKEN),this.probeService=this.clickThroughService.getService(c.vl.AUTH_1_PROBE)):this.loginService?(this.logoutService=this.loginService.getService(c.vl.AUTH_1_LOGOUT),this.tokenService=this.loginService.getService(c.vl.AUTH_1_TOKEN),this.probeService=this.loginService.getService(c.vl.AUTH_1_PROBE)):this.externalService?(this.logoutService=this.externalService.getService(c.vl.AUTH_1_LOGOUT),this.tokenService=this.externalService.getService(c.vl.AUTH_1_TOKEN),this.probeService=this.externalService.getService(c.vl.AUTH_1_PROBE)):this.kioskService&&(this.logoutService=this.kioskService.getService(c.vl.AUTH_1_LOGOUT),this.tokenService=this.kioskService.getService(c.vl.AUTH_1_TOKEN),this.probeService=this.kioskService.getService(c.vl.AUTH_1_PROBE))}},t.prototype._parseCanvasDimensions=function(t){var e=t.getImages();if(e&&e.length){var n=e[0].getResource();this.width=n.getWidth(),this.height=n.getHeight()}else if((e=t.getContent()).length){var r=e[0].getBody();r.length&&(this.width=r[0].getWidth(),this.height=r[0].getHeight())}},t.prototype._parseDescriptorDimensions=function(t){void 0!==t.width&&(this.width=t.width),void 0!==t.height&&(this.height=t.height)},t.prototype.isAccessControlled=function(){return!!(this.clickThroughService||this.loginService||this.externalService||this.kioskService||this.probeService)},t.prototype.hasServiceDescriptor=function(){return!!this.dataUri&&this.dataUri.endsWith("info.json")},t.prototype.getData=function(t){var e=this;return e.data={},new Promise((function(n,r){if(e.dataUri)if(e.probeService){e.isProbed=!0;var i=new XMLHttpRequest;i.open("GET",e.probeService.id,!0),i.withCredentials=!0,i.onload=function(){var t=JSON.parse(i.responseText);unescape(t.contentLocation)!==e.dataUri?e.status=d.MOVED_TEMPORARILY:e.status=d.OK,n(e)},i.onerror=function(){e.status=i.status,n(e)},i.send()}else{var o="GET";if(!e.hasServiceDescriptor()){if(!e.isAccessControlled())return e.status=d.OK,void n(e);o="HEAD"}var a=new XMLHttpRequest;a.open(o,e.dataUri,!0),t&&a.setRequestHeader("Authorization","Bearer "+t.accessToken),a.onload=function(){if(a.responseText){var t=JSON.parse(a.responseText),r=unescape(t["@id"]);e.data=t,e._parseAuthServices(e.data),e._parseDescriptorDimensions(e.data),r.endsWith("/info.json")&&(r=r.substr(0,r.lastIndexOf("/")));var i=e.dataUri;i&&i.endsWith("/info.json")&&(i=i.substr(0,i.lastIndexOf("/"))),r!==i&&e.loginService?e.status=d.MOVED_TEMPORARILY:e.status=d.OK,n(e)}else e.status=d.OK,n(e)},a.onerror=function(){e.status=a.status,a.responseText&&e._parseAuthServices(JSON.parse(a.responseText)),n(e)},a.send()}else r("There is no dataUri to fetch")}))},t}(),v=function(){function t(t){this.labels=t}return t.prototype.format=function(t){return-1!=t.indexOf("<a")?t:'<a href="'+t+'">'+(this.labels[t]?this.labels[t]:t)+"</a>"},t}(),_=function(t){return new h(t).bootstrap()}},3911:(t,e)=>{"use strict";var n,r,i,o,a,s,l,u,c;(c=e.rj||(e.rj={})).BOOKMARKING="oa:bookmarking",c.CLASSIFYING="oa:classifying",c.COMMENTING="oa:commenting",c.DESCRIBING="oa:describing",c.EDITING="oa:editing",c.HIGHLIGHTING="oa:highlighting",c.IDENTIFYING="oa:identifying",c.LINKING="oa:linking",c.MODERATING="oa:moderating",c.PAINTING="sc:painting",c.QUESTIONING="oa:questioning",c.REPLYING="oa:replying",c.TAGGING="oa:tagging",c.TRANSCRIBING="oad:transcribing",(u=e.cg||(e.cg={})).AUTO_ADVANCE="auto-advance",u.CONTINUOUS="continuous",u.FACING_PAGES="facing-pages",u.HIDDEN="hidden",u.INDIVIDUALS="individuals",u.MULTI_PART="multi-part",u.NO_NAV="no-nav",u.NON_PAGED="non-paged",u.PAGED="paged",u.REPEAT="repeat",u.SEQUENCE="sequence",u.THUMBNAIL_NAV="thumbnail-nav",u.TOGETHER="together",u.UNORDERED="unordered",(l=e.Hd||(e.Hd={})).CANVAS="canvas",l.CHOICE="choice",l.OA_CHOICE="oa:choice",l.CONTENT_AS_TEXT="contentastext",l.DATASET="dataset",l.DOCUMENT="document",l.IMAGE="image",l.MODEL="model",l.MOVING_IMAGE="movingimage",l.PDF="pdf",l.PHYSICAL_OBJECT="physicalobject",l.SOUND="sound",l.TEXT="text",l.TEXTUALBODY="textualbody",l.VIDEO="video",(s=e.mU||(e.mU={})).ANNOTATION="annotation",s.CANVAS="canvas",s.COLLECTION="collection",s.MANIFEST="manifest",s.RANGE="range",s.SEQUENCE="sequence",(a=e.DD||(e.DD={})).AUDIO_MP4="audio/mp4",a.CORTO="application/corto",a.DICOM="application/dicom",a.DRACO="application/draco",a.EPUB="application/epub+zip",a.GIRDER="image/vnd.kitware.girder",a.GLB="model/gltf-binary",a.GLTF="model/gltf+json",a.IIIF_PRESENTATION_2='application/ld+json;profile="http://iiif.io/api/presentation/2/context.json"',a.IIIF_PRESENTATION_3='application/ld+json;profile="http://iiif.io/api/presentation/3/context.json"',a.JPG="image/jpeg",a.M3U8="application/vnd.apple.mpegurl",a.MP3="audio/mp3",a.MPEG_DASH="application/dash+xml",a.OBJ="text/plain",a.OPF="application/oebps-package+xml",a.PDF="application/pdf",a.PLY="application/ply",a.THREEJS="application/vnd.threejs+json",a.USDZ="model/vnd.usd+zip",a.VIDEO_MP4="video/mp4",a.WEBM="video/webm",(o=e.F4||(e.F4={})).DOC="application/msword",o.DOCX="application/vnd.openxmlformats-officedocument.wordprocessingml.document",o.PDF="application/pdf",(i=e.vl||(e.vl={})).IMAGE_0_COMPLIANCE_LEVEL_0="http://library.stanford.edu/iiif/image-api/compliance.html#level0",i.IMAGE_0_COMPLIANCE_LEVEL_1="http://library.stanford.edu/iiif/image-api/compliance.html#level1",i.IMAGE_0_COMPLIANCE_LEVEL_2="http://library.stanford.edu/iiif/image-api/compliance.html#level2",i.IMAGE_0_CONFORMANCE_LEVEL_0="http://library.stanford.edu/iiif/image-api/conformance.html#level0",i.IMAGE_0_CONFORMANCE_LEVEL_1="http://library.stanford.edu/iiif/image-api/conformance.html#level1",i.IMAGE_0_CONFORMANCE_LEVEL_2="http://library.stanford.edu/iiif/image-api/conformance.html#level2",i.IMAGE_1_COMPLIANCE_LEVEL_0="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0",i.IMAGE_1_COMPLIANCE_LEVEL_1="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1",i.IMAGE_1_COMPLIANCE_LEVEL_2="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2",i.IMAGE_1_CONFORMANCE_LEVEL_0="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level0",i.IMAGE_1_CONFORMANCE_LEVEL_1="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1",i.IMAGE_1_CONFORMANCE_LEVEL_2="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2",i.IMAGE_1_LEVEL_0="http://iiif.io/api/image/1/level0.json",i.IMAGE_1_PROFILE_LEVEL_0="http://iiif.io/api/image/1/profiles/level0.json",i.IMAGE_1_LEVEL_1="http://iiif.io/api/image/1/level1.json",i.IMAGE_1_PROFILE_LEVEL_1="http://iiif.io/api/image/1/profiles/level1.json",i.IMAGE_1_LEVEL_2="http://iiif.io/api/image/1/level2.json",i.IMAGE_1_PROFILE_LEVEL_2="http://iiif.io/api/image/1/profiles/level2.json",i.IMAGE_2_LEVEL_0="http://iiif.io/api/image/2/level0.json",i.IMAGE_2_PROFILE_LEVEL_0="http://iiif.io/api/image/2/profiles/level0.json",i.IMAGE_2_LEVEL_1="http://iiif.io/api/image/2/level1.json",i.IMAGE_2_PROFILE_LEVEL_1="http://iiif.io/api/image/2/profiles/level1.json",i.IMAGE_2_LEVEL_2="http://iiif.io/api/image/2/level2.json",i.IMAGE_2_PROFILE_LEVEL_2="http://iiif.io/api/image/2/profiles/level2.json",i.AUTH_0_CLICK_THROUGH="http://iiif.io/api/auth/0/login/clickthrough",i.AUTH_0_LOGIN="http://iiif.io/api/auth/0/login",i.AUTH_0_LOGOUT="http://iiif.io/api/auth/0/logout",i.AUTH_0_RESTRICTED="http://iiif.io/api/auth/0/login/restricted",i.AUTH_0_TOKEN="http://iiif.io/api/auth/0/token",i.AUTH_1_CLICK_THROUGH="http://iiif.io/api/auth/1/clickthrough",i.AUTH_1_EXTERNAL="http://iiif.io/api/auth/1/external",i.AUTH_1_KIOSK="http://iiif.io/api/auth/1/kiosk",i.AUTH_1_LOGIN="http://iiif.io/api/auth/1/login",i.AUTH_1_LOGOUT="http://iiif.io/api/auth/1/logout",i.AUTH_1_PROBE="http://iiif.io/api/auth/1/probe",i.AUTH_1_TOKEN="http://iiif.io/api/auth/1/token",i.SEARCH_0="http://iiif.io/api/search/0/search",i.SEARCH_0_AUTO_COMPLETE="http://iiif.io/api/search/0/autocomplete",i.SEARCH_1="http://iiif.io/api/search/1/search",i.SEARCH_1_AUTO_COMPLETE="http://iiif.io/api/search/1/autocomplete",i.TRACKING_EXTENSIONS="http://universalviewer.io/tracking-extensions-profile",i.UI_EXTENSIONS="http://universalviewer.io/ui-extensions-profile",i.PRINT_EXTENSIONS="http://universalviewer.io/print-extensions-profile",i.SHARE_EXTENSIONS="http://universalviewer.io/share-extensions-profile",i.OTHER_MANIFESTATIONS="http://iiif.io/api/otherManifestations.json",i.IXIF="http://wellcomelibrary.org/ld/ixif/0/alpha.json",(r=e.Pr||(e.Pr={})).BOTTOM_TO_TOP="bottom-to-top",r.LEFT_TO_RIGHT="left-to-right",r.RIGHT_TO_LEFT="right-to-left",r.TOP_TO_BOTTOM="top-to-bottom",(n=e.qQ||(e.qQ={})).CONTINUOUS="continuous",n.INDIVIDUALS="individuals",n.NON_PAGED="non-paged",n.PAGED="paged",n.TOP="top"},3645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=t(e);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var s=0;s<t.length;s++){var l=[].concat(t[s]);r&&i[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),e.push(l))}},e}},4015:t=>{"use strict";function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}t.exports=function(t){var n,r,i=(r=4,function(t){if(Array.isArray(t))return t}(n=t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(n,r)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=i[1],a=i[3];if(!a)return o;if("function"==typeof btoa){var s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),u="/*# ".concat(l," */"),c=a.sources.map((function(t){return"/*# sourceURL=".concat(a.sourceRoot||"").concat(t," */")}));return[o].concat(c).concat([u]).join("\n")}return[o].join("\n")}},204:(t,e,n)=>{t.exports=self.fetch||(self.fetch=n(5869).default||n(5869))},3386:(t,e,n)=>{var r,i,o,a=n(9755);r=function(t,e){"use strict";var n=!1===e;if(!(e=e||t.jQuery)||!e.fn)throw"JsViews requires jQuery";var r,i,o,a,s,l,u,c,p,f,h,d,g,v,_,y,m,E,b,I,C,A,T,w,O="v0.9.83",x=/^(!*?)(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,L=/(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)(!*?[#~]?[\w$.^]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*:?\/]|(=))\s*|(!*?[#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*(([)\]])(?=\s*[.^]|\s*$|[^([])|[)\]])([([]?))|(\s+)/g,N=/[ \t]*(\r\n|\n|\r)/g,S=/\\(['"])/g,R=/['"\\]/g,M=/(?:\x08|^)(onerror:)?(?:(~?)(([\w$_\.]+):)?([^\x08]+))\x08(,)?([^\x08]+)/gi,P=/^if\s/,j=/<(\w+)[>\s]/,k=/[\x00`><\"'&=]/,D=/^on[A-Z]|^convert(Back)?$/,U=/^\#\d+_`[\s\S]*\/\d+_`$/,V=/[\x00`><"'&=]/g,F=0,G={"&":"&amp;","<":"&lt;",">":"&gt;","\0":"&#0;","'":"&#39;",'"':"&#34;","`":"&#96;","=":"&#61;"},H="html",B="object",q="data-jsv-tmpl",Y="jsvTmpl",K="For #index in nested block use #getIndex().",Q={},W=t.jsrender,$=W&&e&&!e.render,J={template:{compile:function t(n,r,i,o){function s(r){var a,s;if(""+r===r||r.nodeType>0&&(l=r)){if(!l)if(/^\.\/[^\\:*?"<>]*$/.test(r))(s=f[n=n||r])?r=s:l=document.getElementById(r);else if(e.fn&&!v.rTmpl.test(r))try{l=e(document).find(r)[0]}catch(t){}l&&(o?r=l.innerHTML:((a=l.getAttribute(q))?a!==Y?(r=f[a],delete f[a]):e.fn&&(r=e.data(l).jsvTmpl):(n=n||(e.fn?Y:r),r=t(n,l.innerHTML,i,o)),r.tmplName=n=n||a,n!==Y&&(f[n]=r),l.setAttribute(q,n),e.fn&&e.data(l,Y,r))),l=void 0}else r.fn||(r=void 0);return r}var l,u,c=r=r||"";if(0===o&&(o=void 0,c=s(c)),(o=o||(r.markup?r:{})).tmplName=n,i&&(o._parentTmpl=i),!c&&r.markup&&(c=s(r.markup))&&c.fn&&(c=c.markup),void 0!==c)return c.fn||r.fn?c.fn&&(u=c):(r=ct(c,o),mt(c.replace(R,"\\$&"),r)),u||(u=rt((function(){return u.render.apply(u,arguments)}),r),function(t){var e,n,r;for(e in J)t[n=e+"s"]&&(r=t[n],t[n]={},a[n](r,t))}(u)),n&&!i&&n!==Y&&(Q[n]=u),u}},tag:{compile:function(t,e,n){var r,i,o,a=new v._tg;function s(){this._={inline:!0,unlinked:!0},this.tagName=t}if(c(e)?e={depends:e.depends,render:e}:""+e===e&&(e={template:e}),i=e.baseTag)for(o in e.flow=!!e.flow,e.baseTag=i=""+i===i?n&&n.tags[i]||g[i]:i,a=rt(a,i),e)a[o]=X(i[o],e[o]);else a=rt(a,e);return void 0!==(r=a.template)&&(a.template=""+r===r?f[r]||f(r):r),!1!==a.init&&((s.prototype=a).constructor=a._ctr=s),n&&(a._parentTmpl=n),a}},viewModel:{compile:function(t,n){var r,i,o=this,a=n.getters,s=n.extend,l=n.id,c=e.extend({_is:t||"unnamed",unmap:b,merge:E},s),f="",h="",d=a?a.length:0,g=e.observable,v={};function _(t){i.apply(this,t)}function y(){return new _(arguments)}function m(t,e){var n,r,i,s,l,u=a.length;for(n=0;n<u;n++)r=void 0,(s=a[n])+""!==s&&(s=(r=s).getter),void 0===(l=t[s])&&r&&void 0!==(i=r.defaultVal)&&(l=lt(i,t)),e(l,r&&o[r.type],s)}function E(t){t=t+""===t?JSON.parse(t):t;var e,n,r,i,o,a,s,c,f,h,d=this;if(p(d)){for(c={},h=[],r=t.length,i=d.length,e=0;e<r;e++){for(f=t[e],s=!1,n=0;n<i&&!s;n++)c[n]||(a=d[n],l&&(c[n]=s=l+""===l?f[l]&&(v[l]?a[l]():a[l])===f[l]:l(a,f)));s?(a.merge(f),h.push(a)):h.push(y.map(f))}g?g(d).refresh(h,!0):d.splice.apply(d,[0,d.length].concat(h))}else for(o in m(t,(function(t,e,n){e?d[n]().merge(t):d[n](t)})),t)o===u||v[o]||(d[o]=t[o])}function b(){var t,n,r,i,s,l,c=this;if(p(c))return ut(c);for(t={},i=a.length,r=0;r<i;r++)s=void 0,(n=a[r])+""!==n&&(n=(s=n).getter),l=c[n](),t[n]=s&&l&&o[s.type]?p(l)?ut(l):l.unmap():l;for(n in c)"_is"===n||v[n]||n===u||"_"===n.charAt(0)&&v[n.slice(1)]||e.isFunction(c[n])||(t[n]=c[n]);return t}for(_.prototype=c,r=0;r<d;r++)!function(t){t=t.getter||t,v[t]=r+1;var e="_"+t;f+=(f?",":"")+t,h+="this."+e+" = "+t+";\n",c[t]=c[t]||function(n){if(!arguments.length)return this[e];g?g(this).setProperty(t,n):this[e]=n},g&&(c[t].set=c[t].set||function(t){this[e]=t})}(a[r]);return(i=new Function(f,h.slice(0,-1))).prototype=c,c.constructor=i,y.map=function(e){var n,r,i,o=e=e+""===e?JSON.parse(e):e,a=[];if(p(e)){for(r=(e=e||[]).length,n=0;n<r;n++)a.push(this.map(e[n]));return a._is=t,a.unmap=b,a.merge=E,a}if(e)for(i in m(e,(function(t,e){e&&(t=e.map(t)),a.push(t)})),o=this.apply(this,a),e)i===u||v[i]||(o[i]=e[i]);return o},y.getters=a,y.extend=s,y.id=l,y}},helper:{},converter:{}};function z(t,e){return function(){var n,r=this,i=r.base;return r.base=t,n=e.apply(r,arguments),r.base=i,n}}function X(t,e){return c(e)&&((e=z(t?t._d?t:z(et,t):et,e))._d=1),e}function Z(t,e){for(var n in e.props)D.test(n)&&(t[n]=X(t[n],e.props[n]))}function tt(t){return t}function et(){return""}function nt(t){this.name=(e.link?"JsViews":"JsRender")+" Error",this.message=t||this.name}function rt(t,e){for(var n in e)t[n]=e[n];return t}function it(t,e,n){return t?p(t)?it.apply(a,t):(_.delimiters=[t,e,A=n?n.charAt(0):A],E=t.charAt(0),b=t.charAt(1),I=e.charAt(0),C=e.charAt(1),t="\\"+E+"(\\"+A+")?\\"+b,e="\\"+I+"\\"+C,i="(?:(\\w+(?=[\\/\\s\\"+I+"]))|(\\w+)?(:)|(>)|(\\*))\\s*((?:[^\\"+I+"]|\\"+I+"(?!\\"+C+"))*?)",v.rTag="(?:"+i+")",i=new RegExp("(?:"+t+i+"(\\/)?|\\"+E+"(\\"+A+")?\\"+b+"(?:(?:\\/(\\w+))\\s*|!--[\\s\\S]*?--))"+e,"g"),v.rTmpl=new RegExp("<.*>|([^\\\\]|^)[{}]|"+t+".*"+e),m):_.delimiters}function ot(){var t=this.get("item");return t?t.index:void 0}function at(){return this.index}function st(t,e,n,r,i,o,a,s){var l,u,c,p=this,f="array"===e;p.content=s,p.views=f?[]:{},p.parent=n,p.type=e||"top",p.data=r,p.tmpl=i,c=p._={key:0,useKey:f?0:1,id:""+F++,onRender:a,bnds:{}},p.linked=!!a,n?(l=n.views,(u=n._).useKey?(l[c.key="_"+u.useKey++]=p,p.index=K,p.getIndex=ot):l.length===(c.key=p.index=o)?l.push(p):l.splice(o,0,p),p.ctx=t||n.ctx):p.ctx=t}function lt(t,n){return e.isFunction(t)?t.call(n):t}function ut(t){var e,n=[],r=t.length;for(e=0;e<r;e++)n.push(t[e].unmap());return n}function ct(t,n){var r,i=y._wm||{},o=rt({tmpls:[],links:{},bnds:[],_is:"template",render:dt},n);return o.markup=t,n.htmlTag||(r=j.exec(t),o.htmlTag=r?r[1].toLowerCase():""),(r=i[o.htmlTag])&&r!==i.div&&(o.markup=e.trim(o.markup)),o}function pt(t,e){var n=t+"s";a[n]=function r(i,o,s){var l,u,c,p;if(i&&typeof i===B&&!i.nodeType&&!i.markup&&!i.getTgt&&!("viewModel"===t&&i.getters||i.extend)){for(c in i)r(c,i[c],o);return o||a}return void 0===o&&(o=i,i=void 0),i&&""+i!==i&&(s=o,o=i,i=void 0),p=s?"viewModel"===t?s:s[n]=s[n]||{}:r,u=e.compile,null===o?i&&delete p[i]:(o=u?u.call(p,i,o,s,0):o,i&&(p[i]=o)),u&&o&&(o._is=t),o&&(l=v.onStore[t])&&l(i,o,u),o}}function ft(t){m[t]=function(e){return arguments.length?(_[t]=e,m):_[t]}}function ht(t){function e(e,n){this.tgt=t.getTgt(e,n)}return c(t)&&(t={getTgt:t}),t.baseMap&&(t=rt(rt({},t.baseMap),t)),t.map=function(t,n){return new e(t,n)},t}function dt(t,e,n,r,i,a){var s,l,u,c,f,h,d,g,_=r,m="";if(!0===e?(n=e,e=void 0):typeof e!==B&&(e=void 0),(u=this.tag)?(f=this,c=(_=_||f.view).getTmpl(u.template||f.tmpl),arguments.length||(t=_)):c=this,c){if(!r&&t&&"view"===t._is&&(_=t),_&&t===_&&(t=_.data),h=!_,w=w||h,_||((e=e||{}).root=t),!w||y.useViews||c.useViews||_&&_!==o)m=gt(c,t,e,n,_,i,a,u);else{if(_?(d=_.data,g=_.index,_.index=K):((_=o).data=t,_.ctx=e),p(t)&&!n)for(s=0,l=t.length;s<l;s++)_.index=s,_.data=t[s],m+=c.fn(t[s],_,v);else _.data=t,m+=c.fn(t,_,v);_.data=d,_.index=g}h&&(w=void 0)}return m}function gt(t,e,n,r,i,o,a,s){function l(t){(b=rt({},n))[E]=t}var u,c,f,h,d,g,_,y,m,E,b,I,C="";if(s&&(m=s.tagName,I=s.tagCtx,n=n?Tt(n,s.ctx):s.ctx,t===i.content?_=t!==i.ctx._wrp?i.ctx._wrp:void 0:t!==I.content?t===s.template?(_=I.tmpl,n._wrp=I.content):_=I.content||i.content:_=i.content,!1===I.props.link&&((n=n||{}).link=!1),(E=I.props.itemVar)&&("~"!==E.charAt(0)&&yt("Use itemVar='~myItem'"),E=E.slice(1))),i&&(a=a||i._.onRender,n=Tt(n,i.ctx)),!0===o&&(g=!0,o=0),a&&(n&&!1===n.link||s&&s._.noVws)&&(a=void 0),y=a,!0===a&&(y=void 0,a=i._.onRender),n=t.helpers?Tt(t.helpers,n):n,b=n,p(e)&&!r)for(f=g?i:void 0!==o&&i||new st(n,"array",i,e,t,o,a,_),i&&i._.useKey&&(f._.bnd=!s||s._.bnd&&s),E&&(f.it=E),E=f.it,u=0,c=e.length;u<c;u++)E&&l(e[u]),h=new st(b,"item",f,e[u],t,(o||0)+u,a,f.content),d=t.fn(e[u],h,v),C+=f._.onRender?f._.onRender(d,h):d;else E&&l(e),f=g?i:new st(b,m||"data",i,e,t,o,a,_),s&&!s.flow&&(f.tag=s,s.view=f),C+=t.fn(e,f,v);return y?y(C,f):C}function vt(t,e,n){var r=void 0!==n?c(n)?n.call(e.data,t,e):n||"":"{Error: "+t.message+"}";return _.onError&&void 0!==(n=_.onError.call(e.data,t,n&&r,e))&&(r=n),e&&!e.linkCtx?h.html(r):r}function _t(t){throw new v.Err(t)}function yt(t){_t("Syntax error\n"+t)}function mt(t,e,n,r,o){function a(e){(e-=g)&&y.push(t.substr(g,e).replace(N,"\\n"))}function s(e,n){e&&(e+="}}",yt((n?"{{"+n+"}} block has {{/"+e+" without {{"+e:"Unmatched or missing {{/"+e)+", in template:\n"+t))}var l,u,c,p,f,h=_.allowCode||e&&e.allowCode||!0===m.allowCode,d=[],g=0,v=[],y=d,b=[,,d];if(h&&e._is&&(e.allowCode=h),n&&(void 0!==r&&(t=t.slice(0,-r.length-2)+I),t=E+t+C),s(v[0]&&v[0][2].pop()[0]),t.replace(i,(function(i,l,u,f,d,_,m,E,I,C,A,T){(m&&l||I&&!u||E&&":"===E.slice(-1)||C)&&yt(i),_&&(d=":",f=H);var w=(l||n)&&[[]],O="",x="",L="",R="",j="",k="",U="",V="",F=!(I=I||n&&!o)&&!d;u=u||(E=E||"#data",d),a(T),g=T+i.length,m?h&&y.push(["*","\n"+E.replace(/^:/,"ret+= ").replace(S,"$1")+";\n"]):u?("else"===u&&(P.test(E)&&yt('for "{{else if expr}}" use "{{else expr}}"'),w=b[7]&&[[]],b[8]=t.substring(b[8],T),b=v.pop(),y=b[2],F=!0),E&&Ct(E.replace(N," "),w,e).replace(M,(function(t,e,n,r,i,o,a,s){return r="'"+i+"':",a?(x+=o+",",R+="'"+s+"',"):n?(L+=r+"j._cp("+o+',"'+s+'",view),',k+=r+"'"+s+"',"):e?U+=o:("trigger"===i&&(V+=o),O+=r+o+",",j+=r+"'"+s+"',",p=p||D.test(i)),""})).slice(0,-1),w&&w[0]&&w.pop(),c=[u,f||!!r||p||"",F&&[],bt(R||(":"===u?"'#data',":""),j,k),bt(x||(":"===u?"data,":""),O,L),U,V,w||0],y.push(c),F&&(v.push(b),(b=c)[8]=g)):A&&(s(A!==b[0]&&"else"!==b[0]&&A,b[0]),b[8]=t.substring(b[8],T),b=v.pop()),s(!b&&A),y=b[2]})),a(t.length),(g=d[d.length-1])&&s(""+g!==g&&+g[8]===g[8]&&g[0]),n){for(u=At(d,t,n),f=[],l=d.length;l--;)f.unshift(d[l][7]);Et(u,f)}else u=At(d,e);return u}function Et(t,e){var n,r,i=0,o=e.length;for(t.deps=[],t.paths=[];i<o;i++)for(n in t.paths.push(r=e[i]),r)"_jsvto"!==n&&r.hasOwnProperty(n)&&r[n].length&&!r[n].skp&&(t.deps=t.deps.concat(r[n]))}function bt(t,e,n){return[t.slice(0,-1),e.slice(0,-1),n.slice(0,-1)]}function It(t,e){return"\n\t"+(e?e+":{":"")+"args:["+t[0]+"]"+(t[1]||!e?",\n\tprops:{"+t[1]+"}":"")+(t[2]?",\n\tctx:{"+t[2]+"}":"")}function Ct(t,e,n){var r,i,a,s,l,u=e&&e[0],c={bd:u},p={0:c},f=0,h=(n?n.links:u&&(u.links=u.links||{}))||o.tmpl.links,d=0,g={},v={},_=(t+(n?" ":"")).replace(L,(function(o,_,y,m,E,C,A,T,w,O,L,N,S,R,M,P,j,k,D,U){m&&!T&&(E=m+E),C=C||"",y=y||_||N,E=E||w;var V,F,G,H,B,q=")";if("["===(O=O||j||"")&&(O="[j._sq(",q=")]"),!A||l||s){if(u&&P&&!l&&!s&&(!r||a||i)&&(V=v[d-1],U.length-1>D-(V||0))){if(V=U.slice(V,D+o.length),!0!==F)if(G=i||p[d-1].bd,(H=G[G.length-1])&&H.prm){for(;H.sb&&H.sb.prm;)H=H.sb;B=H.sb={path:H.sb,bnd:H.bnd}}else G.push(B={path:G.pop()});(F=h[P=b+":"+V+" onerror=''"+I])||(h[P]=!0,h[P]=F=mt(P,n,!0)),!0!==F&&B&&(B._jsv=F,B.prm=c.bd,B.bnd=B.bnd||B.path&&B.path.indexOf("^")>=0)}return l?(l=!S)?o:N+'"':s?(s=!R)?o:N+'"':(y?(v[d]=D++,c=p[++d]={bd:[]},y):"")+(k?d?"":(f=U.slice(f,D),(r?(r=a=i=!1,"\b"):"\b,")+f+(f=D+o.length,u&&e.push(c.bd=[]),"\b")):T?(d&&yt(t),u&&e.pop(),r=E,a=m,f=D+o.length,u&&((u=c.bd=e[r]=[]).skp=!m),E+":"):E?E.split("^").join(".").replace(x,(function(t,n,o,a,s,l,p,f){var h="."===o;if(o&&(E=E.slice(n.length),/^\.?constructor$/.test(f||E)&&yt(t),h||(t=(a?'view.hlp("'+a+'")':s?"view":"data")+(f?(l?"."+l:a||s?"":"."+o)+(p||""):(f=a?"":s?l||"":o,"")),t=n+("view.data"===(t+=f?"."+f:"").slice(0,9)?t.slice(5):t)),u)){if(G="linkTo"===r?i=e._jsvto=e._jsvto||[]:c.bd,H=h&&G[G.length-1]){if(H._jsv){for(;H.sb;)H=H.sb;H.bnd&&(E="^"+E.slice(1)),H.sb=E,H.bnd=H.bnd||"^"===E.charAt(0)}}else G.push(E);v[d]=D+(h?1:0)}return t}))+(O?(c=p[++d]={bd:[]},g[d]=q,O):C):C||(M?(M=g[d]||M,g[d]=!1,c=p[--d],M+(O?(c=p[++d],g[d]=q,O):"")):L?(g[d]||yt(t),","):_?"":(l=S,s=R,'"')))}yt(t)}));return!d&&_||yt(t)}function At(t,e,n){var r,i,o,a,s,l,u,c,p,f,h,d,v,m,E,b,I,C,A,T,w,O,x,L,R,M,P,j,k,D=0,U=y.useViews||e.useViews||e.tags||e.templates||e.helpers||e.converters,V="",F={},G=t.length;for(""+e===e?(I=n?'data-link="'+e.replace(N," ").slice(1,-1)+'"':e,e=0):(I=e.tmplName||"unnamed",e.allowCode&&(F.allowCode=!0),e.debug&&(F.debug=!0),f=e.bnds,b=e.tmpls),r=0;r<G;r++)if(""+(i=t[r])===i)V+='\n+"'+i+'"';else if("*"===(o=i[0]))V+=";\n"+i[1]+"\nret=ret";else{if(a=i[1],T=!n&&i[2],s=It(i[3],"params")+"},"+It(d=i[4]),P=i[5],k=i[6],w=i[8]&&i[8].replace(S,"$1"),(L="else"===o)?h&&h.push(i[7]):(D=0,f&&(h=i[7])&&(h=[h],D=f.push(1))),U=U||d[1]||d[2]||h||/view.(?!index)/.test(d[0]),(R=":"===o)?a&&(o=a===H?">":a+o):(T&&((C=ct(w,F)).tmplName=I+"/"+o,C.useViews=C.useViews||U,At(T,C),U=C.useViews,b.push(C)),L||(A=o,U=U||o&&(!g[o]||!g[o].flow),x=V,V=""),O=(O=t[r+1])&&"else"===O[0]),j=P?";\ntry{\nret+=":"\n+",v="",m="",R&&(h||k||a&&a!==H)){if((M=new Function("data,view,j,u"," // "+I+" "+D+" "+o+"\nreturn {"+s+"};"))._er=P,M._tag=o,n)return M;Et(M,h),p=!0,v=(E='c("'+a+'",view,')+D+",",m=")"}if(V+=R?(n?(P?"try{\n":"")+"return ":j)+(p?(p=void 0,U=c=!0,E+(h?(f[D-1]=M,D):"{"+s+"}")+")"):">"===o?(u=!0,"h("+d[0]+")"):"((v="+d[0]+")!=null?v:"+(n?"null)":'"")')):(l=!0,"\n{view:view,tmpl:"+(T?b.length:"0")+","+s+"},"),A&&!O){if(V="["+V.slice(0,-1)+"]",E='t("'+A+'",view,this,',n||h){if((V=new Function("data,view,j,u"," // "+I+" "+D+" "+A+"\nreturn "+V+";"))._er=P,V._tag=A,h&&Et(f[D-1]=V,h),n)return V;v=E+D+",undefined,",m=")"}V=x+j+E+(D||V)+")",h=0,A=0}P&&(U=!0,V+=";\n}catch(e){ret"+(n?"urn ":"+=")+v+"j._err(e,view,"+P+")"+m+";}"+(n?"":"ret=ret"))}V="// "+I+"\nvar v"+(l?",t=j._tag":"")+(c?",c=j._cnvt":"")+(u?",h=j._html":"")+(n?";\n":',ret=""\n')+(F.debug?"debugger;":"")+V+(n?"\n":";\nreturn ret;"),!1!==_.debugMode&&(V="try {\n"+V+"\n}catch(e){\nreturn j._err(e, view);\n}");try{V=new Function("data,view,j,u",V)}catch(t){yt("Compiled template code:\n\n"+V+'\n: "'+t.message+'"')}return e&&(e.fn=V,e.useViews=!!U),V}function Tt(t,e){return t&&t!==e?e?rt(rt({},e),t):t:e&&rt({},e)}function wt(t){return G[t]||(G[t]="&#"+t.charCodeAt(0)+";")}function Ot(t,n,r){var i=this.jquery&&(this[0]||_t("Unknown template")),o=i.getAttribute(q);return dt.call(o?e.data(i).jsvTmpl:f(i),t,n,r)}function xt(t){return null!=t?k.test(t)&&(""+t).replace(V,wt)||t:""}if(a={jsviews:O,sub:{View:st,Err:nt,tmplFn:mt,parse:Ct,extend:rt,extendCtx:Tt,syntaxErr:yt,onStore:{},addSetting:ft,settings:{allowCode:!1},advSet:et,_ths:Z,_tg:function(){},_cnvt:function(t,e,n,r){var i,o,a="number"==typeof n&&e.tmpl.bnds[n-1],s=e.linkCtx;return void 0!==r?n=r={props:{},args:[r]}:a&&(n=a(e.data,e,v)),o=n.args[0],(t||a)&&((i=s&&s.tag)||(i=rt(new v._tg,{_:{inline:!s,bnd:a,unlinked:!0},tagName:":",cvt:t,flow:!0,tagCtx:n}),s&&(s.tag=i,i.linkCtx=s),n.ctx=Tt(n.ctx,(s?s.view:e).ctx)),i._er=r&&o,Z(i,n),n.view=e,i.ctx=n.ctx||i.ctx||{},n.ctx=void 0,o=i.cvtArgs("true"!==t&&t)[0],o=a&&e._.onRender?e._.onRender(o,e,i):o),null!=o?o:""},_tag:function(t,n,r,i,a,s){var l,u,c,p,f,d,g,_,y,m,E,b,I,C,A,T,w,O,x="",L=(n=n||o).linkCtx||0,N=n.ctx,S=r||n.tmpl,R="number"==typeof i&&n.tmpl.bnds[i-1];for("tag"===t._is?(t=(l=t).tagName,i=l.tagCtxs,l.template):(u=n.getRsc("tags",t)||_t("Unknown tag: {{"+t+"}} ")).template,void 0!==s?(x+=s,i=s=[{props:{},args:[]}]):R&&(i=R(n.data,n,v)),g=i.length,d=0;d<g;d++)y=i[d],(!L||!L.tag||d&&!L.tag._.inline||l._er)&&((E=S.tmpls&&y.tmpl)&&(E=y.content=S.tmpls[E-1]),y.index=d,y.tmpl=E,y.render=dt,y.view=n,y.ctx=Tt(y.ctx,N)),(r=y.props.tmpl)&&(y.tmpl=n.getTmpl(r)),l||(b=!!(l=new u._ctr).init,l.parent=f=N&&N.tag,l.tagCtxs=i,w=l.dataMap,L&&(l._.inline=!1,L.tag=l,l.linkCtx=L),(l._.bnd=R||L.fn)?l._.arrVws={}:l.dataBoundOnly&&_t("{^{"+t+"}} tag must be data-bound")),i=l.tagCtxs,w=l.dataMap,y.tag=l,w&&i&&(y.map=i[d].map),l.flow||(m=y.ctx=y.ctx||{},c=l.parents=m.parentTags=N&&Tt(m.parentTags,N.parentTags)||{},f&&(c[f.tagName]=f),c[l.tagName]=m.tag=l);if(!(l._er=s)){for(Z(l,i[0]),l.rendering={},d=0;d<g;d++)T=(y=l.tagCtx=i[d]).props,A=l.cvtArgs(),(I=T.dataMap||w)&&(A.length||T.dataMap)&&((C=y.map)&&C.src===A[0]&&!a||(C&&C.src&&C.unmap(),C=y.map=I.map(A[0],T,void 0,!l._.bnd)),A=[C.tgt]),l.ctx=y.ctx,d||(b&&(l.template,l.init(y,L,l.ctx),b=void 0),L&&(L.attr=l.attr=L.attr||l.attr),p=l.attr,l._.noVws=p&&p!==H),_=void 0,l.render&&(_=l.render.apply(l,A),n.linked&&_&&l.linkedElem&&!U.test(_)&&(_=gt(e.templates(_),A[0],void 0,void 0,n,void 0,void 0,l))),A.length||(A=[n]),void 0===_&&(O=A[0],l.contentCtx&&(O=l.contentCtx(O)),_=y.render(O,!0)||(a?void 0:"")),x=x?x+(_||""):_;l.rendering=void 0}return l.tagCtx=i[0],l.ctx=l.tagCtx.ctx,l._.noVws&&l._.inline&&(x="text"===p?h.html(x):""),R&&n._.onRender?n._.onRender(x,n,l):x},_er:_t,_err:vt,_html:xt,_cp:tt,_sq:function(t){return"constructor"===t&&yt(""),t}},settings:{delimiters:it,advanced:function(t){return t?(rt(y,t),v.advSet(),m):y}},getCtx:tt,map:ht},(nt.prototype=new Error).constructor=nt,ot.depends=function(){return[this.get("item"),"index"]},at.depends="index",st.prototype={get:function(t,e){e||!0===t||(e=t,t=void 0);var n,r,i,o,a=this,s=!e||"root"===e;if(t){if(!(o=e&&a.type===e&&a))if(n=a.views,a._.useKey){for(r in n)if(o=e?n[r].get(t,e):n[r])break}else for(r=0,i=n.length;!o&&r<i;r++)o=e?n[r].get(t,e):n[r]}else if(s)for(;a.parent;)o=a,a=a.parent;else for(;a&&!o;)o=a.type===e?a:void 0,a=a.parent;return o},getIndex:at,getRsc:function(t,e){for(var n,r,i=this;void 0===n&&i;)n=(r=i.tmpl&&i.tmpl[t])&&r[e],i=i.parent;return n||a[t][e]},getTmpl:function(t){return t&&(t.fn?t:this.getRsc("templates",t)||f(t))},hlp:function(e,n){var r,i,o=this,s=o.ctx;if(s&&(s=s[e]),void 0===s&&(s=d[e]),s&&s._cp){if(n)return(i=v._ceo(s[1].deps)).unshift(s[0]),i._cp=!0,i;s=a.getCtx(s)}return s&&c(s)&&!s._wrp&&(r=function(){return s.apply(this&&this!==t?this:o,arguments)},r._wrp=o,rt(r,s)),r||s},_is:"view"},v=a.sub,m=a.settings,!(W||e&&e.render)){for(r in J)pt(r,J[r]);for(T in h=a.converters,d=a.helpers,g=a.tags,v._tg.prototype={baseApply:function(t){return this.base.apply(this,t)},cvtArgs:function(t){var e=this,n=e.tagCtx,r=n.view,i=n.args;return t=(t=t||e.convert)&&(""+t===t?r.getRsc("converters",t)||_t("Unknown converter: '"+t+"'"):t),i=i.length||n.index?t?i.slice():i:[r.data],t&&(t.depends&&(e.depends=v.getDeps(e.depends,e,t.depends,t)),i[0]=t.apply(e,i)),i}},o=v.topView=new st,e?(e.fn.render=Ot,u=e.expando,e.observable&&(rt(v,e.views.sub),a.map=e.views.map)):(e={},n&&(t.jsrender=e),e.renderFile=e.__express=e.compile=function(){throw"Node.js: use npm jsrender, or jsrender-node.js"},e.isFunction=function(t){return"function"==typeof t},e.isArray=Array.isArray||function(t){return"[object Array]"==={}.toString.call(t)},v._jq=function(t){t!==e&&(rt(t,e),(e=t).fn.render=Ot,delete e.jsrender,u=e.expando)},e.jsrender=O),(_=v.settings).allowCode=!1,c=e.isFunction,e.render=Q,e.views=a,e.templates=f=a.templates,_)ft(T);(m.debugMode=function(t){return void 0===t?_.debugMode:(_.debugMode=t,_.onError=t+""===t?new Function("","return '"+t+"';"):c(t)?t:void 0,m)})(!1),y=_.advanced={useViews:!1,_jsv:!1},g({if:{render:function(t){var e=this,n=e.tagCtx,r=e.rendering.done||!t&&(arguments.length||!n.index)?"":(e.rendering.done=!0,e.selected=n.index,n.render(n.view,!0));return r},flow:!0},for:{render:function(t){var e,n=!arguments.length,r=this,i=r.tagCtx,o="",a=0;return r.rendering.done||(void 0!==(e=n?i.view.data:t)&&(o+=i.render(e,n),a+=p(e)?e.length:1),(r.rendering.done=a)&&(r.selected=i.index)),o},flow:!0},props:{baseTag:"for",dataMap:ht((function(t){var e,n,r=[];if(typeof t===B)for(e in t)n=t[e],e!==u&&t.hasOwnProperty(e)&&!c(n)&&r.push({key:e,prop:n});return r})),flow:!0},include:{flow:!0},"*":{render:tt,flow:!0},":*":{render:tt,flow:!0},dbg:d.dbg=h.dbg=function(t){try{throw console.log("JsRender dbg breakpoint: "+t),"dbg breakpoint"}catch(t){}return this.base?this.baseApply(arguments):t}}),h({html:xt,attr:xt,url:function(t){return null!=t?encodeURI(""+t):null===t?t:""}})}if(_=v.settings,p=(e||W).isArray,m.delimiters("{{","}}","^"),$&&W.views.sub._jq(e),a=e.views,v=a.sub,c=e.isFunction,p=e.isArray,u=e.expando,!e.observe){var Lt=e.event.special,Nt=[].slice,St=[].splice,Rt=[].concat,Mt=parseInt,Pt=/\S+/g,jt=v.propChng=v.propChng||"propertyChange",kt=v.arrChng=v.arrChng||"arrayChange",Dt={},Ut=jt+".observe",Vt=1,Ft=1,Gt=1,Ht=e.hasData,Bt=e.data,qt={},Yt=function(t){return t._cId=t._cId||".obs"+Ft++},Kt=function(t,e){return this._data=e,this._ns=t,this},Qt=function(t,e){return this._data=e,this._ns=t,this},Wt=function(t){return p(t)?[t]:t},$t=function(t,e,n){var r,i,o=e,a=o,s=(t=t?p(t)?t:[t]:[])&&t.length,l=[];for(r=0;r<s;r++)i=t[r],c(i)?l=l.concat($t(i.call(e,e,n),e)):""+i===i?(a!==o&&l.push(o=a),l.push(i)):(e=a=i,a!==o&&l.push(o=a));return l},Jt=function(t,e){for(var n in t)return;delete Dt[e]},zt=function(t,e){function n(t){return typeof t===B&&(h[0]||f&&p(t))}if(!t.data||!t.data.off){var r,i,o,a=e.oldValue,s=e.value,l=t.data,u=l.observeAll,c=l.cb,f=!c.noArray,h=l.paths,d=l.ns;t.type===kt?(c.array||c).call(l,t,e):l.prop!==e.path&&"*"!==l.prop||(u?(r=u._path+"."+e.path,i=u.filter,o=[t.target].concat(u.parents()),n(a)&&Xt(f,d,[a],h,c,!0,i,[o],r),n(s)&&Xt(f,d,[s],h,c,void 0,i,[o],r)):(n(a)&&Xt(f,d,[a],h,c,!0),n(s)&&Xt(f,d,[s],h,c)),l.cb(t,e))}},Xt=function(){var t=Rt.apply([],arguments);return s.apply(t.shift(),t)},Zt=function(t,e,n){ee(this._ns,this._data,t,e,[],"root",n)},te=function(t,e){Zt.call(this,t,e,!0)},ee=function(t,e,n,r,i,o,a,c){function f(t,e){for(g=t.length,_=o+"[]";g--;)h(t,g,e,1)}function h(e,i,o,a){var s,p;i!==u&&(s=l._fltr(_,e[i],y,r))&&(p=y.slice(),a&&m&&p[0]!==m&&p.unshift(m),ee(t,s,n,r||(a?void 0:0),p,_,o,c))}function d(t,e){switch(o=t.data.observeAll._path,m=t.target,e.change){case"insert":f(e.items);break;case"remove":f(e.items,!0);break;case"set":_=o+"."+e.path,h(e,"oldValue",!0),h(e,"value")}m=void 0,n.apply(this,arguments)}var g,v,_,y,m,E,b=!c||c.un||!a;if(e&&typeof e===B){if(y=[e].concat(i),v=p(e)?"":"*",c&&b&&Ht(e)&&c[E=Bt(e).obId])return void c[E]++;if(c||(c={un:a}),n){if(v||0!==r)if(d._cId=Yt(n),b)s(t,e,v,d,a,r,y,o),E=Bt(e).obId,c[E]=(c[E]||0)+1;else{if(--c[Bt(e).obId])return;s(t,e,v,d,a,r,y,o)}}else c&&(c[Bt(e).obId]=1),s(t,e,v,void 0,a,r,y,o);if(v)for(g in e)_=o+"."+g,h(e,g,a);else f(e,a)}},ne=function(t){return t.indexOf(".")<0&&t.indexOf("[")<0};s=function(){function t(){function i(t,r,i,o){var a,s,l=Ht(H),u=Wt(H),c=M,p=P;if(t=n?t+"."+n:t,!E&&(o||i))for(w=(w=(w=l&&e._data(H))&&w.events)&&w[i?kt:jt],A=w&&w.length;A--;)if((T=w[A]&&w[A].data)&&(o&&T.ns!==n||!o&&T.ns===n&&T.cb&&T.cb._cId===b._cId))return;E||o?e(u).off(t,zt):((s=i?{}:{fullPath:y,paths:r?[r]:[],prop:_}).ns=n,s.cb=b,P&&(s.observeAll={_path:p,path:function(){return a=c.length,p.replace(/[[.]/g,(function(t){return a--,"["===t?"["+e.inArray(c[a-1],c[a]):"."}))},parents:function(){return c},filter:j}),e(u).on(t,null,s,zt),N&&(N[Bt(H).obId||Bt(H,"obId",Vt++)]=H))}function a(e){var n=G;return e.ob=O(e,n),e.cb=function(i,o){var a=e.ob,l=e.sb,u=O(e,n);u!==a&&(typeof a===B&&(s(a,!0),(l||r&&p(a))&&t([a],l,b,O,!0)),e.ob=u,typeof u===B&&(s(u),(l||r&&p(u))&&t([u],l,b,O))),b(i,o)}}function s(t,e,n,o){if(r){var a=H,s=P;H=t,o&&(H=t[o],P+="."+o),j&&H&&(H=l._fltr(P,H,o?[t].concat(M):M,j)),H&&(n||p(H))&&i(kt+".observe"+(b?Yt(b):""),void 0,!0,e),H=a,P=s}}var f,h,d,g,_,y,m,E,b,I,C,A,T,w,O,x,L,N,S,R,M,P,j,k,D,U=Ut,V=1!=this?Rt.apply([],arguments):Nt.call(arguments),F=V.pop()||!1,G=V.shift(),H=G,q=V.length;if(F+""===F&&(P=F,M=V.pop(),j=V.pop(),F=!!V.pop(),q-=3),F===!!F&&(E=F,F=V[q-1],F=!q||F+""===F||F&&!c(F)?void 0:(q--,V.pop()),E&&!q&&c(G)&&(F=G,G=void 0)),b=F,q&&c(V[q-1])&&(x=O=b,b=V.pop(),q--),!E||!b||b._cId){for(U+=b?(C=b._inId||"",E?b._cId+C:(I=Yt(b))+C):"",I&&!E&&(N=Dt[I]=Dt[I]||{}),D=(k=n&&n.match(Pt)||[""]).length;D--;){if(n=k[D],G&&(!(y=V[0])||y+""!==y)&&(p(G)?s(G,E,!0):E&&i(U,"")),E&&!q&&!G)for(h in Dt)for(T in h=Dt[h])H=h[T],p(H)?s(H,E,E):i(U,"");for(S=0,f=0;f<q;f++)if(""!==(y=V[f])){if(y&&y._cp&&(O=v._gccb(y[0]),o=G=y[0].data,y=y[1]),H=G,""+y===y){if((g=y.split("^"))[1]&&(S=g[0].split(".").length,S=(y=g.join(".")).split(".").length-S),O&&(L=O(y,G,S),O=x),L){q+=L.length-1,St.apply(V,[f--,1].concat(L));continue}g=y.split(".")}else c(y)||(y&&y._jsv?((R=E?y.cb:a(y)).noArray=!r,R._cId=b._cId,R._inId=R._inId||".obIn"+Gt++,(y.bnd||y.prm&&y.prm.length||!y.sb)&&t([H],y.path,[o],y.prm,R,O,E),y.sb&&t([y.ob],y.sb,b,O,E),y=o,H=void 0):H=y),g=[G=y];for(;H&&void 0!==(_=g.shift());)if(typeof H===B){if(""+_===_){if(""===_)continue;if(g.length<S+1&&!H.nodeType){if(!E&&(w=Ht(H)&&e._data(H))){for(w=(w=w.events)&&w[jt],A=w&&w.length,d=0;A--;)!(T=w[A].data)||T.ns!==n||T.cb._cId!==b._cId||T.cb._inId!==b._inId||T.prop!==_&&"*"!==T.prop&&"**"!==T.prop||((h=g.join("."))&&T.paths.push(h),d++);if(d){H=H[_];continue}}if("*"===_||"**"===_){if(!E&&w&&w.length&&i(U,"",!1,!0),"*"===_)for(h in i(U,""),H)h!==u&&s(H,E,void 0,h);else e.observable(n,H)[(E?"un":"")+"observeAll"](b);break}_&&i(U+".p_"+_,g.join("^"))}P&&(P+="."+_),_=H[_]}if(c(_)){(m=_.depends)&&t([H],$t(m,H,b),b,O,E);break}H=_,E&&H===G&&(f>q-2||V[f+1]+""!==V[f+1])&&i(U,"")}s(H,E)}}return I&&Jt(N,I),{cbId:I,bnd:N}}}var n,r=0!=this,i=Nt.call(arguments),o=i[0];return o+""===o&&r&&(n=o,i.shift(),o=i[0]),t.apply(1,i)},l=function(t,e){return 1===arguments.length&&(e=t,t=""),p(e)?new Qt(t,e):new Kt(t,e)},v.getDeps=function(){var t=arguments;return function(){for(var e,n,r=[],i=t.length;i--;)e=t[i--],(n=t[i])&&(r=r.concat(c(n)?n(e,e):n));return r}},e.observable=l,l._fltr=function(t,e,n,r){if(!r||!c(r)||r(t,e,n))return typeof(e=c(e)?e.set&&e.call(n[0]):e)===B&&e},l.Object=Kt,l.Array=Qt,e.observe=l.observe=s,e.unobserve=l.unobserve=function(){return[].push.call(arguments,!0),s.apply(this,arguments)},l._apply=Xt,Kt.prototype={_data:null,observeAll:Zt,unobserveAll:te,data:function(){return this._data},setProperty:function(t,e,n){var r,i,o,a=(t=t||"")+""!==t,s=this,l=s._data;if(l)if(a)if(n=e,p(t))for(r=t.length;r--;)i=t[r],s.setProperty(i.name,i.value,void 0===n||n);else for(r in t)s.setProperty(r,t[r],n);else if(t!==u){for(o=t.split(/[.^]/);l&&o.length>1;)l=l[o.shift()];l&&s._setProperty(l,o[0],e,n)}return s},removeProperty:function(t){return this.setProperty(t,qt),this},_setProperty:function(t,e,n,r){var i,o,a,s=e?t[e]:t;c(s)&&s.set&&(t=t._wrp||t,i=!0===(o=s).set?o:o.set,s=o.call(t)),(s!==n||r&&s!=n)&&(!(s instanceof Date)||s>n||s<n)&&(i?(i.call(t,n),n=o.call(t)):(a=n===qt)?void 0!==s?(delete t[e],n=void 0):e=void 0:e&&(t[e]=n),e&&this._trigger(t,{change:"set",path:e,value:n,oldValue:s,remove:a}))},_trigger:function(t,n){e(t).triggerHandler(jt+(this._ns?"."+/^\S+/.exec(this._ns)[0]:""),n)}},Qt.prototype={_data:null,observeAll:Zt,unobserveAll:te,data:function(){return this._data},insert:function(t,e){var n=this._data;return 1===arguments.length&&(e=t,t=n.length),(t=Mt(t))>-1&&(e=p(e)?e:[e]).length&&this._insert(t,e),this},_insert:function(t,e){var n=this._data,r=n.length;t>r&&(t=r),St.apply(n,[t,0].concat(e)),this._trigger({change:"insert",index:t,items:e},r)},remove:function(t,e){var n,r=this._data;return void 0===t&&(t=r.length-1),t=Mt(t),(e=e?Mt(e):0===e?0:1)>0&&t>-1&&(e=(n=r.slice(t,t+e)).length)&&this._remove(t,e,n),this},_remove:function(t,e,n){var r=this._data,i=r.length;r.splice(t,e),this._trigger({change:"remove",index:t,items:n},i)},move:function(t,e,n){return n=n?Mt(n):0===n?0:1,t=Mt(t),e=Mt(e),n>0&&t>-1&&e>-1&&t!==e&&this._move(t,e,n),this},_move:function(t,e,n){var r,i=this._data,o=i.length,a=t+n-o;a>0&&(n-=a),n&&(r=i.splice(t,n),e>i.length&&(e=i.length),St.apply(i,[e,0].concat(r)),this._trigger({change:"move",oldIndex:t,index:e,items:r},o))},refresh:function(t,e){function n(){o&&(l.insert(i-o,u),h+=o,r+=o,o=0,u=[])}var r,i,o,a,s,l=this,u=[],c=l._data,p=c.slice(),f=c.length,h=f,d=t.length;for(l._srt=!0,i=o=0;i<d;i++)if((a=t[i])===c[i-o])n();else{for(r=i-o;r<h&&a!==c[r];r++);if(r<h){for(n(),s=0;s++<d-r&&t[i+s]===c[r+s];);l.move(r,i,s),i+=s-1}else o++,u.push(a)}return n(),h>i&&l.remove(i,h-i),l._srt=void 0,l._trigger({change:"refresh",oldItems:p},f),l},_trigger:function(t,n){var r=this,i=r._data,o=i.length,a=e([i]);r._srt?t.refresh=!0:o!==n&&a.triggerHandler(jt,{change:"set",path:"length",value:o,oldValue:n}),a.triggerHandler(kt+(r._ns?"."+/^\S+/.exec(r._ns)[0]:""),t)}},Lt[jt]=Lt[kt]={remove:function(t){var n,r,i,o,a,s=t.data;if(s&&(s.off=!0,s=s.cb)&&(n=Dt[s._cId])){for(o=(i=e._data(this).events[t.type]).length;o--&&!r;)r=(a=i[o].data)&&a.cb&&a.cb._cId===s._cId;r||(delete n[Bt(this).obId],Jt(n,s._cId))}}},a.map=function(t){function n(e,n,r,i){var o,a=this;this.src&&this.unmap(),typeof e===B&&(a.src=e,a.tgt=r||a.tgt||[],a.options=n||a.options,a.update(),i||(t.obsSrc&&l(a.src).observeAll(a.obs=function(e,n){o||(o=!0,t.obsSrc(a,e,n),o=void 0)},a.srcFlt),t.obsTgt&&l(a.tgt).observeAll(a.obt=function(e,n){o||(o=!0,t.obsTgt(a,e,n),o=void 0)},a.tgtFlt)))}return c(t)&&(t={getTgt:t}),t.baseMap&&(t=e.extend({},t.baseMap,t)),t.map=function(t,e,r,i){return new n(t,e,r,i)},(n.prototype={srcFlt:t.srcFlt||ne,tgtFlt:t.tgtFlt||ne,update:function(e){var n=this;l(n.tgt).refresh(t.getTgt(n.src,n.options=e||n.options))},unmap:function(){var t=this;t.src&&(t.obs&&l(t.src).unobserveAll(t.obs,t.srcFlt),t.obt&&l(t.tgt).unobserveAll(t.obt,t.tgtFlt),t.src=void 0)},map:n,_def:t}).constructor=n,t},v.advSet=function(){v._gccb=this._gccb,t._jsv=_.advanced._jsv?{cbBindings:Dt}:void 0}}if(m=a.settings,_=v.settings,y=_.advanced,h=a.converters,e.templates=f=a.templates,g=a.tags,j=/<(?!script)(\w+)[>\s]/,e.link)return e;_.trigger=!0;var re,ie,oe,ae,se,le,ue,ce,pe="data-jsv",fe="change.jsv",he="onBeforeChange",de="onAfterChange",ge="checked",ve="checkbox",_e="radio",ye="none",me="SCRIPT",Ee="true",be='"><\/script>',Ie='<script type="jsv',Ce="script,[data-jsv]",Ae={value:"val",input:"val",html:H,text:"text"},Te={from:"value",to:"value"},we=0,Oe=e.cleanData,xe=m.delimiters,Le=document.createDocumentFragment(),Ne=document.querySelector,Se={ol:1,ul:1,table:1,tbody:1,thead:1,tfoot:1,tr:1,colgroup:1,dl:1,select:1,optgroup:1,svg:1,svg_ns:1},Re={tr:"table"},Me={br:1,img:1,input:1,hr:1,area:1,base:1,col:1,link:1,meta:1,command:1,embed:1,keygen:1,param:1,source:1,track:1,wbr:1},Pe={},je={},ke=1,De=/^#(view\.?)?/,Ue=/((\/>)|<\/(\w+)>|)(\s*)([#\/]\d+(?:_|(\^)))`(\s*)(<\w+(?=[\s\/>]))?|\s*(?:(<\w+(?=[\s\/>]))|<\/(\w+)>(\s*)|(\/>)\s*|(>)|$)/g,Ve=/(#)()(\d+)(_)/g,Fe=/(#)()(\d+)([_^])/g,Ge=/(?:(#)|(\/))(\d+)(_)/g,He=/(#)()(\d+)(\^)/g,Be=/(?:(#)|(\/))(\d+)([_^])([-+@\d]+)?/g,qe=/&(\d+)\+?/g,Ye=t.getComputedStyle;if(!(l=e.observable))throw requiresStr+"JsObservable";function Ke(t,n,r){for(var i,o,a,s,u,p,f,h,d,g,v,_,y,m,E,b,I,C=t.target,A=C._jsvBnd;d=qe.exec(A);)if((d=je[d[1]])&&(m=d.to)){if(h=(a=d.linkCtx).view,y=a.tag||h.tag,f=e(C),v=h.hlp(he),_=h.hlp(de),o=Xe(C),i=Ae[o],void 0===r&&(r=c(o)?o(C):i?f[i]():f.attr(o)),u=m[1],m=(m=m[0])+""===m?[a.data,m]:m,u&&(s=c(u)?u:h.getRsc("converters",u)),"SELECT"===a.elem.nodeName&&(a.elem._jsvSel=r=r||(a.elem.multiple?[]:r)),s&&(r=s.call(y,r)),g=h.linkCtx,h.linkCtx=a,E={change:"change",oldValue:a._val,value:r},!(v&&!1===v.call(a,t,E)||y&&y.onBeforeChange&&!1===y.onBeforeChange(t,E)||void 0===r)&&(p=m[0],void 0!==r&&p)){if(p._jsv)for(I=a._ctxCb,b=p,p=a.data,b._cpCtx&&(p=b.data,I=b._cpCtx);b&&b.sb;)p=I(b,p),b=b.sb;y&&(y._.chging=!0),l(p).setProperty(m[1],r),_&&_.call(a,t,E),y&&(y.onAfterChange&&y.onAfterChange(t,E),y._.chging=void 0),a._val=r}h.linkCtx=g}}function Qe(t,n,r){var i,o,a,s,l,u,p=this,f=p.tag,h=p.data,d=p.elem,g=p.convert,_=d.parentNode,y=p.view,m=y.linkCtx,E=y.hlp(he);if(y.linkCtx=p,_&&(!E||!n||!1!==E.call(p,t,n))&&(!n||"*"===t.data.prop||t.data.prop===n.path)){if(n&&(p.eventArgs=n),n||p._toLk){if(p._toLk=0,r._er)try{o=r(h,y)}catch(t){l=r._er,o=[{props:{},args:[u=vt(t,y,new Function("data,view","return "+l+";")(h,y))]}]}else o=r(h,y,v);if(i=function(t,n,r,i){var o,a,s,l,u=r&&r.parentElem||n.elem;if(void 0!==t){if(l=e(u),i=r&&r.attr||i,c(t)&&_t(n.expr+": missing parens"),s=/^css-/.test(i)&&i.slice(4))o=e.style(u,s),+t===t&&(o=parseInt(o));else if("link"!==i){if("value"===i)u.type===ve&&(o=l.prop(i=ge));else if(i===_e){if(u.value!==""+t)return i;o=l.prop(ge)}void 0===o&&(o=(a=Ae[i])?l[a]():l.attr(i))}n._val=o}return i}(o,p,f=p.tag,p.attr||Xe(d,!0,void 0!==g)),f){if(s=l||f._er,o=o[0]?o:[o],a=!s&&n&&f.onUpdate&&!1===f.onUpdate(t,n,o),_n(f,o,s),a||i===ye)return hn(f,t,n),en(p,h,d),void(y.linkCtx=m);if(f._.chging)return;f.onUnbind&&f.onUnbind(f.tagCtx,p,f.ctx,t,n),o=":"===f.tagName?v._cnvt(f.cvt,y,o[0]):v._tag(f,y,y.tmpl,o,!0,u)}else r._tag&&(o=(g=""===g?Ee:g)?v._cnvt(g,y,o[0]||o):v._tag(r._tag,y,y.tmpl,o,!0,u),Cn(f=p.tag,!0),i=p.attr||i);$e(o,p,i,f)&&n&&(E=y.hlp(de))&&E.call(p,t,n),p._noUpd=0,f&&(f._er=l,hn(f,t,n))}en(p,h,d),y.linkCtx=m}}function We(t,e){t._df=e,t[(e?"set":"remove")+"Attribute"]("data-jsv-df","")}function $e(n,r,i,o){var a,s,l,u,c,f,h,d,g,v,_,y,m,E,b=i!==ye&&void 0!==n&&!r._noUpd,I=r.data,C=o&&o.parentElem||r.elem,A=C.parentNode,T=e(C),w=r.view,O=r._val,x=w.linkCtx,L=o;if(o&&(o._.unlinked=!0,o.parentElem=o.parentElem||r.expr||o._elCnt?C:A,s=o._prv,l=o._nxt),b)return"visible"===i&&(i="css-display"),/^css-/.test(i)?("visible"===r.attr&&(m=(C.currentStyle||Ye.call(t,C,"")).display,n?(n=C._jsvd||m)!==ye||(n=Pe[y=C.nodeName])||(_=document.createElement(y),document.body.appendChild(_),n=Pe[y]=(_.currentStyle||Ye.call(t,_,"")).display,document.body.removeChild(_)):(C._jsvd=m,n=ye)),(L=L||O!==n)&&e.style(C,i.slice(4),n)):"link"!==i&&(/^data-/.test(i)&&e.data(C,i.slice(5),n),i===ge?(f=!0,n=n&&"false"!==n):i===_e?(f=!0,i=ge,n=C.value===""+n):"selected"===i||"disabled"===i||"multiple"===i||"readonly"===i?n=n&&"false"!==n?i:null:"value"===i&&"SELECT"===C.nodeName&&(C._jsvSel=p(n)?n:""+n),(a=Ae[i])?i===H?(w.linkCtx=r,o&&o._.inline?(c=o.nodes(!0),o._elCnt&&(s&&s!==l?bn(s,l,C,o._tgId,"^",!0):(h=C._df)&&(d=o._tgId+"^",g=h.indexOf("#"+d)+1,v=h.indexOf("/"+d),g&&v>0&&v>(g+=d.length)&&(We(C,h.slice(0,g)+h.slice(v)),In(h.slice(g,v)))),s=s?s.previousSibling:l?l.previousSibling:C.lastChild),e(c).remove(),u=w.link(w.data,C,s,l,n,o&&{tag:o._tgId,lazyLink:o.tagCtx.props.lazyLink})):((b=b&&O!==n)&&T.empty(),b&&(u=w.link(I,C,s,l,n,o&&{tag:o._tgId}))),w.linkCtx=x):((L=L||O!==n)&&("text"===i&&C.children&&!C.children[0]?void 0!==C.textContent?C.textContent=n:C.innerText=null===n?"":n:T[a](n)),!(E=A._jsvSel)||"value"!==i&&T.attr("value")||(C.selected=e.inArray(""+n,p(E)?E:[E])>-1)):(L=L||O!==n)&&T[f?"prop":"attr"](i,void 0!==n||f?n:null),r._val=n),u||L}function Je(t,e){var n=this,r=n.hlp(he),i=n.hlp(de);if(!r||!1!==r.call(this,t,e)){if(e){var o=e.change,a=e.index,s=e.items;switch(n._.srt=e.refresh,o){case"insert":n.addViews(a,s);break;case"remove":n.removeViews(a,s.length);break;case"move":n.removeViews(e.oldIndex,s.length,void 0,!0),n.addViews(a,s);break;case"refresh":n._.srt=void 0,n.fixIndex(0)}}i&&i.call(this,t,e)}}function ze(t){var n,r,i=t.type,o=t.data,a=t._.bnd;!t._.useKey&&a&&((r=t._.bndArr)&&(e([r[1]]).off(kt,r[0]),t._.bndArr=void 0),a!==!!a?i?a._.arrVws[t._.id]=t:delete a._.arrVws[t._.id]:i&&o&&(n=function(e){e.data&&e.data.off||Je.apply(t,arguments)},e([o]).on(kt,n),t._.bndArr=[n,o]))}function Xe(t,e,n){var r=t.nodeName.toLowerCase(),i=y._fe[r]||t.contentEditable===Ee&&{to:H,from:H};return i?e?"input"===r&&t.type===_e?_e:i.to:i.from:e?n?"text":H:""}function Ze(t,n,r,i,o,a,s){var l,u,c,p,f,h=t.parentElem,d=t._prv,g=t._nxt,v=t._elCnt;if(d&&d.parentNode!==h&&_t("Missing parentNode"),s)for(f in p=t.nodes(),v&&d&&d!==g&&bn(d,g,h,t._.id,"_",!0),t.removeViews(void 0,void 0,!0),u=g,v&&(d=d?d.previousSibling:g?g.previousSibling:h.lastChild),e(p).remove(),t._.bnds)mn(f);else{if(n){if(!(c=i[n-1]))return!1;d=c._nxt}v?d=(u=d)?u.previousSibling:h.lastChild:u=d.nextSibling}l=r.render(o,a,t._.useKey&&s,t,s||n,!0),t.link(o,h,d,u,l,c)}function tn(t,e,n){var r,i;return n?(i="^`",Cn(n,!0),(r=n._tgId)||(je[r=ke++]=n,n._tgId=""+r)):(i="_`",Cn(ue[r=e._.id]=e)),"#"+r+i+(null!=t?t:"")+"/"+r+i}function en(t,e,n){var r,i,o,a,s,u,p,f,h=t.tag,d=t.convertBack,g=[],v=t._bndId||""+ke++,_=t._hdl;if(t._bndId=void 0,h&&(g=h.depends||g,g=c(g)?h.depends(h):g,a=h.linkedElem),!t._depends||""+t._depends!=""+g){if(t._depends&&l._apply(!1,[e],t._depends,_,!0),s=t.fn.deps.slice(),h&&h.boundProps)for(i=h.boundProps.length;i--;)for(p=h.boundProps[i],o=h._.bnd.paths.length;o--;)(f=h._.bnd.paths[o][p])&&f.skp&&(s=s.concat(f));for(i=s.length;i--;)(u=s[i])._jsv&&(s[i]=rt({},u));if((r=l._apply(!1,[e],s,g,_,t._ctxCb)).elem=n,r.linkCtx=t,r._tgId=v,n._jsvBnd=n._jsvBnd||"",n._jsvBnd+="&"+v,t._depends=g,t.view._.bnds[v]=v,je[v]=r,a)for(i=a.length;i--;)a[i]._jsvLkEl=h,vn(r,h,a[i]),a[i]._jsvBnd="&"+r._tgId+"+";else void 0!==d&&vn(r,h,n,d);h&&(h.flow||h._.inline||(n.setAttribute(pe,(n.getAttribute(pe)||"")+"#"+v+"^/"+v+"^"),h._tgId=""+v))}}function nn(t,e,n,r,i,o,a){return rn(this,t,e,n,r,i,o,a)}function rn(t,n,r,i,a,s,l,u){if(!0===i?(a=i,i=void 0):i="object"!=typeof i?void 0:rt({},i),t&&n){n=n.jquery?n:e(n),re||(re=document.body,e(re).on(fe,Ke).on("blur","[contenteditable]",Ke));for(var c,p,f,h,d,g,v,_,y,m=tn,E=i&&"replace"===i.target,b=n.length;b--;){if(v=n[b],(y=(s=s||oe(v))===o)&&(o.data=(o.ctx=i||{}).root=r),""+t===t)an(t,v,s,void 0,!0,r,i);else{if(void 0!==t.markup)E&&(g=v.parentNode),f=t.render(r,i,a,s,void 0,m),g?(l=v.previousSibling,u=v.nextSibling,e.cleanData([v],!0),g.removeChild(v),v=g):(l=u=void 0,e(v).empty());else{if(!0!==t||s!==o)break;_={lnk:1}}if(v._df&&!u){for(c=0,p=(h=cn(v._df,!0,Ve)).length;c<p;c++)d=h[c],(d=ue[d.id])&&void 0!==d.data&&d.parent.removeViews(d._.key,void 0,!0);We(v)}s.link(r,v,l,u,f,_,i)}y&&(o.data=o.ctx=void 0)}}return n}function on(t,n,r,i,o,a,s,l){function u(t,e){var r,i,o,a,s,l,u,c=[];if(t){for("@"===t._tkns.charAt(0)&&(e=b.previousSibling,b.parentNode.removeChild(b),b=void 0),m=t.length;m--;){if(o=(C=t[m]).ch,r=C.path)for(_=r.length-1;i=r.charAt(_--);)"+"===i?"-"===r.charAt(_)?(_--,e=e.previousSibling):e=e.parentNode:e=e.lastChild;"^"===o?(d=je[s=C.id])&&(u=e&&(!b||b.parentNode!==e),b&&!u||(d.parentElem=e),C.elCnt&&u&&We(e,(C.open?"#":"/")+s+o+(e._df||"")),c.push([u?null:b,C])):(I=ue[s=C.id])&&(I.parentElem||(I.parentElem=e||b&&b.parentNode||n,I._.onRender=tn,I._.onArrayChange=Je,ze(I)),a=I.parentElem,C.open?(I._elCnt=C.elCnt,e&&!b?We(e,"#"+s+o+(e._df||"")):(I._prv||We(a,ln(a._df,"#"+s+o)),I._prv=b)):(!e||b&&b.parentNode===e?b&&(I._nxt||We(a,ln(a._df,"/"+s+o)),I._nxt=b):(We(e,"/"+s+o+(e._df||"")),I._nxt=void 0),(l=I.ctx&&I.ctx.onAfterCreate||lt)&&l.call(I.ctx.tag,I)))}for(m=c.length;m--;)ot.push(c[m])}return!t||t.elCnt}function c(t){var e,n,r;if(t)for(m=t.length,_=0;_<m;_++)if(C=t[_],n=d=je[C.id].linkCtx.tag,r=d.tagName===R,!d.flow||r){if(!S){for(e=1;n=n.parent;)e++;k=k||e}!S&&e!==k||R&&!r||N.push(d)}}function p(){var a,l,p="",f={},_=se+(et?",[data-jsv-df]":"");for(E=Ne?n.querySelectorAll(_):e(_,n).get(),v=E.length,r&&r.innerHTML&&(T=Ne?r.querySelectorAll(_):e(_,r).get(),r=T.length?T[T.length-1]:r),k=0,g=0;g<v;g++)if(b=E[g],r&&!z)z=b===r;else{if(i&&b===i){et&&(p+=un(b));break}if(b.parentNode)if(et){if(p+=un(b),b._df){for(a=g+1;a<v&&b.contains(E[a]);)a++;f[a-1]=b._df}f[g]&&(p+=f[g]||"")}else tt&&(C=cn(b,void 0,Ge))&&(C=C[0])&&(X=X?C.id!==X&&X:C.open&&C.id),!X&&ut(cn(b))&&b.getAttribute(ae)&&ot.push([b])}if(et&&((l=(p+=n._df||"").indexOf("#"+et.id)+1)&&(p=p.slice(l+et.id.length)),(l=p.indexOf("/"+et.id))+1&&(p=p.slice(0,l)),c(cn(p,void 0,He))),void 0===o&&n.getAttribute(ae)&&ot.push([n]),pn(r,K),pn(i,K),et)Z&&Z.resolve();else{for(K&&it+$&&(b=i,it&&(i?u(cn(it+"+",!0),i):u(cn(it,!0),n)),u(cn($,!0),n),i&&(p=i.getAttribute(pe),(v=p.indexOf(J)+1)&&(p=p.slice(v+J.length-1)),i.setAttribute(pe,$+p))),v=ot.length,g=0;g<v;g++)b=ot[g],A=b[1],b=b[0],A?(d=je[A.id])&&((h=d.linkCtx)&&((d=h.tag).linkCtx=h),A.open?(b&&(d.parentElem=b.parentNode,d._prv=b),d._elCnt=A.elCnt,I=d.tagCtx.view,an(void 0,d._prv,I,A.id)):(d._nxt=b,d._.unlinked&&(M=d.tagCtx,I=M.view,hn(d)))):an(b.getAttribute(ae),b,oe(b),void 0,tt,t,s);Z&&Z.resolve()}}var f,h,d,g,v,_,m,E,b,I,C,A,T,w,O,x,L,N,S,R,M,P,k,D,U,V,F,G,H,B,q,Y,K,Q,W,$,J,z,X,Z,tt,et,nt=this,rt=nt._.id+"_",it="",ot=[],at=[],st=[],lt=nt.hlp("onAfterCreate"),ut=u;if(a&&(Z=a.lazyLink&&e.Deferred(),a.tmpl?O="/"+a._.id+"_":(tt=a.lnk,a.tag&&(rt=a.tag+"^",a=!0),(et=a.get)&&(ut=c,N=et.tags,S=et.deep,R=et.name)),a=!0===a),n=n?""+n===n?e(n)[0]:n.jquery?n[0]:n:nt.parentElem||document.body,P=!y.noValidate&&n.contentEditable!==Ee,G=n.tagName.toLowerCase(),K=!!Se[G],r=r&&fn(r,K),i=i&&fn(i,K)||null,null!=o){if(B=q=document.createElement("div"),J=$="",W="http://www.w3.org/2000/svg"===n.namespaceURI?"svg_ns":(F=j.exec(o))&&F[1]||"",K){for(L=i;L&&!(x=cn(L));)L=L.nextSibling;(Y=x?x._tkns:n._df)&&(w=O||"",!a&&O||(w+="#"+rt),(_=Y.indexOf(w))+1&&(_+=w.length,J=$=Y.slice(0,_),Y=Y.slice(_),x?L.setAttribute(pe,Y):We(n,Y)))}if(H=void 0,o=(""+o).replace(Ue,(function(t,e,n,r,i,a,s,l,u,c,p,h,g,v){var _,y,m="";return v?(f=0,t):(d=u||c||"",r=r||p,n=n||g,H&&!n&&(!t||r||d||a&&!f)&&(H=void 0,G=at.shift()),(r=r||n)&&(f=0,H=void 0,P&&(n||g?Me[G]||/;svg;|;math;/.test(";"+at.join(";")+";")||(_="'<"+G+".../"):Me[r]?_="'</"+r:at.length&&r===G||(_="Mismatch: '</"+r),_&&yt(_+">' in:\n"+o)),Q=K,G=at.shift(),K=Se[G],p=p?"</"+p+">":"",Q&&(it+=$,$="",K?it+="-":(m=p+Ie+"@"+it+be+(h||""),it=st.shift()))),K?(a?$+=a:e=p||g||"",d&&(e+=d,$&&(e+=' data-jsv="'+$+'"',$=""))):e=a?e+m+i+(f?"":Ie+a+be)+l+d:m||t,P&&s&&(f&&yt("{^{ within elem markup ("+f+' ). Use data-link="..."'),"#"===a.charAt(0)?at.unshift(a.slice(1)):a.slice(1)!==(y=at.shift())&&yt("Closing tag for {^{...}} under different elem: <"+y+">")),d&&(f=d,at.unshift(G),G=d.slice(1),P&&at[0]&&at[0]===Re[G]&&_t("Parent of <tr> must be <tbody>"),H=Me[G],(K=Se[G])&&!Q&&(st.unshift(it),it=""),Q=K,it&&K&&(it+="+")),e)})),P&&at.length&&yt("Mismatched '<"+G+"...>' in:\n"+o),l)return;for(Le.appendChild(q),D=(W=le[W]||le.div)[0],B.innerHTML=W[1]+o+W[2];D--;)B=B.lastChild;for(Le.removeChild(q),U=document.createDocumentFragment();V=B.firstChild;)U.appendChild(V);n.insertBefore(U,i)}return Z?setTimeout(p,0):p(),Z&&Z.promise()}function an(t,n,r,i,o,a,s){var l,u,c,p,f,h,d,g,_,y,m,A=[];if(i)sn(d=(g=(g=je[i]).linkCtx?g.linkCtx.tag:g).linkCtx||{type:"inline",data:r.data,elem:g._elCnt?g.parentElem:n,view:r,ctx:r.ctx,attr:H,fn:g._.bnd,tag:g,_bndId:i},d.fn);else if(t&&n){for(a=o?a:r.data,l=r.tmpl,t=function(t,n){return(t=e.trim(t).replace(R,"\\$&")).slice(-1)!==I?t=b+":"+t+(n?":":"")+I:t}(t,Xe(n)),m=ie.lastIndex=0;u=ie.exec(t);)A.push(u),m=ie.lastIndex;for(m<t.length&&yt(t);u=A.shift();){for(_=ie.lastIndex,c=u[1],f=u[3];A[0]&&"else"===A[0][4];)f+=C+E+A.shift()[3],y=!0;y&&(f+=C+E+b+"/"+u[4]+I),d={type:o?"top":"link",data:a,elem:n,view:r,ctx:s,attr:c,isLk:o,_toLk:1,_noUpd:u[2]},p=void 0,u[6]&&(p=u[10]||void 0,d.convert=u[5]||"",!c&&void 0!==p&&Xe(n)&&(d.convertBack=p=p.slice(1))),d.expr=c+f,(h=l.links[f])||(l.links[f]=h=v.tmplFn(f,l,!0,p,y)),d.fn=h,sn(d,h),ie.lastIndex=_}}}function sn(t,e){function n(n,r){Qe.call(t,n,r,e)}n.noArray=!0,t.isLk&&Cn(t.view=new v.View(v.extendCtx(t.ctx,t.view.ctx),"link",t.view,t.data,t.expr,void 0,tn)),t._ctxCb=v._gccb(t.view),t._hdl=n,n(!0)}function ln(t,e){var n;return t?(n=t.indexOf(e))+1?t.slice(0,n)+t.slice(n+e.length):t:""}function un(t){return t&&(""+t===t?t:t.tagName===me?t.type.slice(3):1===t.nodeType&&t.getAttribute(pe)||"")}function cn(t,e,n){var r,i,o=[];if(i=e?t:un(t))return r=o.elCnt=t.tagName!==me,r="@"===i.charAt(0)||r,o._tkns=i,i.replace(n||Be,(function(t,e,n,i,a,s){o.push({elCnt:r,id:i,ch:a,open:e,close:n,path:s,token:t})})),o}function pn(t,e){t&&("jsv"===t.type?t.parentNode.removeChild(t):e&&""===t.getAttribute(ae)&&t.removeAttribute(ae))}function fn(t,e){for(var n=t;e&&n&&1!==n.nodeType;)n=n.previousSibling;return n&&(1!==n.nodeType?((n=document.createElement(me)).type="jsv",t.parentNode.insertBefore(n,t)):un(n)||n.getAttribute(ae)||n.setAttribute(ae,"")),n}function hn(t,n,r){var i,o,a,s,l,u,c=t.tagCtx,p=(c.view,c.props),f=t.linkCtx;if(t._.unlinked&&(void 0!==t.linkedElement&&(t.linkedElem=t._.inline?t.contents(!0,t.linkedElement||"*").first():e(f.elem)),t.onBind&&t.onBind(c,f,t.ctx,n,r)),t.onAfterLink&&t.onAfterLink(c,f,t.ctx,n,r),i=t.targetTag?t.targetTag.linkedElem:t.linkedElem,o=t.displayElem||i,i&&i[0]){if(void 0!==(s=t.cvtArgs()[0])&&!t._.chging)for(l=i.length;l--;)a=i[l],t._.unlinked&&a!==f.elem&&(u=a._jsvLkEl,t._.inline&&(!u||u!==t&&u.targetTag!==t)&&(a._jsvLkEl=t,vn(je[t._tgId],t,a),a._jsvBnd="&"+t._tgId+"+")),void 0!==s&&(void 0!==a.value?a.type===ve?a.checked=s&&"false"!==s:a.type===_e?a.checked=a.value===s:e(a).val(s):a.contentEditable===Ee&&(a.innerHTML=s),f._val=s),p.name&&(a.name=a.name||p.name);t.setSize&&(p.height&&o.height(p.height),p.width&&o.width(p.width)),void 0!==p.title&&o.attr("title",p.title),p.class&&(r&&o.hasClass(r.oldValue)&&o.removeClass(r.oldValue),o.addClass(p.class)),p.id&&(i[0].id=p.id)}t._.unlinked=void 0}function dn(t){setTimeout((function(){Ke(t)}),0)}function gn(t,e,n){e&&(e=""+e===e?e:"keydown",t[n](e,"keydown"===e?dn:Ke))}function vn(t,n,r,i){var o,a,s,l,u,c,p,f,h,d=t.linkCtx,g=d._ctxCb,y=d.data,m=d.fn.paths[0];if(n=n||r._jsvLkEl,t&&m&&!t.to){if(p=r._jsvTr||!1,n&&(i=n.convertBack||i,c=n.tagCtx.props.trigger),p!==(c=(c=void 0===c?_.trigger:c)&&("INPUT"===r.tagName&&r.type!==ve&&r.type!==_e||"textarea"===r.type||r.contentEditable===Ee)&&c||!1)&&(gn(u=e(r),p,"off"),gn(u,r._jsvTr=c,"on")),o=(m=m._jsvto||m[0])&&m.length){if((s=m[o-1])._jsv){for(l=s;s.sb&&s.sb._jsv;)a=s=s.sb;s=(a=s.sb||a&&a.path)?a.slice(1):l.path}if(a)f=[l,s];else{for(;(f=g(a=s.split("^").join("."),y))&&(h=f.length);){if(f[0]._cp){if(f=f[0],g=v._gccb(f[0]),s=f[1],f=[f[0].data,f[1]],s._jsv){for((l=s).data=f[0],l._cpCtx=g;s.sb&&s.sb._jsv;)a=s=s.sb;f=[l,s=(a=s.sb||a&&a.path)?a.slice(1):l.path]}}else f=h>2?[f[h-3],f[h-2]]:[f[h-2]];y=f[0],s=f[1]}f=f||[y,a]}}else f=[];t.to=[f,i]}}function _n(t,e,n){var r,i,o=t.tagCtx.view,a=t.tagCtxs||[t.tagCtx],s=a.length,u=!e;if(e=e||t._.bnd.call(o.tmpl,(t.linkCtx||o).data,o,v),n)a=t.tagCtxs=e,t.tagCtx=a[0];else for(;s--;)r=a[s],i=e[s],l(r.props).setProperty(i.props),rt(r.ctx,i.ctx),r.args=i.args,u&&(r.tmpl=i.tmpl);return v._ths(t,a[0]),a}function yn(t){for(var e,n,r,i=[],o=t.length,a=o;a--;)i.push(t[a]);for(a=o;a--;)if((n=i[a]).parentNode){if(r=n._jsvBnd)for(r=r.slice(1).split("&"),n._jsvBnd="",e=r.length;e--;)mn(r[e],n._jsvLkEl,n);In(un(n)+(n._df||""))}}function mn(t,n,r){var i,o,a,s,l,u,c,f,h,d,g,v,_=je[t];if(n)n=n.targetTag||n,r._jsvLkEl=void 0;else if(_){for(i in delete je[t],_.bnd)s=_.bnd[i],l=_.cbId,p(s)?e([s]).off(kt+l).off(jt+l):e(s).off(jt+l),delete _.bnd[i];if(o=_.linkCtx){if(a=o.tag){if(u=a.tagCtxs)for(c=u.length;c--;)(f=u[c].map)&&f.unmap();h=a.linkedElem,a.onUnbind&&a.onUnbind(a.tagCtx,o,a.ctx,!0),a.onDispose&&a.onDispose(),a._elCnt||(a._prv&&a._prv.parentNode.removeChild(a._prv),a._nxt&&a._nxt.parentNode.removeChild(a._nxt))}(g=(d=h&&h[0]||o.elem)&&d._jsvTr)&&(gn(h||e(d),g,"off"),d._jsvTr=void 0),"link"===(v=o.view).type?v.parent.removeViews(v._.key,void 0,!0):delete v._.bnds[t]}delete Dt[_.cbId]}}function En(t){t?((t=t.jquery?t:e(t)).each((function(){for(var t;(t=oe(this,!0))&&t.parent;)t.parent.removeViews(t._.key,void 0,!0);yn(this.getElementsByTagName("*"))})),yn(t)):(re&&(e(re).off(fe,Ke).off("blur","[contenteditable]",Ke),re=void 0),o.removeViews(),yn(document.body.getElementsByTagName("*")))}function bn(t,e,n,r,i,o){var a,s,l,u,c,p,f,h=0,d=t===e;if(t){for(a=0,s=(l=cn(t)||[]).length;a<s;a++){if((p=(u=l[a]).id)===r&&u.ch===i){if(!o)break;s=0}d||(c="_"===u.ch?ue[p]:je[p].linkCtx.tag,u.open?c._prv=e:u.close&&(c._nxt=e)),h+=p.length+2}h&&t.setAttribute(pe,t.getAttribute(pe).slice(h)),(s=(f=e?e.getAttribute(pe):n._df).indexOf("/"+r+i)+1)&&(f=l._tkns.slice(0,h)+f.slice(s+(o?-1:r.length+1))),f&&(e?e.setAttribute(pe,f):We(n,f))}else We(n,ln(n._df,"#"+r+i)),o||e||We(n,ln(n._df,"/"+r+i))}function In(t){var e,n,r,i;if(i=cn(t,!0,Fe))for(e=0,n=i.length;e<n;e++)"_"===(r=i[e]).ch?(r=ue[r.id])&&r.type&&r.parent.removeViews(r._.key,void 0,!0):mn(r.id)}function Cn(t,n){t.contents=function(t,n){t!==!!t&&(n=t,t=void 0);var r,i=e(this.nodes());return i[0]&&(r=n?i.filter(n):i,i=t&&n?r.add(i.find(n)):r),i},t.nodes=function(t,e,n){var r,i=this,o=i._elCnt,a=!e&&o,s=[];for(e=e||i._prv,n=n||i._nxt,r=a?e===i._nxt?i.parentElem.lastSibling:e:!1===i._.inline?e||i.linkCtx.elem.firstChild:e&&e.nextSibling;r&&(!n||r!==n);)(t||o||r.tagName!==me)&&s.push(r),r=r.nextSibling;return s},t.childTags=function(t,e){t!==!!t&&(e=t,t=void 0);var n=this,r=n.link?n:n.tagCtx.view,i=n._prv,o=n._elCnt,a=[];return r.link(void 0,n.parentElem,o?i&&i.previousSibling:i,n._nxt,void 0,{get:{tags:a,deep:t,name:e,id:n.link?n._.id+"_":n._tgId+"^"}}),a},t.refresh=function(t){var e,n=this,r=n.linkCtx,i=n.tagCtx.view;return n.disposed&&_t("Removed tag"),void 0===t&&(t=v._tag(n,i,i.tmpl,_n(n),!0)),t+""===t&&(n.onUnbind&&n.onUnbind(n.tagCtx,r,n.ctx),e=$e(t,r,n._.inline?H:r.attr||Xe(n.parentElem,!0),n)),hn(n),e||n},t.update=function(t){var e=this.linkedElem;e&&Ke({target:e[0]},0,t)},n?t.domChange=function(){var t=this.parentElem,n=e.hasData(t)&&e._data(t).events,r="jsv-domchange";n&&n[r]&&e(t).triggerHandler(r,arguments)}:(t.addViews=function(t,e){var n=this,r=e.length,i=n.views;!n._.useKey&&r&&i.length+r===n.data.length&&!1!==Ze(n,t,n.tmpl,i,e,n.ctx)&&(n._.srt||n.fixIndex(t+r))},t.removeViews=function(t,n,r,i){function o(t){var n,i,o,a,s,l,u=p[t];if(u&&u.link){if(n=u._.id,r||(l=u.nodes()),u.removeViews(void 0,void 0,!0),u.type=void 0,a=u._prv,s=u._nxt,o=u.parentElem,r||(u._elCnt&&bn(a,s,o,n,"_"),e(l).remove()),!u._elCnt)try{a.parentNode.removeChild(a),s.parentNode.removeChild(s)}catch(t){}for(i in ze(u),u._.bnds)mn(i);delete ue[n]}}var a,s,l,u=this,c=!u._.useKey,p=u.views;if(c&&(l=p.length),void 0===t)if(c){for(a=l;a--;)o(a);u.views=[]}else{for(s in p)o(s);u.views={}}else if(void 0===n&&(c?n=1:(o(t),delete p[t])),c&&n&&(i||l-n===u.data.length)){for(a=t+n;a-- >t;)o(a);p.splice(t,n),u._.sort||u.fixIndex(t)}},t.refresh=function(){var t=this,e=t.parent;e&&(Ze(t,t.index,t.tmpl,e.views,t.data,void 0,!0),ze(t))},t.fixIndex=function(t){for(var e=this.views,n=e.length;t<n--;)e[n].index!==n&&l(e[n]).setProperty("index",n)},t.link=on)}function An(t){return this.tagCtx.view}return s=l.observe,v.onStore.template=function(t,n){n.link=nn,t&&(e.link[t]=function(){return nn.apply(n,arguments)})},v.viewInfos=cn,(m.delimiters=function(){var t=xe.apply(0,arguments);return xe!==it&&(t=it.apply(0,arguments)),ie=new RegExp("(?:^|\\s*)([\\w-]*)(\\"+A+")?(\\"+b+v.rTag+"(:\\w*)?\\"+I+")","g"),t})(),v.addSetting("trigger"),h.merge=function(t){var e,n=this.linkCtx._val||"",r=this.tagCtx.props.toggle;return r&&(e="(\\s(?="+(e=r.replace(/[\\^$.|?*+()[{]/g,"\\$&"))+"$)|(\\s)|^)("+e+"(\\s|$))",t=(n=n.replace(new RegExp(e),"$2"))+(t?(n&&" ")+r:"")),t},g({on:{attr:ye,init:function(t){for(var n,r=this,i=0,o=t.args,a=o.length;i<a&&!c(o[i]);i++);r._hi=a>i&&i+1,r._.inline&&(v.rTmpl.exec(n=t.tmpl.markup)||(r.template="<button>"+(e.trim(n)||t.params.args[i]||"noop")+"</button>"),r.attr=H)},onAfterLink:function(t,n){var r,i,o,a=this,s=a._hi,l=t.args,u=l.length,c=t.props,p=c.data,f=t.view,h=c.context;s&&(r=l[s-1],i=l.slice(s),l=l.slice(0,s-1),a._sel=l[1],o=a.activeElem=a.activeElem||e(a._.inline?(a._sel=l[1]||"*",a.parentElem):n.elem),h||(h=(h=/^(.*)[\.^][\w$]+$/.exec(t.params.args.slice(-i.length-1)[0]))&&v.tmplFn(b+":"+h[1]+I,f.tmpl,!0)(n.data,f)),a._evs&&a.onUnbind(),o.on(a._evs=l[0]||"click",a._sel,null==p?null:p,a._hlr=function(t){var e,o=!a._.inline;if(!o)for(e=a.contents("*"),u=e.length;!o&&u--;)e[u].contains(t.target)&&(o=!0);if(o)return r.apply(h||n.data,[].concat(i,t,{change:t.type,view:f,linkCtx:n},i.slice.call(arguments,1)))}))},onUpdate:function(){return!1},onUnbind:function(){var t=this;t.activeElem&&t.activeElem.off(t._evs,t._sel,t._hlr)},flow:!0,contentCtx:An,dataBoundOnly:!0},radiogroup:{init:function(t){this.name=t.props.name||"jsv"+Math.random()},onBind:function(t,n){var r,i=this,o=i.linkedElem=i._.inline?i.contents(!0,"input[type=radio]"):e(n.elem).find("input[type=radio]"),a=o.length;for(r=i._.inline?(r=i.contents("*")[0])&&e.view(r).ctx.tag===i.parent?r:i.parentElem:n.elem;a--;)o[a].name=o[a].name||i.name;e(r).on("jsv-domchange",(function(t,e){var n,s=e.ctx.parentTags;if(!i._.inline||r!==i.parentElem||s&&s[i.tagName]===i)for(o=i.linkedElem=i.contents(!0,"input[type=radio]"),a=o.length;a--;)(n=o[a])._jsvLkEl=i,n.name=n.name||i.name,vn(je[i._tgId],i,n),n._jsvBnd="&"+i._tgId+"+",n.checked=i.cvtArgs()[0]===n.value}))},onUpdate:function(t,e,n){return!1},contentCtx:An,dataBoundOnly:!0}}),rt(g.for,{onArrayChange:function(t,e,n,r){var i,o=t.target,a=o.length,s=this,l=e.change;if(s._.noVws||s.tagCtxs[1]&&("insert"===l&&a===e.items.length||"remove"===l&&!a))s.refresh();else for(i in s._.arrVws)(i=s._.arrVws[i]).data===o&&i._.onArrayChange.apply(i,arguments);s.domChange(n,r,e),t.done=!0},onAfterLink:function(t,e){var n,r,i,o,a=this,l=a._ars||{},u=a.tagCtxs,c=u.length,f=a.selected||0;for(n=0;n<=f;n++)o=(t=u[n]).map?t.map.tgt:t.args.length?t.args[0]:t.view.data,(i=l[n])&&o!==i[0]&&(s(i[0],i[1],!0),delete l[n]),!l[n]&&p(o)&&(s(o,r=function(n,r){var i=t;a.onArrayChange(n,r,i,e)}),l[n]=[o,r]);for(n=f+1;n<c;n++)(i=l[n])&&(s(i[0],i[1],!0),delete l[n]);a._ars=l},onDispose:function(){var t,e=this;for(t in e._ars)s(e._ars[t][0],e._ars[t][1],!0)}}),rt(g.if,{onUpdate:function(t,e,n){var r,i,o;for(r=0;i=this.tagCtxs[r];r++)if(o=i.props.tmpl!==n[r].props.tmpl||i.args.length&&!(i=i.args[0])!=!n[r].args[0],!this.convert&&i||o)return o;return!1},onAfterLink:function(t,e,n,r,i){i&&this.domChange(t,e,i)}}),g("props",{baseTag:"for",dataMap:a.map({getTgt:g.props.dataMap.getTgt,obsSrc:function(t,e,n){if("set"===n.change){for(var r=t.tgt,i=r.length;i--&&r[i].key!==n.path;);-1===i?n.path&&!n.remove&&l(r).insert({key:n.path,prop:n.value}):n.remove?l(r).remove(i):l(r[i]).setProperty("prop",n.value)}},obsTgt:function(t,e,n){var r,i=t.src,o=n.change;"set"===o?"prop"===n.path?l(i).setProperty(e.target.key,n.value):(l(i).removeProperty(n.oldValue),l(i).setProperty(n.value,e.target.prop)):"remove"===o?(r=n.items[0],l(i).removeProperty(r.key),delete i[r.key]):"insert"===o&&(r=n.items[0]).key&&l(i).setProperty(r.key,r.prop)},tgtFlt:function(t){return t.indexOf(".")<0}}),flow:!0}),rt(e,{view:oe=function(t,n,r){function i(t,e){if(t)for(s=cn(t,e,Ve),u=0,c=s.length;u<c&&(!(a=ue[s[u].id])||!(a=a&&r?a.get(!0,r):a));u++);}n!==!!n&&(r=n,n=void 0);var a,s,l,u,c,p,f,h=0,d=document.body;if(t&&t!==d&&o._.useKey>1&&(t=""+t===t?e(t)[0]:t.jquery?t[0]:t)){if(n){if(i(t._df,!0),!a)for(p=(f=Ne?t.querySelectorAll(Ce):e(Ce,t).get()).length,l=0;!a&&l<p;l++)i(f[l]);return a}for(;t;){if(s=cn(t,void 0,Ge))for(p=s.length;p--;)if((a=s[p]).open){if(h<1)return(a=ue[a.id])&&r?a.get(r):a||o;h--}else h++;t=t.previousSibling||t.parentNode}}return o},link:rn,unlink:En,cleanData:function(t){t.length&&we&&yn(t),Oe.apply(e,arguments)}}),rt(e.fn,{link:function(t,e,n,r,i,o,a){return rn(t,this,e,n,r,i,o,a)},unlink:function(){return En(this)},view:function(t,e){return oe(this[0],t,e)}}),e.each([H,"replaceWith","empty","remove"],(function(t,n){var r=e.fn[n];e.fn[n]=function(){var t;we=1;try{t=r.apply(this,arguments)}finally{we=0}return t}})),Cn(rt(o=v.topView,{tmpl:{links:{}}})),ue={0:o},a.getCtx=function(t){return t&&t._cp&&(t=t[1](t[0].data,t[0],v)),t},v._cp=function(t,e,n){if(n.linked){e=b+":"+e+I;var r=n.tmpl,i=o.tmpl.links,a=i[e];a||(i[e]=a=v.tmplFn(e,r,!0)),(t=[n,a])._cp=!0}return t},v._ceo=function t(e){var n,r=e,i=e.length;if(i)for(r=[];i--;)(n=e[i])._jsv&&((n=rt({},n)).prm=t(n.prm)),r.unshift(n);return r},v._gccb=function(t){return function(e,n,r){var i,o,a,s,l,u,p;if(t&&e){if(e._jsv)return e._jsv.call(t.tmpl,n,t,v);if("~"===e.charAt(0))return"~tag"===e.slice(0,4)&&(o=t.ctx,"."===e.charAt(4)&&(i=e.slice(5).split("."),o=o.tag),i)?o?[o,i.join("."),n]:[]:(e=e.slice(1).split("."),(s=t.hlp(l=e.shift(),!0))&&(s._cp?(e.length&&(u="."+e.join("."),(l=s[p=s.length-1])._jsv?(l.sb=u,l.bnd=!!r):(s[p]=(l+u).replace("#data.",""),"#view"===l.slice(0,5)&&(s[p]=s[p].slice(6),s.splice(p,0,t)))),a=[s]):(e.length||c(s))&&(a=[s,e.join("."),n])),a||[]);if("#"===e.charAt(0))return"#data"===e?[]:[t,e.replace(De,""),n]}}},ce=v.advSet,v.advSet=function(){ce.call(v),t._jsv=y._jsv?rt(t._jsv||{},{views:ue,bindings:je}):void 0,ae=y.linkAttr,se=Ce+",["+ae+"]",(le=y._wm).optgroup=le.option,le.tbody=le.tfoot=le.colgroup=le.caption=le.thead,le.th=le.td},m.advanced({linkAttr:"data-link",useViews:!1,noValidate:!1,_wm:{option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],svg_ns:[1,"<svg>","</svg>"],div:e.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},_fe:{input:{from:function(t){return t.type===ve?t.checked:t.value},to:"value"},textarea:Te,select:Te,optgroup:{to:"label"}}}),e},i=window,o=a,t.exports=o?r(i,o):function(t){return r(i,t)}},2716:(t,e,n)=>{"use strict";n.d(e,{nm:()=>N,Wy:()=>R,xT:()=>U,Tc:()=>i,OI:()=>V,$u:()=>X,GL:()=>H,OF:()=>rt,e1:()=>Z,cQ:()=>k});var r,i,o=function(){function t(t){this.__jsonld=t,this.context=this.getProperty("context"),this.id=this.getProperty("id")}return t.prototype.getProperty=function(t){var e=null;return this.__jsonld&&((e=this.__jsonld[t])||(e=this.__jsonld["@"+t])),e},t}(),a=n(3911),s=(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=function(t){function e(e,n){var r=t.call(this,e)||this;return r.options=n,r}return s(e,t),e.prototype.getIIIFResourceType=function(){return k.normaliseType(this.getProperty("type"))},e.prototype.getLabel=function(){var t=this.getProperty("label");return t?V.parse(t,this.options.locale):new V([],this.options.locale)},e.prototype.getDefaultLabel=function(){return this.getLabel().getValue(this.options.locale)},e.prototype.getMetadata=function(){var t=this.getProperty("metadata"),e=[];if(!t)return e;for(var n=0;n<t.length;n++){var r=t[n],i=new N(this.options.locale);i.parse(r),e.push(i)}return e},e.prototype.getRendering=function(t){for(var e=this.getRenderings(),n=0;n<e.length;n++){var r=e[n];if(r.getFormat()===t)return r}return null},e.prototype.getRenderings=function(){var t,e=[];if(!(t=this.__jsonld?this.__jsonld.rendering:this.rendering))return e;Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var r=t[n];e.push(new K(r,this.options))}return e},e.prototype.getService=function(t){return k.getService(this,t)},e.prototype.getServices=function(){return k.getServices(this)},e.prototype.getThumbnail=function(){var t=this.getProperty("thumbnail");return Array.isArray(t)&&(t=t[0]),t?new nt(t,this.options):null},e.prototype.isAnnotation=function(){return this.getIIIFResourceType()===a.mU.ANNOTATION},e.prototype.isCanvas=function(){return this.getIIIFResourceType()===a.mU.CANVAS},e.prototype.isCollection=function(){return this.getIIIFResourceType()===a.mU.COLLECTION},e.prototype.isManifest=function(){return this.getIIIFResourceType()===a.mU.MANIFEST},e.prototype.isRange=function(){return this.getIIIFResourceType()===a.mU.RANGE},e.prototype.isSequence=function(){return this.getIIIFResourceType()===a.mU.SEQUENCE},e}(o),u=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),c=function(t){function e(e,n){return t.call(this,e,n)||this}return u(e,t),e.prototype.getFormat=function(){var t=this.getProperty("format");return t?t.toLowerCase():null},e.prototype.getResources=function(){var t=[];if(!this.__jsonld.resources)return t;for(var e=0;e<this.__jsonld.resources.length;e++){var n=this.__jsonld.resources[e],r=new d(n,this.options);t.push(r)}return t},e.prototype.getType=function(){var t=this.getProperty("type");return t?k.normaliseType(t):null},e.prototype.getWidth=function(){return this.getProperty("width")},e.prototype.getHeight=function(){return this.getProperty("height")},e.prototype.getMaxWidth=function(){return this.getProperty("maxWidth")},e.prototype.getMaxHeight=function(){return this.getProperty("maxHeight")?null:this.getMaxWidth()},e}(l),p=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),f=function(t){function e(e,n){var r=t.call(this,e,n)||this;r.index=-1,r.isLoaded=!1;var i={defaultLabel:"-",locale:"en-GB",resource:r,pessimisticAccessControl:!1};return r.options=Object.assign(i,n),r}return p(e,t),e.prototype.getAttribution=function(){var t=this.getProperty("attribution");return t?V.parse(t,this.options.locale):new V([],this.options.locale)},e.prototype.getDescription=function(){var t=this.getProperty("description");return t?V.parse(t,this.options.locale):new V([],this.options.locale)},e.prototype.getHomepage=function(){var t=this.getProperty("homepage");return t?"string"==typeof t?t:(Array.isArray(t)&&t.length&&(t=t[0]),t["@id"]||t.id):null},e.prototype.getIIIFResourceType=function(){return k.normaliseType(this.getProperty("type"))},e.prototype.getLogo=function(){var t=this.getProperty("logo");return t?"string"==typeof t?t:(Array.isArray(t)&&t.length&&(t=t[0]),t["@id"]||t.id):null},e.prototype.getLicense=function(){return k.getLocalisedValue(this.getProperty("license"),this.options.locale)},e.prototype.getNavDate=function(){return new Date(this.getProperty("navDate"))},e.prototype.getRelated=function(){return this.getProperty("related")},e.prototype.getSeeAlso=function(){return this.getProperty("seeAlso")},e.prototype.getTrackingLabel=function(){var t=this.getService(a.vl.TRACKING_EXTENSIONS);return t?t.getProperty("trackingLabel"):""},e.prototype.getDefaultTree=function(){return this.defaultTree=new rt("root"),this.defaultTree.data=this,this.defaultTree},e.prototype.getRequiredStatement=function(){var t=null,e=this.getProperty("requiredStatement");if(e)(t=new N(this.options.locale)).parse(e);else{var n=this.getAttribution();n&&((t=new N(this.options.locale)).value=n)}return t},e.prototype.isCollection=function(){return this.getIIIFResourceType()===a.mU.COLLECTION},e.prototype.isManifest=function(){return this.getIIIFResourceType()===a.mU.MANIFEST},e.prototype.load=function(){var t=this;return new Promise((function(e){if(t.isLoaded)e(t);else{var n=t.options;n.navDate=t.getNavDate();var r=t.__jsonld.id;r||(r=t.__jsonld["@id"]),k.loadManifest(r).then((function(r){t.parentLabel=t.getLabel().getValue(n.locale);var i=$.parse(r,n);(t=Object.assign(t,i)).index=n.index,e(t)}))}}))},e}(l),h=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),d=function(t){function e(e,n){return t.call(this,e,n)||this}return h(e,t),e.prototype.getBody=function(){var t=[],e=this.getProperty("body");if(e)if(Array.isArray(e))for(var n=0;n<e.length;n++)if((o=e[n]).items)for(var r=0;r<o.items.length;r++){var i=o.items[r];t.push(new v(i,this.options))}else t.push(new v(o,this.options));else if(e.items)for(n=0;n<e.items.length;n++){var o=e.items[n];t.push(new v(o,this.options))}else t.push(new v(e,this.options));return t},e.prototype.getMotivation=function(){return this.getProperty("motivation")||null},e.prototype.getOn=function(){return this.getProperty("on")},e.prototype.getTarget=function(){return this.getProperty("target")},e.prototype.getResource=function(){return new c(this.getProperty("resource"),this.options)},e}(l),g=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),v=function(t){function e(e,n){return t.call(this,e,n)||this}return g(e,t),e.prototype.getFormat=function(){var t=this.getProperty("format");return t?k.getMediaType(t):null},e.prototype.getType=function(){return this.getProperty("type")?k.normaliseType(this.getProperty("type")):null},e.prototype.getWidth=function(){return this.getProperty("width")},e.prototype.getHeight=function(){return this.getProperty("height")},e}(l),_=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),y=function(t){function e(e,n,r){var i=t.call(this,n)||this;return i.label=e,i.options=r,i}return _(e,t),e.prototype.getIIIFResourceType=function(){return k.normaliseType(this.getProperty("type"))},e.prototype.getLabel=function(){return this.label},e.prototype.getResources=function(){var t=this;return this.getProperty("resources").map((function(e){return new d(e,t.options)}))},e.prototype.load=function(){var t=this;return new Promise((function(e,n){if(t.isLoaded)e(t);else{var r=t.__jsonld.id;r||(r=t.__jsonld["@id"]),k.loadManifest(r).then((function(n){t.__jsonld=n,t.context=t.getProperty("context"),t.id=t.getProperty("id"),t.isLoaded=!0,e(t)})).catch(n)}}))},e}(o),m=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),E=function(t){function e(e,n){return t.call(this,e,n)||this}return m(e,t),e.prototype.getItems=function(){return this.getProperty("items")},e}(l),b=n(3694),I=n.n(b),C=n(8147),A=n.n(C),T=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),w=function(t){function e(e,n){return t.call(this,e,n)||this}return T(e,t),e.prototype.getCanonicalImageUri=function(t){var e,n=null,r="default",i=t;if(this.externalResource&&this.externalResource.data&&this.externalResource.data["@id"])n=this.externalResource.data["@id"],i||(i=this.externalResource.data.width),this.externalResource.data["@context"]&&(this.externalResource.data["@context"].indexOf("/1.0/context.json")>-1||this.externalResource.data["@context"].indexOf("/1.1/context.json")>-1||this.externalResource.data["@context"].indexOf("/1/context.json")>-1)&&(r="native");else{var o=this.getImages();if(o&&o.length){var a=o[0].getResource(),s=a.getServices();if(i||(i=a.getWidth()),s.length){var l=s[0];n=l.id,r=k.getImageQuality(l.getProfile())}else if(i===a.getWidth())return a.id}if(!n){var u=this.getProperty("thumbnail");if(u){if("string"==typeof u)return u;if(u["@id"])return u["@id"];if(u.length)return u[0].id}}}return e=i+",",n&&n.endsWith("/")&&(n=n.substr(0,n.length-1)),[n,"full",e,0,r+".jpg"].join("/")},e.prototype.getMaxDimensions=function(){var t,e=null;return this.externalResource&&this.externalResource.data&&this.externalResource.data.profile&&(t=this.externalResource.data.profile,Array.isArray(t)&&(t=t.filter((function(t){return t.maxWidth}))[0])&&(e=new X(t.maxWidth,t.maxHeight?t.maxHeight:t.maxWidth))),e},e.prototype.getContent=function(){var t=[],e=this.__jsonld.items||this.__jsonld.content;if(!e)return t;var n=null;if(e.length&&(n=new E(e[0],this.options)),!n)return t;for(var r=n.getItems(),i=0;i<r.length;i++){var o=r[i],a=new d(o,this.options);t.push(a)}return t},e.prototype.getDuration=function(){return this.getProperty("duration")},e.prototype.getImages=function(){var t=[];if(!this.__jsonld.images)return t;for(var e=0;e<this.__jsonld.images.length;e++){var n=this.__jsonld.images[e],r=new d(n,this.options);t.push(r)}return t},e.prototype.getIndex=function(){return this.getProperty("index")},e.prototype.getOtherContent=function(){var t=this,e=(Array.isArray(this.getProperty("otherContent"))?this.getProperty("otherContent"):[this.getProperty("otherContent")]).filter((function(t){return t&&("sc:AnnotationList","string"==typeof(e=t["@type"])&&e.toLowerCase()==e.toLowerCase());var e})).map((function(e,n){return new y(e.label||"Annotation list "+n,e,t.options)})).map((function(t){return t.load()}));return Promise.all(e)},e.prototype.getWidth=function(){return this.getProperty("width")},e.prototype.getHeight=function(){return this.getProperty("height")},e.prototype.getViewingHint=function(){return this.getProperty("viewingHint")},Object.defineProperty(e.prototype,"imageResources",{get:function(){var t=this,n=A()([this.getImages().map((function(t){return t.getResource()})),this.getContent().map((function(t){return t.getBody()}))]);return I()(n.map((function(n){switch(n.getProperty("type").toLowerCase()){case a.Hd.CHOICE:case a.Hd.OA_CHOICE:return new e({images:I()([n.getProperty("default"),n.getProperty("item")]).map((function(t){return{resource:t}}))},t.options).getImages().map((function(t){return t.getResource()}));default:return n}})))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resourceAnnotations",{get:function(){return A()([this.getImages(),this.getContent()])},enumerable:!0,configurable:!0}),e.prototype.resourceAnnotation=function(t){return this.resourceAnnotations.find((function(e){return e.getResource().id===t||I()(new Array(e.getBody())).some((function(e){return e.id===t}))}))},e.prototype.onFragment=function(t){var e=this.resourceAnnotation(t);if(e){var n=e.getProperty("on"),r=e.getProperty("target"),i=(n||r).match(/xywh=(.*)$/);if(i)return i[1].split(",").map((function(t){return parseInt(t,10)}))}},Object.defineProperty(e.prototype,"iiifImageResources",{get:function(){return this.imageResources.filter((function(t){return t&&t.getServices()[0]&&t.getServices()[0].id}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageServiceIds",{get:function(){return this.iiifImageResources.map((function(t){return t.getServices()[0].id}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"aspectRatio",{get:function(){return this.getWidth()/this.getHeight()},enumerable:!0,configurable:!0}),e}(c),O=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),x=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.items=[],r._collections=null,r._manifests=null,e.__collection=r,r}return O(e,t),e.prototype.getCollections=function(){return this._collections?this._collections:this._collections=this.items.filter((function(t){return t.isCollection()}))},e.prototype.getManifests=function(){return this._manifests?this._manifests:this._manifests=this.items.filter((function(t){return t.isManifest()}))},e.prototype.getCollectionByIndex=function(t){for(var e,n=this.getCollections(),r=0;r<n.length;r++){var i=n[r];i.index===t&&(e=i)}if(e)return e.options.index=t,e.load();throw new Error("Collection index not found")},e.prototype.getManifestByIndex=function(t){for(var e,n=this.getManifests(),r=0;r<n.length;r++){var i=n[r];i.index===t&&(e=i)}if(e)return e.options.index=t,e.load();throw new Error("Manifest index not found")},e.prototype.getTotalCollections=function(){return this.getCollections().length},e.prototype.getTotalManifests=function(){return this.getManifests().length},e.prototype.getTotalItems=function(){return this.items.length},e.prototype.getViewingDirection=function(){return this.getProperty("viewingDirection")?this.getProperty("viewingDirection"):a.Pr.LEFT_TO_RIGHT},e.prototype.getBehavior=function(){var t=this.getProperty("behavior");return Array.isArray(t)&&(t=t[0]),t||null},e.prototype.getViewingHint=function(){return this.getProperty("viewingHint")},e.prototype.getDefaultTree=function(){return t.prototype.getDefaultTree.call(this),this.defaultTree.data.type=k.normaliseType(Z.COLLECTION),this._parseManifests(this),this._parseCollections(this),k.generateTreeNodeIds(this.defaultTree),this.defaultTree},e.prototype._parseManifests=function(t){if(t.getManifests()&&t.getManifests().length)for(var e=0;e<t.getManifests().length;e++){var n=t.getManifests()[e],r=n.getDefaultTree();r.label=n.parentLabel||n.getLabel().getValue(this.options.locale)||"manifest "+(e+1),r.navDate=n.getNavDate(),r.data.id=n.id,r.data.type=k.normaliseType(Z.MANIFEST),t.defaultTree.addNode(r)}},e.prototype._parseCollections=function(t){if(t.getCollections()&&t.getCollections().length)for(var e=0;e<t.getCollections().length;e++){var n=t.getCollections()[e],r=n.getDefaultTree();r.label=n.parentLabel||n.getLabel().getValue(this.options.locale)||"collection "+(e+1),r.navDate=n.getNavDate(),r.data.id=n.id,r.data.type=k.normaliseType(Z.COLLECTION),t.defaultTree.addNode(r)}},e}(f),L=function(){function t(t,e){this.start=t,this.end=e}return t.prototype.getLength=function(){return this.end-this.start},t}(),N=function(){function t(t){this.defaultLocale=t}return t.prototype.parse=function(t){this.resource=t,this.label=V.parse(this.resource.label,this.defaultLocale),this.value=V.parse(this.resource.value,this.defaultLocale)},t.prototype.getLabel=function(t){return null===this.label?null:(Array.isArray(t)&&!t.length&&(t=void 0),this.label.getValue(t||this.defaultLocale))},t.prototype.setLabel=function(t){null===this.label&&(this.label=new V([])),this.label.setValue(t,this.defaultLocale)},t.prototype.getValue=function(t,e){return void 0===e&&(e="<br/>"),null===this.value?null:(Array.isArray(t)&&!t.length&&(t=void 0),this.value.getValue(t||this.defaultLocale,e))},t.prototype.getValues=function(t){return null===this.value?[]:(Array.isArray(t)&&!t.length&&(t=void 0),this.value.getValues(t||this.defaultLocale))},t.prototype.setValue=function(t){null===this.value&&(this.value=new V([])),this.value.setValue(t,this.defaultLocale)},t}(),S=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),R=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return S(e,t),e.getValue=function(t,e){return t.getValue(e,"<br/>")},e.getValues=function(t,e){return t.getValues(e)},e}(Array),M=n(8253),P=(n(204),function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))}),j=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},k=function(){function t(){}return t.getMediaType=function(t){return(t=(t=t.toLowerCase()).split(";")[0]).trim()},t.getImageQuality=function(t){return t===a.vl.IMAGE_0_COMPLIANCE_LEVEL_1||t===a.vl.IMAGE_0_COMPLIANCE_LEVEL_2||t===a.vl.IMAGE_1_COMPLIANCE_LEVEL_1||t===a.vl.IMAGE_1_COMPLIANCE_LEVEL_2||t===a.vl.IMAGE_0_CONFORMANCE_LEVEL_1||t===a.vl.IMAGE_0_CONFORMANCE_LEVEL_2||t===a.vl.IMAGE_1_CONFORMANCE_LEVEL_1||t===a.vl.IMAGE_1_CONFORMANCE_LEVEL_2||t===a.vl.IMAGE_1_LEVEL_1||t===a.vl.IMAGE_1_PROFILE_LEVEL_1||t===a.vl.IMAGE_1_LEVEL_2||t===a.vl.IMAGE_1_PROFILE_LEVEL_2?"native":"default"},t.getInexactLocale=function(t){return-1!==t.indexOf("-")?t.substr(0,t.indexOf("-")):t},t.getLocalisedValue=function(t,e){if(!Array.isArray(t))return t;for(var n=0;n<t.length;n++){var r=t[n];if(e===r["@language"])return r["@value"]}var i=e.substr(0,e.indexOf("-"));for(n=0;n<t.length;n++){var o=t[n];if(o["@language"]===i)return o["@value"]}return null},t.generateTreeNodeIds=function(e,n){var r;void 0===n&&(n=0),r=e.parentNode?e.parentNode.id+"-"+n:"0",e.id=r;for(var i=0;i<e.nodes.length;i++){var o=e.nodes[i];t.generateTreeNodeIds(o,i)}},t.normaliseType=function(t){return-1!==(t=(t||"").toLowerCase()).indexOf(":")?t.split(":")[1]:t},t.normaliseUrl=function(t){return-1!==(t=t.substr(t.indexOf("://"))).indexOf("#")&&(t=t.split("#")[0]),t},t.normalisedUrlsMatch=function(e,n){return t.normaliseUrl(e)===t.normaliseUrl(n)},t.isImageProfile=function(e){return!!(t.normalisedUrlsMatch(e,a.vl.IMAGE_0_COMPLIANCE_LEVEL_0)||t.normalisedUrlsMatch(e,a.vl.IMAGE_0_COMPLIANCE_LEVEL_1)||t.normalisedUrlsMatch(e,a.vl.IMAGE_0_COMPLIANCE_LEVEL_2)||t.normalisedUrlsMatch(e,a.vl.IMAGE_1_COMPLIANCE_LEVEL_0)||t.normalisedUrlsMatch(e,a.vl.IMAGE_1_COMPLIANCE_LEVEL_2)||t.normalisedUrlsMatch(e,a.vl.IMAGE_0_CONFORMANCE_LEVEL_0)||t.normalisedUrlsMatch(e,a.vl.IMAGE_0_CONFORMANCE_LEVEL_1)||t.normalisedUrlsMatch(e,a.vl.IMAGE_0_CONFORMANCE_LEVEL_2)||t.normalisedUrlsMatch(e,a.vl.IMAGE_1_CONFORMANCE_LEVEL_1)||t.normalisedUrlsMatch(e,a.vl.IMAGE_1_CONFORMANCE_LEVEL_2)||t.normalisedUrlsMatch(e,a.vl.IMAGE_1_LEVEL_0)||t.normalisedUrlsMatch(e,a.vl.IMAGE_1_PROFILE_LEVEL_0)||t.normalisedUrlsMatch(e,a.vl.IMAGE_1_LEVEL_1)||t.normalisedUrlsMatch(e,a.vl.IMAGE_1_PROFILE_LEVEL_1)||t.normalisedUrlsMatch(e,a.vl.IMAGE_1_LEVEL_2)||t.normalisedUrlsMatch(e,a.vl.IMAGE_1_PROFILE_LEVEL_2)||t.normalisedUrlsMatch(e,a.vl.IMAGE_2_LEVEL_0)||t.normalisedUrlsMatch(e,a.vl.IMAGE_2_PROFILE_LEVEL_0)||t.normalisedUrlsMatch(e,a.vl.IMAGE_2_LEVEL_1)||t.normalisedUrlsMatch(e,a.vl.IMAGE_2_PROFILE_LEVEL_1)||t.normalisedUrlsMatch(e,a.vl.IMAGE_2_LEVEL_2)||t.normalisedUrlsMatch(e,a.vl.IMAGE_2_PROFILE_LEVEL_2))},t.isLevel0ImageProfile=function(e){return!!(t.normalisedUrlsMatch(e,a.vl.IMAGE_0_COMPLIANCE_LEVEL_0)||t.normalisedUrlsMatch(e,a.vl.IMAGE_1_COMPLIANCE_LEVEL_0)||t.normalisedUrlsMatch(e,a.vl.IMAGE_0_CONFORMANCE_LEVEL_0)||t.normalisedUrlsMatch(e,a.vl.IMAGE_1_CONFORMANCE_LEVEL_0)||t.normalisedUrlsMatch(e,a.vl.IMAGE_1_LEVEL_0)||t.normalisedUrlsMatch(e,a.vl.IMAGE_1_PROFILE_LEVEL_0)||t.normalisedUrlsMatch(e,a.vl.IMAGE_2_LEVEL_0)||t.normalisedUrlsMatch(e,a.vl.IMAGE_2_PROFILE_LEVEL_0))},t.isLevel1ImageProfile=function(e){return!!(t.normalisedUrlsMatch(e,a.vl.IMAGE_0_COMPLIANCE_LEVEL_1)||t.normalisedUrlsMatch(e,a.vl.IMAGE_1_COMPLIANCE_LEVEL_1)||t.normalisedUrlsMatch(e,a.vl.IMAGE_0_CONFORMANCE_LEVEL_1)||t.normalisedUrlsMatch(e,a.vl.IMAGE_1_CONFORMANCE_LEVEL_1)||t.normalisedUrlsMatch(e,a.vl.IMAGE_1_LEVEL_1)||t.normalisedUrlsMatch(e,a.vl.IMAGE_1_PROFILE_LEVEL_1)||t.normalisedUrlsMatch(e,a.vl.IMAGE_2_LEVEL_1)||t.normalisedUrlsMatch(e,a.vl.IMAGE_2_PROFILE_LEVEL_1))},t.isLevel2ImageProfile=function(e){return!!(t.normalisedUrlsMatch(e,a.vl.IMAGE_0_COMPLIANCE_LEVEL_2)||t.normalisedUrlsMatch(e,a.vl.IMAGE_1_COMPLIANCE_LEVEL_2)||t.normalisedUrlsMatch(e,a.vl.IMAGE_0_CONFORMANCE_LEVEL_2)||t.normalisedUrlsMatch(e,a.vl.IMAGE_1_CONFORMANCE_LEVEL_2)||t.normalisedUrlsMatch(e,a.vl.IMAGE_1_LEVEL_2)||t.normalisedUrlsMatch(e,a.vl.IMAGE_1_PROFILE_LEVEL_2)||t.normalisedUrlsMatch(e,a.vl.IMAGE_2_LEVEL_2)||t.normalisedUrlsMatch(e,a.vl.IMAGE_2_PROFILE_LEVEL_2))},t.parseManifest=function(t,e){return $.parse(t,e)},t.checkStatus=function(t){if(t.ok)return t;var e=new Error(t.statusText);return e.response=t,Promise.reject(e)},t.loadManifest=function(e){return new Promise((function(n,r){fetch(e).then(t.checkStatus).then((function(t){return t.json()})).then((function(t){n(t)})).catch((function(t){r()}))}))},t.loadExternalResourcesAuth1=function(e,n,r,i,o,a,s,l){return new Promise((function(u,c){var p=e.map((function(e){return t.loadExternalResourceAuth1(e,n,r,i,o,a,s,l)}));Promise.all(p).then((function(){u(e)})).catch((function(t){c(t)}))}))},t.loadExternalResourceAuth1=function(e,n,r,i,o,a,s,l){return P(this,void 0,void 0,(function(){var u;return j(this,(function(c){switch(c.label){case 0:return[4,i(e)];case 1:return(u=c.sent())?[4,e.getData(u)]:[3,6];case 2:return c.sent(),e.status!==M.OK?[3,3]:[2,e];case 3:return[4,t.doAuthChain(e,n,r,o,a,s,l)];case 4:c.sent(),c.label=5;case 5:if(e.status===M.OK||e.status===M.Jy)return[2,e];throw t.createAuthorizationFailedError();case 6:return[4,e.getData()];case 7:return c.sent(),e.status!==M.Jy&&e.status!==M.WY?[3,9]:[4,t.doAuthChain(e,n,r,o,a,s,l)];case 8:c.sent(),c.label=9;case 9:if(e.status===M.OK||e.status===M.Jy)return[2,e];throw t.createAuthorizationFailedError()}}))}))},t.doAuthChain=function(e,n,r,i,o,a,s){return P(this,void 0,void 0,(function(){var l,u,c,p,f,h,d,g;return j(this,(function(v){switch(v.label){case 0:return e.isAccessControlled()?((l=e.externalService)&&(l.options=e.options),(u=e.kioskService)&&(u.options=e.options),(c=e.clickThroughService)&&(c.options=e.options),(p=e.loginService)&&(p.options=e.options),e.isResponseHandled||e.status!==M.Jy?[3,2]:[4,a(e)]):[2,e];case 1:case 3:case 6:case 10:case 14:return v.sent(),[2,e];case 2:return f=null,h=null,(f=l)?(h=f,[4,t.attemptResourceWithToken(e,r,f)]):[3,4];case 4:return(f=u)?(h=f,(d=n(f))?[4,i(d)]:[3,7]):[3,7];case 5:case 9:case 13:return v.sent(),[4,t.attemptResourceWithToken(e,r,f)];case 7:return(f=c)?(h=f,[4,o(e,f)]):[3,11];case 8:return(g=v.sent())?[4,i(g)]:[3,11];case 11:return(f=p)?(h=f,[4,o(e,f)]):[3,15];case 12:return(g=v.sent())?[4,i(g)]:[3,15];case 15:return h&&s(e,h),[2]}}))}))},t.attemptResourceWithToken=function(t,e,n){return P(this,void 0,void 0,(function(){var r,i;return j(this,(function(o){switch(o.label){case 0:return(r=n.getService(a.vl.AUTH_1_TOKEN))?[4,e(t,r)]:[3,3];case 1:return(i=o.sent())&&i.accessToken?[4,t.getData(i)]:[3,3];case 2:return o.sent(),[2,t];case 3:return[2]}}))}))},t.loadExternalResourcesAuth09=function(e,n,r,i,o,a,s,l,u,c){return new Promise((function(p,f){var h=e.map((function(e){return t.loadExternalResourceAuth09(e,n,r,i,o,a,s,l,u,c)}));Promise.all(h).then((function(){p(e)})).catch((function(t){f(t)}))}))},t.loadExternalResourceAuth09=function(e,n,r,i,o,a,s,l,u,c){return new Promise((function(p,f){c&&c.pessimisticAccessControl?e.getData().then((function(){e.isAccessControlled()?e.clickThroughService?(p(r(e)),p(i(e))):o(e).then((function(){a(e,!0).then((function(n){e.getData(n).then((function(){p(u(e))})).catch((function(e){f(t.createInternalServerError(e))}))})).catch((function(e){f(t.createInternalServerError(e))}))})).catch((function(e){f(t.createInternalServerError(e))})):p(e)})).catch((function(e){f(t.createInternalServerError(e))})):l(e,n).then((function(c){c?e.getData(c).then((function(){e.status===M.OK?p(u(e)):t.authorize(e,n,r,i,o,a,s,l).then((function(){p(u(e))})).catch((function(e){f(t.createAuthorizationFailedError())}))})).catch((function(e){f(t.createAuthorizationFailedError())})):t.authorize(e,n,r,i,o,a,s,l).then((function(){p(u(e))})).catch((function(e){f(t.createAuthorizationFailedError())}))})).catch((function(e){f(t.createAuthorizationFailedError())}))}))},t.createError=function(t,e){var n=new Error;return n.message=e,n.name=String(t),n},t.createAuthorizationFailedError=function(){return t.createError(H.AUTHORIZATION_FAILED,"Authorization failed")},t.createRestrictedError=function(){return t.createError(H.RESTRICTED,"Restricted")},t.createInternalServerError=function(e){return t.createError(H.INTERNAL_SERVER_ERROR,e)},t.authorize=function(e,n,r,i,o,a,s,l){return new Promise((function(u,c){e.getData().then((function(){e.isAccessControlled()?l(e,n).then((function(l){l?e.getData(l).then((function(){e.status===M.OK?u(e):t.showAuthInteraction(e,n,r,i,o,a,s,u,c)})).catch((function(e){c(t.createInternalServerError(e))})):a(e,!1).then((function(l){l?s(e,l,n).then((function(){e.getData(l).then((function(){e.status===M.OK?u(e):t.showAuthInteraction(e,n,r,i,o,a,s,u,c)})).catch((function(e){c(t.createInternalServerError(e))}))})).catch((function(e){c(t.createInternalServerError(e))})):t.showAuthInteraction(e,n,r,i,o,a,s,u,c)}))})).catch((function(e){c(t.createInternalServerError(e))})):u(e)}))}))},t.showAuthInteraction=function(e,n,r,i,o,a,s,l,u){e.status!==M.Jy||e.isResponseHandled?e.clickThroughService&&!e.isResponseHandled?r(e).then((function(){a(e,!0).then((function(r){s(e,r,n).then((function(){e.getData(r).then((function(){l(e)})).catch((function(e){u(t.createInternalServerError(e))}))})).catch((function(e){u(t.createInternalServerError(e))}))})).catch((function(e){u(t.createInternalServerError(e))}))})):o(e).then((function(){a(e,!0).then((function(r){s(e,r,n).then((function(){e.getData(r).then((function(){l(e)})).catch((function(e){u(t.createInternalServerError(e))}))})).catch((function(e){u(t.createInternalServerError(e))}))})).catch((function(e){u(t.createInternalServerError(e))}))})):l(e)},t.getService=function(t,e){for(var n=this.getServices(t),r=0;r<n.length;r++){var i=n[r];if(i.getProfile()===e)return i}return null},t.getResourceById=function(e,n){return t.traverseAndFind(e.__jsonld,"@id",n)},t.traverseAndFind=function(e,n,r){if(e.hasOwnProperty(n)&&e[n]===r)return e;for(var i=0;i<Object.keys(e).length;i++)if("object"==typeof e[Object.keys(e)[i]]){var o=t.traverseAndFind(e[Object.keys(e)[i]],n,r);if(null!=o)return o}},t.getServices=function(t){var e,n=[];if(!(e=t.__jsonld?t.__jsonld.service:t.service))return n;Array.isArray(e)||(e=[e]);for(var r=0;r<e.length;r++){var i=e[r];if("string"==typeof i){var o=this.getResourceById(t.options.resource,i);o&&n.push(new z(o.__jsonld||o,t.options))}else n.push(new z(i,t.options))}return n},t.getTemporalComponent=function(t){var e=/t=([^&]+)/g.exec(t),n=null;return e&&e[1]&&(n=e[1].split(",")),n},t}(),D=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),U=function(){function t(t,e,n){void 0===n&&(n="none"),Array.isArray(t)&&1===t.length?this._value=t[0]:this._value=t,"none"!==e&&"@none"!==e||(e=void 0),this._locale=e,this._defaultLocale=n}return t.parseV2Value=function(e,n){return"string"==typeof e?new t(e,void 0,n):e["@value"]?new t(e["@value"],e["@language"],n):null},Object.defineProperty(t.prototype,"value",{get:function(){return Array.isArray(this._value)?this._value.join("<br/>"):this._value},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"locale",{get:function(){return void 0===this._locale?this._defaultLocale:this._locale},enumerable:!0,configurable:!0}),t.prototype.addValue=function(t){Array.isArray(this._value)||(this._value=[this._value]),Array.isArray(t)?this._value=this._value.concat(t):this._value.push(t)},t}(),V=function(t){function e(n,r){void 0===n&&(n=[]);var i=t.apply(this,n)||this;return i.__proto__=e.prototype,i._defaultLocale=r,i}return D(e,t),e.parse=function(t,n){if(!t)return new e([],n);if(Array.isArray(t)){var r=(i=t.map((function(t){return U.parseV2Value(t,n)})).filter((function(t){return null!==t}))).reduce((function(t,e){var n=e._locale;return n||(n="none"),t[n]?t[n].addValue(e._value):t[n]=e,t}),{});return new e(Object.values(r),n)}return"string"==typeof t?new e([new U(t,void 0,n)],n):t["@language"]?new e(null!==(i=U.parseV2Value(t))?[i]:[],n):new e(Object.keys(t).map((function(e){var r=t[e];if(!Array.isArray(r))throw new Error("A IIIF v3 localized property value must have an array as the value for a given language.");return new U(r,e,n)})),n);var i},e.prototype.getSuitableLocale=function(t){for(var e=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}(this).map((function(t){return t._locale})).filter((function(t){return void 0!==t})),n=function(t){var n=e.find((function(e){return e===t}));if(n)return{value:n}},r=0,i=t;r<i.length;r++){var o=n(i[r]);if("object"==typeof o)return o.value}for(var a=function(t){var n=e.find((function(e){return k.getInexactLocale(e)===k.getInexactLocale(t)}));if(n)return{value:n}},s=0,l=t;s<l.length;s++){var u=a(l[s]);if("object"==typeof u)return u.value}},e.prototype.setValue=function(t,e){var n=void 0;if(e){var r=this.getSuitableLocale([e]);r&&(n=this.find((function(t){return t._locale===r})))}else n=this.find((function(t){return void 0===t._locale}));n?n._value=t:this.push(new U(t,e,this._defaultLocale))},e.prototype.getValue=function(t,e){var n=this.getValues(t);return 0===n.length?null:e?n.join(e):n[0]},e.prototype.getValues=function(t){if(!this.length)return[];var e;if(e=t?Array.isArray(t)?t:[t]:[],1===this.length&&void 0===this[0]._locale){var n=this[0]._value;return Array.isArray(n)?n:[n]}var r=this.getSuitableLocale(e);if(r)return n=this.find((function(t){return t._locale===r}))._value,Array.isArray(n)?n:[n];var i=!this.find((function(t){return void 0===t._locale}));if(i)return n=this[0]._value,Array.isArray(n)?n:[n];var o=this.find((function(t){return void 0===t._locale}));return o?Array.isArray(o._value)?o._value:[o._value]:[]},e}(Array),F=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),G=function(t){function e(e,n){var r=t.call(this,e,n)||this;if(r.index=0,r._allRanges=null,r.items=[],r._topRanges=[],r.__jsonld.structures&&r.__jsonld.structures.length)for(var i=r._getTopRanges(),o=0;o<i.length;o++){var a=i[o];r._parseRanges(a,String(o))}return r}return F(e,t),e.prototype.getPosterCanvas=function(){var t=this.getProperty("posterCanvas");return t&&(t=new w(t,this.options)),t},e.prototype.getAccompanyingCanvas=function(){var t=this.getProperty("accompanyingCanvas");return t&&(t=new w(t,this.options)),t},e.prototype.getBehavior=function(){var t=this.getProperty("behavior");return Array.isArray(t)&&(t=t[0]),t||null},e.prototype.getDefaultTree=function(){if(t.prototype.getDefaultTree.call(this),this.defaultTree.data.type=k.normaliseType(Z.MANIFEST),!this.isLoaded)return this.defaultTree;var e=this.getTopRanges();return e.length&&e[0].getTree(this.defaultTree),k.generateTreeNodeIds(this.defaultTree),this.defaultTree},e.prototype._getTopRanges=function(){var t=[];if(this.__jsonld.structures&&this.__jsonld.structures.length){for(var e=0;e<this.__jsonld.structures.length;e++){var n=this.__jsonld.structures[e];n.viewingHint===a.qQ.TOP&&t.push(n)}if(!t.length){var r={};r.ranges=this.__jsonld.structures,t.push(r)}}return t},e.prototype.getTopRanges=function(){return this._topRanges},e.prototype._getRangeById=function(t){if(this.__jsonld.structures&&this.__jsonld.structures.length)for(var e=0;e<this.__jsonld.structures.length;e++){var n=this.__jsonld.structures[e];if(n["@id"]===t||n.id===t)return n}return null},e.prototype._parseRanges=function(t,e,n){var r,i=null;if("string"==typeof t&&(i=t,t=this._getRangeById(i)),t){(r=new q(t,this.options)).parentRange=n,r.path=e,n?n.items.push(r):this._topRanges.push(r);var o=t.items||t.members;if(o)for(var a=0;a<o.length;a++){var s=o[a];if(s["@type"]&&"sc:range"===s["@type"].toLowerCase()||s.type&&"range"===s.type.toLowerCase())this._parseRanges(s,e+"/"+a,r);else if(s["@type"]&&"sc:canvas"===s["@type"].toLowerCase()||s.type&&"canvas"===s.type.toLowerCase()){r.canvases||(r.canvases=[]);var l=s.id||s["@id"];r.canvases.push(l)}}else if(t.ranges)for(a=0;a<t.ranges.length;a++)this._parseRanges(t.ranges[a],e+"/"+a,r)}else console.warn("Range:",i,"does not exist")},e.prototype.getAllRanges=function(){if(null!=this._allRanges)return this._allRanges;this._allRanges=[];for(var t=this.getTopRanges(),e=function(e){var r=t[e];r.id&&n._allRanges.push(r);var i=function(t,e){t.add(e);var n=e.getRanges();return n.length?n.reduce(i,t):t},o=Array.from(r.getRanges().reduce(i,new Set));n._allRanges=n._allRanges.concat(o)},n=this,r=0;r<t.length;r++)e(r);return this._allRanges},e.prototype.getRangeById=function(t){for(var e=this.getAllRanges(),n=0;n<e.length;n++){var r=e[n];if(r.id===t)return r}return null},e.prototype.getRangeByPath=function(t){for(var e=this.getAllRanges(),n=0;n<e.length;n++){var r=e[n];if(r.path===t)return r}return null},e.prototype.getSequences=function(){if(this.items.length)return this.items;var t=this.__jsonld.mediaSequences||this.__jsonld.sequences;if(t)for(var e=0;e<t.length;e++){var n=t[e],r=new W(n,this.options);this.items.push(r)}else this.__jsonld.items&&(r=new W(this.__jsonld.items,this.options),this.items.push(r));return this.items},e.prototype.getSequenceByIndex=function(t){return this.getSequences()[t]},e.prototype.getTotalSequences=function(){return this.getSequences().length},e.prototype.getManifestType=function(){var t=this.getService(a.vl.UI_EXTENSIONS);return t?t.getProperty("manifestType"):i.EMPTY},e.prototype.isMultiSequence=function(){return this.getTotalSequences()>1},e.prototype.isPagingEnabled=function(){var t=this.getViewingHint();if(t)return t===a.qQ.PAGED;var e=this.getBehavior();return!!e&&e===a.cg.PAGED},e.prototype.getViewingDirection=function(){return this.getProperty("viewingDirection")},e.prototype.getViewingHint=function(){return this.getProperty("viewingHint")},e}(f);!function(t){t.EMPTY="",t.MANUSCRIPT="manuscript",t.MONOGRAPH="monograph"}(i||(i={}));var H,B=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),q=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r._ranges=null,r.canvases=null,r.items=[],r}return B(e,t),e.prototype.getCanvasIds=function(){return this.__jsonld.canvases?this.__jsonld.canvases:this.canvases?this.canvases:[]},e.prototype.getDuration=function(){if(this.canvases&&this.canvases.length){for(var t=[],e=[],n=0,r=this.canvases;n<r.length;n++)if(h=r[n]){var i=h.match(/(.*)#t=([0-9.]+),?([0-9.]+)?/)||[void 0,h],o=i[1],a=i[2],s=i[3];o&&(t.push(parseFloat(a)),e.push(parseFloat(s)))}if(t.length&&e.length)return new L(Math.min.apply(Math,t),Math.max.apply(Math,e))}else{t=[],e=[];for(var l=0,u=g=this.getRanges();l<u.length;l++)(v=u[l].getDuration())&&(t.push(v.start),e.push(v.end));if(t.length&&e.length)return new L(Math.min.apply(Math,t),Math.max.apply(Math,e))}var c,p;if(this.canvases&&this.canvases.length)for(var f=0;f<this.canvases.length;f++){var h=this.canvases[f],d=k.getTemporalComponent(h);d&&d.length>1&&(0===f&&(c=Number(d[0])),f===this.canvases.length-1&&(p=Number(d[1])))}else{var g=this.getRanges();for(f=0;f<g.length;f++){var v;(v=g[f].getDuration())&&(0===f&&(c=v.start),f===g.length-1&&(p=v.end))}}if(void 0!==c&&void 0!==p)return new L(c,p)},e.prototype.getRanges=function(){return this._ranges?this._ranges:this._ranges=this.items.filter((function(t){return t.isRange()}))},e.prototype.getBehavior=function(){var t=this.getProperty("behavior");return Array.isArray(t)&&(t=t[0]),t||null},e.prototype.getViewingDirection=function(){return this.getProperty("viewingDirection")},e.prototype.getViewingHint=function(){return this.getProperty("viewingHint")},e.prototype.getTree=function(t){t.data=this,this.treeNode=t;var e=this.getRanges();if(e&&e.length)for(var n=0;n<e.length;n++){var r=e[n],i=new rt;t.addNode(i),this._parseTreeNode(i,r)}return k.generateTreeNodeIds(t),t},e.prototype.spansTime=function(t){var e=this.getDuration();return!!(e&&t>=e.start&&t<=e.end)},e.prototype._parseTreeNode=function(t,e){t.label=e.getLabel().getValue(this.options.locale),t.data=e,t.data.type=k.normaliseType(Z.RANGE),e.treeNode=t;var n=e.getRanges();if(n&&n.length)for(var r=0;r<n.length;r++){var i=n[r];if(i.getBehavior()!==a.cg.NO_NAV){var o=new rt;t.addNode(o),this._parseTreeNode(o,i)}}},e}(l),Y=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),K=function(t){function e(e,n){return t.call(this,e,n)||this}return Y(e,t),e.prototype.getFormat=function(){return this.getProperty("format")},e}(l),Q=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),W=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.items=[],r._thumbnails=null,r}return Q(e,t),e.prototype.getCanvases=function(){if(this.items.length)return this.items;var t=this.__jsonld.canvases||this.__jsonld.elements;if(t)for(var e=0;e<t.length;e++){var n=t[e];(r=new w(n,this.options)).index=e,this.items.push(r)}else if(this.__jsonld)for(e=0;e<this.__jsonld.length;e++){var r;n=this.__jsonld[e],(r=new w(n,this.options)).index=e,this.items.push(r)}return this.items},e.prototype.getCanvasById=function(t){for(var e=0;e<this.getTotalCanvases();e++){var n=this.getCanvasByIndex(e),r=k.normaliseUrl(n.id);if(k.normaliseUrl(t)===r)return n}return null},e.prototype.getCanvasByIndex=function(t){return this.getCanvases()[t]},e.prototype.getCanvasIndexById=function(t){for(var e=0;e<this.getTotalCanvases();e++)if(this.getCanvasByIndex(e).id===t)return e;return null},e.prototype.getCanvasIndexByLabel=function(t,e){t=t.trim(),isNaN(t)||(t=parseInt(t,10).toString(),e&&(t+="r"));for(var n,r,i,o=/(\d*)\D+(\d*)/,a=0;a<this.getTotalCanvases();a++){var s=this.getCanvasByIndex(a);if(s.getLabel().getValue(this.options.locale)===t)return a;if((n=o.exec(t))&&(r=n[1],(i=n[2])&&new RegExp("^"+r+"\\D+"+i+"$").test(s.getLabel().toString())))return a}return-1},e.prototype.getLastCanvasLabel=function(t){for(var e=this.getTotalCanvases()-1;e>=0;e--){var n=this.getCanvasByIndex(e).getLabel().getValue(this.options.locale);if(t){if(/^[a-zA-Z0-9]*$/.test(n))return n}else if(n)return n}return this.options.defaultLabel},e.prototype.getLastPageIndex=function(){return this.getTotalCanvases()-1},e.prototype.getNextPageIndex=function(t,e){var n;if(e){var r=this.getPagedIndices(t),i=this.getViewingDirection();n=i&&i===a.Pr.RIGHT_TO_LEFT?r[0]+1:r[r.length-1]+1}else n=t+1;return n>this.getLastPageIndex()?-1:n},e.prototype.getPagedIndices=function(t,e){var n=[];if(e){n=this.isFirstCanvas(t)||this.isLastCanvas(t)?[t]:t%2?[t,t+1]:[t-1,t];var r=this.getViewingDirection();r&&r===a.Pr.RIGHT_TO_LEFT&&(n=n.reverse())}else n.push(t);return n},e.prototype.getPrevPageIndex=function(t,e){var n;if(e){var r=this.getPagedIndices(t),i=this.getViewingDirection();n=i&&i===a.Pr.RIGHT_TO_LEFT?r[r.length-1]-1:r[0]-1}else n=t-1;return n},e.prototype.getStartCanvasIndex=function(){var t=this.getStartCanvas();if(t)for(var e=0;e<this.getTotalCanvases();e++)if(this.getCanvasByIndex(e).id===t)return e;return 0},e.prototype.getThumbs=function(t,e){for(var n=[],r=this.getTotalCanvases(),i=0;i<r;i++){var o=this.getCanvasByIndex(i),a=new tt(t,o);n.push(a)}return n},e.prototype.getThumbnails=function(){if(null!=this._thumbnails)return this._thumbnails;this._thumbnails=[];for(var t=this.getCanvases(),e=0;e<t.length;e++){var n=t[e].getThumbnail();n&&this._thumbnails.push(n)}return this._thumbnails},e.prototype.getStartCanvas=function(){return this.getProperty("startCanvas")},e.prototype.getTotalCanvases=function(){return this.getCanvases().length},e.prototype.getViewingDirection=function(){return this.getProperty("viewingDirection")?this.getProperty("viewingDirection"):this.options.resource.getViewingDirection?this.options.resource.getViewingDirection():null},e.prototype.getViewingHint=function(){return this.getProperty("viewingHint")},e.prototype.isCanvasIndexOutOfRange=function(t){return t>this.getTotalCanvases()-1},e.prototype.isFirstCanvas=function(t){return 0===t},e.prototype.isLastCanvas=function(t){return t===this.getTotalCanvases()-1},e.prototype.isMultiCanvas=function(){return this.getTotalCanvases()>1},e.prototype.isPagingEnabled=function(){var t=this.getViewingHint();return!!t&&t===a.qQ.PAGED},e.prototype.isTotalCanvasesEven=function(){return this.getTotalCanvases()%2==0},e}(l),$=function(){function t(){}return t.parse=function(t,e){return"string"==typeof t&&(t=JSON.parse(t)),this.parseJson(t,e)},t.parseJson=function(t,e){var n;if(e&&e.navDate&&!isNaN(e.navDate.getTime())&&(t.navDate=e.navDate.toString()),t["@type"])switch(t["@type"]){case"sc:Collection":n=this.parseCollection(t,e);break;case"sc:Manifest":n=this.parseManifest(t,e);break;default:return null}else switch(t.type){case"Collection":n=this.parseCollection(t,e);break;case"Manifest":n=this.parseManifest(t,e);break;default:return null}return n.isLoaded=!0,n},t.parseCollection=function(t,e){var n=new x(t,e);return e?(n.index=e.index||0,e.resource&&(n.parentCollection=e.resource.parentCollection)):n.index=0,this.parseCollections(n,e),this.parseManifests(n,e),this.parseItems(n,e),n},t.parseCollections=function(t,e){var n;if(t.__jsonld.collections?n=t.__jsonld.collections:t.__jsonld.items&&(n=t.__jsonld.items.filter((function(t){return"collection"===t.type.toLowerCase()}))),n)for(var r=0;r<n.length;r++){e&&(e.index=r);var i=this.parseCollection(n[r],e);i.index=r,i.parentCollection=t,t.items.push(i)}},t.parseManifest=function(t,e){return new G(t,e)},t.parseManifests=function(t,e){var n;if(t.__jsonld.manifests?n=t.__jsonld.manifests:t.__jsonld.items&&(n=t.__jsonld.items.filter((function(t){return"manifest"===t.type.toLowerCase()}))),n)for(var r=0;r<n.length;r++){var i=this.parseManifest(n[r],e);i.index=r,i.parentCollection=t,t.items.push(i)}},t.parseItem=function(t,e){if(t["@type"]){if("sc:manifest"===t["@type"].toLowerCase())return this.parseManifest(t,e);if("sc:collection"===t["@type"].toLowerCase())return this.parseCollection(t,e)}else if(t.type){if("manifest"===t.type.toLowerCase())return this.parseManifest(t,e);if("collection"===t.type.toLowerCase())return this.parseCollection(t,e)}return null},t.parseItems=function(t,e){var n=t.__jsonld.members||t.__jsonld.items;if(n)for(var r=function(r){e&&(e.index=r);var o=i.parseItem(n[r],e);return o?t.items.filter((function(t){return t.id===o.id}))[0]?"continue":(o.index=r,o.parentCollection=t,void t.items.push(o)):{value:void 0}},i=this,o=0;o<n.length;o++){var a=r(o);if("object"==typeof a)return a.value}},t}(),J=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),z=function(t){function e(e,n){return t.call(this,e,n)||this}return J(e,t),e.prototype.getProfile=function(){var t=this.getProperty("profile");return t||(t=this.getProperty("dcterms:conformsTo")),Array.isArray(t)?t[0]:t},e.prototype.getConfirmLabel=function(){return k.getLocalisedValue(this.getProperty("confirmLabel"),this.options.locale)},e.prototype.getDescription=function(){return k.getLocalisedValue(this.getProperty("description"),this.options.locale)},e.prototype.getFailureDescription=function(){return k.getLocalisedValue(this.getProperty("failureDescription"),this.options.locale)},e.prototype.getFailureHeader=function(){return k.getLocalisedValue(this.getProperty("failureHeader"),this.options.locale)},e.prototype.getHeader=function(){return k.getLocalisedValue(this.getProperty("header"),this.options.locale)},e.prototype.getServiceLabel=function(){return k.getLocalisedValue(this.getProperty("label"),this.options.locale)},e.prototype.getInfoUri=function(){var t=this.id;return t.endsWith("/")||(t+="/"),t+"info.json"},e}(l),X=function(t,e){this.width=t,this.height=e};!function(t){t[t.AUTHORIZATION_FAILED=1]="AUTHORIZATION_FAILED",t[t.FORBIDDEN=2]="FORBIDDEN",t[t.INTERNAL_SERVER_ERROR=3]="INTERNAL_SERVER_ERROR",t[t.RESTRICTED=4]="RESTRICTED"}(H||(H={}));var Z,tt=function(t,e){this.data=e,this.index=e.index,this.width=t;var n=e.getHeight()/e.getWidth();this.height=n?Math.floor(this.width*n):t,this.uri=e.getCanonicalImageUri(t),this.label=e.getLabel().getValue()},et=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),nt=function(t){function e(e,n){return t.call(this,e,n)||this}return et(e,t),e}(c),rt=function(){function t(t,e){this.label=t,this.data=e||{},this.nodes=[]}return t.prototype.addNode=function(t){this.nodes.push(t),t.parentNode=this},t.prototype.isCollection=function(){return this.data.type===k.normaliseType(Z.COLLECTION)},t.prototype.isManifest=function(){return this.data.type===k.normaliseType(Z.MANIFEST)},t.prototype.isRange=function(){return this.data.type===k.normaliseType(Z.RANGE)},t}();!function(t){t.COLLECTION="collection",t.MANIFEST="manifest",t.RANGE="range"}(Z||(Z={}))},3417:(t,e,n)=>{var r=n(9040).Symbol;t.exports=r},3805:t=>{t.exports=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}},2095:(t,e,n)=>{var r=n(3805),i=n(3156);t.exports=function t(e,n,o,a,s){var l=-1,u=e.length;for(o||(o=i),s||(s=[]);++l<u;){var c=e[l];n>0&&o(c)?n>1?t(c,n-1,o,a,s):r(s,c):a||(s[s.length]=c)}return s}},4337:(t,e,n)=>{var r=n(3417),i=n(403),o=n(995),a=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?i(t):o(t)}},389:(t,e,n)=>{var r=n(4337),i=n(1003);t.exports=function(t){return i(t)&&"[object Arguments]"==r(t)}},4033:(t,e,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;t.exports=r},403:(t,e,n)=>{var r=n(3417),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;t.exports=function(t){var e=o.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(t){}var i=a.call(t);return r&&(e?t[s]=n:delete t[s]),i}},3156:(t,e,n)=>{var r=n(3417),i=n(4594),o=n(5562),a=r?r.isConcatSpreadable:void 0;t.exports=function(t){return o(t)||i(t)||!!(a&&t&&t[a])}},995:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},9040:(t,e,n)=>{var r=n(4033),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},3694:(t,e,n)=>{var r=n(2095);t.exports=function(t){return null!=t&&t.length?r(t,1):[]}},8147:(t,e,n)=>{var r=n(2095);t.exports=function(t){return null!=t&&t.length?r(t,1/0):[]}},4594:(t,e,n)=>{var r=n(389),i=n(1003),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(t){return i(t)&&a.call(t,"callee")&&!s.call(t,"callee")};t.exports=l},5562:t=>{var e=Array.isArray;t.exports=e},1003:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},3379:t=>{"use strict";var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var o={},a=[],s=0;s<t.length;s++){var l=t[s],u=r.base?l[0]+r.base:l[0],c=o[u]||0,p="".concat(u," ").concat(c);o[u]=c+1;var f=n(p),h={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==f)e[f].references++,e[f].updater(h);else{var d=i(h,r);r.byIndex=s,e.splice(s,0,{identifier:p,updater:d,references:1})}a.push(p)}return a}function i(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,i){var o=r(t=t||[],i=i||{});return function(t){t=t||[];for(var a=0;a<o.length;a++){var s=n(o[a]);e[s].references--}for(var l=r(t,i),u=0;u<o.length;u++){var c=n(o[u]);0===e[c].references&&(e[c].updater(),e.splice(c,1))}o=l}}},569:t=>{"use strict";var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},9216:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},3565:(t,e,n)=>{"use strict";t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},7795:t=>{"use strict";t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},4589:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},5869:(t,e,n)=>{"use strict";function r(t,e){return e=e||{},new Promise((function(n,r){var i=new XMLHttpRequest,o=[],a=[],s={},l=function(){return{ok:2==(i.status/100|0),statusText:i.statusText,status:i.status,url:i.responseURL,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([i.response]))},clone:l,headers:{keys:function(){return o},entries:function(){return a},get:function(t){return s[t.toLowerCase()]},has:function(t){return t.toLowerCase()in s}}}};for(var u in i.open(e.method||"get",t,!0),i.onload=function(){i.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(t,e,n){o.push(e=e.toLowerCase()),a.push([e,n]),s[e]=s[e]?s[e]+","+n:n})),n(l())},i.onerror=r,i.withCredentials="include"==e.credentials,e.headers)i.setRequestHeader(u,e.headers[u]);i.send(e.body||null)}))}n.r(e),n.d(e,{default:()=>r})}}]);